FS._jQueryTemp=window.jQuery,window.jQuery=FS.$,/*! v3.0.0-b0f46e83, 2019-06-29T00:07:30Z */
!function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){return r(t[o][1][e]||e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){"use strict";function n(e){for(var t=0,i=[],n=0|e.length/3;0<n--;){var r=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,i.push(o.charAt(63&r>>18)),i.push(o.charAt(63&r>>12)),i.push(o.charAt(63&r>>6)),i.push(o.charAt(63&r))}return 2==e.length-t?(r=(e[t]<<16)+(e[t+1]<<8),i.push(o.charAt(63&r>>18)),i.push(o.charAt(63&r>>12)),i.push(o.charAt(63&r>>6)),i.push("=")):1==e.length-t&&(r=e[t]<<16,i.push(o.charAt(63&r>>18)),i.push(o.charAt(63&r>>12)),i.push("==")),i.join("")}function r(e){for(var t=0,i=[],n=0|e.length/4;0<n--;){var r=(l[e.charCodeAt(t)]<<18)+(l[e.charCodeAt(t+1)]<<12)+(l[e.charCodeAt(t+2)]<<6)+l[e.charCodeAt(t+3)];i.push(255&r>>16),i.push(255&r>>8),i.push(255&r),t+=4}return i&&("="==e.charAt(t-2)?(i.pop(),i.pop()):"="==e.charAt(t-1)&&i.pop()),i}var o,l,d,c={encode:function(e){for(var t=[],i=0;i<e.length;++i){var n=e.charCodeAt(i);n<128?t.push(n):(n<2048?t.push(192|n>>6):(n<65536?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|63&n>>12)),t.push(128|63&n>>6)),t.push(128|63&n))}return t},decode:function(e){for(var t=[],i=0;i<e.length;){var n=e[i++];n<128||(n<224?n=(31&n)<<6:(n<240?n=(15&n)<<12:(n=(7&n)<<18,n|=(63&e[i++])<<12),n|=(63&e[i++])<<6),n|=63&e[i++]),t.push(String.fromCharCode(n))}return t.join("")}},u={};o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),d={encode:function(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t},decode:function(){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")}},u.decodeArray=function(e){var t=r(e);return new Uint8Array(t)},u.encodeASCII=function(e){var t=d.encode(e);return n(t)},u.decodeASCII=function(e){var t=r(e);return d.decode(t)},u.encode=function(e){var t=c.encode(e);return n(t)},u.decode=function(e){var t=r(e);return c.decode(t)},void 0!==i&&(i.decode=u.decode,i.decodeArray=u.decodeArray,i.encode=u.encode,i.encodeASCII=u.encodeASCII)},{}],2:[function(e,t,i){"use strict";!function(e){function t(e){var t=e;return d.hasOwnProperty(e)&&(t=d[e]),String.fromCharCode(t)}function i(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t}function n(e,t,i,n,r){this.foreground=e||"white",this.underline=t||!1,this.italics=i||!1,this.background=n||"black",this.flash=r||!1}function r(e,t,i,r,a,o){this.uchar=e||" ",this.penState=new n(t,i,r,a,o)}function a(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new r);this.pos=0,this.currPenState=new n}function o(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new a);this.currRow=14,this.nrRollUpRows=null,this.reset()}function s(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new o,this.nonDisplayedMemory=new o,this.lastOutputScreen=new o,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function l(e,t,i){this.field=e||1,this.outputs=[t,i],this.channels=[new s(1,t),new s(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}var d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],g={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var i=this.verboseFilter[e];this.verboseLevel>=i&&console.log(this.time+" ["+e+"] "+t)}};n.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},r.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},a.prototype={equals:function(e){for(var t=!0,i=0;i<32;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(g.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(g.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var i=t(e);32<=this.pos?g.log("ERROR","Cannot insert "+e.toString(16)+" ("+i+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,i=0;i<32;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},o.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,i=0;i<15;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){g.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){g.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var i=this.rows[this.currRow];if(null!==e.indent){var n=e.indent,r=Math.max(n-1,0);i.setCursor(e.indent),e.color=i.chars[r].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){g.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){g.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),g.log("INFO","Rolling up")}else g.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],i="",n=-1,r=0;r<15;r++){var a=this.rows[r].getTextString();a&&(n=r+1,e?t.push("Row "+n+': "'+a+'"'):t.push(a.trim()))}return 0<t.length&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i},getTextAndFormat:function(){return this.rows}},s.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,g.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";g.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(g.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){g.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){g.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){g.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){g.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){g.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){g.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){g.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){g.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){g.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){g.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){g.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(g.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,g.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){g.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var i=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}g.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=g.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}},l.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,a,o=!1;this.lastTime=e,g.setTime(e);for(var s=0;s<t.length;s+=2)r=127&t[s],a=127&t[s+1],16<=r&&r<=31&&r===this.lastCmdA&&a===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,g.log("DEBUG","Repeated command ("+i([r,a])+") is dropped")):0!=r||0!=a?(g.log("DATA","["+i([t[s],t[s+1]])+"] -> ("+i([r,a])+")"),(n=(n=(n=(n=this.parseCmd(r,a))||this.parseMidrow(r,a))||this.parsePAC(r,a))||this.parseBackgroundAttributes(r,a))||(o=this.parseChars(r,a))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(o):g.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:o?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,g.log("WARNING","Couldn't parse cleaned data "+i([r,a])+" orig: "+i([t[s],t[s+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var i=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;i=20===e||21===e||23===e?1:2;var n=this.channels[i-1];return 20===e||21===e||28===e||29===e?32===t?n.cc_RCL():33===t?n.cc_BS():34===t?n.cc_AOF():35===t?n.cc_AON():36===t?n.cc_DER():37===t?n.cc_RU(2):38===t?n.cc_RU(3):39===t?n.cc_RU(4):40===t?n.cc_FON():41===t?n.cc_RDC():42===t?n.cc_TR():43===t?n.cc_RTD():44===t?n.cc_EDM():45===t?n.cc_CR():46===t?n.cc_ENM():47===t&&n.cc_EOC():n.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return g.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),g.log("DEBUG","MIDROW ("+i([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var i,n=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;i=e<=23?1:2,n=64<=t&&t<=95?1==i?c[e]:h[e]:1==i?u[e]:f[e];var r=this.interpretPAC(n,t);return this.channels[i-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0},interpretPAC:function(e,t){var i=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return i=95<t?t-96:t-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},parseChars:function(e,n){var r=null,a=null,o=null;if(17<=(o=25<=e?(r=2,e-8):(r=1,e))&&o<=19){var s=n;s=17===o?n+80:18===o?n+112:n+144,g.log("INFO","Special char '"+t(s)+"' in channel "+r),a=[s],this.lastCmdA=e,this.lastCmdB=n}else 32<=e&&e<=127&&(a=0===n?[e]:[e,n],this.lastCmdA=null,this.lastCmdB=null);if(a){var l=i(a);g.log("DEBUG","Char codes =  "+l.join(","))}return a},parseBackgroundAttributes:function(e,t){var i,n,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=p[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(i),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=g,e.PenState=n,e.CaptionScreen=o,e.Cea608Parser=l,e.findCea608Nalus=function(e,t,i){for(var n=0,r=t,a=[],o=function(e,t,i,n){if(4!==e||t<8)return null;var r=i.getUint8(n),a=i.getUint16(n+1),o=i.getUint32(n+3),s=i.getUint8(n+7);return 181==r&&49==a&&1195456820==o&&3==s};r<t+i;){if(n=e.getUint32(r),6===(31&e.getUint8(r+4)))for(var s=r+5,l=-1;s<r+4+n-1;){l=0;for(var d=255;255===d;)l+=d=e.getUint8(s),s++;var c=0;for(d=255;255===d;)c+=d=e.getUint8(s),s++;o(l,c,e,s)&&a.push([s,c]),s+=c}r+=n+4}return a},e.extractCea608DataFromRange=function(e,t){var i=t[0],n=[[],[]];i+=8;var r=31&e.getUint8(i);i+=2;for(var a=0;a<r;a++){var o=e.getUint8(i),s=4&o,l=3&o;i++;var d=e.getUint8(i);i++;var c=e.getUint8(i);i++,s&&(127&d)+(127&c)!=0&&(0==l?(n[0].push(d),n[0].push(c)):1==l&&(n[1].push(d),n[1].push(c)))}return n}}(void 0===i?(void 0).cea608parser={}:i)},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function i(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function n(e,t,i,n){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if("function"==typeof a&&a(t,i,n))break}return r!=e.length}function r(t,i,r){switch(e.arrayAccessForm){case"property":t[i]instanceof Array?t[i+"_asArray"]=t[i]:t[i+"_asArray"]=[t[i]]}!(t[i]instanceof Array)&&0<e.arrayAccessFormPaths.length&&n(e.arrayAccessFormPaths,t,i,r)&&(t[i]=[t[i]])}function a(e){var t=e.split(/[-T:+Z]/g),i=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");if(i.setHours(t[3],t[4],n[0]),1<n.length&&i.setMilliseconds(n[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),i.setMinutes(i.getMinutes()-r-i.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())));return i}function o(i,s){if(i.nodeType==m.DOCUMENT_NODE){for(var l=new Object,d=i.childNodes,c=0;c<d.length;c++)(h=d[c]).nodeType==m.ELEMENT_NODE&&(e.ignoreRoot?l=o(h):(l={})[f=t(h)]=o(h));return l}if(i.nodeType==m.ELEMENT_NODE){(l=new Object).__cnt=0;var u=[];for(d=i.childNodes,c=0;c<d.length;c++){var h,f=t(h=d[c]);if(h.nodeType!=m.COMMENT_NODE){var p=s+"."+f;if(x=l,k=h.nodeType,A=f,I=p,!(k==m.ELEMENT_NODE&&0<e.xmlElementsFilter.length)||n(e.xmlElementsFilter,x,A,I))if(l.__cnt++,null==l[f]){var g=o(h,p);("#text"!=f||/[^\s]/.test(g))&&((v={})[f]=g,u.push(v)),l[f]=g,r(l,f,p)}else{null!=l[f]&&(l[f]instanceof Array||(l[f]=[l[f]],r(l,f,p)));var v;g=o(h,p),("#text"!=f||/[^\s]/.test(g))&&((v={})[f]=g,u.push(v)),l[f][l[f].length]=g}}}l.__children=u;for(var y=t(i),b=0;b<i.attributes.length;b++){var _=i.attributes[b];l.__cnt++;for(var w=_.value,E=0,T=e.matchers.length;E<T;E++){var S=e.matchers[E];S.test(_,y)&&(w=S.converter(_.value))}l[e.attributePrefix+_.name]=w}var C=function(e){return e.prefix}(i);return null!=C&&""!=C&&(l.__cnt++,l.__prefix=C),null!=l["#text"]&&(l.__text=l["#text"],l.__text instanceof Array&&(l.__text=l.__text.join("\n")),e.stripWhitespaces&&(l.__text=l.__text.trim()),delete l["#text"],"property"==e.arrayAccessForm&&delete l["#text_asArray"],l.__text=function(t,i,r){if(0<e.datetimeAccessFormPaths.length){var o=r.split(".#")[0];return n(e.datetimeAccessFormPaths,t,i,o)?a(t):t}return t}(l.__text,f,s+"."+f)),null!=l["#cdata-section"]&&(l.__cdata=l["#cdata-section"],delete l["#cdata-section"],"property"==e.arrayAccessForm&&delete l["#cdata-section_asArray"]),0==l.__cnt&&"text"==e.emptyNodeForm?l="":1==l.__cnt&&null!=l.__text?l=l.__text:1!=l.__cnt||null==l.__cdata||e.keepCData?1<l.__cnt&&null!=l.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==l.__text||""==l.__text.trim())&&delete l.__text:l=l.__cdata,delete l.__cnt,!e.enableToStringFunc||null==l.__text&&null==l.__cdata||(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),l}if(i.nodeType==m.TEXT_NODE||i.nodeType==m.CDATA_SECTION_NODE)return i.nodeValue;var x,k,A,I}function s(t,n,r,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var s=0;s<r.length;s++){var l=r[s],d=t[l];e.escapeMode&&(d=i(d)),o+=" "+l.substr(e.attributePrefix.length)+"=",o+=e.useDoubleQuotes?'"'+d+'"':"'"+d+"'"}return o+=a?"/>":">"}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(t,i){return!!("property"==e.arrayAccessForm&&function(e,t){return-1!==e.indexOf(t,e.length-t.length)}(i.toString(),"_asArray")||0==i.toString().indexOf(e.attributePrefix)||0==i.toString().indexOf("__")||t[i]instanceof Function)}function c(e){var t=0;if(e instanceof Object)for(var i in e)d(e,i)||t++;return t}function u(t){var i=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(e.attributePrefix)&&i.push(n);return i}function h(t){var n="";return t instanceof Object?n+=function(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(n+=e.escapeMode?i(t.__text):t.__text),n}(t):null!=t&&(n+=e.escapeMode?i(t):t),n}function f(e,t){return""===e?t:e+"."+t}function p(e,t,i,n){var r="";if(0==e.length)r+=s(e,t,i,!0);else for(var a=0;a<e.length;a++)r+=s(e[a],t,u(e[a]),!1),r+=g(e[a],f(n,t)),r+=l(e[a],t);return r}function g(t,i){var r,a,o,m="";if(0<c(t))for(var v in t)if(!d(t,v)&&(""==i||(r=t,o=f(i,a=v),0==e.jsonPropertiesFilter.length||""==o||n(e.jsonPropertiesFilter,r,a,o)))){var y=t[v],b=u(y);null==y||null==y?m+=s(y,v,b,!0):y instanceof Object?y instanceof Array?m+=p(y,v,b,i):y instanceof Date?(m+=s(y,v,b,!1),m+=y.toISOString(),m+=l(y,v)):0<c(y)||null!=y.__text||null!=y.__cdata?(m+=s(y,v,b,!1),m+=g(y,f(i,v)),m+=l(y,v)):m+=s(y,v,b,!0):(m+=s(y,v,b,!1),m+=h(y),m+=l(y,v))}return m+=h(t)}e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var m={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var i=new window.DOMParser;try{0<(t=i.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?a(e):e},this.xml2json=function(e){return o(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return g(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=i["default"]},{}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var r=e(5),a=n(e(125)),o=n(e(159)),s=n(e(103)),l=n(e(47));dashjs.Protection=o["default"],dashjs.MetricsReporting=a["default"],dashjs.MediaPlayerFactory=s["default"],dashjs.Debug=l["default"],i["default"]=dashjs,i.MediaPlayer=r.MediaPlayer,i.Protection=o["default"],i.MetricsReporting=a["default"],i.MediaPlayerFactory=s["default"],i.Debug=l["default"]},{103:103,125:125,159:159,47:47,5:5}],5:[function(e,t,i){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var r=n(e(101)),a=n(e(49)),o=n(e(47)),s=e(52),l="undefined"!=typeof window&&window||t,d=l.dashjs;(d=d||(l.dashjs={})).MediaPlayer=r["default"],d.FactoryMaker=a["default"],d.Debug=o["default"],d.Version=(0,s.getVersionString)(),i["default"]=d,i.MediaPlayer=r["default"],i.FactoryMaker=a["default"],i.Debug=o["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{101:101,47:47,49:49,52:52}],6:[function(e,t,i){"use strict";function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function r(e,t,i){for(var n,r,o=[],s=t;s<i;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(a[(r=n)>>18&63]+a[r>>12&63]+a[r>>6&63]+a[63&r]);return o.join("")}i.byteLength=function(e){var t=n(e),i=t[0],r=t[1];return 3*(i+r)/4-r},i.toByteArray=function(e){for(var t,i=n(e),r=i[0],a=i[1],l=new s(function(e,t,i){return 3*(t+i)/4-i}(0,r,a)),d=0,c=0<a?r-4:r,u=0;u<c;u+=4)t=o[e.charCodeAt(u)]<<18|o[e.charCodeAt(u+1)]<<12|o[e.charCodeAt(u+2)]<<6|o[e.charCodeAt(u+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;return 2===a&&(t=o[e.charCodeAt(u)]<<2|o[e.charCodeAt(u+1)]>>4,l[d++]=255&t),1===a&&(t=o[e.charCodeAt(u)]<<10|o[e.charCodeAt(u+1)]<<4|o[e.charCodeAt(u+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t),l},i.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=0,l=i-n;s<l;s+=16383)o.push(r(e,s,l<s+16383?l:s+16383));return 1==n?(t=e[i-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[i-2]<<8)+e[i-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"=")),o.join("")};for(var a=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,c=l.length;d<c;++d)a[d]=l[d],o[l.charCodeAt(d)]=d;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],7:[function(){},{}],8:[function(e,t,i){"use strict";function n(e){if(N<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,i){if("number"!=typeof e)return a(e,t,i);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function a(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!r.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|c(e,t),a=n(i),o=a.write(e,t);return o!==i&&(a=a.slice(0,o)),a}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return function(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),n.__proto__=r.prototype,n}(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return r.from(a,t,i);var o=function(e){if(r.isBuffer(e)){var t=0|d(e.length),i=n(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||P(e.length)?n(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return r.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return o(e),n(e<0?0:0|d(e))}function l(e){for(var t=e.length<0?0:0|d(e.length),i=n(t),r=0;r<t;r+=1)i[r]=255&e[r];return i}function d(e){if(N<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return 0|e}function c(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===i)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return I(e).length;default:if(a)return n?-1:A(e).length;t=(""+t).toLowerCase(),a=!0}}function u(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function h(e,t,i,n,a){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),P(i=+i)&&(i=a?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(a)return-1;i=e.length-1}else if(i<0){if(!a)return-1;i=0}if("string"==typeof t&&(t=r.from(t,n)),r.isBuffer(t))return 0===t.length?-1:f(e,t,i,n,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):f(e,[t],i,n,a);throw new TypeError("val must be string, number or Buffer")}function f(e,t,i,n,r){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var o,s=1,l=e.length,d=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;l/=s=2,d/=2,i/=2}if(r){var c=-1;for(o=i;o<l;o++)if(a(e,o)===a(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===d)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(l<i+d&&(i=l-d),o=i;0<=o;o--){for(var u=!0,h=0;h<d;h++)if(a(e,o+h)!==a(t,h)){u=!1;break}if(u)return o}return-1}function p(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?r<(n=Number(n))&&(n=r):n=r;var a=t.length;a/2<n&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(P(s))return o;e[i+o]=s}return o}function g(e,t,i,n){return D(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function m(e,t,i){return 0===t&&i===e.length?R.fromByteArray(e):R.fromByteArray(e.slice(t,i))}function v(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var a,o,s,l,d=e[r],c=null,u=239<d?4:223<d?3:191<d?2:1;if(r+u<=i)switch(u){case 1:d<128&&(c=d);break;case 2:128==(192&(a=e[r+1]))&&127<(l=(31&d)<<6|63&a)&&(c=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&d)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&d)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,u=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=u}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=L));return i}(n)}function y(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function b(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function _(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||n<i)&&(i=n);for(var r="",a=t;a<i;++a)r+=k(e[a]);return r}function w(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function E(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");
if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,i,n,a,o){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function S(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function C(e,t,i,n,r){return t=+t,i>>>=0,r||S(e,0,i,4),O.write(e,t,i,n,23,4),i+4}function x(e,t,i,n,r){return t=+t,i>>>=0,r||S(e,0,i,8),O.write(e,t,i,n,52,8),i+8}function k(e){return e<16?"0"+e.toString(16):e.toString(16)}function A(e,t){var i;t=t||1/0;for(var n=e.length,r=null,a=[],o=0;o<n;++o){if(55295<(i=e.charCodeAt(o))&&i<57344){if(!r){if(56319<i){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}r=i;continue}if(i<56320){-1<(t-=3)&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function I(e){return R.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}var R=e(6),O=e(12);i.Buffer=r,i.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},i.INSPECT_MAX_BYTES=50;var N=2147483647;i.kMaxLength=N,(r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,i){return a(e,t,i)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,t,i){return function(e,t,i){return o(e),e<=0?n(e):void 0!==t?"string"==typeof i?n(e).fill(t,i):n(e).fill(t):n(e)}(e,t,i)},r.allocUnsafe=function(e){return s(e)},r.allocUnsafeSlow=function(e){return s(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(M(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,a=0,o=Math.min(i,n);a<o;++a)if(e[a]!==t[a]){i=e[a],n=t[a];break}return i<n?-1:n<i?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var i;if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;var n=r.allocUnsafe(t),a=0;for(i=0;i<e.length;++i){var o=e[i];if(M(o,Uint8Array)&&(o=r.from(o)),!r.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,a),a+=o.length}return n},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)u(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)u(this,t,t+3),u(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)u(this,t,t+7),u(this,t+1,t+6),u(this,t+2,t+5),u(this,t+3,t+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return _(this,t,i);case"utf8":case"utf-8":return v(this,t,i);case"ascii":return y(this,t,i);case"latin1":case"binary":return b(this,t,i);case"base64":return m(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,i,n,a){if(M(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||i>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(a<=n&&i<=t)return 0;if(a<=n)return-1;if(i<=t)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0),l=Math.min(o,s),d=this.slice(n,a),c=e.slice(t,i),u=0;u<l;++u)if(d[u]!==c[u]){o=d[u],s=c[u];break}return o<s?-1:s<o?1:0},r.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},r.prototype.indexOf=function(e,t,i){return h(this,e,t,i,!0)},r.prototype.lastIndexOf=function(e,t,i){return h(this,e,t,i,!1)},r.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||r<i)&&(i=r),0<e.length&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var a,o,s,l,d,c,u,h,f,m=!1;;)switch(n){case"hex":return p(this,e,t,i);case"utf8":case"utf-8":return h=t,f=i,D(A(e,(u=this).length-h),u,h,f);case"ascii":return g(this,e,t,i);case"latin1":case"binary":return g(this,e,t,i);case"base64":return l=this,d=t,c=i,D(I(e),l,d,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,s=i,D(function(e,t){for(var i,n,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=e.charCodeAt(o),n=i>>8,r=i%256,a.push(r),a.push(n);return a}(e,(a=this).length-o),a,o,s);default:if(m)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),m=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;r.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=r.prototype,n},r.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n},r.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},r.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return(r*=128)<=n&&(n-=Math.pow(2,8*t)),n},r.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var n=t,r=1,a=this[e+--n];0<n&&(r*=256);)a+=this[e+--n]*r;return(r*=128)<=a&&(a-=Math.pow(2,8*t)),a},r.prototype.readInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),O.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),O.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),O.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),O.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||T(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=e/r&255;return t+i},r.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||T(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+i},r.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);T(this,e,t,i,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<i&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},r.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);T(this,e,t,i,r-1,-r)}var a=i-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},r.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,i){return C(this,e,t,!0,i)},r.prototype.writeFloatBE=function(e,t,i){return C(this,e,t,!1,i)},r.prototype.writeDoubleLE=function(e,t,i){return x(this,e,t,!0,i)},r.prototype.writeDoubleBE=function(e,t,i){return x(this,e,t,!1,i)},r.prototype.copy=function(e,t,i,n){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i=i||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t=t||0,0<n&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var a=n-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,n);else if(this===e&&i<t&&t<n)for(var o=a-1;0<=o;--o)e[o+t]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,n),t);return a},r.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(e=e||0))for(o=t;o<i;++o)this[o]=e;else{var s=r.isBuffer(e)?e:r.from(e,n),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<i-t;++o)this[o+t]=s[o%l]}return this};var F=/[^+\/0-9A-Za-z-_]/g},{12:12,6:6}],9:[function(e,t,i){var n={parseBuffer:function(e){return new r(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},createFile:function(){return new r},createBox:function(e,t,i){var n=a.create(e);return t&&t.append(n,i),n},createFullBox:function(e,t,i){var r=n.createBox(e,t,i);return r.version=0,r.flags=0,r},Utils:{}};n.Utils.dataViewToString=function(e,t){var i=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(e);var n=[],r=0;if("utf-8"===i)for(;r<e.byteLength;){var a=e.getUint8(r++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(r++))<<12),a|=(63&e.getUint8(r++))<<6),a|=63&e.getUint8(r++)),n.push(String.fromCharCode(a))}else for(;r<e.byteLength;)n.push(String.fromCharCode(e.getUint8(r++)));return n.join("")},n.Utils.utf8ToByteArray=function(e){var t,i;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],i=0;i<e.length;++i){var n=e.charCodeAt(i);n<128?t.push(n):(n<2048?t.push(192|n>>6):(n<65536?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|63&n>>12)),t.push(128|63&n>>6)),t.push(128|63&n))}return t},n.Utils.appendBox=function(e,t,i){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==i)if(null!=i){var n,r=-1;if("number"==typeof i)r=i;else{if("string"==typeof i)n=i;else{if("object"!=typeof i||!i.type)return void e.boxes.push(t);n=i.type}for(var a=0;a<e.boxes.length;a++)if(n===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}else e.boxes.push(t)},void 0!==i&&(i.parseBuffer=n.parseBuffer,i.addBoxProcessor=n.addBoxProcessor,i.createFile=n.createFile,i.createBox=n.createBox,i.createFullBox=n.createFullBox,i.Utils=n.Utils),n.Cursor=function(e){this.offset=void 0===e?0:e};var r=function(e){this._cursor=new n.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};r.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},r.prototype.fetchAll=function(e,t){var i=[];return r._sweep.call(this,e,i,t),i},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},r._sweep=function(e,t,i){for(var n in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&i)return;r._sweep.call(this.boxes[n],e,t,i)}},r.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var i=new Uint8Array(t);for(this._rawo=new DataView(i.buffer),this.bytes=i,e=this._cursor.offset=0;e<this.boxes.length;e++)this.boxes[e].write();return i.buffer},r.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new n.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,i){this._parsing?this[e]=this._readField(t,i):this._writeField(t,i,this[e])},a.prototype._procFieldArray=function(e,t,i,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(i,n);else for(r=0;r<this[e].length;r++)this._writeField(i,n,this[e][r])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,i){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push({}),i.call(this,this[e][n]);else for(n=0;n<t;n++)i.call(this,this[e][n])},a.prototype._procSubEntries=function(e,t,i,n){var r;if(this._parsing)for(e[t]=[],r=0;r<i;r++)e[t].push({}),n.call(this,e[t][r]);else for(r=0;r<i;r++)n.call(this,e[t][r])},a.prototype._procEntryField=function(e,t,i,n){this._parsing?e[t]=this._readField(i,n):this._writeField(i,n,e[t])},a.prototype._procSubBoxes=function(e,t){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push(a.parse(this));else for(i=0;i<t;i++)this._rawo?this[e][i].write():this.size+=this[e][i].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(i);break;case 16:t=this._raw.getInt16(i);break;case 32:t=this._raw.getInt32(i);break;case 64:var n=this._raw.getInt32(i),r=this._raw.getInt32(4+i);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,i,n=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:n=this._raw.getUint8(r);break;case 16:n=this._raw.getUint16(r);break;case 24:n=((t=this._raw.getUint16(r))<<8)+(i=this._raw.getUint8(2+r));break;case 32:n=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),i=this._raw.getUint32(4+r),n=t*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,n},a.prototype._readString=function(e){for(var t="",i=0;i<e;i++){var n=this._readUint(8);t+=String.fromCharCode(n)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var i=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,i}return null},a.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?n.Utils.dataViewToString(t):t},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(i,t);break;case 16:this._rawo.setInt16(i,t);break;case 32:this._rawo.setInt32(i,t);break;case 64:var n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32);this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var i,n,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:i=(16776960&t)>>8,n=255&t,this._rawo.setUint16(r,i),this._rawo.setUint8(2+r,n);break;case 32:this._rawo.setUint32(r,t);break;case 64:n=t-(i=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,i),this._rawo.setUint32(4+r,n)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var i=0;i<e;i++)this._writeUint(8,t.charCodeAt(i))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var i=Math.floor(t),n=(t-i)*Math.pow(2,e/2);this._writeUint(e/2,i),this._writeUint(e/2,n)},a.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,i=0;i<e.length;i++)this._rawo.setInt8(t+i,e[i]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},a.prototype._writeUTF8String=function(e){var t=n.Utils.utf8ToByteArray(e);if(this._rawo)for(var i=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)i.setUint8(r,t[r]);else this.size+=t.length},a.prototype._writeField=function(e,t,i){switch(e){case"uint":this._writeUint(t,i);break;case"int":this._writeInt(t,i);break;case"template":this._writeTemplate(t,i);break;case"string":-1==t?this._writeTerminatedString(i):this._writeString(t,i);break;case"data":this._writeData(i);break;case"utf8":this._writeUTF8String(i)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),
this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},{}],10:[function(e,t){function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function n(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function r(e,t,i,r){var a,o,s;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),s=o[t]):(o=e._events=c(null),e._eventsCount=0),s){if("function"==typeof s?s=o[t]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),!s.warned&&(a=n(e))&&0<a&&s.length>a){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=o[t]=i,++e._eventsCount;return e}function a(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function o(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=h.call(a,n);return r.listener=i,n.wrapFn=r}function s(e,t,i){var n=e._events;if(!n)return[];var r=n[t];return r?"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):d(r,r.length):[]}function l(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function d(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}var c=Object.create||function(e){function t(){}return t.prototype=e,new t},u=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return i},h=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var f,p=10;try{var g={};Object.defineProperty&&Object.defineProperty(g,"x",{value:0}),f=0===g.x}catch(e){f=!1}f?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');p=e}}):i.defaultMaxListeners=p,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return n(this)},i.prototype.emit=function(e,t,i,n){var r,a,o,s,l,c,u="error"===e;if(c=this._events)u=u&&null==c.error;else if(!u)return!1;if(u){if(1<arguments.length&&(r=t),r instanceof Error)throw r;var h=new Error('Unhandled "error" event. ('+r+")");throw h.context=r,h}if(!(a=c[e]))return!1;var f="function"==typeof a;switch(o=arguments.length){case 1:!function(e,t,i){if(t)e.call(i);else for(var n=e.length,r=d(e,n),a=0;a<n;++a)r[a].call(i)}(a,f,this);break;case 2:!function(e,t,i,n){if(t)e.call(i,n);else for(var r=e.length,a=d(e,r),o=0;o<r;++o)a[o].call(i,n)}(a,f,this,t);break;case 3:!function(e,t,i,n,r){if(t)e.call(i,n,r);else for(var a=e.length,o=d(e,a),s=0;s<a;++s)o[s].call(i,n,r)}(a,f,this,t,i);break;case 4:!function(e,t,i,n,r,a){if(t)e.call(i,n,r,a);else for(var o=e.length,s=d(e,o),l=0;l<o;++l)s[l].call(i,n,r,a)}(a,f,this,t,i,n);break;default:for(s=new Array(o-1),l=1;l<o;l++)s[l-1]=arguments[l];!function(e,t,i,n){if(t)e.apply(i,n);else for(var r=e.length,a=d(e,r),o=0;o<r;++o)a[o].apply(i,n)}(a,f,this,s)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return r(this,e,t,!1)},i.prototype.prependListener=function(e,t){return r(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,o(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,o(this,e,t)),this},i.prototype.removeListener=function(e,t){var i,n,r,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=c(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;0<=a;a--)if(i[a]===t||i[a].listener===t){o=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.removeAllListeners=function(e){var t,i,n;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=c(null):delete i[e]),this;if(0===arguments.length){var r,a=u(i);for(n=0;n<a.length;++n)"removeListener"!==(r=a[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return s(this,e,!0)},i.prototype.rawListeners=function(e){return s(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},i.prototype.listenerCount=l,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],11:[function(e,t){"use strict";var i=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty;t.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){var o,s,l,d=i(t),c=i(a);if(d&&c){if((s=t.length)!=a.length)return!1;for(o=s;0!=o--;)if(!e(t[o],a[o]))return!1;return!0}if(d!=c)return!1;var u=t instanceof Date,h=a instanceof Date;if(u!=h)return!1;if(u&&h)return t.getTime()==a.getTime();var f=t instanceof RegExp,p=a instanceof RegExp;if(f!=p)return!1;if(f&&p)return t.toString()==a.toString();var g=n(t);if((s=g.length)!==n(a).length)return!1;for(o=s;0!=o--;)if(!r.call(a,g[o]))return!1;for(o=s;0!=o--;)if(!e(t[l=g[o]],a[l]))return!1;return!0}return t!=t&&a!=a}},{}],12:[function(e,t,i){i.read=function(e,t,i,n,r){var a,o,s=8*r-n-1,l=(1<<s)-1,d=l>>1,c=-7,u=i?r-1:0,h=i?-1:1,f=e[t+u];for(u+=h,a=f&(1<<-c)-1,f>>=-c,c+=s;0<c;a=256*a+e[t+u],u+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;0<c;o=256*o+e[t+u],u+=h,c-=8);if(0===a)a=1-d;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=d}return(f?-1:1)*o*Math.pow(2,a-n)},i.write=function(e,t,i,n,r,a){var o,s,l,d=8*a-r-1,c=(1<<d)-1,u=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),2<=(t+=1<=o+u?h/l:h*Math.pow(2,1-u))*l&&(o++,l/=2),c<=o+u?(s=0,o=c):1<=o+u?(s=(t*l-1)*Math.pow(2,r),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),o=0));8<=r;e[i+f]=255&s,f+=p,s/=256,r-=8);for(o=o<<r|s,d+=r;0<d;e[i+f]=255&o,f+=p,o/=256,d-=8);e[i+f-p]|=128*g}},{}],13:[function(e,t,i){function n(e,t,i,r){var a=r&&"seq"===r.timeContainer,o=0;r&&(o=a&&i?i.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o;var s=t.begin,l=null;for(var d in t.sets)n(e,t.sets[d],l,t),s="seq"===t.timeContainer?t.sets[d].end:Math.max(s,t.sets[d].end),l=t.sets[d];if("contents"in t)for(var c in t.contents)n(e,t.contents[c],l,t),s="seq"===t.timeContainer?t.contents[c].end:Math.max(s,t.contents[c].end),l=t.contents[c];else s=a?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function r(e){this.node=e}function a(){this.events=[],this.head=null,this.body=null}function o(){this.styling=null,this.layout=null}function s(){this.styles={}}function l(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function d(){this.regions={}}function c(e){this.kind=e}function u(e){this.id=e}function h(e){this.regionID=e}function f(e){this.styleAttrs=e}function p(e){this.sets=e}function g(e){this.contents=e}function m(e,t,i){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=i}function v(){c.call(this,"body")}function y(){c.call(this,"div")}function b(){c.call(this,"p")}function _(){c.call(this,"span")}function w(){c.call(this,"span")}function E(){c.call(this,"br")}function T(){}function S(){}function C(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function x(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function k(e,t){var i={};if(null!==e)for(var n in e.attributes){var r=e.attributes[n].uri+" "+e.attributes[n].local,a=H.byQName[r];if(void 0!==a){var o=a.parse(e.attributes[n].value);null!==o?(i[r]=o,a===H.byName.zIndex&&R(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):O(t,"Cannot parse styling attribute "+r+" --> "+e.attributes[n].value)}}return i}function A(e,t,i){for(var n in e.attributes)if(e.attributes[n].uri===t&&e.attributes[n].local===i)return e.attributes[n].value;return null}function I(e,t,i){var n,r=null;return null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(i))?null!==t&&(r=parseFloat(n[1])/t):null!==(n=/^(\d+(?:\.\d+)?)t$/.exec(i))?null!==e&&(r=parseFloat(n[1])/e):null!==(n=/^(\d+(?:\.\d+)?)ms$/.exec(i))?r=parseFloat(n[1])/1e3:null!==(n=/^(\d+(?:\.\d+)?)s$/.exec(i))?r=parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)h$/.exec(i))?r=3600*parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)m$/.exec(i))?r=60*parseFloat(n[1]):null!==(n=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(i))?r=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(i))&&null!==t&&(r=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/t)),r}function D(e,t,i){for(;0<t.styleRefs.length;){var n=t.styleRefs.pop();n in e.styles?(D(e,e.styles[n],i),P(e.styles[n].styleAttrs,t.styleAttrs)):O(i,"Non-existant style id referenced")}}function M(e,t,i,n){for(var r=t.length-1;0<=r;r--){var a=t[r];a in e.styles?P(e.styles[a].styleAttrs,i):O(n,"Non-existant style id referenced")}}function P(e,t){for(var i in e)i in t||(t[i]=e[i])}function R(e,t){if(e&&e.warn&&e.warn(t))throw t}function O(e,t){if(e&&e.error&&e.error(t))throw t}function N(e,t){throw e&&e.fatal&&e.fatal(t),t}function L(e,t){for(var i,n=0,r=e.length-1;n<=r;){var a=e[i=Math.floor((n+r)/2)];if(a<t)n=i+1;else{if(!(t<a))return{found:!0,index:i};r=i-1}}return{found:!1,index:n}}var F,j,B,H,U;F=void 0===i?this.imscDoc={}:i,j="undefined"==typeof sax?e(41):sax,B="undefined"==typeof imscNames?e(17):imscNames,H="undefined"==typeof imscStyles?e(18):imscStyles,U="undefined"==typeof imscUtils?e(19):imscUtils,F.fromXML=function(e,t,i){var c=j.parser(!0,{xmlns:!0}),u=[],h=[],f=[],p=0,g=null;c.onclosetag=function(){if(u[0]instanceof s)for(var e in u[0].styles)D(u[0],u[0].styles[e],t);else if(u[0]instanceof b||u[0]instanceof _){if(1<u[0].contents.length){var n,a=[u[0].contents[0]];for(n=1;n<u[0].contents.length;n++)u[0].contents[n]instanceof w&&a[a.length-1]instanceof w?a[a.length-1].text+=u[0].contents[n].text:a.push(u[0].contents[n]);u[0].contents=a}u[0]instanceof _&&1===u[0].contents.length&&u[0].contents[0]instanceof w&&(u[0].text=u[0].contents[0].text,delete u[0].contents)}else u[0]instanceof r&&(u[0].node.uri===B.ns_tt&&"metadata"===u[0].node.local?p--:0<p&&i&&"onCloseTag"in i&&i.onCloseTag());f.shift(),h.shift(),u.shift()},c.ontext=function(e){if(void 0===u[0]);else if(u[0]instanceof _||u[0]instanceof b){var n=new w;n.initFromText(g,u[0],e,f[0],t),u[0].contents.push(n)}else u[0]instanceof r&&0<p&&i&&"onText"in i&&i.onText(e)},c.onopentag=function(e){var n=e.attributes["xml:space"];n?f.unshift(n.value):0===f.length?f.unshift("default"):f.unshift(f[0]);var c=e.attributes["xml:lang"];if(c?h.unshift(c.value):0===h.length?h.unshift(""):h.unshift(h[0]),e.uri===B.ns_tt)if("tt"===e.local)null!==g&&N(t,"Two <tt> elements at ("+this.line+","+this.column+")"),(g=new a).initFromNode(e,t),u.unshift(g);else if("head"===e.local)u[0]instanceof a||N(t,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==g.head&&N("Second <head> element at ("+this.line+","+this.column+")"),g.head=new o,u.unshift(g.head);else if("styling"===e.local)u[0]instanceof o||N(t,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==g.head.styling&&N("Second <styling> element at ("+this.line+","+this.column+")"),g.head.styling=new s,u.unshift(g.head.styling);else if("style"===e.local){var m;u[0]instanceof s?((m=new l).initFromNode(e,t),m.id?g.head.styling.styles[m.id]=m:O(t,"<style> element missing @id attribute"),u.unshift(m)):u[0]instanceof T?((m=new l).initFromNode(e,t),P(m.styleAttrs,u[0].styleAttrs),u.unshift(m)):N(t,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)u[0]instanceof o||N(t,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==g.head.layout&&N(t,"Second <layout> element at "+this.line+","+this.column+")"),g.head.layout=new d,u.unshift(g.head.layout);else if("region"===e.local){u[0]instanceof d||N(t,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var w=new T;w.initFromNode(g,e,t),!w.id||w.id in g.head.layout.regions?O(t,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):g.head.layout.regions[w.id]=w,u.unshift(w)}else if("body"===e.local){u[0]instanceof a||N(t,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==g.body&&N(t,"Second <body> element at "+this.line+","+this.column+")");var C=new v;C.initFromNode(g,e,t),g.body=C,u.unshift(C)}else if("div"===e.local){u[0]instanceof y||u[0]instanceof v||N(t,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var x=new y;x.initFromNode(g,u[0],e,t),u[0].contents.push(x),u.unshift(x)}else if("p"===e.local){u[0]instanceof y||N(t,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var k=new b;k.initFromNode(g,u[0],e,t),u[0].contents.push(k),u.unshift(k)}else if("span"===e.local){u[0]instanceof _||u[0]instanceof b||N(t,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var A=new _;A.initFromNode(g,u[0],e,f[0],t),u[0].contents.push(A),u.unshift(A)}else if("br"===e.local){u[0]instanceof _||u[0]instanceof b||N(t,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var I=new E;I.initFromNode(g,u[0],e,t),u[0].contents.push(I),u.unshift(I)}else if("set"===e.local){u[0]instanceof _||u[0]instanceof b||u[0]instanceof y||u[0]instanceof v||u[0]instanceof T||u[0]instanceof E||N(t,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var D=new S;D.initFromNode(g,u[0],e,t),u[0].sets.push(D),u.unshift(D)}else u.unshift(new r(e));else u.unshift(new r(e));if(u[0]instanceof r)if(e.uri===B.ns_tt&&"metadata"===e.local)p++;else if(0<p&&i&&"onOpenTag"in i){var M=[];for(var R in e.attributes)M[e.attributes[R].uri+" "+e.attributes[R].local]={uri:e.attributes[R].uri,local:e.attributes[R].local,value:e.attributes[R].value};i.onOpenTag(e.uri,e.local,M)}},c.write(e).close(),null!==g.head?delete g.head.styling:g.head=new o,null===g.head.layout&&(g.head.layout=new d);var m=!1;for(var C in g.head.layout.regions){m=!0;break}if(!m){var x=T.prototype.createDefaultRegion();g.head.layout.regions[x.id]=x}for(var k in g.head.layout.regions)n(g,g.head.layout.regions[k],null,null);return g.body&&n(g,g.body,null,null),g},a.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var i=A(e,B.ns_ttp,"cellResolution"),n=15,r=32;if(null!==i){var a=/(\d+) (\d+)/.exec(i);null!==a?(r=parseInt(a[1]),n=parseInt(a[2])):R(t,"Malformed cellResolution value (using initial value instead)")}return{w:r,h:n}}(e,t);var i=function(e,t){var i,n=A(e,B.ns_ttp,"frameRate"),r=30;null!==n&&(null!==(i=/(\d+)/.exec(n))?r=parseInt(i[1]):R(t,"Malformed frame rate attribute (using initial value instead)"));var a=A(e,B.ns_ttp,"frameRateMultiplier"),o=1;null!==a&&(null!==(i=/(\d+) (\d+)/.exec(a))?o=parseInt(i[1])/parseInt(i[2]):R(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var s=o*r,l=1,d=A(e,B.ns_ttp,"tickRate");return null===d?null!==n&&(l=s):null!==(i=/(\d+)/.exec(d))?l=parseInt(i[1]):R(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:s,tickRate:l}}(e,t);this.effectiveFrameRate=i.effectiveFrameRate,this.tickRate=i.tickRate,this.aspectRatio=function(e,t){var i=A(e,B.ns_ittp,"aspectRatio"),n=null;if(null!==i){var r=/(\d+) (\d+)/.exec(i);if(null!==r){var a=parseInt(r[1]),o=parseInt(r[2]);0!==a&&0!==o?n=a/o:O(t,"Illegal aspectRatio values (ignoring)")}else O(t,"Malformed aspectRatio attribute (ignoring)")}return n}(e,t);var n=A(e,B.ns_ttp,"timeBase");null!==n&&"media"!==n&&N(t,"Unsupported time base");var r=function(e,t){var i=A(e,B.ns_tts,"extent");if(null===i)return null;var n=i.split(" ");if(2!==n.length)return R(t,"Malformed extent (ignoring)"),null;var r=U.parseLength(n[0]),a=U.parseLength(n[1]);return a&&r?{h:a,w:r}:(R(t,"Malformed extent values (ignoring)"),null)}(e,t);null===r?this.pxDimensions={h:480,w:640}:("px"===r.h.unit&&"px"===r.w.unit||N(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:r.h.value,w:r.w.value})},a.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=L(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var i=L(this.events,e.end);i.found||this.events.splice(i.index,0,e.end)}}},a.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},a.prototype.getMediaTimeEvents=function(){return this.events},l.prototype.initFromNode=function(e,t){this.id=C(e),this.styleAttrs=k(e,t),this.styleRefs=x(e)},u.prototype.initFromNode=function(e,t,i){this.id=C(i)},h.prototype.initFromNode=function(e,t,i){this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(i)},f.prototype.initFromNode=function(e,t,i,n){this.styleAttrs=k(i,n),null!==e.head&&null!==e.head.styling&&M(e.head.styling,x(i),this.styleAttrs,n)},p.prototype.initFromNode=function(){this.sets=[]},g.prototype.initFromNode=function(){this.contents=[]},m.prototype.initFromNode=function(e,t,i,n){var r=function(e,t,i,n){var r=null;i&&"begin"in i.attributes&&null===(r=I(e.tickRate,e.effectiveFrameRate,i.attributes.begin.value))&&R(n,"Malformed begin value "+i.attributes.begin.value+" (using 0)");var a=null;i&&"dur"in i.attributes&&null===(a=I(e.tickRate,e.effectiveFrameRate,i.attributes.dur.value))&&R(n,"Malformed dur value "+i.attributes.dur.value+" (ignoring)");var o=null;return i&&"end"in i.attributes&&null===(o=I(e.tickRate,e.effectiveFrameRate,i.attributes.end.value))&&R(n,"Malformed end value (ignoring)"),{explicit_begin:r,explicit_end:o,explicit_dur:a}}(e,0,i,n);this.explicit_begin=r.explicit_begin,this.explicit_end=r.explicit_end,this.explicit_dur=r.explicit_dur,this.timeContainer=function(e,t){var i=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return i&&"par"!==i?"seq"===i?"seq":(O(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(i,n)},v.prototype.initFromNode=function(e,t,i){f.prototype.initFromNode.call(this,e,null,t,i),m.prototype.initFromNode.call(this,e,null,t,i),p.prototype.initFromNode.call(this,e,null,t,i),h.prototype.initFromNode.call(this,e,null,t,i),g.prototype.initFromNode.call(this,e,null,t,i)},y.prototype.initFromNode=function(e,t,i,n){f.prototype.initFromNode.call(this,e,t,i,n),m.prototype.initFromNode.call(this,e,t,i,n),p.prototype.initFromNode.call(this,e,t,i,n),h.prototype.initFromNode.call(this,e,t,i,n),g.prototype.initFromNode.call(this,e,t,i,n)},b.prototype.initFromNode=function(e,t,i,n){f.prototype.initFromNode.call(this,e,t,i,n),m.prototype.initFromNode.call(this,e,t,i,n),p.prototype.initFromNode.call(this,e,t,i,n),h.prototype.initFromNode.call(this,e,t,i,n),g.prototype.initFromNode.call(this,e,t,i,n)},_.prototype.initFromNode=function(e,t,i,n,r){f.prototype.initFromNode.call(this,e,t,i,r),m.prototype.initFromNode.call(this,e,t,i,r),p.prototype.initFromNode.call(this,e,t,i,r),h.prototype.initFromNode.call(this,e,t,i,r),g.prototype.initFromNode.call(this,e,t,i,r),this.space=n},w.prototype.initFromText=function(e,t,i,n,r){m.prototype.initFromNode.call(this,e,t,null,r),this.text=i,this.space=n},E.prototype.initFromNode=function(e,t,i,n){h.prototype.initFromNode.call(this,e,t,i,n),m.prototype.initFromNode.call(this,e,t,i,n)},T.prototype.createDefaultRegion=function(){var e=new T;return u.call(e,""),f.call(e,{}),p.call(e,[]),m.call(e,0,Number.POSITIVE_INFINITY,null),e},T.prototype.initFromNode=function(e,t,i){u.prototype.initFromNode.call(this,e,null,t,i),f.prototype.initFromNode.call(this,e,null,t,i),m.prototype.initFromNode.call(this,e,null,t,i),p.prototype.initFromNode.call(this,e,null,t,i),null!==e.head&&null!==e.head.styling&&M(e.head.styling,x(t),this.styleAttrs,i)},S.prototype.initFromNode=function(e,t,i,n){m.prototype.initFromNode.call(this,e,t,i,n);var r=k(i,n);for(var a in this.qname=null,this.value=null,r){if(this.qname){O(n,"More than one style specified on set");break}this.qname=a,this.value=r[a]}}},{17:17,18:18,19:19,41:41}],14:[function(e,t,i){!function(e,t,i){function n(e,t,s){var d;if("region"===s.kind?(d=document.createElement("div")).style.position="absolute":"body"===s.kind?d=document.createElement("div"):"div"===s.kind?d=document.createElement("div"):"p"===s.kind?d=document.createElement("p"):"span"===s.kind?d=document.createElement("span"):"br"===s.kind&&(d=document.createElement("br")),d){for(var c in d.style.margin="0",l){var u=l[c],h=s.styleAttrs[u.qname];void 0!==h&&null!==u.map&&u.map(e,d,s,h)}var f=d;if("region"===s.kind){var p=s.styleAttrs[i.byName.writingMode.qname];"lrtb"===p||"lr"===p?(e.ipd="lr",e.bpd="tb"):"rltb"===p||"rl"===p?(e.ipd="rl",e.bpd="tb"):"tblr"===p?(e.ipd="tb",e.bpd="lr"):"tbrl"!==p&&"tb"!==p||(e.ipd="tb",e.bpd="rl")}var g=s.styleAttrs[i.byName.linePadding.qname];if(g&&0<g){var m=Math.ceil(g*e.h)+"px";"tb"===e.bpd?(f.style.paddingLeft=m,f.style.paddingRight=m):(f.style.paddingTop=m,f.style.paddingBottom=m),e.lp=g}var v=s.styleAttrs[i.byName.multiRowAlign.qname];if(v&&"auto"!==v){var y=document.createElement("span");y.style.display="inline-block",y.style.textAlign=v,d.appendChild(y),f=y,e.mra=v}if(s.styleAttrs[i.byName.fillLineGap.qname]&&(e.flg=!0),"span"===s.kind&&s.text)if(e.lp||e.mra||e.flg)for(var b="",_=0;_<s.text.length;_++){b+=s.text.charAt(_);var w=s.text.charCodeAt(_);if(w<55296||56319<w||_===s.text.length){var E=document.createElement("span");E.textContent=b,d.appendChild(E),b=""}}else d.textContent=s.text;for(var T in t.appendChild(d),s.contents)n(e,f,s.contents[T]);var S=[];if((e.lp||e.mra||e.flg)&&"p"===s.kind&&(o(e,f,S,null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var i=e[t].elements.length;if(0!==i&&!1===e[t].br){var n=document.createElement("br"),r=e[t].elements[i-1].node;r.parentElement.insertBefore(n,r.nextSibling)}}}(S),e.mra=null),e.lp&&(function(e,t,i){for(var n in e){var r=e[n].elements.length,a=e[n].elements[e[n].start_elem],o=e[n].elements[e[n].end_elem],s=Math.ceil(t)+"px",l="-"+Math.ceil(t)+"px";0!==r&&("lr"===i.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=l):"rl"===i.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=l):"tb"===i.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=l),"lr"===i.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=l):"rl"===i.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=l):"tb"===i.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=l))}}(S,e.lp*e.h,e),e.lp=null),e.flg)){var C=a(f.getBoundingClientRect(),e);!function(e,t,i,n){for(var r=Math.sign(i-t),a=0;a<=e.length;a++){var o,s,l;if(o=0===a?t:a===e.length?i:(e[a].before+e[a-1].after)/2,0<a)for(var d=0;d<e[a-1].elements.length;d++)null!==e[a-1].elements[d].bgcolor&&(l=e[a-1].elements[d],r*(l.after-o)<0&&(s=Math.ceil(Math.abs(o-l.after))+"px",l.node.style.backgroundColor=l.bgcolor,"lr"===n.bpd?l.node.style.paddingRight=s:"rl"===n.bpd?l.node.style.paddingLeft=s:"tb"===n.bpd&&(l.node.style.paddingBottom=s)));if(a<e.length)for(var c=0;c<e[a].elements.length;c++)null!==(l=e[a].elements[c]).bgcolor&&0<r*(l.before-o)&&(s=Math.ceil(Math.abs(l.before-o))+"px",l.node.style.backgroundColor=l.bgcolor,"lr"===n.bpd?l.node.style.paddingLeft=s:"rl"===n.bpd?l.node.style.paddingRight=s:"tb"===n.bpd&&(l.node.style.paddingTop=s))}}(S,C.before,C.after,e),e.flg=null}if("region"===s.kind&&(o(e,f,S),"tb"===e.bpd&&e.enableRollUp&&0<s.contents.length&&"after"===s.styleAttrs[i.byName.displayAlign.qname])){var x=new r(""===s.id?"_":s.id,S);if(e.currentISDState[x.id]=x,e.previousISDState&&x.id in e.previousISDState&&0<e.previousISDState[x.id].plist.length&&1<x.plist.length&&x.plist[x.plist.length-2].text===e.previousISDState[x.id].plist[e.previousISDState[x.id].plist.length-1].text){var k=d.firstElementChild,A=x.plist[x.plist.length-1].after-x.plist[x.plist.length-1].before;k.style.bottom="-"+A+"px",k.style.transition="transform 0.4s",k.style.position="relative",k.style.transform="translateY(-"+A+"px)"}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+s.kind)}function r(e,t){this.id=e,this.plist=t}function a(e,t){var i={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(i.before=e.top,i.after=e.bottom,"lr"===t.ipd?(i.start=e.left,i.end=e.right):(i.start=e.right,i.end=e.left)):"lr"===t.bpd?(i.before=e.left,i.after=e.right,i.start=e.top,i.end=e.bottom):"rl"===t.bpd&&(i.before=e.right,i.after=e.left,i.start=e.top,i.end=e.bottom),i}function o(e,t,i,n){var r=t.style.backgroundColor||n;if(0===t.childElementCount)if("span"===t.localName){var s=t.getBoundingClientRect();if(0===s.height||0===s.width)return;var l=a(s,e);if(0!==i.length&&function(e,t,i,n){return t<n&&i<e||n<=t&&e<=i}(l.before,l.after,i[i.length-1].before,i[i.length-1].after)){var d=Math.sign(l.after-l.before),c=Math.sign(l.end-l.start);d*(l.before-i[i.length-1].before)<0&&(i[i.length-1].before=l.before),0<d*(l.after-i[i.length-1].after)&&(i[i.length-1].after=l.after),c*(l.start-i[i.length-1].start)<0&&(i[i.length-1].start=l.start,i[i.length-1].start_elem=i[i.length-1].elements.length),0<c*(l.end-i[i.length-1].end)&&(i[i.length-1].end=l.end,i[i.length-1].end_elem=i[i.length-1].elements.length)}else i.push({before:l.before,after:l.after,start:l.start,end:l.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});i[i.length-1].text+=t.textContent,i[i.length-1].elements.push({node:t,bgcolor:r,before:l.before,after:l.after})}else"br"===t.localName&&0!==i.length&&(i[i.length-1].br=!0);else for(var u=t.firstChild;u;)u.nodeType===Node.ELEMENT_NODE&&o(e,u,i,r),u=u.nextSibling}function s(e,t){this.qname=e,this.map=t}e.render=function(e,t,i,r,a,o,s,l,d){var c=r||t.clientHeight,u=a||t.clientWidth;if(null!==e.aspectRatio){var h=c*e.aspectRatio;u<h?c=Math.round(u/e.aspectRatio):u=h}var f=document.createElement("div");f.style.position="relative",f.style.width=u+"px",f.style.height=c+"px",f.style.margin="auto",f.style.top=0,f.style.bottom=0,f.style.left=0,f.style.right=0,f.style.zIndex=0;var p={h:c,w:u,regionH:null,regionW:null,imgResolver:i,displayForcedOnlyMode:o||!1,
isd:e,errorHandler:s,previousISDState:l,enableRollUp:d||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var g in t.appendChild(f),e.contents)n(p,f,e.contents[g]);return p.currentISDState};var l=[new s("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,i,n){0!==n[3]&&(t.style.backgroundColor="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")")}),new s("http://www.w3.org/ns/ttml#styling color",function(e,t,i,n){t.style.color="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")"}),new s("http://www.w3.org/ns/ttml#styling direction",function(e,t,i,n){t.style.direction=n}),new s("http://www.w3.org/ns/ttml#styling display",function(){}),new s("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,i,n){t.style.display="flex",t.style.flexDirection="column","before"===n?t.style.justifyContent="flex-start":"center"===n?t.style.justifyContent="center":"after"===n&&(t.style.justifyContent="flex-end")}),new s("http://www.w3.org/ns/ttml#styling extent",function(e,t,i,n){e.regionH=n.h*e.h,e.regionW=n.w*e.w;var r=0,a=0,o=i.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(r=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-r+"px",t.style.width=e.regionW-a+"px"}),new s("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,i,n){var r=[];for(var a in n)"monospaceSerif"===n[a]?(r.push("Courier New"),r.push('"Liberation Mono"'),r.push("Courier"),r.push("monospace")):"proportionalSansSerif"===n[a]?(r.push("Arial"),r.push("Helvetica"),r.push('"Liberation Sans"'),r.push("sans-serif")):"monospace"===n[a]?r.push("monospace"):"sansSerif"===n[a]?r.push("sans-serif"):"serif"===n[a]?r.push("serif"):"monospaceSansSerif"===n[a]?(r.push("Consolas"),r.push("monospace")):"proportionalSerif"===n[a]?r.push("serif"):r.push(n[a]);t.style.fontFamily=r.join(",")}),new s("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,i,n){t.style.fontSize=n*e.h+"px"}),new s("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,i,n){t.style.fontStyle=n}),new s("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,i,n){t.style.fontWeight=n}),new s("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,i,n){t.style.lineHeight="normal"===n?"normal":n*e.h+"px"}),new s("http://www.w3.org/ns/ttml#styling opacity",function(e,t,i,n){t.style.opacity=n}),new s("http://www.w3.org/ns/ttml#styling origin",function(e,t,i,n){t.style.top=n.h*e.h+"px",t.style.left=n.w*e.w+"px"}),new s("http://www.w3.org/ns/ttml#styling overflow",function(e,t,i,n){t.style.overflow=n}),new s("http://www.w3.org/ns/ttml#styling padding",function(e,t,i,n){var r=[];r[0]=n[0]*e.h+"px",r[1]=n[3]*e.w+"px",r[2]=n[2]*e.h+"px",r[3]=n[1]*e.w+"px",t.style.padding=r.join(" ")}),new s("http://www.w3.org/ns/ttml#styling showBackground",null),new s("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){var a,o=n.styleAttrs[i.byName.direction.qname];a="start"===r?"rtl"===o?"right":"left":"end"===r?"rtl"===o?"left":"right":r,t.style.textAlign=a}),new s("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,i,n){t.style.textDecoration=n.join(" ").replace("lineThrough","line-through")}),new s("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,i,n){t.style.textShadow="none"===n?"":"rgba("+n.color[0].toString()+","+n.color[1].toString()+","+n.color[2].toString()+","+(n.color[3]/255).toString()+") 0px 0px "+n.thickness*e.h+"px"}),new s("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,i,n){var r;r="bidiOverride"===n?"bidi-override":n,t.style.unicodeBidi=r}),new s("http://www.w3.org/ns/ttml#styling visibility",function(e,t,i,n){t.style.visibility=n}),new s("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,i,n){"wrap"===n?"preserve"===i.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===i.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new s("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,i,n){"lrtb"===n||"lr"===n?t.style.writingMode="horizontal-tb":"rltb"===n||"rl"===n?t.style.writingMode="horizontal-tb":"tblr"===n?t.style.writingMode="vertical-lr":"tbrl"!==n&&"tb"!==n||(t.style.writingMode="vertical-rl")}),new s("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,i,n){t.style.zIndex=n}),new s("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,i,n){if(null!==e.imgResolver&&null!==n){var r=document.createElement("img"),a=e.imgResolver(n,r);a&&(r.src=a),r.height=e.regionH,r.width=e.regionW,t.appendChild(r)}}),new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,i,n){e.displayForcedOnlyMode&&!1===n&&(t.style.visibility="hidden")})],d={};for(var c in l)d[l[c].qname]=l[c]}(void 0===i?this.imscHTML={}:i,"undefined"==typeof imscNames?e(17):imscNames,"undefined"==typeof imscStyles?e(18):imscStyles)},{17:17,18:18}],15:[function(e,t,i){function n(e,t,i,r,s,d,c,u,h){if(t<c.begin||t>=c.end)return null;var f="regionID"in c&&""!==c.regionID?c.regionID:d;if(null!==s&&f!==i.id&&(!("contents"in c)||"contents"in c&&0===c.contents.length||""!==f))return null;var p=new a(c);for(var g in c.sets)t<c.sets[g].begin||t>=c.sets[g].end||(p.styleAttrs[c.sets[g].qname]=c.sets[g].value);var m,v={};for(var y in p.styleAttrs)if(v[y]=!0,y===l.byName.writingMode.qname&&!(l.byName.direction.qname in p.styleAttrs)){var b=p.styleAttrs[y];"lrtb"===b||"lr"===b?p.styleAttrs[l.byName.direction.qname]="ltr":"rltb"!==b&&"rl"!==b||(p.styleAttrs[l.byName.direction.qname]="rtl")}if(null!==s)for(var _ in l.all){var w=l.all[_];if(w.qname===l.byName.textDecoration.qname){var E=s.styleAttrs[w.qname],T=p.styleAttrs[w.qname],S=[];void 0===T?S=E:-1===T.indexOf("none")?((-1===T.indexOf("noUnderline")&&-1!==E.indexOf("underline")||-1!==T.indexOf("underline"))&&S.push("underline"),(-1===T.indexOf("noLineThrough")&&-1!==E.indexOf("lineThrough")||-1!==T.indexOf("lineThrough"))&&S.push("lineThrough"),(-1===T.indexOf("noOverline")&&-1!==E.indexOf("overline")||-1!==T.indexOf("overline"))&&S.push("overline")):S.push("none"),p.styleAttrs[w.qname]=S}else w.inherit&&w.qname in s.styleAttrs&&!(w.qname in p.styleAttrs)&&(p.styleAttrs[w.qname]=s.styleAttrs[w.qname])}for(var C in l.all){var x=l.all[C];x.qname in p.styleAttrs||("region"===p.kind||!1===x.inherit&&null!==x.initial)&&(p.styleAttrs[x.qname]=x.parse(x.initial),v[x.qname]=!0)}for(var k in l.all){var A=l.all[k];if(A.qname in v&&null!==A.compute){var I=A.compute(e,s,p,p.styleAttrs[A.qname],h);null!==I?p.styleAttrs[A.qname]=I:o(u,"Style '"+A.qname+"' on element '"+p.kind+"' cannot be computed")}}if("none"===p.styleAttrs[l.byName.display.qname])return null;for(var D in null===s?m=null===r?[]:[r]:"contents"in c&&(m=c.contents),m){var M=n(e,t,i,r,p,f,m[D],u,h);null!==M&&p.contents.push(M.element)}for(var P in p.styleAttrs)-1===l.byQName[P].applies.indexOf(p.kind)&&delete p.styleAttrs[P];if("span"===p.kind&&p.text&&"default"===p.space){var R=p.text.replace(/\s+/g," ");p.text=R}if("p"===p.kind){var O=[];!function e(t,i){if("contents"in t)for(var n in t.contents)e(t.contents[n],i);else i.push(t)}(p,O);for(var N=0,L="after_br",F=0;;)if("after_br"===L)N>=O.length||"br"===O[N].kind?(L="before_br",F=N,N--):("preserve"!==O[N].space&&(O[N].text=O[N].text.replace(/^\s+/g,"")),0<O[N].text.length?(L="looking_br",N++):O.splice(N,1));else if("before_br"===L)if(N<0||"br"===O[N].kind){if(L="after_br",(N=F+1)>=O.length)break}else if("preserve"!==O[N].space&&(O[N].text=O[N].text.replace(/\s+$/g,"")),0<O[N].text.length){if(L="after_br",(N=F+1)>=O.length)break}else O.splice(N,1),N--;else N>=O.length||"br"===O[N].kind?(L="before_br",F=N,N--):N++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var i=t.contents.length;i--;)e(t.contents[i])&&t.contents.splice(i,1);return 0===t.contents.length}}(p)}return"div"===p.kind&&l.byName.backgroundImage.qname in p.styleAttrs||"br"===p.kind||"contents"in p&&0<p.contents.length||"span"===p.kind&&null!==p.text||"region"===p.kind&&"always"===p.styleAttrs[l.byName.showBackground.qname]?{region_id:f,element:p}:null}function r(e){this.contents=[],this.aspectRatio=e.aspectRatio}function a(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function o(e,t){if(e&&e.error&&e.error(t))throw t}var s,l;s=void 0===i?this.imscISD={}:i,"undefined"==typeof imscNames?e(17):imscNames,l="undefined"==typeof imscStyles?e(18):imscStyles,s.generateISD=function(e,t,i){var a=new r(e),o={};for(var s in e.head.layout.regions){var l=n(e,t,e.head.layout.regions[s],e.body,null,"",e.head.layout.regions[s],i,o);null!==l&&a.contents.push(l.element)}return a}},{17:17,18:18}],16:[function(e,t,i){i.generateISD=e(15).generateISD,i.fromXML=e(13).fromXML,i.renderHTML=e(14).render},{13:13,14:14,15:15}],17:[function(e,t,i){var n;(n=void 0===i?this.imscNames={}:i).ns_tt="http://www.w3.org/ns/ttml",n.ns_tts="http://www.w3.org/ns/ttml#styling",n.ns_ttp="http://www.w3.org/ns/ttml#parameter",n.ns_xml="http://www.w3.org/XML/1998/namespace",n.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",n.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",n.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",n.ns_ebutts="urn:ebu:tt:style"},{}],18:[function(e,t,i){!function(e,t,i){function n(e,t,i,n,r,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=r,this.animatable=a,this.initial=i,this.applies=n,this.parse=o,this.compute=s}for(var r in e.all=[new n(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,i.parseColor,null),new n(t.ns_tts,"color","white",["span"],!0,!0,i.parseColor,null),new n(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new n(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=i.parseLength(t[0]),r=i.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,i,n){var r,a;if("auto"===n)r=1;else if("%"===n.h.unit)r=n.h.value/100;else{if("px"!==n.h.unit)return null;r=n.h.value/e.pxDimensions.h}if("auto"===n)a=1;else if("%"===n.w.unit)a=n.w.value/100;else{if("px"!==n.w.unit)return null;a=n.w.value/e.pxDimensions.w}return{h:r,w:a}}),new n(t.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),i=[];for(var n in t)"'"!==t[n].charAt(0)&&'"'!==t[n].charAt(0)&&"default"===t[n]?i.push("monospaceSerif"):i.push(t[n]);return i},null),new n(t.ns_tts,"fontSize","1c",["span"],!0,!0,i.parseLength,function(t,i,n,r){var a;if("%"===r.unit)a=null!==i?i.styleAttrs[e.byName.fontSize.qname]*r.value/100:r.value/100/t.cellResolution.h;else if("em"===r.unit)a=null!==i?i.styleAttrs[e.byName.fontSize.qname]*r.value:r.value/t.cellResolution.h;else if("c"===r.unit)a=r.value/t.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/t.pxDimensions.h}return a}),new n(t.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:i.parseLength(e)},function(t,i,n,r){var a;if("normal"===r)a=r;else if("%"===r.unit)a=n.styleAttrs[e.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)a=n.styleAttrs[e.byName.fontSize.qname]*r.value;else if("c"===r.unit)a=r.value/t.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/t.pxDimensions.h}return a}),new n(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new n(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=i.parseLength(t[0]),r=i.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,i,n){var r,a;if("auto"===n)r=0;else if("%"===n.h.unit)r=n.h.value/100;else{if("px"!==n.h.unit)return null;r=n.h.value/e.pxDimensions.h}if("auto"===n)a=0;else if("%"===n.w.unit)a=n.w.value/100;else{if("px"!==n.w.unit)return null;a=n.w.value/e.pxDimensions.w}return{h:r,w:a}}),new n(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n=[];for(var r in t){var a=i.parseLength(t[r]);if(!a)return null;n.push(a)}return n},function(t,i,n,r){var a;if(1===r.length)a=[r[0],r[0],r[0],r[0]];else if(2===r.length)a=[r[0],r[1],r[0],r[1]];else if(3===r.length)a=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;a=[r[0],r[1],r[2],r[3]]}var o=n.styleAttrs[e.byName.writingMode.qname];if("lrtb"===o||"lr"===o)a=[a[0],a[3],a[2],a[1]];else if("rltb"===o||"rl"===o)a=[a[0],a[1],a[2],a[3]];else if("tblr"===o)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==o&&"tb"!==o)return null;a=[a[3],a[2],a[1],a[0]]}var s=[];for(var l in a)if(0===a[l].value)s[l]=0;else if("%"===a[l].unit)s[l]="0"===l||"2"===l?n.styleAttrs[e.byName.extent.qname].h*a[l].value/100:n.styleAttrs[e.byName.extent.qname].w*a[l].value/100;else if("em"===a[l].unit)s[l]=n.styleAttrs[e.byName.fontSize.qname]*a[l].value;else if("c"===a[l].unit)s[l]=a[l].value/t.cellResolution.h;else{if("px"!==a[l].unit)return null;s[l]="0"===l||"2"===l?a[l].value/t.pxDimensions.h:a[l].value/t.pxDimensions.w}return s}),new n(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,i,n){return"left"===n?"start":"right"===n?"end":n}),new n(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new n(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;var r=i.parseColor(n[0]);if(null!==(t.color=r)&&n.shift(),1!==n.length)return null;var a=i.parseLength(n[0]);return a?(t.thickness=a,t):null},function(t,i,n,r){if("none"===r)return r;var a={};if(null===r.color?a.color=n.styleAttrs[e.byName.color.qname]:a.color=r.color,"%"===r.thickness.unit)a.thickness=n.styleAttrs[e.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)a.thickness=n.styleAttrs[e.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)a.thickness=r.thickness.value/t.cellResolution.h;else{if("px"!==r.thickness.unit)return null;a.thickness=r.thickness.value/t.pxDimensions.h}return a}),new n(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new n(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new n(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,i.parseLength,function(e,t,i,n){return"c"===n.unit?n.value/e.cellResolution.h:null}),new n(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new n(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new n(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new n(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],e.byQName={},e.all)e.byQName[e.all[r].qname]=e.all[r];for(var a in e.byName={},e.all)e.byName[e.all[a].name]=e.all[a]}(void 0===i?this.imscStyles={}:i,"undefined"==typeof imscNames?e(17):imscNames,"undefined"==typeof imscUtils?e(19):imscUtils)},{17:17,19:19}],19:[function(e,t,i){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var a,o=null,s=r[e.toLowerCase()];return void 0!==s?o=s:null!==(a=t.exec(e))?o=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=i.exec(e))?o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=n.exec(e))&&(o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),o};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,i=null;return null!==(t=a.exec(e))&&(i={value:parseFloat(t[1]),unit:t[2]}),i}}(void 0===i?this.imscUtils={}:i)},{}],20:[function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],21:[function(e,t){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],22:[function(e,t){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,n)});case 4:return e.nextTick(function(){t.call(null,i,n,r)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick(function(){t.apply(null,a)})}}}:t.exports=e}).call(this,e(23))},{23:23}],23:[function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(){p&&h&&(p=!1,h.length?f=h.concat(f):g=-1,f.length&&o())}function o(){if(!p){var e=r(a);p=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,p=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var d,c,u=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var h,f=[],p=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new s(e,t)),1!==f.length||p||r(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(){return[]},u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],24:[function(e,t){t.exports=e(25)},{25:25}],25:[function(e,t){"use strict";function i(e){return this instanceof i?(l.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",n),void 0):new i(e)}function n(){this.allowHalfOpen||this._writableState.ended||a.nextTick(r,this)}function r(e){e.end()}var a=e(22),o=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};t.exports=i;var s=e(33);s.inherits=e(34);var l=e(27),d=e(29);s.inherits(i,l);for(var c=o(d.prototype),u=0;u<c.length;u++){var h=c[u];i.prototype[h]||(i.prototype[h]=d.prototype[h])}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),i.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},{22:22,27:27,29:29,33:33,34:34}],26:[function(e,t){"use strict";function i(e){return this instanceof i?void n.call(this,e):new i(e)}t.exports=i;var n=e(28),r=e(33);r.inherits=e(34),r.inherits(i,n),i.prototype._transform=function(e,t,i){i(null,e)}},{28:28,33:33,34:34}],27:[function(e,t){(function(i,n){"use strict";function r(e,t){return e.listeners(t).length}function a(t,i){t=t||{};var n=i instanceof(E=E||e(25));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(D=D||e(35).StringDecoder,this.decoder=new D(t.encoding),this.encoding=t.encoding)}function o(t){return E=E||e(25),this instanceof o?(this._readableState=new a(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),S.call(this),void 0):new o(t)}function s(e,t,i,n,r){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,c(e)}}(e,o)):(r||(a=function(e,t){var i;return function(e){return C.isBuffer(e)||e instanceof x}(t)||"string"==typeof t||void 0===t||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(o,t)),a?e.emit("error",a):o.objectMode||t&&0<t.length?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===C.prototype||(t=function(e){return C.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!i?(t=o.decoder.write(t),o.objectMode||0!==t.length?l(e,o,t,!1):h(e,o)):l(e,o,t,!1))):n||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function l(e,t,i,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&c(e)),h(e,t)}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return O<=e?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?w.nextTick(u,e):u(e))}function u(e){I("emit readable"),e.emit("readable"),m(e)}function h(e,t){t.readingMore||(t.readingMore=!0,w.nextTick(f,e,t))}function f(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}function p(e){I("readable nexttick read 0"),e.read(0)}function g(e,t){t.reading||(I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&null!==e.read(););}function v(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):i=function(e,t,i){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():i?function(e,t){var i=t.head,n=1,r=i.data;for(e-=r.length;i=i.next;){var a=i.data,o=e>a.length?a.length:e;if(r+=o===a.length?a:a.slice(0,e),0===(e-=o)){o===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i).data=a.slice(o);break}++n}return t.length-=n,r}(e,t):function(e,t){var i=C.allocUnsafe(e),n=t.head,r=1;for(n.data.copy(i),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(i,i.length-e,0,o),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(o);break}++r}return t.length-=r,i}(e,t),n}(e,t.buffer,t.decoder),i);var i}function y(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,w.nextTick(b,t,e))}function b(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function _(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}var w=e(22);t.exports=o;var E,T=e(21);o.ReadableState=a,e(10).EventEmitter;var S=e(32),C=e(40).Buffer,x=n.Uint8Array||function(){},k=e(33);k.inherits=e(34);var A=e(7),I=void 0;I=A&&A.debuglog?A.debuglog("stream"):function(){};var D,M=e(30),P=e(31);k.inherits(o,S);var R=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=P.destroy,o.prototype._undestroy=P.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=C.from(e,t),t=""),i=!0),s(this,e,t,!1,i)},o.prototype.unshift=function(e){return s(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return D=D||e(35).StringDecoder,this._readableState.decoder=new D(t),this._readableState.encoding=t,this};var O=8388608;o.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?y(this):c(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&y(this),null;var n,r=t.needReadable;return I("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&I("length less than watermark",r=!0),t.ended||t.reading?I("reading or ended",r=!1):r&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(i,t))),null===(n=0<e?v(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&y(this)),null!==n&&this.emit("data",n),n},o.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function n(t,i){I("onunpipe"),t===u&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,I("cleanup"),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",n),u.removeListener("end",a),u.removeListener("end",c),u.removeListener("data",o),g=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function a(){I("onend"),e.end()}function o(t){I("ondata"),(v=!1)!==e.write(t)||v||((1===h.pipesCount&&h.pipes===e||1<h.pipesCount&&-1!==_(h.pipes,e))&&!g&&(I("false write response, pause",u._readableState.awaitDrain),u._readableState.awaitDrain++,v=!0),u.pause())}function s(t){I("onerror",t),c(),e.removeListener("error",s),0===r(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",d),c()}function d(){I("onfinish"),e.removeListener("close",l),c()}function c(){I("unpipe"),u.unpipe(e)}var u=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,I("pipe count=%d opts=%j",h.pipesCount,t);var f=t&&!1===t.end||e===i.stdout||e===i.stderr?c:a;h.endEmitted?w.nextTick(f):u.once("end",f),e.on("unpipe",n);var p=function(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,m(e))}}(u);e.on("drain",p);var g=!1,v=!1;return u.on("data",o),function(e,t,i){return"function"==typeof e.prependListener?e.prependListener(t,i):void(e._events&&e._events[t]?T(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i))}(e,"error",s),e.once("close",l),e.once("finish",d),e.emit("pipe",u),h.flowing||(I("pipe resume"),u.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)n[a].emit("unpipe",this,i);return this}var o=_(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},o.prototype.addListener=o.prototype.on=function(e,t){var i=S.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&c(this):w.nextTick(p,this))}return i},o.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,w.nextTick(g,e,t))}(this,e)),this},o.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this,i=this._readableState,n=!1;for(var r in e.on("end",function(){if(I("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(r){I("wrapped data"),i.decoder&&(r=i.decoder.write(r)),i.objectMode&&null==r||(i.objectMode||r&&r.length)&&(t.push(r)||(n=!0,e.pause()))}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var a=0;a<R.length;a++)e.on(R[a],this.emit.bind(this,R[a]));return this._read=function(t){I("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),o._fromList=v}).call(this,e(23),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,21:21,22:22,23:23,25:25,30:30,31:31,32:32,33:33,34:34,35:35,40:40,7:7}],28:[function(e,t){"use strict";function i(e){return this instanceof i?(a.call(this,e),this._transformState={afterTransform:function(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=t&&this.push(t),n(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",n),void 0):new i(e)}function n(){var e=this;"function"==typeof this._flush?this._flush(function(t,i){
r(e,t,i)}):r(this,null,null)}function r(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var a=e(25),o=e(33);o.inherits=e(34),o.inherits(i,a),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(e,t){var i=this;a.prototype._destroy.call(this,e,function(e){t(e),i.emit("close")})}},{25:25,33:33,34:34}],29:[function(e,t){(function(i,n,r){"use strict";function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(i),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function o(){}function s(t,i){m=m||e(25),t=t||{};var n=i instanceof m;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=t.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var l=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,n=i.sync,r=i.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,n,r){--t.pendingcb,i?(g.nextTick(r,n),g.nextTick(p,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(r(n),e._writableState.errorEmitted=!0,e.emit("error",n),p(e,t))}(e,i,n,t,r);else{var a=h(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||u(e,i),n?v(c,e,i,a,r):c(e,i,a,r)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function l(t){return m=m||e(25),b.call(l,this)||this instanceof m?(this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t["final"]&&(this._final=t["final"])),w.call(this),void 0):new l(t)}function d(e,t,i,n,r,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,i?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function c(e,t,i,n){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),p(e,t)}function u(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,r=new Array(n),o=t.corkedRequestsFree;o.entry=i;for(var s=0,l=!0;i;)(r[s]=i).isBuf||(l=!1),i=i.next,s+=1;r.allBuffers=l,d(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,u=i.encoding,h=i.callback;if(d(e,t,!1,t.objectMode?1:c.length,c,u,h),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function h(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function f(e,t){e._final(function(i){t.pendingcb--,i&&e.emit("error",i),t.prefinished=!0,e.emit("prefinish"),p(e,t)})}function p(e,t){var i=h(t);return i&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,g.nextTick(f,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}var g=e(22);t.exports=l;var m,v=!i.browser&&-1<["v0.10","v0.9."].indexOf(i.version.slice(0,5))?r:g.nextTick;l.WritableState=s;var y=e(33);y.inherits=e(34);var b,_={deprecate:e(46)},w=e(32),E=e(40).Buffer,T=n.Uint8Array||function(){},S=e(31);y.inherits(l,w),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===l&&e&&e._writableState instanceof s}})):b=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,i){var n=this._writableState,r=!1,a=!n.objectMode&&function(e){return E.isBuffer(e)||e instanceof T}(e);return a&&!E.isBuffer(e)&&(e=function(e){return E.from(e)}(e)),"function"==typeof t&&(i=t,t=null),t=a?"buffer":t||n.defaultEncoding,"function"!=typeof i&&(i=o),n.ended?function(e,t){var i=new Error("write after end");e.emit("error",i),g.nextTick(t,i)}(this,i):(a||function(e,t,i,n){var r=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),g.nextTick(n,a),r=!1),r}(this,n,e,i))&&(n.pendingcb++,r=function(e,t,i,n,r,a){if(!i){var o=function(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=E.from(t,i)),t}(t,n,r);n!==o&&(i=!0,r="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,s,n,r,a);return l}(this,n,a,e,t,i)),r},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||u(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(e,t,i){i(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,i){var n=this._writableState;"function"==typeof e?(i=e,t=e=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,i){t.ending=!0,p(e,t),i&&(t.finished?g.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}(this,n,i)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=S.destroy,l.prototype._undestroy=S.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e(23),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e(45).setImmediate)},{22:22,23:23,25:25,31:31,32:32,33:33,34:34,40:40,45:45,46:46}],30:[function(e,t){"use strict";function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}var n=e(40).Buffer,r=e(7);t.exports=(i.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i},i.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,i,r,a=n.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,i=a,r=s,t.copy(i,r),s+=o.data.length,o=o.next;return a},i),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{40:40,7:7}],31:[function(e,t){"use strict";function i(e,t){e.emit("error",t)}var n=e(22);t.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{22:22}],32:[function(e,t){t.exports=e(10).EventEmitter},{10:10}],33:[function(e,t,i){(function(e){function t(e){return Object.prototype.toString.call(e)}i.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},i.isBoolean=function(e){return"boolean"==typeof e},i.isNull=function(e){return null===e},i.isNullOrUndefined=function(e){return null==e},i.isNumber=function(e){return"number"==typeof e},i.isString=function(e){return"string"==typeof e},i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=function(e){return void 0===e},i.isRegExp=function(e){return"[object RegExp]"===t(e)},i.isObject=function(e){return"object"==typeof e&&null!==e},i.isDate=function(e){return"[object Date]"===t(e)},i.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},i.isFunction=function(e){return"function"==typeof e},i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},i.isBuffer=e.isBuffer}).call(this,{isBuffer:e(20)})},{20:20}],34:[function(e,t){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){function i(){}e.super_=t,i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],35:[function(e,t,i){"use strict";function n(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(h.isEncoding===f||!f(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=s,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=c,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(t)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,i=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function l(e,t){var i=(e.length-t)%3;return 0==i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1==i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function u(e){return e&&e.length?this.write(e):""}var h=e(40).Buffer,f=h.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};(i.StringDecoder=n).prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},n.prototype.text=function(e,t){var i=function(e,t,i){var n=t.length-1;if(n<i)return 0;var a=r(t[n]);return 0<=a?(0<a&&(e.lastNeed=a-1),a):--n<i||-2===a?0:0<=(a=r(t[n]))?(0<a&&(e.lastNeed=a-2),a):--n<i||-2===a?0:0<=(a=r(t[n]))?(0<a&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},n.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{40:40}],36:[function(e,t){t.exports=e(37).PassThrough},{37:37}],37:[function(e,t,i){(((i=t.exports=e(27)).Stream=i).Readable=i).Writable=e(29),i.Duplex=e(25),i.Transform=e(28),i.PassThrough=e(26)},{25:25,26:26,27:27,28:28,29:29}],38:[function(e,t){t.exports=e(37).Transform},{37:37}],39:[function(e,t){t.exports=e(29)},{29:29}],40:[function(e,t,i){function n(e,t){for(var i in e)t[i]=e[i]}function r(e,t,i){return o(e,t,i)}var a=e(8),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=a:(n(a,i),i.Buffer=r),n(o,r),r.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,i)},r.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof i?n.fill(t,i):n.fill(t):n.fill(0),n},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},{8:8}],41:[function(e,t,i){(function(t){!function(i){function n(e,t){if(!(this instanceof n))return new n(e,t);var r=this;!function(e){for(var t=0,i=C.length;t<i;t++)e[C[t]]=""}(r),r.q=r.c="",r.bufferCheckPosition=i.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=z.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(L)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),l(r,"onready")}function r(e,t){if(!(this instanceof r))return new r(e,t);S.apply(this),this._parser=new n(e,t),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(e){i.emit("error",e),i._parser.error=null},this._decoder=null,x.forEach(function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){return t?void i.on(e,t):(i.removeAllListeners(e),i._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function a(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function o(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function s(e,t){return!o(e,t)}function l(e,t,i){e[t]&&e[t](i)}function d(e,t,i){e.textNode&&c(e),l(e,t,i)}function c(e){e.textNode=u(e.opt,e.textNode),e.textNode&&l(e,"ontext",e.textNode),e.textNode=""}function u(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function h(e,t){return c(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,l(e,"onerror",t),e}function f(e){return e.sawRoot&&!e.closedRoot&&p(e,"Unclosed root tag"),e.state!==z.BEGIN&&e.state!==z.BEGIN_WHITESPACE&&e.state!==z.TEXT&&h(e,"Unexpected end"),c(e),e.c="",e.closed=!0,l(e,"onend"),n.call(e,e.strict,e.opt),e}function p(e,t){if("object"!=typeof e||!(e instanceof n))throw new Error("bad call to strictFail");e.strict&&h(e,t)}function g(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,i=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(i.ns=t.ns),e.attribList.length=0,d(e,"onopentagstart",i)}function m(e,t){var i=e.indexOf(":")<0?["",e]:e.split(":"),n=i[0],r=i[1];return t&&"xmlns"===e&&(n="xmlns",r=""),{prefix:n,local:r}}function v(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=m(e.attribName,!0),i=t.prefix,n=t.local;if("xmlns"===i)if("xml"===n&&e.attribValue!==O)p(e,"xml: prefix must be bound to "+O+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==N)p(e,"xmlns: prefix must be bound to "+N+"\nActual: "+e.attribValue);else{var r=e.tag,a=e.tags[e.tags.length-1]||e;r.ns===a.ns&&(r.ns=Object.create(a.ns)),r.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,d(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function y(e,t){if(e.opt.xmlns){var i=e.tag,n=m(e.tagName);i.prefix=n.prefix,i.local=n.local,i.uri=i.ns[n.prefix]||"",i.prefix&&!i.uri&&(p(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),i.uri=n.prefix);var r=e.tags[e.tags.length-1]||e;i.ns&&r.ns!==i.ns&&Object.keys(i.ns).forEach(function(t){d(e,"onopennamespace",{prefix:t,uri:i.ns[t]})});for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],l=s[0],c=s[1],u=m(l,!0),h=u.prefix,f=u.local,g=""===h?"":i.ns[h]||"",v={name:l,value:c,prefix:h,local:f,uri:g};h&&"xmlns"!==h&&!g&&(p(e,"Unbound namespace prefix: "+JSON.stringify(h)),v.uri=h),e.tag.attributes[l]=v,d(e,"onattribute",v)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),d(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=z.TEXT:e.state=z.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function b(e){if(!e.tagName)return p(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=z.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=z.SCRIPT);d(e,"onscript",e.script),e.script=""}var t=e.tags.length,i=e.tagName;e.strict||(i=i[e.looseCase]());for(var n=i;t--&&e.tags[t].name!==n;)p(e,"Unexpected close tag");if(t<0)return p(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=z.TEXT);e.tagName=i;for(var r=e.tags.length;r-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,d(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(t){var i=a.ns[t];d(e,"onclosenamespace",{prefix:t,uri:i})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=z.TEXT}function _(e){var t,i=e.entity,n=i.toLowerCase(),r="";return e.ENTITIES[i]?e.ENTITIES[i]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(i=n).charAt(0)&&(r="x"===i.charAt(1)?(i=i.slice(2),(t=parseInt(i,16)).toString(16)):(i=i.slice(1),(t=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),r.toLowerCase()!==i?(p(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function w(e,t){"<"===t?(e.state=z.OPEN_WAKA,e.startTagPosition=e.position):s(k,t)&&(p(e,"Non-whitespace before first tag."),e.textNode=t,e.state=z.TEXT)}function E(e,t){var i="";return t<e.length&&(i=e.charAt(t)),i}function T(){var e,t,i=[],n=-1,r=arguments.length;if(!r)return"";for(var a="";++n<r;){var o=Number(arguments[n]);if(!isFinite(o)||o<0||1114111<o||$(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?i.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,i.push(e,t)),(n+1===r||16384<i.length)&&(a+=U.apply(null,i),i.length=0)}return a}i.parser=function(e,t){return new n(e,t)},i.SAXParser=n,i.SAXStream=r,i.createStream=function(e,t){return new r(e,t)},i.MAX_BUFFER_LENGTH=65536;var S,C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}),n.prototype={end:function(){f(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return h(t,"Cannot write after close. Assign an onready handler.");if(null===e)return f(t);"object"==typeof e&&(e=e.toString());for(var n=0,r="";r=E(e,n++),t.c=r;)switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case z.BEGIN:if(t.state=z.BEGIN_WHITESPACE,"\ufeff"===r)continue;w(t,r);continue;case z.BEGIN_WHITESPACE:w(t,r);continue;case z.TEXT:if(t.sawRoot&&!t.closedRoot){for(var a=n-1;r&&"<"!==r&&"&"!==r;)(r=E(e,n++))&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(a,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(!s(k,r)||t.sawRoot&&!t.closedRoot||p(t,"Text data outside of root node."),"&"===r?t.state=z.TEXT_ENTITY:t.textNode+=r):(t.state=z.OPEN_WAKA,t.startTagPosition=t.position);continue;case z.SCRIPT:"<"===r?t.state=z.SCRIPT_ENDING:t.script+=r;continue;case z.SCRIPT_ENDING:"/"===r?t.state=z.CLOSE_TAG:(t.script+="<"+r,t.state=z.SCRIPT);continue;case z.OPEN_WAKA:if("!"===r)t.state=z.SGML_DECL,t.sgmlDecl="";else if(o(k,r));else if(o(F,r))t.state=z.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=z.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=z.PROC_INST,t.procInstName=t.procInstBody="";else{if(p(t,"Unencoded <"),t.startTagPosition+1<t.position){var l=t.position-t.startTagPosition;r=new Array(l).join(" ")+r}t.textNode+="<"+r,t.state=z.TEXT}continue;case z.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===P?(d(t,"onopencdata"),t.state=z.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=z.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===R?(t.state=z.DOCTYPE,(t.doctype||t.sawRoot)&&p(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(d(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=z.TEXT):(o(D,r)&&(t.state=z.SGML_DECL_QUOTED),t.sgmlDecl+=r);continue;case z.SGML_DECL_QUOTED:r===t.q&&(t.state=z.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case z.DOCTYPE:">"===r?(t.state=z.TEXT,d(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=z.DOCTYPE_DTD:o(D,r)&&(t.state=z.DOCTYPE_QUOTED,t.q=r));continue;case z.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=z.DOCTYPE);continue;case z.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=z.DOCTYPE:o(D,r)&&(t.state=z.DOCTYPE_DTD_QUOTED,t.q=r);continue;case z.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=z.DOCTYPE_DTD,t.q="");continue;case z.COMMENT:"-"===r?t.state=z.COMMENT_ENDING:t.comment+=r;continue;case z.COMMENT_ENDING:"-"===r?(t.state=z.COMMENT_ENDED,t.comment=u(t.opt,t.comment),t.comment&&d(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=z.COMMENT);continue;case z.COMMENT_ENDED:">"!==r?(p(t,"Malformed comment"),t.comment+="--"+r,t.state=z.COMMENT):t.state=z.TEXT;continue;case z.CDATA:"]"===r?t.state=z.CDATA_ENDING:t.cdata+=r;continue;case z.CDATA_ENDING:"]"===r?t.state=z.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=z.CDATA);continue;case z.CDATA_ENDING_2:">"===r?(t.cdata&&d(t,"oncdata",t.cdata),d(t,"onclosecdata"),t.cdata="",t.state=z.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=z.CDATA);continue;case z.PROC_INST:"?"===r?t.state=z.PROC_INST_ENDING:o(k,r)?t.state=z.PROC_INST_BODY:t.procInstName+=r;continue;case z.PROC_INST_BODY:if(!t.procInstBody&&o(k,r))continue;"?"===r?t.state=z.PROC_INST_ENDING:t.procInstBody+=r;continue;case z.PROC_INST_ENDING:">"===r?(d(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=z.TEXT):(t.procInstBody+="?"+r,t.state=z.PROC_INST_BODY);continue;case z.OPEN_TAG:o(j,r)?t.tagName+=r:(g(t),">"===r?y(t):"/"===r?t.state=z.OPEN_TAG_SLASH:(s(k,r)&&p(t,"Invalid character in tag name"),t.state=z.ATTRIB));continue;case z.OPEN_TAG_SLASH:">"===r?(y(t,!0),b(t)):(p(t,"Forward-slash in opening tag not followed by >"),t.state=z.ATTRIB);continue;case z.ATTRIB:if(o(k,r))continue;">"===r?y(t):"/"===r?t.state=z.OPEN_TAG_SLASH:o(F,r)?(t.attribName=r,t.attribValue="",t.state=z.ATTRIB_NAME):p(t,"Invalid attribute name");continue;case z.ATTRIB_NAME:"="===r?t.state=z.ATTRIB_VALUE:">"===r?(p(t,"Attribute without value"),t.attribValue=t.attribName,v(t),y(t)):o(k,r)?t.state=z.ATTRIB_NAME_SAW_WHITE:o(j,r)?t.attribName+=r:p(t,"Invalid attribute name");continue;case z.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=z.ATTRIB_VALUE;else{if(o(k,r))continue;p(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",d(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?y(t):o(F,r)?(t.attribName=r,t.state=z.ATTRIB_NAME):(p(t,"Invalid attribute name"),t.state=z.ATTRIB)}continue;case z.ATTRIB_VALUE:if(o(k,r))continue;o(D,r)?(t.q=r,t.state=z.ATTRIB_VALUE_QUOTED):(p(t,"Unquoted attribute value"),t.state=z.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case z.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=z.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}v(t),t.q="",t.state=z.ATTRIB_VALUE_CLOSED;continue;case z.ATTRIB_VALUE_CLOSED:o(k,r)?t.state=z.ATTRIB:">"===r?y(t):"/"===r?t.state=z.OPEN_TAG_SLASH:o(F,r)?(p(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=z.ATTRIB_NAME):p(t,"Invalid attribute name");continue;case z.ATTRIB_VALUE_UNQUOTED:if(s(M,r)){"&"===r?t.state=z.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}v(t),">"===r?y(t):t.state=z.ATTRIB;continue;case z.CLOSE_TAG:if(t.tagName)">"===r?b(t):o(j,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=z.SCRIPT):(s(k,r)&&p(t,"Invalid tagname in closing tag"),t.state=z.CLOSE_TAG_SAW_WHITE);else{if(o(k,r))continue;s(F,r)?t.script?(t.script+="</"+r,t.state=z.SCRIPT):p(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case z.CLOSE_TAG_SAW_WHITE:if(o(k,r))continue;">"===r?b(t):p(t,"Invalid characters in closing tag");continue;case z.TEXT_ENTITY:case z.ATTRIB_VALUE_ENTITY_Q:case z.ATTRIB_VALUE_ENTITY_U:var m,T;switch(t.state){case z.TEXT_ENTITY:m=z.TEXT,T="textNode";break;case z.ATTRIB_VALUE_ENTITY_Q:m=z.ATTRIB_VALUE_QUOTED,T="attribValue";break;case z.ATTRIB_VALUE_ENTITY_U:m=z.ATTRIB_VALUE_UNQUOTED,T="attribValue"}";"===r?(t[T]+=_(t),t.entity="",t.state=m):o(t.entity.length?H:B,r)?t.entity+=r:(p(t,"Invalid character in entity name"),t[T]+="&"+t.entity+r,t.entity="",t.state=m);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(i.MAX_BUFFER_LENGTH,10),n=0,r=0,a=C.length;r<a;r++){var o=e[C[r]].length;if(t<o)switch(C[r]){case"textNode":c(e);break;case"cdata":d(e,"oncdata",e.cdata),e.cdata="";break;case"script":d(e,"onscript",e.script),e.script="";break;default:h(e,"Max buffer length exceeded: "+C[r])}n=Math.max(n,o)}var s=i.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=s+e.position}(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(e){c(e),""!==e.cdata&&(d(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(d(e,"onscript",e.script),e.script="")}(this)}};try{S=e(42).Stream}catch(e){S=function(){}}var x=i.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});(r.prototype=Object.create(S.prototype,{constructor:{value:r}})).write=function(i){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(i)){if(!this._decoder){var n=e(44).StringDecoder;this._decoder=new n("utf8")}i=this._decoder.write(i)}return this._parser.write(i.toString()),this.emit("data",i),!0},r.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},r.prototype.on=function(e,t){var i=this;return i._parser["on"+e]||-1===x.indexOf(e)||(i._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),S.prototype.on.call(i,e,t)};var k="\r\n\t ",A="0124356789",I="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",D="'\"",M=k+">",P="[CDATA[",R="DOCTYPE",O="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",L={xml:O,xmlns:N};k=a(k),A=a(A),I=a(I);var F=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,B=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,H=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;D=a(D),M=a(M);var U,$,z=0;for(var q in i.STATE={BEGIN:z++,BEGIN_WHITESPACE:z++,TEXT:z++,TEXT_ENTITY:z++,OPEN_WAKA:z++,SGML_DECL:z++,SGML_DECL_QUOTED:z++,DOCTYPE:z++,DOCTYPE_QUOTED:z++,DOCTYPE_DTD:z++,DOCTYPE_DTD_QUOTED:z++,COMMENT_STARTING:z++,COMMENT:z++,COMMENT_ENDING:z++,COMMENT_ENDED:z++,CDATA:z++,CDATA_ENDING:z++,CDATA_ENDING_2:z++,PROC_INST:z++,PROC_INST_BODY:z++,PROC_INST_ENDING:z++,OPEN_TAG:z++,OPEN_TAG_SLASH:z++,ATTRIB:z++,ATTRIB_NAME:z++,ATTRIB_NAME_SAW_WHITE:z++,ATTRIB_VALUE:z++,ATTRIB_VALUE_QUOTED:z++,ATTRIB_VALUE_CLOSED:z++,ATTRIB_VALUE_UNQUOTED:z++,ATTRIB_VALUE_ENTITY_Q:z++,ATTRIB_VALUE_ENTITY_U:z++,CLOSE_TAG:z++,CLOSE_TAG_SAW_WHITE:z++,SCRIPT:z++,SCRIPT_ENDING:z++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={
amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(e){var t=i.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;i.ENTITIES[e]=n}),i.STATE)i.STATE[i.STATE[q]]=q;z=i.STATE,String.fromCodePoint||(U=String.fromCharCode,$=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T)}(void 0===i?this.sax={}:i)}).call(this,e(8).Buffer)},{42:42,44:44,8:8}],42:[function(e,t){function i(){n.call(this)}t.exports=i;var n=e(10).EventEmitter;e(43)(i,n),i.Readable=e(37),i.Writable=e(39),i.Duplex=e(24),i.Transform=e(38),i.PassThrough=e(36),(i.Stream=i).prototype.pipe=function(e,t){function i(t){e.writable&&!1===e.write(t)&&d.pause&&d.pause()}function r(){d.readable&&d.resume&&d.resume()}function a(){c||(c=!0,e.end())}function o(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){d.removeListener("data",i),e.removeListener("drain",r),d.removeListener("end",a),d.removeListener("close",o),d.removeListener("error",s),e.removeListener("error",s),d.removeListener("end",l),d.removeListener("close",l),e.removeListener("close",l)}var d=this;d.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(d.on("end",a),d.on("close",o));var c=!1;return d.on("error",s),e.on("error",s),d.on("end",l),d.on("close",l),e.on("close",l),e.emit("pipe",d),e}},{10:10,24:24,36:36,37:37,38:38,39:39,43:43}],43:[function(e,t,i){arguments[4][34][0].apply(i,arguments)},{34:34}],44:[function(e,t,i){arguments[4][35][0].apply(i,arguments)},{35:35,40:40}],45:[function(e,t,i){(function(t,n){function r(e,t){this._id=e,this._clearFn=t}var a=e(23).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,l={},d=0;i.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i.setImmediate="function"==typeof t?t:function(e){var t=d++,n=!(arguments.length<2)&&s.call(arguments,1);return l[t]=!0,a(function(){l[t]&&(n?e.apply(null,n):e.call(null),i.clearImmediate(t))}),t},i.clearImmediate="function"==typeof n?n:function(e){delete l[e]}}).call(this,e(45).setImmediate,e(45).clearImmediate)},{23:23,45:45}],46:[function(e,t){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(e){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function t(e,t){var i="",n=null;g&&(n=(new Date).getTime(),i+="["+(n-v)+"]"),m&&t&&t.getClassName&&(i+="["+t.getClassName()+"]",t.getType&&(i+="["+t.getType()+"]")),0<i.length&&(i+=" ");for(var a=arguments.length,l=Array(2<a?a-2:0),d=2;d<a;d++)l[d-2]=arguments[d];Array.apply(null,l).forEach(function(e){i+=e+" "}),p[e]&&s.get().debug.logLevel>=e&&p[e](i),r.trigger(o["default"].LOG,{message:i,level:e})}var i,n=this.context,r=(0,a["default"])(n).getInstance(),s=(0,l["default"])(n).getInstance(),p=[],g=void 0,m=void 0,v=void 0;return i={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(void 0,[d,this].concat(i))}.bind(e),error:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(void 0,[c,this].concat(i))}.bind(e),warn:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(void 0,[u,this].concat(i))}.bind(e),info:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(void 0,[h,this].concat(i))}.bind(e),debug:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(void 0,[f,this].concat(i))}.bind(e)}},setLogTimestampVisible:function(e){g=e},setCalleeNameVisible:function(e){m=e},setLogLevel:function(e){var t={debug:{logLevel:e}};s.update(t)},getLogLevel:function(){return s.get().debug.logLevel}},m=g=!0,v=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(p[d]=e(window.console.error),p[c]=e(window.console.error),p[u]=e(window.console.warn),p[h]=e(window.console.info),p[f]=e(window.console.debug)),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(48)),o=n(e(56)),s=n(e(49)),l=n(e(50)),d=1,c=2,u=3,h=4,f=5;r.__dashjs_factory_name="Debug";var p=s["default"].getSingletonFactory(r);p.LOG_LEVEL_NONE=0,p.LOG_LEVEL_FATAL=d,p.LOG_LEVEL_ERROR=c,p.LOG_LEVEL_WARNING=u,p.LOG_LEVEL_INFO=h,p.LOG_LEVEL_DEBUG=f,s["default"].updateSingletonFactory(r.__dashjs_factory_name,p),i["default"]=p,t.exports=i["default"]},{48:48,49:49,50:50,56:56}],48:[function(e,t,i){"use strict";function n(){function e(e,i,n){var r=-1;return t[e]&&t[e].some(function(e,t){if(e&&e.callback===i&&(!n||n===e.scope))return r=t,!0}),r}var t={};return{on:function(i,n,r){var a=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!i)throw new Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw new Error("listener must be a function: "+n);if(!(0<=e(i,n,r))){t[i]=t[i]||[];var o={callback:n,scope:r,priority:a};t[i].some(function(e,n){if(e&&a>e.priority)return t[i].splice(n,0,o),!0})||t[i].push(o)}},off:function(i,n,r){if(i&&n&&t[i]){var a=e(i,n,r);a<0||(t[i][a]=null)}},trigger:function(e,i){if(e&&t[e]){if((i=i||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");i.type=e,t[e]=t[e].filter(function(e){return e}),t[e].forEach(function(e){return e&&e.callback.call(e.scope,i)})}},reset:function(){t={}}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="EventBus";var s=o["default"].getSingletonFactory(n);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,o["default"].updateSingletonFactory(n.__dashjs_factory_name,s),i["default"]=s,t.exports=i["default"]},{49:49}],49:[function(e,t,i){"use strict";function n(e,t){for(var i in l){var n=l[i];if(n.context===e&&n.name===t)return n.instance}return null}function r(e,t){return t[e]}function a(e,t,i){e in i&&(i[e]=t)}function o(e,t,i){var n=void 0,r=e.__dashjs_factory_name,a=t[r];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:s},i);for(var l in n=e.apply({context:t},i),o=o.apply({context:t,factory:s,parent:n},i))n.hasOwnProperty(l)&&(n[l]=o[l])}else n=e.apply({context:t},i);return n.getClassName=function(){return r},n}Object.defineProperty(i,"__esModule",{value:!0});var s,l,d,c,u=(s=void 0,l=[],d={},c={},s={extend:function(e,t,i,n){!n[e]&&t&&(n[e]={instance:t,override:i})},getSingletonInstance:n,setSingletonInstance:function(e,t,i){for(var n in l){var r=l[n];if(r.context===e&&r.name===t)return void(l[n].instance=i)}l.push({name:t,context:e,instance:i})},getSingletonFactory:function(e){var t=r(e.__dashjs_factory_name,d);return t||(t=function(t){var i=void 0;return void 0===t&&(t={}),{getInstance:function(){return(i=i||n(t,e.__dashjs_factory_name))||(i=o(e,t,arguments),l.push({name:e.__dashjs_factory_name,context:t,instance:i})),i}}},d[e.__dashjs_factory_name]=t),t},getSingletonFactoryByName:function(e){return r(e,d)},updateSingletonFactory:function(e,t){a(e,t,d)},getClassFactory:function(e){var t=r(e.__dashjs_factory_name,c);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return o(e,t,arguments)}}},c[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return r(e,c)},updateClassFactory:function(e,t){a(e,t,c)}});i["default"]=u,t.exports=i["default"]},{}],50:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(){var e,t,i={debug:{logLevel:l["default"].LOG_LEVEL_WARNING},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:4,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,bufferPruningInterval:10,bufferToKeep:20,bufferAheadToKeep:80,jumpGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!1,manifestUpdateRetryInterval:100,liveCatchUpMinDrift:.02,liveCatchUpMaxDrift:0,liveCatchUpPlaybackRate:.5,lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},retryIntervals:(e={},r(e,c.HTTPRequest.MPD_TYPE,500),r(e,c.HTTPRequest.XLINK_EXPANSION_TYPE,500),r(e,c.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),r(e,c.HTTPRequest.INIT_SEGMENT_TYPE,1e3),r(e,c.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),r(e,c.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),r(e,c.HTTPRequest.OTHER_TYPE,1e3),e),retryAttempts:(t={},r(t,c.HTTPRequest.MPD_TYPE,3),r(t,c.HTTPRequest.XLINK_EXPANSION_TYPE,1),r(t,c.HTTPRequest.MEDIA_SEGMENT_TYPE,3),r(t,c.HTTPRequest.INIT_SEGMENT_TYPE,3),r(t,c.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),r(t,c.HTTPRequest.INDEX_SEGMENT_TYPE,3),r(t,c.HTTPRequest.OTHER_TYPE,3),t),abr:{movingAverageMethod:d["default"].MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:d["default"].ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useBufferOccupancyABR:!1,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}}}},n=s["default"].clone(i);return{get:function(){return n},update:function(e){"object"==typeof e&&!function e(t,i,n){for(var r in t)t.hasOwnProperty(r)&&i.hasOwnProperty(r)&&("object"==typeof t[r]?e(t[r],i[r],n.slice()+r+"."):i[r]=s["default"].clone(t[r]))}(e,n,"")},reset:function(){n=s["default"].clone(i)}}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(e(49)),s=n(e(51)),l=n(e(47)),d=n(e(109)),c=e(239);a.__dashjs_factory_name="Settings";var u=o["default"].getSingletonFactory(a);i["default"]=u,t.exports=i["default"]},{109:109,239:239,47:47,49:49,51:51}],51:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,null,[{key:"mixin",value:function(e,t,i){var n=void 0,a={};if(e)for(var o in t)t.hasOwnProperty(o)&&(n=t[o],o in e&&(e[o]===n||o in a&&a[o]===n)||("object"==typeof e[o]&&null!==e[o]?e[o]=r.mixin(e[o],n,i):e[o]=i(n)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var i=0,n=e.length;i<n;++i)i in e&&t.push(r.clone(e[i]))}else t={};return r.mixin(t,e,r.clone)}}]),r);i["default"]=a,t.exports=i["default"]},{}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getVersionString=function(){return n};var n="3.0.0"},{}],53:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(54),o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{54:54}],54:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"extend",value:function(e,t){if(e){var i=!!t&&t.override,n=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!i||n&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),r);i["default"]=a,t.exports=i["default"]},{}],55:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(57),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{57:57}],56:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(55),o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{55:55}],57:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"extend",value:function(e,t){if(e){var i=!!t&&t.override,n=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!i||n&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),r);i["default"]=a,t.exports=i["default"]},{}],58:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&S[e.streamInfo.id]?S[e.streamInfo.id][e.index]:null}function t(e,t,n){var r,o=T[0].mpd.manifest,s=E.getAdaptationsForType(o,e,t);if(!s||0===s.length)return null;if(1<s.length&&n){var l=i(n,t);if(C[n.id]&&C[n.id][t])for(var d=0,c=s.length;d<c;d++)if(C[n.id][t].isMediaInfoEqual(l[d]))return s[d];for(d=0,c=s.length;d<c;d++)if(r=s[d],E.getRolesForAdaptation(r).filter(function(e){return e.value===a["default"].MAIN})[0])return s[d]}return s[0]}function i(e,t,i){var r,a=T,o=i,s=[],l=void 0,d=void 0,c=void 0,u=void 0,h=void 0,f=void 0;if(o)y(),a=n(o);else{if(!(0<T.length))return s;o=T[0].mpd.manifest}var v=p(e,a);v&&(f=v.id);var b=E.getAdaptationsForType(o,e.index,t!==x.EMBEDDED_TEXT?t:x.VIDEO);if(!b||0===b.length)return s;for(S[f]=S[f]||E.getAdaptationsForPeriod(v),u=0,r=b.length;u<r;u++)if(l=b[u],c=E.getIndexForAdaptation(l,o,e.index),d=g(S[f][c]),t===x.EMBEDDED_TEXT){var _=d.accessibility.length;for(h=0;h<_;h++)if(d){var w=d.accessibility[h];if(0===w.indexOf("cea-608:")){var C=w.substring(8).split(";");if("CC"===C[0].substring(0,2))for(h=0;h<C.length;h++)m(d=d||g.call(this,S[f][c]),C[h].substring(0,3),C[h].substring(4)),s.push(d),d=null;else for(h=0;h<C.length;h++)m(d=d||g.call(this,S[f][c]),"CC"+(h+1),C[h]),s.push(d),d=null}else 0===w.indexOf("cea-608")&&(m(d,x.CC1,"eng"),s.push(d),d=null)}}else t===x.IMAGE?(d.type=x.IMAGE,s.push(d),d=null):d&&s.push(d);return s}function n(e){return r(u(e))}function r(e){var t=e||T[0].mpd;return E.getRegularPeriods(t)}function u(e){var t=e||T[0].mpd.manifest;return E.getMpd(t)}function f(){T=[],S={},C={}}function p(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n];if(e.id===r.id)return r}return null}function g(e){var t,i=new s["default"],n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return i.id=e.id,i.index=e.index,i.type=e.type,i.streamInfo=v(e.period),i.representationCount=E.getRepresentationCount(n),i.labels=E.getLabelsForAdaptation(n),i.lang=E.getLanguageForAdaptation(n),t=E.getViewpointForAdaptation(n),i.viewpoint=t?t.value:void 0,i.accessibility=E.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==k&&(n=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),n}),i.audioChannelConfiguration=E.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),i.roles=E.getRolesForAdaptation(n).map(function(e){return e.value}),i.codec=E.getCodec(n),i.mimeType=E.getMimeType(n),i.contentProtection=E.getContentProtectionData(n),i.bitrateList=E.getBitrateListForAdaptation(n),i.contentProtection&&i.contentProtection.forEach(function(e){e.KID=E.getKID(e)}),i.isText=E.getIsTextTrack(i.mimeType),i}function m(e,t,i){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=x.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=i,e.roles=["caption"]}function v(e){var t=new l["default"];return t.id=e.id,t.index=e.index,t.start=e.start,t.duration=e.duration,t.manifestInfo=function(e){var t=new d["default"];return t.DVRWindowSize=e.timeShiftBufferDepth,t.loadedTime=e.manifest.loadedTime,t.availableFrom=e.availabilityStartTime,t.minBufferTime=e.manifest.minBufferTime,t.maxFragmentDuration=e.maxSegmentDuration,t.duration=E.getDuration(e.manifest),t.isDynamic=E.getIsDynamic(e.manifest),t}(e.mpd),t.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(t.start+t.duration-t.manifestInfo.duration)<1,t}function y(){if(!x)throw new Error("setConfig function has to be called previously")}function b(e){return 0===T.length?null:T[0].mpd.manifest.Period_asArray[e]}function _(e,t,i){var n=void 0,r=void 0,a=void 0,o=void 0,s=void 0;if(e)for(n=e.AdaptationSet_asArray,o=0;o<n.length;o+=1)for(a=n[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(r=a[s]).id)return i?s:r;return null}var w,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0,k=void 0,A=this.context;return w={getBandwidthForRepresentation:function(e,t){var i;return(i=_(b(t),e))?i.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){var i=_(e,t,!0);return null!==i?i:-1}(b(t),e)},getMaxIndexForBufferType:function(e,t){return function(e,t){var i,n=void 0,r=void 0,a=void 0;if(!e||!t)return-1;for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(n=i[a],r=n.Representation_asArray,E.getIsTypeOf(n,t))return r.length;return-1}(b(t),e)},convertDataToRepresentationInfo:function(e){var t=new o["default"],i=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],n=E.getRepresentationFor(e.index,i);return t.id=e.id,t.quality=e.index,t.bandwidth=E.getBandwidth(n),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=g(e.adaptation),t},getDataForMedia:e,getStreamsInfo:function(e,t){var i=[],r=T;e&&(y(),r=n(e)),t=t||r.length;for(var a=0;a<t;a++)i.push(v(r[a]));return i},getMediaInfoForType:function(e,i){if(0===T.length)return null;var n=T[0].mpd.manifest,r=t(e.index,i,e);if(!r)return null;var a=p(e,T),o=a.id,s=E.getIndexForAdaptation(r,n,e.index);return S[o]=S[o]||E.getAdaptationsForPeriod(a),g(S[o][s])},getAllMediaInfoForType:i,getAdaptationForType:t,getRealAdaptation:function(e,t){var i,n=void 0,r=p(e,T);return i=t?t.id:null,0<T.length&&(n=i?E.getAdaptationForId(i,T[0].mpd.manifest,r.index):E.getAdaptationForIndex(t.index,T[0].mpd.manifest,r.index)),n},getVoRepresentations:function(t){var i=e(t);return E.getRepresentationsForAdaptation(i)},getEventsFor:function(t,i){var n=[];if(0===T.length)return n;var r=T[0].mpd.manifest;return t instanceof l["default"]?n=E.getEventsForPeriod(p(t,T)):t instanceof s["default"]?n=E.getEventStreamForAdaptationSet(r,e(t)):t instanceof o["default"]&&(n=E.getEventStreamForRepresentation(r,i)),n},getEvent:function(e,t,i){if(!e||!t)return null;var n=new c["default"],r=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,l=e.event_duration,d=e.id,u=e.message_data,h=i*o+s;return t[r+"/"+a]?(n.eventStream=t[r+"/"+a],n.eventStream.value=a,n.eventStream.timescale=o,n.duration=l,n.id=d,n.presentationTime=h,n.messageData=u,n.presentationTimeDelta=s,n):null},setConfig:function(e){e&&(e.constants&&(x=e.constants),e.cea608parser&&(k=e.cea608parser),e.errHandler&&E.setConfig({errHandler:e.errHandler}),e.BASE64&&E.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){return e?(y(),T=n(e),S={},void 0):null},setCurrentMediaInfo:function(e,t,i){C[e]=C[e]||{},C[e][t]=C[e][t]||{},C[e][t]=i},getUseCalculatedLiveEdgeTimeForMediaInfo:function(t){var i=e(t);return E.getUseCalculatedLiveEdgeTimeForAdaptation(i)},getIsTextTrack:function(e){return E.getIsTextTrack(e)},getUTCTimingSources:function(){var e=T[0].mpd.manifest;return E.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=T[0].mpd;return E.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var t=e||T[0].mpd;return E.getAvailabilityStartTime(t)},getIsDynamic:function(e){var t=e||T[0].mpd.manifest;return E.getIsDynamic(t)},getDuration:function(e){var t=e||T[0].mpd.manifest;return E.getDuration(t)},getRegularPeriods:r,getMpd:u,getLocation:function(e){return E.getLocation(e)},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return E.getManifestUpdatePeriod(e,t)},getIsDVB:function(e){return E.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getBaseURLsFromElement:function(e){return E.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return E.getRepresentationSortFunction()},getCodec:function(e,t,i){return E.getCodec(e,t,i)},reset:f},E=(0,h["default"])(A).getInstance(),f(),w}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(63)),o=n(e(94)),s=n(e(90)),l=n(e(96)),d=n(e(89)),c=n(e(87)),u=n(e(49)),h=n(e(66));r.__dashjs_factory_name="DashAdapter",i["default"]=u["default"].getSingletonFactory(r),t.exports=i["default"]},{49:49,63:63,66:66,87:87,89:89,90:90,94:94,96:96}],59:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){return L?L.getType():null}function i(){var e=L?L.getStreamInfo():null;return e?e.manifestInfo.isDynamic:null}function n(){return L?L.getMediaInfo():null}function r(){P=-1,R=null}function h(){r(),N=0,F=L=O=null}function y(e,t,i){var n=I.resolve(i.path),r=void 0,a=void 0;return n&&t!==n.url&&x.isRelative(t)?(r=n.url,a=n.serviceLocation,t&&(r=x.resolve(t,r))):r=t,!x.isRelative(r)&&(e.url=r,e.serviceLocation=a,!0)}function b(e){k.setExpectedLiveEdge(e),A.updateManifestUpdateInfo({presentationStartTime:e})}function _(e){if(null==e)return null;var i=new o["default"],r=e.representation,a=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,s=e.media;return s=(0,m.replaceTokenForTemplate)(s,"Number",e.replacementNumber),s=(0,m.replaceTokenForTemplate)(s,"Time",e.replacementTime),s=(0,m.replaceTokenForTemplate)(s,"Bandwidth",a),s=(0,m.replaceIDForTemplate)(s,r.id),s=(0,m.unescapeDollarsInTemplate)(s),i.mediaType=t(),i.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,i.range=e.mediaRange,i.startTime=e.presentationStartTime,i.duration=e.duration,i.timescale=r.timescale,i.availabilityStartTime=e.availabilityStartTime,i.availabilityEndTime=e.availabilityEndTime,i.wallStartTime=e.wallStartTime,i.quality=r.index,i.index=e.availabilityIdx,i.mediaInfo=n(),i.adaptationIndex=r.adaptation.index,i.representationId=r.id,y(i,s,r)?i:void 0}function w(e){var t=!1;if(i()){if(R){var n=parseFloat((R.presentationStartTime-e.adaptation.period.start).toFixed(5)),r=0<R.duration?n+1.5*R.duration:n;
t=e.adaptation.period.duration<=r}}else P>=e.availableSegmentsNumber&&(t=!0);return t}function E(e){var t=e.representation;t.segments&&C.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:t})}function T(e){if(!e.error&&t()===e.mediaType){var n=e.segments,r=e.representation,a=[],o=0,s=void 0,l=void 0,c=void 0,u=void 0;for(s=0,l=n.length;s<l;s++)c=n[s],(u=(0,m.getTimeBasedSegment)(k,i(),r,c.startTime,c.duration,c.timescale,c.media,c.mediaRange,o))&&(a.push(u),u=null,o++);l=a.length,r.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[l-1].presentationStartTime},r.availableSegmentsNumber=l,(r.segments=a)&&0<a.length&&i()&&b(a[a.length-1].presentationStartTime-8),g["default"].hasInitialization(r)&&C.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:r})}}e=e||{};var S=this.context,C=(0,c["default"])(S).getInstance(),x=(0,p["default"])(S).getInstance(),k=e.timelineConverter,A=e.dashMetrics,I=e.baseURLController,D=void 0,M=void 0,P=void 0,R=void 0,O=void 0,N=void 0,L=void 0,F=void 0;return D={initialize:function(e){L=e,F.initialize(i())},getStreamProcessor:function(){return L},getInitRequest:function(e){return e?function(e,t){var r=new o["default"],a=e.adaptation.period,s=a.start,d=i();if(r.mediaType=t,r.type=l.HTTPRequest.INIT_SEGMENT_TYPE,r.range=e.range,r.availabilityStartTime=k.calcAvailabilityStartTimeFromPresentationTime(s,a.mpd,d),r.availabilityEndTime=k.calcAvailabilityEndTimeFromPresentationTime(s+a.duration,a.mpd,d),r.quality=e.index,r.mediaInfo=n(),r.representationId=e.id,y(r,e.initialization,e))return r.url=(0,m.replaceTokenForTemplate)(r.url,"Bandwidth",e.bandwidth),r}(e,t()):null},getSegmentRequestForTime:function(e,r,s){var l=void 0;if(!e||!e.segmentInfoType)return null;var d=t(),c=P,u=!!s&&s.keepIdx,h=!(!s||!s.ignoreIsFinished);O!==r&&(O=r,M.debug("Getting the request for "+d+" time : "+r));var f=F.getSegmentByTime(e,r);return f?(P=f.availabilityIdx,R=f,M.debug("Index for "+d+" time "+r+" is "+P),l=_(f)):!h&&w(e)&&((l=new o["default"]).action=o["default"].ACTION_COMPLETE,l.index=P-1,l.mediaType=d,l.mediaInfo=n(),M.debug("Signal complete in getSegmentRequestForTime -",d)),u&&0<=c&&(P=e.segmentInfoType===a["default"].SEGMENT_TIMELINE&&i()?P:c),l},getNextSegmentRequest:function(e){var r=void 0;if(!e||!e.segmentInfoType)return null;var a=R?R.mediaStartTime:-1,s=t();O=null;var l=P+1;M.debug("Getting the next request at index: "+l+", type: "+s);var d=F.getSegmentByIndex(e,l,a);return d||function(e){return!i()||i()&&isFinite(e.adaptation.period.duration)}(e)?(P=d?(r=_(d),d.availabilityIdx):l,d?r=_(R=d):w(e)&&((r=new o["default"]).action=o["default"].ACTION_COMPLETE,r.index=P-1,r.mediaType=s,r.mediaInfo=n(),M.debug("Signal complete -",s)),r):(M.debug("No segment found at index: "+l+". Wait for next loop"),null)},updateRepresentation:function(e,n){var a=g["default"].hasInitialization(e),o=g["default"].hasSegments(e),l=void 0;return e.segmentAvailabilityRange=k.calcSegmentAvailabilityRange(e,i()),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?(l=new s["default"](u["default"].SEGMENTS_UNAVAILABLE_ERROR_CODE,u["default"].SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void C.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:e,error:l})):(i()&&b(e.segmentAvailabilityRange.end),n||r(),F.update(e,t(),a,o),a&&o&&C.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:e}),void 0)},setCurrentTime:function(e){N=e},getCurrentTime:function(){return N},reset:function(){h(),C.off(d["default"].INITIALIZATION_LOADED,E,D),C.off(d["default"].SEGMENTS_LOADED,T,D)},resetIndex:r},M=(0,f["default"])(S).getInstance().getLogger(D),h(),F=(0,v["default"])(S).create(e),C.on(d["default"].INITIALIZATION_LOADED,E,D),C.on(d["default"].SEGMENTS_LOADED,T,D),D}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(63)),o=n(e(225)),s=n(e(223)),l=e(239),d=n(e(56)),c=n(e(48)),u=n(e(53)),h=n(e(49)),f=n(e(47)),p=n(e(218)),g=n(e(93)),m=e(81),v=n(e(65));r.__dashjs_factory_name="DashHandler",i["default"]=h["default"].getClassFactory(r),t.exports=i["default"]},{218:218,223:223,225:225,239:239,47:47,48:48,49:49,53:53,56:56,63:63,65:65,81:81,93:93}],60:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,i){return r(v.getMetricsFor(e,t),i)}function i(e,t){var i=v.getMetricsFor(e,t);if(!i)return null;var n=i.HttpList,r=null,a=void 0;if(!n||n.length<=0)return null;for(a=n.length-1;0<=a;){if(n[a].responsecode){r=n[a];break}a--}return r}function n(e){var t=v.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function r(e,t){if(!e)return null;var i=e[t];return!i||i.length<=0?null:i[i.length-1]}function s(e){var t={};if(!e)return t;for(var i=e.trim().split("\r\n"),n=0,r=i.length;n<r;n++){var a=i[n],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}e=e||{};var h,f=this.context,p=void 0,g=void 0,m=void 0,v=e.metricsModel;return h={getCurrentRepresentationSwitch:function(e,t){return r(v.getMetricsFor(e,t),l["default"].TRACK_SWITCH)},getLatestBufferInfoVO:t,getCurrentBufferLevel:function(e,i){var n=t(e,i,l["default"].BUFFER_LEVEL);return n?d["default"].round10(n.level/1e3,-3):0},getCurrentHttpRequest:i,getHttpRequests:n,getCurrentDroppedFrames:function(){return r(v.getMetricsFor(a["default"].VIDEO,!0),l["default"].DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return r(v.getMetricsFor(e,!0),l["default"].SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return r(e?v.getMetricsFor(e,!0):v.getMetricsFor(a["default"].VIDEO,!0)||v.getMetricsFor(a["default"].AUDIO,!0),l["default"].DVR_INFO)},getCurrentManifestUpdate:function(){return r(v.getMetricsFor(a["default"].STREAM),l["default"].MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},r=i(e,!0);return r&&(n=s(r._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){var t,i={},r=void 0,l=void 0;for(l=(t=n(a["default"].STREAM)).length-1;0<=l;l--)if((r=t[l]).type===o.HTTPRequest.MPD_TYPE){i=s(r._responseHeaders);break}return void 0===i[e]?null:i[e]},addRepresentationSwitch:function(e,t,i,n,r){v.addRepresentationSwitch(e,t,i,n,r)},addDVRInfo:function(e,t,i,n){v.addDVRInfo(e,t,i,n)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();v.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){var t=this.getCurrentManifestUpdate();v.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){var i=this.getCurrentManifestUpdate();v.addManifestUpdateRepresentationInfo(i,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType)}},addManifestUpdate:function(e){v.addManifestUpdate(a["default"].STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,i,n,r){v.addHttpRequest(e.mediaType,null,e.type,e.url,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,i,e.duration,n,r)},addSchedulingInfo:function(e,t){v.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,i){v.addRequestsQueue(e,t,i)},addBufferLevel:function(e,t,i){v.addBufferLevel(e,t,i)},addBufferState:function(e,t,i){v.addBufferState(e,t,i)},addDroppedFrames:function(e){v.addDroppedFrames(a["default"].VIDEO,e)},addPlayList:function(){m&&(v.addPlayList(m),m=null)},addDVBErrors:function(e){v.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(m=new u.PlayList).start=new Date,m.mstart=e,m.starttype=t},createPlaylistTraceMetrics:function(e,t,i){!0===p&&(p=!1,(g=new u.PlayListTrace).representationid=e,g.start=new Date,g.mstart=t,g.playbackspeed=i)},updatePlayListTraceMetrics:function(e){if(g)for(var t in g)g[t]=e[t]},pushPlayListTraceMetrics:function(e,t){if(!1===p&&m&&g&&g.start){var i=g.start,n=e.getTime()-i.getTime();g.duration=n,g.stopreason=t,m.trace.push(g),p=!0}},clearAllCurrentMetrics:function(){v.clearAllCurrentMetrics()}},v=v||(0,c["default"])(f).getInstance({settings:e.settings}),p=!0,m=g=null,h}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=e(239),s=n(e(49)),l=n(e(110)),d=n(e(79)),c=n(e(152)),u=e(241);r.__dashjs_factory_name="DashMetrics",i["default"]=s["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,110:110,152:152,239:239,241:241,49:49,79:79}],61:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){if(!S||!S.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function t(e){if(e.url){var t=new p["default"];return t.type=e.init?f.HTTPRequest.INIT_SEGMENT_TYPE:f.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t.mediaType=e.mediaType,t}}function i(e,t,i){e?r.trigger(l["default"].SEGMENTS_LOADED,{segments:e,representation:t,mediaType:i}):r.trigger(l["default"].SEGMENTS_LOADED,{segments:null,representation:t,mediaType:i,error:new s["default"](m["default"].SEGMENT_BASE_LOADER_ERROR_CODE,m["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}var n=this.context,r=(0,d["default"])(n).getInstance(),u=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0;return u={setConfig:function(e){e.baseURLController&&(S=e.baseURLController),e.dashMetrics&&(w=e.dashMetrics),e.mediaPlayerModel&&(E=e.mediaPlayerModel),e.errHandler&&(y=e.errHandler)},initialize:function(){b=(0,c["default"])(n).getInstance(),_=(0,a["default"])(n).getInstance(),T=(0,g["default"])(n).create({errHandler:y,dashMetrics:w,mediaPlayerModel:E,requestModifier:_})},loadInitialization:function i(n,a){e();var o=null,s=n?S.resolve(n.path):null,d=a||{init:!0,url:s?s.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n&&n.adaptation?n.adaptation.type:null};v.debug("Start searching for initialization.");var c=t(d);T.load({request:c,success:function(e){d.bytesLoaded=d.range.end,(o=b.findInitRange(e))?(n.range=o,r.trigger(l["default"].INITIALIZATION_LOADED,{representation:n})):(d.range.end=d.bytesLoaded+d.bytesToLoad,i(n,d))},error:function(){r.trigger(l["default"].INITIALIZATION_LOADED,{representation:n})}}),v.debug("Perform init search: "+d.url)},loadSegments:function n(r,a,s,l,d){if(e(),s&&(void 0===s.start||void 0===s.end)){var c=s?s.toString().split("-"):null;s=c?{start:parseFloat(c[0]),end:parseFloat(c[1])}:null}d=d||i;var u=null,h=null,f=!!s,p=r?S.resolve(r.path):null,g={init:!1,url:p?p.url:void 0,range:f?s:{start:0,end:1500},searching:!f,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:r&&r.adaptation?r.adaptation.type:null},m=t(g);T.load({request:m,success:function(e){var t=g.bytesToLoad,i=e.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,u=b.parse(e),(h=u.getBox("sidx"))&&h.isComplete){var s=h.references,l=void 0,c=void 0;null!=s&&0<s.length&&(l=1===s[0].reference_type),l?function(){function e(e){e?(c=c.concat(e),i<=++u&&d(c,r,a)):d(null,r,a)}v.debug("Initiate multiple SIDX load."),g.range.end=g.range.start+h.size;var t=void 0,i=void 0,o=void 0,l=void 0,c=[],u=0,f=(h.offset||g.range.start)+h.size;for(t=0,i=s.length;t<i;t++)l=(o=f)+s[t].referenced_size-1,f+=s[t].referenced_size,n(r,null,{start:o,end:l},g,e)}():(v.debug("Parsing segments from SIDX."),c=function(e,t){for(var i=e.references,n=i.length,r=e.timescale,a=e.earliest_presentation_time,s=t.range.start+e.offset+e.first_offset+e.size,l=[],d=void 0,c=void 0,u=void 0,h=void 0,f=0;f<n;f++)u=i[f].subsegment_duration,h=i[f].referenced_size,(d=new o["default"]).duration=u,d.startTime=a,d.timescale=r,c=s+h-1,d.mediaRange=s+"-"+c,l.push(d),a+=u,s+=h;return l}(h,g),d(c,r,a))}else{if(h)g.range.start=h.offset||g.range.start,g.range.end=g.range.start+(h.size||t);else{if(i<g.bytesLoaded)return void d(null,r,a);var f=u.getLastBox();f&&f.size?(g.range.start=f.offset+f.size,g.range.end=g.range.start+t):g.range.end+=t}n(r,a,g.range,g,d)}},error:function(){d(null,r,a)}}),v.debug("Perform SIDX load: "+g.url)},reset:function(){T.abort(),_=b=y=T=null}},v=(0,h["default"])(n).getInstance().getLogger(u),u}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(215)),o=n(e(95)),s=n(e(223)),l=n(e(56)),d=n(e(48)),c=n(e(205)),u=n(e(49)),h=n(e(47)),f=e(239),p=n(e(225)),g=n(e(156)),m=n(e(53));r.__dashjs_factory_name="SegmentBaseLoader",i["default"]=u["default"].getSingletonFactory(r),t.exports=i["default"]},{156:156,205:205,215:215,223:223,225:225,239:239,47:47,48:48,49:49,53:53,56:56,95:95}],62:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t,i,n){var a,o,l=void 0,d=void 0,c=void 0,u=void 0,f=void 0,p=void 0;for(d=[],u=0,o=(a=function(e){var t=[],i=(0,s["default"])(r).create({data:e}),n=void 0,a=void 0;for(i.consumeTagAndSize(_.Segment.Cues);i.moreData()&&i.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for((n={}).CueTime=i.parseTag(_.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];i.moreData()&&i.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){var o=i.getMatroskaCodedNum(),l=i.getPos();if((a={}).Track=i.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===a.Track)throw new Error("Cue track cannot be 0");a.ClusterPosition=i.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(a),i.setPos(l+o)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;u<o;u+=1)c=new h["default"],l=0,l=u<a.length-1?a[u+1].CueTime-a[u].CueTime:n-a[u].CueTime,c.duration=l,c.startTime=a[u].CueTime,c.timescale=1e3,f=a[u].CueTracks[0].ClusterPosition+t,p=u<a.length-1?a[u+1].CueTracks[0].ClusterPosition+t-1:i-1,c.mediaRange=f+"-"+p,d.push(c);return b.debug("Parsed cues: "+d.length+" cues."),d}function t(){if(!x||!x.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function i(e,t,i){e?d.trigger(a["default"].SEGMENTS_LOADED,{segments:e,representation:t,mediaType:i}):d.trigger(a["default"].SEGMENTS_LOADED,{segments:null,representation:t,mediaType:i,error:new m["default"](v["default"].SEGMENT_BASE_LOADER_ERROR_CODE,v["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function n(e){var t=new p["default"];return t.type=e.init?f.HTTPRequest.INIT_SEGMENT_TYPE:f.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}var r=this.context,d=(0,o["default"])(r).getInstance(),y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0;return y={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(l["default"].MISSING_CONFIG_ERROR);x=e.baseURLController,T=e.dashMetrics,S=e.mediaPlayerModel,w=e.errHandler},initialize:function(){E=(0,u["default"])(r).getInstance(),C=(0,g["default"])(r).create({errHandler:w,dashMetrics:T,mediaPlayerModel:S,requestModifier:E})},loadInitialization:function(e,i){t();var r=null,o=e?x.resolve(e.path):null,s=o?o.url:void 0,l=e?e.range.split("-"):null,c=i||{range:{start:l?parseFloat(l[0]):null,end:l?parseFloat(l[1]):null},request:r,url:s,init:!0};b.info("Start loading initialization."),r=n(c),C.load({request:r,success:function(){d.trigger(a["default"].INITIALIZATION_LOADED,{representation:e})},error:function(){d.trigger(a["default"].INITIALIZATION_LOADED,{representation:e})}}),b.debug("Perform init load: "+c.url)},loadSegments:function(a,o,l,d){t();var c=null,u=a?x.resolve(a.path):null,h=u?u.url:void 0;d=d||i,c=n({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:c,url:h,init:!1}),b.debug("Parsing ebml header"),C.load({request:c,success:function(t){!function(t,i,a,o){if(t&&0!==t.byteLength){var l,d=(0,s["default"])(r).create({data:t}),c=void 0,u=void 0,h=void 0,f=a?a.split("-"):null,p=null,g={url:i,range:{start:f?parseFloat(f[0]):null,end:f?parseFloat(f[1]):null},request:p};for(b.debug("Parse EBML header: "+g.url),d.skipOverElement(_.EBML),d.consumeTag(_.Segment),h=d.getMatroskaCodedNum(),h+=d.getPos(),l=d.getPos();d.moreData()&&!d.consumeTagAndSize(_.Segment.Info,!0);)if(!(d.skipOverElement(_.Segment.SeekHead,!0)||d.skipOverElement(_.Segment.Tracks,!0)||d.skipOverElement(_.Segment.Cues,!0)||d.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;void 0===c;){var m=d.getMatroskaCodedNum(!0),v=d.getMatroskaCodedNum();switch(m){case _.Segment.Info.Duration.tag:c=d[_.Segment.Info.Duration.parse](v);break;default:d.setPos(d.getPos()+v)}}p=n(g),C.load({request:p,success:function(t){u=e(t,l,h,c),o(u)},error:function(){b.error("Download Error: Cues "+g.url),o(null)}}),b.debug("Perform cues load: "+g.url+" bytes="+g.range.start+"-"+g.range.end)}else o(null)}(t,h,l,function(e){d(e,a,o)})},error:function(){d(null,a,o)}})},reset:function(){E=w=null}},b=(0,c["default"])(r).getInstance().getLogger(y),_={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},y}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(56)),o=n(e(48)),s=n(e(209)),l=n(e(109)),d=n(e(49)),c=n(e(47)),u=n(e(215)),h=n(e(95)),f=e(239),p=n(e(225)),g=n(e(156)),m=n(e(223)),v=n(e(53));r.__dashjs_factory_name="WebmSegmentBaseLoader",i["default"]=d["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,156:156,209:209,215:215,223:223,225:225,239:239,47:47,48:48,49:49,53:53,56:56,95:95}],63:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(i,"__esModule",{value:!0});var a=new(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay"}}]),r);i["default"]=a,t.exports=i["default"]},{}],64:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){if(!(k&&M&&I&&D&&R&&P))throw new Error(a["default"].MISSING_CONFIG_ERROR)}function t(){return S}function i(){return x}function n(){S=!(T=null),C=[],M=D=I=k=null}function r(){e();var t=new Date,n=i(),r=1e3*I.getTime();n&&M.addRepresentationSwitch(n.adaptation.type,t,r,n.id)}function u(){e();var t=P.getStreamInfo(),i=t?t.manifestInfo:null,n=i?i.isDynamic:null,r=D.calcSegmentAvailabilityRange(x,n);M.addDVRInfo(P.getType(),I.getTime(),i,r)}function f(e){return null==e||e>=C.length?null:C[e]}function p(e){var i=e;S=!1,w.trigger(c["default"].AST_IN_FUTURE,{delay:i}),setTimeout(function(){if(!t()){S=!0,w.trigger(c["default"].DATA_UPDATE_STARTED,{sender:E}),C.forEach(function(e){e.segmentAvailabilityRange=null});for(var e=0;e<C.length;e++)A.updateRepresentation(C[e],!0)}},i)}function g(e){if(e.sender.getStreamProcessor()===P&&t())if(e.error)w.trigger(c["default"].DATA_UPDATE_COMPLETED,{sender:this,error:e.error});else{var n=e.representation,a=M.getCurrentManifestUpdate(),d=!1,f=0,g=void 0,m=void 0;if(n.adaptation.period.mpd.manifest.type===s["default"].DYNAMIC&&!n.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var v=n.segmentAvailabilityRange.end-n.segmentAvailabilityRange.start;f=1e3*(I.computeLiveDelay(x.segmentDuration,P.getStreamInfo().manifestInfo.DVRWindowSize)-v)}if(0<f)return u(),p(f),m=new l["default"](o["default"].SEGMENTS_UPDATE_FAILED_ERROR_CODE,o["default"].SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void w.trigger(c["default"].DATA_UPDATE_COMPLETED,{sender:this,data:T,currentRepresentation:x,error:m});if(a){for(var y=0;y<a.representationInfo.length;y++)if((g=a.representationInfo[y]).index===n.index&&g.mediaType===P.getType()){d=!0;break}d||M.addManifestUpdateRepresentationInfo(n,P.getType())}!function(){for(var e=0,t=C.length;e<t;e++){var i=C[e].segmentInfoType;if(null===C[e].segmentAvailabilityRange||!h["default"].hasInitialization(C[e])||(i===s["default"].SEGMENT_BASE||i===s["default"].BASE_URL)&&!C[e].segments)return!1}return!0}()||(S=!1,k.setPlaybackQuality(P.getType(),P.getStreamInfo(),function(e){return C.indexOf(e)}(x)),M.updateManifestUpdateInfo({latency:x.segmentAvailabilityRange.end-I.getTime()}),M.getCurrentRepresentationSwitch(i().adaptation.type)||r(),w.trigger(c["default"].DATA_UPDATE_COMPLETED,{sender:this,data:T,currentRepresentation:x}))}}function m(t){t.isDynamic&&function(t){var i=void 0;e();for(var n=0,r=C.length;n<r;n++)(i=C[n]).segmentAvailabilityRange=D.calcSegmentAvailabilityRange(i,t)}(t.isDynamic)}function v(e){e.sender.getStreamProcessor()===P&&(R.getValue().doNotUpdateDVRWindowOnBufferUpdated||u())}function y(e){e.mediaType===P.getType()&&P.getStreamInfo().id===e.streamInfo.id&&(x=f(e.newQuality),r())}function b(e){if(e.newDuration){var t=i();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}var _=this.context,w=(0,d["default"])(_).getInstance(),E=void 0,T=void 0,S=void 0,C=void 0,x=void 0,k=void 0,A=void 0,I=void 0,D=void 0,M=void 0,P=void 0,R=void 0;return E={initialize:function(){A=P.getIndexHandler()},setConfig:function(e){e.abrController&&(k=e.abrController),e.dashMetrics&&(M=e.dashMetrics),e.playbackController&&(I=e.playbackController),e.timelineConverter&&(D=e.timelineConverter),e.manifestModel&&(R=e.manifestModel),e.streamProcessor&&(P=e.streamProcessor)},getData:function(){return T},isUpdating:t,updateData:function(t,i,n){e();var r=P.getStreamInfo(),o=k.getTopQualityIndexFor(n,r?r.id:null),s=k.getMinAllowedIndexFor(n),l=void 0,d=null;if(S=!0,w.trigger(c["default"].DATA_UPDATE_STARTED,{sender:this}),C=i,l=null!==T&&T.id==t.id||n===a["default"].FRAGMENTED_TEXT?k.getQualityFor(n):(d=k.getThroughputHistory().getAverageThroughput(n)||k.getInitialBitrateFor(n,r),k.getQualityForBitrate(P.getMediaInfo(),d)),void 0!==s&&l<s&&(l=s),o<l&&(l=o),x=f(l),T=t,n!==a["default"].VIDEO&&n!==a["default"].AUDIO&&n!==a["default"].FRAGMENTED_TEXT)return S=!1,void w.trigger(c["default"].DATA_UPDATE_COMPLETED,{sender:this,data:T,currentRepresentation:x});for(var u=0;u<C.length;u++)A.updateRepresentation(C[u],!0)},getStreamProcessor:function(){return P},getCurrentRepresentation:i,getRepresentationForQuality:f,reset:function(){w.off(c["default"].QUALITY_CHANGE_REQUESTED,y,E),w.off(c["default"].REPRESENTATION_UPDATED,g,E),w.off(c["default"].WALLCLOCK_TIME_UPDATED,m,E),w.off(c["default"].BUFFER_LEVEL_UPDATED,v,E),w.off(c["default"].MANIFEST_VALIDITY_CHANGED,b,E),n()}},n(),w.on(c["default"].QUALITY_CHANGE_REQUESTED,y,E),w.on(c["default"].REPRESENTATION_UPDATED,g,E),w.on(c["default"].WALLCLOCK_TIME_UPDATED,m,E),w.on(c["default"].BUFFER_LEVEL_UPDATED,v,E),w.on(c["default"].MANIFEST_VALIDITY_CHANGED,b,E),E}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(53)),s=n(e(63)),l=n(e(223)),d=n(e(48)),c=n(e(56)),u=n(e(49)),h=n(e(93));r.__dashjs_factory_name="RepresentationController",i["default"]=u["default"].getClassFactory(r),t.exports=i["default"]},{109:109,223:223,48:48,49:49,53:53,56:56,63:63,93:93}],65:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){return e.segments?m[a["default"].SEGMENT_BASE]:m[e.segmentInfoType]}e=e||{};var i,n,r=this.context,o=e.dashMetrics,f=e.mediaPlayerModel,p=e.errHandler,g=e.baseURLController,m=void 0,v=void 0;return i={initialize:function(t){v.initialize(),m[a["default"].SEGMENT_TIMELINE]=(0,s["default"])(r).create(e,t),m[a["default"].SEGMENT_TEMPLATE]=(0,l["default"])(r).create(e,t),m[a["default"].SEGMENT_LIST]=(0,d["default"])(r).create(e,t),m[a["default"].SEGMENT_BASE]=(0,c["default"])(r).create(e,t)},update:function(e,t,i,n){i||function(e){v.loadInitialization(e)}(e),n||function(e,t){v.loadSegments(e,t,e.indexRange)}(e,t)},getSegmentByIndex:function(e,i,n){var r=t(e);return r?r.getSegmentByIndex(e,i,n):null},getSegmentByTime:function(e,i){var n=t(e);return n?n.getSegmentByTime(e,i):null}},m={},(n=e.mimeType,v="webm"===(n?n.split("/")[1]:"").toLowerCase()?(0,h["default"])(r).getInstance():(0,u["default"])(r).getInstance()).setConfig({baseURLController:g,dashMetrics:o,mediaPlayerModel:f,errHandler:p}),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(63)),o=n(e(49)),s=n(e(84)),l=n(e(82)),d=n(e(78)),c=n(e(80)),u=n(e(61)),h=n(e(62));r.__dashjs_factory_name="SegmentsController";var f=o["default"].getClassFactory(r);i["default"]=f,t.exports=i["default"]},{49:49,61:61,62:62,63:63,78:78,80:80,82:82,84:84}],66:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var i=void 0,n=void 0,r=void 0,s=void 0,l=void 0,d=void 0,c=!1,u=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(s=e.ContentComponent_asArray),l=t!==a["default"].TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var h=E(e.Representation_asArray[0]);if(h&&0<h.length&&0<=w.THUMBNAILS_SCHEME_ID_URIS.indexOf(h[0].schemeIdUri))return t===a["default"].IMAGE;if(e.Representation_asArray[0].hasOwnProperty(o["default"].CODECS)&&(0===(d=e.Representation_asArray[0].codecs).search(a["default"].STPP)||0===d.search(a["default"].WVTT)))return t===a["default"].FRAGMENTED_TEXT}if(s){if(1<s.length)return t===a["default"].MUXED;s[0]&&s[0].contentType===t&&(u=c=!0)}if(e.hasOwnProperty(o["default"].MIME_TYPE)&&(c=l.test(e.mimeType),u=!0),!u)for(i=0,n=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!u&&i<n;)(r=e.Representation_asArray[i]).hasOwnProperty(o["default"].MIME_TYPE)&&(c=l.test(r.mimeType),u=!0),i++;return c}function t(e){return"text/vtt"===e||"application/ttml+xml"===e}function i(){return function(e,t){return e.bandwidth-t.bandwidth}}function n(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function r(e,t){return e&&e.Period_asArray&&O(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function v(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===o["default"].DYNAMIC),t}function E(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function T(e){if(e&&e.period&&O(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&O(e.index))return n(t.AdaptationSet_asArray[e.index])}}function S(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||0<=t.r}function C(e,t){if(!e)throw new Error("Period cannot be null or undefined");var i=d["default"].DEFAULT_ID+"_"+t;return e.hasOwnProperty(o["default"].ID)&&0<e.id.length&&"__proto__"!==e.id&&(i=e.id),i}function x(e,t){var i=[],n=void 0;if(!e)return i;for(n=0;n<e.length;n++){var r=new p["default"];if(r.timescale=1,r.representation=t,!e[n].hasOwnProperty(a["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");r.schemeIdUri=e[n].schemeIdUri,e[n].hasOwnProperty(o["default"].TIMESCALE)&&(r.timescale=e[n].timescale),e[n].hasOwnProperty(o["default"].VALUE)&&(r.value=e[n].value),i.push(r)}return i}function k(e){var t=[],i=e.BaseURL_asArray||[e.baseUri],n=!1;return i.some(function(i){if(i){var r=new f["default"],a=i.__text||i;return R.isRelative(a)&&(n=!0,e.baseUri&&(a=R.resolve(a,e.baseUri))),r.url=a,i.hasOwnProperty(o["default"].SERVICE_LOCATION)&&i.serviceLocation.length?r.serviceLocation=i.serviceLocation:r.serviceLocation=a,i.hasOwnProperty(o["default"].DVB_PRIORITY)&&(r.dvb_priority=i[o["default"].DVB_PRIORITY]),i.hasOwnProperty(o["default"].DVB_WEIGHT)&&(r.dvb_weight=i[o["default"].DVB_WEIGHT]),i.hasOwnProperty(o["default"].AVAILABILITY_TIME_OFFSET)&&(r.availabilityTimeOffset=i[o["default"].AVAILABILITY_TIME_OFFSET]),i.hasOwnProperty(o["default"].AVAILABILITY_TIME_COMPLETE)&&(r.availabilityTimeComplete="false"!==i[o["default"].AVAILABILITY_TIME_COMPLETE]),t.push(r),n}}),t}var A=void 0,I=void 0,D=void 0,M=void 0,P=this.context,R=(0,m["default"])(P).getInstance(),O=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return A={getIsTypeOf:e,getIsTextTrack:t,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(o["default"].LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(o["default"].VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(o["default"].ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(o["default"].ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(o["default"].AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,i){
var n=r(t,i);return 0<n.length&&O(e)?n[e]:null},getIndexForAdaptation:function(e,t,i){var n=r(t,i),a=n.length;if(e)for(var o=0;o<a;o++)if((0,g["default"])(P).getInstance().areEqual(n[o],e))return o;return-1},getAdaptationForId:function(e,t,i){var n,a=r(t,i),s=void 0;for(s=0,n=a.length;s<n;s++)if(a[s].hasOwnProperty(o["default"].ID)&&a[s].id===e)return a[s];return null},getAdaptationsForType:function(t,i,a){var o,s=r(t,i),l=void 0,d=[];for(l=0,o=s.length;l<o;l++)e(s[l],a)&&d.push(n(s[l]));return d},getCodec:function(e,t,i){var n=null;if(e&&e.Representation_asArray&&0<e.Representation_asArray.length){var r=O(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];r&&(n=r.mimeType+';codecs="'+r.codecs+'"',i&&void 0!==r.width&&(n+=';width="'+r.width+'";height="'+r.height+'"'))}return n},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(o["default"].CENC_DEFAULT_KID)?e[o["default"].CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],i=0;i<e.Label_asArray.length;i++)t.push({lang:e.Label_asArray[i].lang,text:e.Label_asArray[i].__text||e.Label_asArray[i]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(o["default"].CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:v,hasProfile:function(e,t){var i=!1;return e&&e.profiles&&0<e.profiles.length&&(i=-1!==e.profiles.indexOf(t)),i},getDuration:function(e){return e&&e.hasOwnProperty(o["default"].MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=NaN;return e&&e.hasOwnProperty(o["default"].MINIMUM_UPDATE_PERIOD)&&(i=e.minimumUpdatePeriod),isNaN(i)?i:Math.max(i-t,1)},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=n(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&O(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var i,n,r=[],a=T(e),l=void 0,d=void 0;if(a&&a.Representation_asArray){if(e&&e.period&&O(e.period.index)){var c=k(e.period.mpd.manifest);c&&(d=c[0])}for(var u=0,h=a.Representation_asArray.length;u<h;++u){var f=a.Representation_asArray[u],p=new s["default"];if(p.index=u,p.adaptation=e,f.hasOwnProperty(o["default"].ID)&&(p.id=f.id),f.hasOwnProperty(o["default"].CODECS)&&(p.codecs=f.codecs),f.hasOwnProperty(o["default"].CODEC_PRIVATE_DATA)&&(p.codecPrivateData=f.codecPrivateData),f.hasOwnProperty(o["default"].BANDWITH)&&(p.bandwidth=f.bandwidth),f.hasOwnProperty(o["default"].WIDTH)&&(p.width=f.width),f.hasOwnProperty(o["default"].HEIGHT)&&(p.height=f.height),f.hasOwnProperty(o["default"].SCAN_TYPE)&&(p.scanType=f.scanType),f.hasOwnProperty(o["default"].MAX_PLAYOUT_RATE)&&(p.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty(o["default"].SEGMENT_BASE)?(l=f.SegmentBase,p.segmentInfoType=o["default"].SEGMENT_BASE):f.hasOwnProperty(o["default"].SEGMENT_LIST)?(l=f.SegmentList).hasOwnProperty(o["default"].SEGMENT_TIMELINE)?(p.segmentInfoType=o["default"].SEGMENT_TIMELINE,p.useCalculatedLiveEdgeTime=S(l.SegmentTimeline)):(p.segmentInfoType=o["default"].SEGMENT_LIST,p.useCalculatedLiveEdgeTime=!0):f.hasOwnProperty(o["default"].SEGMENT_TEMPLATE)?((l=f.SegmentTemplate).hasOwnProperty(o["default"].SEGMENT_TIMELINE)?(p.segmentInfoType=o["default"].SEGMENT_TIMELINE,p.useCalculatedLiveEdgeTime=S(l.SegmentTimeline)):p.segmentInfoType=o["default"].SEGMENT_TEMPLATE,l.hasOwnProperty(o["default"].INITIALIZATION_MINUS)&&(p.initialization=l.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):p.segmentInfoType=o["default"].BASE_URL,p.essentialProperties=E(f),l){if(l.hasOwnProperty(o["default"].INITIALIZATION)){var g=l.Initialization;g.hasOwnProperty(o["default"].SOURCE_URL)&&(p.initialization=g.sourceURL),g.hasOwnProperty(o["default"].RANGE)&&(p.range=g.range)}else f.hasOwnProperty(o["default"].MIME_TYPE)&&t(f.mimeType)&&(p.range=0);l.hasOwnProperty(o["default"].TIMESCALE)&&(p.timescale=l.timescale),l.hasOwnProperty(o["default"].DURATION)&&(p.segmentDuration=l.duration/p.timescale),l.hasOwnProperty(o["default"].MEDIA)&&(p.media=l.media),l.hasOwnProperty(o["default"].START_NUMBER)&&(p.startNumber=l.startNumber),l.hasOwnProperty(o["default"].INDEX_RANGE)&&(p.indexRange=l.indexRange),l.hasOwnProperty(o["default"].PRESENTATION_TIME_OFFSET)&&(p.presentationTimeOffset=l.presentationTimeOffset/p.timescale),l.hasOwnProperty(o["default"].AVAILABILITY_TIME_OFFSET)?p.availabilityTimeOffset=l.availabilityTimeOffset:d&&void 0!==d.availabilityTimeOffset&&(p.availabilityTimeOffset=d.availabilityTimeOffset),l.hasOwnProperty(o["default"].AVAILABILITY_TIME_COMPLETE)?p.availabilityTimeComplete="false"!==l.availabilityTimeComplete:d&&void 0!==d.availabilityTimeComplete&&(p.availabilityTimeComplete=d.availabilityTimeComplete)}p.MSETimeOffset=(n=(i=p).presentationTimeOffset,i.adaptation.period.start-n),p.path=[e.period.index,e.index,u],r.push(p)}}return r},getAdaptationsForPeriod:function(t){var i=t&&O(t.index)?t.mpd.manifest.Period_asArray[t.index]:null,n=[],r=void 0,s=void 0,d=void 0;if(i&&i.AdaptationSet_asArray)for(d=0;d<i.AdaptationSet_asArray.length;d++)s=i.AdaptationSet_asArray[d],r=new l["default"],s.hasOwnProperty(o["default"].ID)&&(r.id=s.id),r.index=d,r.period=t,e(s,a["default"].MUXED)?r.type=a["default"].MUXED:e(s,a["default"].AUDIO)?r.type=a["default"].AUDIO:e(s,a["default"].VIDEO)?r.type=a["default"].VIDEO:e(s,a["default"].FRAGMENTED_TEXT)?r.type=a["default"].FRAGMENTED_TEXT:e(s,a["default"].IMAGE)?r.type=a["default"].IMAGE:r.type=a["default"].TEXT,n.push(r);return n},getRegularPeriods:function(e){var t,i=!!e&&v(e.manifest),n=[],r=null,a=null,s=null,l=null,c=void 0;for(c=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;c<t;c++)(a=e.manifest.Period_asArray[c]).hasOwnProperty(o["default"].START)?(l=new d["default"]).start=a.start:null!==r&&r.hasOwnProperty(o["default"].DURATION)&&null!==s?(l=new d["default"]).start=parseFloat((s.start+s.duration).toFixed(5)):0!==c||i||((l=new d["default"]).start=0),null!==s&&isNaN(s.duration)&&(null!==l?s.duration=parseFloat((l.start-s.start).toFixed(5)):I.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==l&&(l.id=C(a,c),l.index=c,l.mpd=e,a.hasOwnProperty(o["default"].DURATION)&&(l.duration=a.duration),n.push(l),r=a,s=l),l=a=null;return 0===n.length||null!==s&&isNaN(s.duration)&&(s.duration=parseFloat((function(e){!function(){if(!D||!D.hasOwnProperty("error"))throw new Error("setConfig function has to be called previously")}();var t=v(e.mpd.manifest),i=void 0;return e.mpd.manifest.mediaPresentationDuration?i=e.mpd.manifest.mediaPresentationDuration:e.duration?i=e.duration:t?i=Number.POSITIVE_INFINITY:D.error(new b["default"](_["default"].MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),i}(s)-s.start).toFixed(5))),n},getMpd:function(e){var t=new c["default"];return e&&((t.manifest=e).hasOwnProperty(o["default"].AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(o["default"].AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(o["default"].MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(o["default"].MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(a["default"].SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(o["default"].TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(o["default"].MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,i=t?t.Period_asArray:null,n=i&&e&&O(e.index)?i[e.index].EventStream_asArray:null,r=[],s=void 0,l=void 0;if(n)for(s=0;s<n.length;s++){var d=new p["default"];if(d.period=e,d.timescale=1,!n[s].hasOwnProperty(a["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(d.schemeIdUri=n[s].schemeIdUri,n[s].hasOwnProperty(o["default"].TIMESCALE)&&(d.timescale=n[s].timescale),n[s].hasOwnProperty(o["default"].VALUE)&&(d.value=n[s].value),l=0;n[s].Event_asArray&&l<n[s].Event_asArray.length;l++){var c=new h["default"];c.presentationTime=0,c.eventStream=d,n[s].Event_asArray[l].hasOwnProperty(o["default"].PRESENTATION_TIME)&&(c.presentationTime=n[s].Event_asArray[l].presentationTime),n[s].Event_asArray[l].hasOwnProperty(o["default"].DURATION)&&(c.duration=n[s].Event_asArray[l].duration),n[s].Event_asArray[l].hasOwnProperty(o["default"].ID)&&(c.id=n[s].Event_asArray[l].id),n[s].Event_asArray[l].Signal&&n[s].Event_asArray[l].Signal.Binary?c.messageData=M.decodeArray(n[s].Event_asArray[l].Signal.Binary):c.messageData=n[s].Event_asArray[l].messageData||n[s].Event_asArray[l].__text,r.push(c)}}return r},getEventStreamForAdaptationSet:function(e,t){var i=void 0,n=void 0,r=void 0;return e&&e.Period_asArray&&t&&t.period&&O(t.period.index)&&(n=e.Period_asArray[t.period.index])&&n.AdaptationSet_asArray&&O(t.index)&&(r=n.AdaptationSet_asArray[t.index])&&(i=r.InbandEventStream_asArray),x(i,null)},getEventStreamForRepresentation:function(e,t){var i=void 0,n=void 0,r=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&O(t.adaptation.period.index)&&(n=e.Period_asArray[t.adaptation.period.index])&&n.AdaptationSet_asArray&&O(t.adaptation.index)&&(r=n.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&O(t.index)&&(a=r.Representation_asArray[t.index])&&(i=a.InbandEventStream_asArray),x(i,t)},getUTCTimingSources:function(e){var t=v(e),i=!!e&&e.hasOwnProperty(o["default"].AVAILABILITY_START_TIME),n=e?e.UTCTiming_asArray:null,r=[];return(t||i)&&n&&n.forEach(function(e){var t=new u["default"];e.hasOwnProperty(a["default"].SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(o["default"].VALUE)&&(t.value=e.value.toString(),r.push(t)))}),r},getBaseURLsFromElement:k,getRepresentationSortFunction:i,getLocation:function(e){if(e&&e.hasOwnProperty(a["default"].LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=T(e),i=t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray[0]:null,n=void 0;if(i){if(i.hasOwnProperty(o["default"].SEGMENT_LIST))return!(n=i.SegmentList).hasOwnProperty(o["default"].SEGMENT_TIMELINE)||S(n.SegmentTimeline);if(i.hasOwnProperty(o["default"].SEGMENT_TEMPLATE)&&(n=i.SegmentTemplate).hasOwnProperty(o["default"].SEGMENT_TIMELINE))return S(n.SegmentTimeline)}return!1},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(o["default"].SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(o["default"].AVAILABILITY_START_TIME)?e.availabilityStartTime.getTime():null},setConfig:function(e){e&&(e.errHandler&&(D=e.errHandler),e.BASE64&&(M=e.BASE64))}},I=(0,y["default"])(P).getInstance().getLogger(A),A}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(63)),s=n(e(93)),l=n(e(85)),d=n(e(92)),c=n(e(91)),u=n(e(97)),h=n(e(87)),f=n(e(86)),p=n(e(88)),g=n(e(214)),m=n(e(218)),v=n(e(49)),y=n(e(47)),b=n(e(223)),_=n(e(53)),w=e(203);r.__dashjs_factory_name="DashManifestModel",i["default"]=v["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,203:203,214:214,218:218,223:223,47:47,49:49,53:53,63:63,85:85,86:86,87:87,88:88,91:91,92:92,93:93,97:97}],67:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=void 0,i=void 0,n=void 0,r=void 0,a=void 0;return t={parse:function(e){var t,n=window.performance.now();if(!(t=r.xml_str2json(e)))throw new Error("parsing the manifest failed");var o=window.performance.now();a.run(t);var s=window.performance.now();return i.info("Parsing complete: ( xml2json: "+(o-n).toPrecision(3)+"ms, objectiron: "+(s-o).toPrecision(3)+"ms, total: "+((s-n)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return n},getIron:function(){return a}},i=(0,o["default"])(e).getInstance().getLogger(t),n=[new c["default"],new u["default"],new h["default"],new d["default"]],r=new l["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),a=(0,s["default"])(e).create({adaptationset:new f["default"],period:new p["default"]}),t}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47)),s=n(e(77)),l=n(e(3)),d=n(e(76)),c=n(e(74)),u=n(e(73)),h=n(e(75)),f=n(e(70)),p=n(e(71));r.__dashjs_factory_name="DashParser",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{3:3,47:47,49:49,70:70,71:71,73:73,74:74,75:75,76:76,77:77}],68:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),r);i["default"]=a,t.exports=i["default"]},{}],69:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._name=e||"",this._properties=[],this._children=i||[],Array.isArray(t)&&t.forEach(function(e){n._properties.push(new l["default"](e))})}Object.defineProperty(i,"__esModule",{value:!0});var a,o=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},s=e(68),l=(a=s)&&a.__esModule?a:{"default":a},d=(o(r,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),r);i["default"]=d,t.exports=i["default"]},{68:68}],70:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=[o["default"].PROFILES,o["default"].WIDTH,o["default"].HEIGHT,o["default"].SAR,o["default"].FRAMERATE,o["default"].AUDIO_SAMPLING_RATE,o["default"].MIME_TYPE,o["default"].SEGMENT_PROFILES,o["default"].CODECS,o["default"].MAXIMUM_SAP_PERIOD,o["default"].START_WITH_SAP,o["default"].MAX_PLAYOUT_RATE,o["default"].CODING_DEPENDENCY,o["default"].SCAN_TYPE,o["default"].FRAME_PACKING,o["default"].AUDIO_CHANNEL_CONFIGURATION,o["default"].CONTENT_PROTECTION,o["default"].ESSENTIAL_PROPERTY,o["default"].SUPPLEMENTAL_PROPERTY,o["default"].INBAND_EVENT_STREAM];(function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}})(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,o["default"].ADAPTATION_SET,e,[new a["default"](o["default"].REPRESENTATION,e,[new a["default"](o["default"].SUB_REPRESENTATION,e)])])}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(69)),o=n(e(63)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a["default"]),r);i["default"]=s,t.exports=i["default"]},{63:63,69:69}],71:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=[o["default"].SEGMENT_BASE,o["default"].SEGMENT_TEMPLATE,o["default"].SEGMENT_LIST];(function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}})(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,o["default"].PERIOD,e,[new a["default"](o["default"].ADAPTATION_SET,e,[new a["default"](o["default"].REPRESENTATION,e)])])}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(69)),o=n(e(63)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a["default"]),r);i["default"]=s,t.exports=i["default"]},{63:63,69:69}],72:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._test=e,this._converter=t}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),r);i["default"]=a,t.exports=i["default"]},{}],73:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){var t=s.exec(e),i=void 0;if(i=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var n=60*parseInt(t[9],10)+parseInt(t[10],10);i+=("+"===t[8]?-1:1)*n*60*1e3}return new Date(i)})}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(72),o=(r=a)&&r.__esModule?r:{"default":r},s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["default"]),n);i["default"]=l,t.exports=i["default"]},{72:72}],74:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,function(e){for(var t=[s["default"].MIN_BUFFER_TIME,s["default"].MEDIA_PRESENTATION_DURATION,s["default"].MINIMUM_UPDATE_PERIOD,s["default"].TIMESHIFT_BUFFER_DEPTH,s["default"].MAX_SEGMENT_DURATION,s["default"].MAX_SUBSEGMENT_DURATION,o["default"].SUGGESTED_PRESENTATION_DELAY,s["default"].START,o["default"].START_TIME,s["default"].DURATION],i=t.length,n=0;n<i;n++)if(e.nodeName===t[n])return l.test(e.value);return!1},function(e){var t=l.exec(e),i=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(i=-i),i})}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(72)),o=n(e(109)),s=n(e(63)),l=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a["default"]),r);i["default"]=d,t.exports=i["default"]},{109:109,63:63,72:72}],75:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){return parseFloat(e)})}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(72),o=(r=a)&&r.__esModule?r:{"default":r},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["default"]),n);i["default"]=l,t.exports=i["default"]},{72:72}],76:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,function(e,t){var i,n=(r(i={},s["default"].MPD,[s["default"].ID,s["default"].PROFILES]),r(i,s["default"].PERIOD,[s["default"].ID]),r(i,s["default"].BASE_URL,[s["default"].SERVICE_LOCATION,s["default"].BYTE_RANGE]),r(i,s["default"].SEGMENT_BASE,[s["default"].INDEX_RANGE]),r(i,s["default"].INITIALIZATION,[s["default"].RANGE]),r(i,s["default"].REPRESENTATION_INDEX,[s["default"].RANGE]),r(i,s["default"].SEGMENT_LIST,[s["default"].INDEX_RANGE]),r(i,s["default"].BITSTREAM_SWITCHING,[s["default"].RANGE]),r(i,s["default"].SEGMENT_URL,[s["default"].MEDIA_RANGE,s["default"].INDEX_RANGE]),r(i,s["default"].SEGMENT_TEMPLATE,[s["default"].INDEX_RANGE,s["default"].MEDIA,s["default"].INDEX,s["default"].INITIALIZATION_MINUS,s["default"].BITSTREAM_SWITCHING_MINUS]),r(i,s["default"].ASSET_IDENTIFIER,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].EVENT_STREAM,[s["default"].VALUE]),r(i,s["default"].ADAPTATION_SET,[s["default"].PROFILES,s["default"].MIME_TYPE,s["default"].SEGMENT_PROFILES,s["default"].CODECS,s["default"].CONTENT_TYPE]),r(i,s["default"].FRAME_PACKING,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].AUDIO_CHANNEL_CONFIGURATION,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].CONTENT_PROTECTION,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].ESSENTIAL_PROPERTY,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].SUPPLEMENTAL_PROPERTY,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].INBAND_EVENT_STREAM,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].ACCESSIBILITY,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].ROLE,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].RATING,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].VIEWPOINT,[s["default"].VALUE,s["default"].ID]),r(i,s["default"].CONTENT_COMPONENT,[s["default"].CONTENT_TYPE]),r(i,s["default"].REPRESENTATION,[s["default"].ID,s["default"].DEPENDENCY_ID,s["default"].MEDIA_STREAM_STRUCTURE_ID]),r(i,s["default"].SUBSET,[s["default"].ID]),r(i,s["default"].METRICS,[s["default"].METRICS_MINUS]),r(i,s["default"].REPORTING,[s["default"].VALUE,s["default"].ID]),i);if(n.hasOwnProperty(t)){var a=n[t];return void 0!==a&&0<=a.indexOf(e.name)}return!1},function(e){return String(e)})}Object.defineProperty(i,"__esModule",{value:!0});var o=n(e(72)),s=n(e(63)),l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o["default"]),a);i["default"]=l,t.exports=i["default"]},{63:63,72:72}],77:[function(e,t,i){"use strict";function n(e){function t(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}function i(e,i,n){for(var r=0,a=e.length;r<a;++r){var o=e[r];if(i[o.name])if(n[o.name]){if(o.merge){var s=i[o.name],l=n[o.name];"object"==typeof s&&"object"==typeof l?t(s,l):n[o.name]=s+l}}else n[o.name]=i[o.name]}}function n(e,t){for(var r=0,a=e.children.length;r<a;++r){var o=e.children[r],s=t[o.name+"_asArray"];if(s)for(var l=0,d=s.length;l<d;++l){var c=s[l];i(e.properties,t,c),n(o,c)}}}return{run:function(t){if(null===t||"object"!=typeof t)return t;if("period"in e)for(var i=e.period,r=t.Period_asArray,a=0,o=r.length;a<o;++a){var s=r[a];if(n(i,s),"adaptationset"in e){var l=s.AdaptationSet_asArray;if(l)for(var d=e.adaptationset,c=0,u=l.length;c<u;++c)n(d,l[c])}}return t}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="ObjectIron";var s=o["default"].getClassFactory(n);i["default"]=s,t.exports=i["default"]},{49:49}],78:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function i(){if(!r||!r.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}function n(e,n){if(i(),!e)throw new Error("no representation");var a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,o=a.SegmentURL_asArray.length,l=e.startNumber,d=null;if(n<o){var c=a.SegmentURL_asArray[n];(d=(0,s.getIndexBasedSegment)(r,t,e,n)).replacementTime=(l+n-1)*e.segmentDuration,d.media=c.media?c.media:"",d.mediaRange=c.mediaRange,d.index=n,d.indexRange=c.indexRange}return e.availableSegmentsNumber=o,d}var r=(e=e||{}).timelineConverter;return{getSegmentByIndex:n,getSegmentByTime:function(e,t){if(i(),!e)throw new Error("no representation");var a=e.segmentDuration;if(isNaN(a))return null;var o=r.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return n(e,Math.floor(o/a))}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(109)),s=e(81);r.__dashjs_factory_name="ListSegmentsGetter";var l=a["default"].getClassFactory(r);i["default"]=l,t.exports=i["default"]},{109:109,49:49,81:81}],79:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,null,[{key:"round10",value:function(e,t){return function(e,t,i){return void 0!==i&&0!=+i?(i=+i,null===(t=+t)||isNaN(t)||"number"!=typeof i||i%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+i:i)))):Math[e](t)}("round",e,t)}}]),r);i["default"]=a,t.exports=i["default"]},{}],80:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}function i(e,i){if(t(),!e)throw new Error("no representation");var n=e.segments?e.segments.length:0,r=void 0;if(i<n&&(r=e.segments[i])&&r.availabilityIdx===i)return r;for(var a=0;a<n;a++)if((r=e.segments[a])&&r.availabilityIdx===i)return r;return null}var n=(e=e||{}).timelineConverter;return{getSegmentByIndex:i,getSegmentByTime:function(e,r){if(t(),!e)throw new Error("no representation");return i(e,function(e,t){var i=e.segments,n=i?i.length:null,r=-1,a=void 0,o=void 0,s=void 0,l=void 0,d=void 0;if(i&&0<n)for(d=0;d<n;d++)if(o=i[d],s=o.presentationStartTime,l=o.duration,s<=t+(a=l/2)&&t-a<s+l){r=o.availabilityIdx;break}return r}(e,n.calcPeriodRelativeTimeFromMpdRelativeTime(e,r)))}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(109));r.__dashjs_factory_name="SegmentBaseGetter";var s=a["default"].getClassFactory(r);i["default"]=s,t.exports=i["default"]},{109:109,49:49}],81:[function(e,t,i){"use strict";function n(e,t){for(;e.length<t;)e="0"+e;return e}function r(e,t,i){var r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,c=t.length,u="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",r+c))<0)return e;if(r<(o=e.indexOf("%0",r+c))&&o<a)switch(s=e.charAt(a-1),l=parseInt(e.substring(o+u,a-1),10),s){case"d":case"i":case"u":d=n(i.toString(),l);break;case"x":d=n(i.toString(16),l);break;case"X":d=n(i.toString(16),l).toUpperCase();break;case"o":d=n(i.toString(8),l);break;default:return e}else d=i;e=e.substring(0,r)+d+e.substring(a+1)}}function a(e,t,i,n,r,a,o,s,l){var c=new d["default"];return c.representation=e,c.duration=t,c.presentationStartTime=i,c.mediaStartTime=n,c.availabilityStartTime=r,c.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o,e.adaptation.period.mpd,s),c.wallStartTime=a.calcWallTimeForSegment(c,s),c.replacementNumber=function(e,t){return e.representation.startNumber+t}(c,l),c.availabilityIdx=l,c}function o(e,t,i,n){var r=e.getPeriodEnd(t,n);return!(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,r)<=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,i.presentationStartTime))}Object.defineProperty(i,"__esModule",{value:!0}),i.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},i.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var i=t.toString();return e.split("$RepresentationID$").join(i)},i.replaceTokenForTemplate=r,i.getIndexBasedSegment=function(e,t,i,n){var r,s,l=void 0;l=i.segmentDuration,isNaN(l)&&(l=i.adaptation.period.duration),r=parseFloat((i.adaptation.period.start+n*l).toFixed(5)),s=parseFloat((r+l).toFixed(5));var d=a(i,l,r,e.calcMediaTimeFromPresentationTime(r,i),e.calcAvailabilityStartTimeFromPresentationTime(r,i.adaptation.period.mpd,t),e,s,t,n);return o(e,i,d,t)?d:null},i.getTimeBasedSegment=function(e,t,i,n,s,l,d,c,u,h){
var f,p,g=n/l,m=Math.min(s/l,i.adaptation.period.mpd.maxSegmentDuration),v=void 0;return f=e.calcPresentationTimeFromMediaTime(g,i),p=f+m,v=a(i,m,f,g,i.adaptation.period.mpd.manifest.loadedTime,e,p,t,u),o(e,i,v,t)?(v.replacementTime=h||n,d=r(d=r(d,"Number",v.replacementNumber),"Time",v.replacementTime),v.media=d,v.mediaRange=c,v):null};var s,l=e(95),d=(s=l)&&s.__esModule?s:{"default":s}},{95:95}],82:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function i(){if(!r||!r.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}function n(e,n){if(i(),!e)throw new Error("no representation");var a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;n=Math.max(n,0);var o=(0,s.getIndexBasedSegment)(r,t,e,n);if(o){o.replacementTime=(n-1)*e.segmentDuration;var l=a.media;l=(0,s.replaceTokenForTemplate)(l,"Number",o.replacementNumber),l=(0,s.replaceTokenForTemplate)(l,"Time",o.replacementTime),o.media=l}var d=e.segmentDuration,c=e.segmentAvailabilityRange;return isNaN(d)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((c.end-c.start)/d),o}var r=(e=e||{}).timelineConverter;return{getSegmentByIndex:n,getSegmentByTime:function(e,t){if(i(),!e)throw new Error("no representation");var a=e.segmentDuration;if(isNaN(a))return null;var o=r.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return n(e,Math.floor(o/a)-1)}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(109)),s=e(81);r.__dashjs_factory_name="TemplateSegmentsGetter";var l=a["default"].getClassFactory(r);i["default"]=l,t.exports=i["default"]},{109:109,49:49,81:81}],83:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){d=e}function t(e,t,i,n){return n?i&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:i?new Date(t.availabilityStartTime.getTime()+1e3*(e-d)):t.availabilityStartTime}function i(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*d)/1e3}function n(t){c||void 0!==t.offset&&(e(t.offset/1e3),c=!0)}function r(){d=0,c=!1,u=NaN}var s=this.context,l=(0,a["default"])(s).getInstance(),d=void 0,c=void 0,u=void 0;return{initialize:function(){r(),l.on(o["default"].TIME_SYNCHRONIZATION_COMPLETED,n,this)},isTimeSyncCompleted:function(){return c},setTimeSyncCompleted:function(e){c=e},getClientTimeOffset:function(){return d},setClientTimeOffset:e,getExpectedLiveEdge:function(){return u},setExpectedLiveEdge:function(e){u=e},calcAvailabilityStartTimeFromPresentationTime:function(e,i,n){return t.call(this,e,i,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,i,n){return t.call(this,e,i,n,!0)},calcPresentationTimeFromWallTime:i,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!c&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var a=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=i(new Date,n),s=n.start+n.duration;r.start=Math.max(o-n.mpd.timeShiftBufferDepth,n.start);var l=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<a?a-e.availabilityTimeOffset:a;return r.end=s<=o&&o-l<s?s:o-l,r},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!c&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=i(new Date,n),o=n.start+n.duration,s=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<r?r-e.availabilityTimeOffset:r;return Math.min(a-s,o)},calcWallTimeForSegment:function(e,t){var i=void 0,n=void 0,r=void 0;return t&&(i=e.representation.adaptation.period.mpd.suggestedPresentationDelay,n=e.presentationStartTime+i,r=new Date(e.availabilityStartTime.getTime()+1e3*n)),r},reset:function(){l.off(o["default"].TIME_SYNCHRONIZATION_COMPLETED,n,this),r()}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(48)),o=n(e(56)),s=n(e(49));r.__dashjs_factory_name="TimelineConverter",i["default"]=s["default"].getSingletonFactory(r),t.exports=i["default"]},{48:48,49:49,56:56}],84:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function i(){if(!r||!r.hasOwnProperty("calcMediaTimeFromPresentationTime")||!r.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}function n(e,i){var n,a,o,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=s.SegmentTimeline,d=s.SegmentURL_asArray,c=0,u=0,h=-1,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;o=e.timescale;var b=!1;for(p=0,a=(n=l.S_asArray).length;p<a&&!b;p++){if(m=0,(f=n[p]).hasOwnProperty("r")&&(m=f.r),f.hasOwnProperty("t")&&(u=(c=f.t)/o),m<0){if((y=n[p+1])&&y.hasOwnProperty("t"))v=y.t/o;else{var _=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:r.calcSegmentAvailabilityRange(e,t).end;v=r.calcMediaTimeFromPresentationTime(_,e),e.segmentDuration=f.d/o}m=Math.ceil((v-u)/(f.d/o))-1}for(g=0;g<=m&&!b;g++)(b=i(c,u,s,d,f,o,++h,p))&&(e.segmentDuration=f.d/o,(g<m-1||p<a-1)&&h++),u=(c+=f.d)/o}e.availableSegmentsNumber=h}var r=(e=e||{}).timelineConverter;return{getSegmentByIndex:function(e,a,o){if(i(),!e)throw new Error("no representation");var l=null,d=!1;return n(e,function(i,n,a,c,u,h,f,p){if(d||o<0){var g=a.media,m=u.mediaRange;return c&&(g=c[p].media||"",m=c[p].mediaRange),l=(0,s.getTimeBasedSegment)(r,t,e,i,u.d,h,g,m,f,u.tManifest),!0}return o-.5<=n&&(d=!0),!1}),l},getSegmentByTime:function(e,a){if(i(),!e)throw new Error("no representation");void 0===a&&(a=null);var o=null,l=r.calcMediaTimeFromPresentationTime(a,e);return n(e,function(i,n,a,d,c,u,h,f){if(n>=l-c.d/u*1.5){var p=a.media,g=c.mediaRange;return d&&(p=d[f].media||"",g=d[f].mediaRange),o=(0,s.getTimeBasedSegment)(r,t,e,i,c.d,u,p,g,h,c.tManifest),!0}return!1}),o}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(109)),s=e(81);r.__dashjs_factory_name="TimelineSegmentsGetter";var l=a["default"].getClassFactory(r);i["default"]=l,t.exports=i["default"]},{109:109,49:49,81:81}],85:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},t.exports=i["default"]},{}],86:[function(e,t,i){"use strict";function n(e,t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=i||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}Object.defineProperty(i,"__esModule",{value:!0}),n.DEFAULT_DVB_PRIORITY=1,n.DEFAULT_DVB_WEIGHT=1,i["default"]=n,t.exports=i["default"]},{}],87:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=i["default"]},{}],88:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=i["default"]},{}],89:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=i["default"]},{}],90:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,i=this.viewpoint===e.viewpoint,n=this.lang===e.lang,r=this.roles.toString()===e.roles.toString(),a=this.accessibility.toString()===e.accessibility.toString(),o=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&i&&n&&r&&a&&o}}]),r);i["default"]=a,t.exports=i["default"]},{}],91:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=i["default"]},{}],92:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null}Object.defineProperty(i,"__esModule",{value:!0}),n.DEFAULT_ID="defaultId",i["default"]=n,t.exports=i["default"]},{}],93:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}Object.defineProperty(i,"__esModule",{value:!0});var a,o=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},s=e(63),l=(a=s)&&a.__esModule?a:{"default":a},d=(o(r,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==l["default"].BASE_URL&&e.segmentInfoType!==l["default"].SEGMENT_BASE&&!e.indexRange}}]),r);i["default"]=d,t.exports=i["default"]},{63:63}],94:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=i["default"]},{}],95:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=i["default"]},{}],96:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=i["default"]},{}],97:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=i["default"]},{}],98:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){e=e||{};var t,i=this.context,n=(0,l["default"])(i).getInstance(),r=void 0,h=void 0;return r={checkForExistence:function(e){function t(t){n.trigger(c["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})}if(e){var i=new o["default"](e.url);h.load({request:i,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){function t(t,i){n.trigger(c["default"].LOADING_COMPLETED,{request:e,response:t||null,error:i||null,sender:r})}e?h.load({request:e,progress:function(t){n.trigger(c["default"].LOADING_PROGRESS,{request:e,stream:t.stream}),t.data&&n.trigger(c["default"].LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:r})},success:function(e){t(e)},error:function(e,i,n){t(void 0,new s["default"](u["default"].FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,i))},abort:function(e){e&&n.trigger(c["default"].LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:r})}}):t(void 0,new s["default"](u["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,u["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){h&&h.abort()},reset:function(){h&&(h.abort(),h=null)}},t=(0,d["default"])(i).getInstance(),h=(0,a["default"])(i).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:t,useFetch:e.settings.get().streaming.lowLatencyEnabled}),r}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(156)),o=n(e(226)),s=n(e(223)),l=n(e(48)),d=n(e(205)),c=n(e(56)),u=n(e(53)),h=n(e(49));r.__dashjs_factory_name="FragmentLoader",i["default"]=h["default"].getClassFactory(r),t.exports=i["default"]},{156:156,205:205,223:223,226:226,48:48,49:49,53:53,56:56}],99:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){n.trigger(f["default"].INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}e=e||{};var i=this.context,n=(0,h["default"])(i).getInstance(),r=(0,l["default"])(i).getInstance(),g=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=e.mssHandler,T=e.errHandler;return g={load:function(e){var t=new d["default"](e,u.HTTPRequest.MPD_TYPE);b.load({request:t,success:function(t,o,s){if(_){var l=void 0,d=void 0,u=void 0;if(s&&s!==e?(d=r.parseBaseUrl(s),l=s):(r.isRelative(e)&&(e=r.resolve(e,window.location.href)),d=r.parseBaseUrl(e)),null===w&&(w=function(e){var t=null;return-1<e.indexOf("SmoothStreamingMedia")?(E&&(t=E.createMssParser(),E.registerEvents()),t):-1<e.indexOf("MPD")?(0,m["default"])(i).create():t}(t)),null!==w){_.setMatchers(w.getMatchers()),_.setIron(w.getIron());try{u=w.parse(t)}catch(t){return void n.trigger(f["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new c["default"](p["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,p["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}u?(u.url=l||e,u.originalUrl||(u.originalUrl=u.url),u.hasOwnProperty(a["default"].LOCATION)&&(d=r.parseBaseUrl(u.Location_asArray[0]),y.debug("BaseURI set by Location to: "+d)),u.baseUri=d,u.loadedTime=new Date,_.resolveManifestOnLoad(u)):n.trigger(f["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new c["default"](p["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,p["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else n.trigger(f["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new c["default"](p["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,p["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}},error:function(t,i,r){n.trigger(f["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new c["default"](p["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,p["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+r)})}})},reset:function(){n.off(f["default"].XLINK_READY,t,g),_&&(_.reset(),_=null),b&&(b.abort(),b=null),E&&E.reset()}},y=(0,v["default"])(i).getInstance().getLogger(g),n.on(f["default"].XLINK_READY,t,g),b=(0,s["default"])(i).create({errHandler:T,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),_=(0,o["default"])(i).create({errHandler:T,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),w=null,g}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(124)),s=n(e(156)),l=n(e(218)),d=n(e(230)),c=n(e(223)),u=e(239),h=n(e(48)),f=n(e(56)),p=n(e(53)),g=n(e(49)),m=n(e(67)),v=n(e(47));r.__dashjs_factory_name="ManifestLoader";var y=g["default"].getClassFactory(r);i["default"]=y,t.exports=i["default"]},{109:109,124:124,156:156,218:218,223:223,230:230,239:239,47:47,48:48,49:49,53:53,56:56,67:67}],100:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){y=NaN,_=!(w=!1),t()}function t(){null!==b&&(clearInterval(b),b=null)}function i(e){t(),isNaN(e)&&!isNaN(y)&&(e=1e3*y),isNaN(e)||(v.debug("Refresh manifest in "+e+" milliseconds."),b=setTimeout(s,e))}function n(){w=!0;var e=T.getValue(),t=e.url,i=S.getLocation(e);i&&(t=i),E.load(t)}function r(e){T.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(y=S.getManifestUpdatePeriod(e,n))&&(y=2147483.647),g.trigger(o["default"].MANIFEST_UPDATED,{manifest:e}),v.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),_||i()}function s(){_&&!x.get().streaming.scheduleWhilePaused||(w?i(x.get().streaming.manifestUpdateRetryInterval):n())}function c(e){e.error?e.error.code===d["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&C.error(e.error):r(e.manifest)}function u(){_=!1,i()}function h(){_=!0,t()}function f(){w=!1}var p=this.context,g=(0,a["default"])(p).getInstance(),m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0;return m={initialize:function(){e(),g.on(o["default"].STREAMS_COMPOSED,f,this),g.on(o["default"].PLAYBACK_STARTED,u,this),g.on(o["default"].PLAYBACK_PAUSED,h,this),g.on(o["default"].INTERNAL_MANIFEST_LOADED,c,this)},setManifest:function(e){r(e)},refreshManifest:n,setConfig:function(e){e&&(e.manifestModel&&(T=e.manifestModel),e.adapter&&(S=e.adapter),e.mediaPlayerModel&&e.mediaPlayerModel,e.manifestLoader&&(E=e.manifestLoader),e.errHandler&&(C=e.errHandler),e.settings&&(x=e.settings))},reset:function(){g.off(o["default"].PLAYBACK_STARTED,u,this),g.off(o["default"].PLAYBACK_PAUSED,h,this),g.off(o["default"].STREAMS_COMPOSED,f,this),g.off(o["default"].INTERNAL_MANIFEST_LOADED,c,this),e()}},v=(0,l["default"])(p).getInstance().getLogger(m),m}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(48)),o=n(e(56)),s=n(e(49)),l=n(e(47)),d=n(e(53));r.__dashjs_factory_name="ManifestUpdater",i["default"]=s["default"].getClassFactory(r),t.exports=i["default"]},{47:47,48:48,49:49,53:53,56:56}],101:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){return!!ue&&!!Me.getElement()}function t(){return(0,M.getVersionString)()}function i(){if(!ge)throw te;return Ae.isPaused()}function n(e){var t=Ie.getCurrentDVRInfo();if(!t)return 0;var i=Ae.getLiveDelay(),n=t.range.start+e;return n>t.range.end-i&&(n=t.range.end-i),n}function r(e){if(!ge)throw te;var t=q().currentTime;if(void 0!==e)t=ke.getTimeRelativeToStreamId(t,e);else if(Ae.getIsDynamic()){var i=Ie.getCurrentDVRInfo();t=null===i?0:H()-(i.range.end-i.time)}return t}function H(){if(!ge)throw te;var e=q().duration;if(Ae.getIsDynamic()){var t,i=Ie.getCurrentDVRInfo();if(!i)return 0;e=(t=i.range.end-i.range.start)<i.manifestInfo.DVRWindowSize?t:i.manifestInfo.DVRWindowSize}return e}function U(e){(0,B.checkParameterType)(e,"boolean"),me=e}function $(){Se.restoreDefaultUTCTimingSources()}function z(){return Ie}function q(){if(!Me.getElement())throw ie;return Me.getElement()}function W(e){if(!fe)throw re;Me.setElement(e),e&&(Q(),function(){if(!we){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(ae).create();we=t.createMetricsReporting({debug:le,eventBus:oe,mediaElement:q(),adapter:Te,dashMetrics:Ie,events:k["default"],constants:o["default"],metricsConstants:s["default"]})}}}(),function(){if(!Ee){var e=dashjs.MssHandler;"function"==typeof e&&(C["default"].extend(e.errors),Ee=e(ae).create({eventBus:oe,mediaPlayerModel:Se,dashMetrics:Ie,manifestModel:De,playbackController:Ae,protectionController:_e,baseURLController:(0,u["default"])(ae).getInstance(),errHandler:Ce,events:k["default"],constants:o["default"],debug:le,initSegmentType:N.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:L["default"],ISOBoxer:F["default"]}))}}(),ke&&ke.switchToVideoElement()),ge&&K(),Z()}function Y(e){if(!pe)throw ee;var t=ke.getActiveStreamInfo();return be.getTracksFor(e,t)}function G(t){if(!fe)throw re;"string"==typeof t&&Re.initialize(t),ue=t,(pe||ge)&&K(),e()&&Z()}function V(){if(!pe)throw ee;var e=ke.getActiveStreamInfo();return e?ke.getStreamById(e.id):null}function K(){pe=ge=!1,Te.reset(),ke.reset(),Ae.reset(),ve.reset(),be.reset(),Pe.reset(),_e&&(se.get().streaming.keepProtectionMediaKeys?_e.stop():(_e.reset(),_e=null,Q()))}function X(){return(0,h["default"])(ae).create({errHandler:Ce,dashMetrics:Ie,mediaPlayerModel:Se,requestModifier:(0,m["default"])(ae).getInstance(),mssHandler:Ee,settings:se})}function Q(){if(_e)return _e;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(ae).create();return k["default"].extend(e.events),A["default"].extend(e.events,{publicOnly:!0}),C["default"].extend(e.errors),xe=xe||(0,p["default"])(ae).getInstance(),_e=t.createProtectionSystem({debug:le,errHandler:Ce,videoModel:Me,capabilities:xe,eventBus:oe,events:k["default"],BASE64:L["default"],constants:o["default"]})}function J(e){var t=Ie.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function Z(){!pe&&ue&&(pe=!0,ce.info("Streaming Initialized"),function(){var e=X();ke=ke||(0,d["default"])(ae).getInstance(),be.setConfig({domStorage:Oe}),ke.setConfig({capabilities:xe,manifestLoader:e,manifestModel:De,mediaPlayerModel:Se,protectionController:_e,adapter:Te,dashMetrics:Ie,errHandler:Ce,timelineConverter:ye,videoModel:Me,playbackController:Ae,abrController:ve,mediaController:be,textController:Pe,settings:se}),Ae.setConfig({streamController:ke,dashMetrics:Ie,mediaPlayerModel:Se,adapter:Te,videoModel:Me,timelineConverter:ye,uriFragmentModel:Re,settings:se}),ve.setConfig({streamController:ke,domStorage:Oe,mediaPlayerModel:Se,dashMetrics:Ie,adapter:Te,videoModel:Me,settings:se}),ve.createAbrRulesCollection(),Pe.setConfig({errHandler:Ce,manifestModel:De,adapter:Te,mediaController:be,streamController:ke,videoModel:Me}),ke.initialize(me,he)}(),"string"==typeof ue?ke.load(ue):ke.loadWithManifest(ue)),!ge&&e()&&(ge=!0,ce.info("Playback Initialized"))}var ee="You must first call initialize() and set a source before calling this method",te="You must first call initialize() and set a valid source and view before calling this method",ie="You must first call attachView() to set the video element before calling this method",ne="You must first call attachSource() with a valid source before calling this method",re="MediaPlayer not initialized!",ae=this.context,oe=(0,x["default"])(ae).getInstance(),se=(0,D["default"])(ae).getInstance(),le=(0,S["default"])(ae).getInstance(),de=void 0,ce=void 0,ue=void 0,he=void 0,fe=void 0,pe=void 0,ge=void 0,me=void 0,ve=void 0,ye=void 0,be=void 0,_e=void 0,we=void 0,Ee=void 0,Te=void 0,Se=void 0,Ce=void 0,xe=void 0,ke=void 0,Ae=void 0,Ie=void 0,De=void 0,Me=void 0,Pe=void 0,Re=void 0,Oe=void 0;return de={initialize:function(e,i,n){xe=xe||(0,p["default"])(ae).getInstance(),Ce=(0,f["default"])(ae).getInstance(),xe.supportsMediaSource()?fe||(fe=!0,ye=(0,O["default"])(ae).getInstance(),ve=ve||(0,w["default"])(ae).getInstance(),Ae=Ae||(0,l["default"])(ae).getInstance(),be=be||(0,c["default"])(ae).getInstance(),Te=(0,P["default"])(ae).getInstance(),De=(0,b["default"])(ae).getInstance(),Ie=(0,R["default"])(ae).getInstance({settings:se}),Pe=(0,v["default"])(ae).getInstance(),Oe=(0,T["default"])(ae).getInstance({settings:se}),Te.setConfig({constants:o["default"],cea608parser:a["default"],errHandler:Ce,BASE64:L["default"]}),$(),U(void 0===n||n),e&&W(e),i&&G(i),ce.info("[dash.js "+t()+"] MediaPlayer has been initialized")):Ce.error(new j["default"](C["default"].CAPABILITY_MEDIASOURCE_ERROR_CODE,C["default"].CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(xe=e.capabilities),e.streamController&&(ke=e.streamController),e.playbackController&&(Ae=e.playbackController),e.mediaPlayerModel&&(Se=e.mediaPlayerModel),e.abrController&&(ve=e.abrController),e.mediaController&&(be=e.mediaController),e.settings&&(se=e.settings))},on:function(e,t,i){oe.on(e,t,i)},off:function(e,t,i){oe.off(e,t,i)},extend:function(e,t,i){I["default"].extend(e,t,i,ae)},attachView:W,attachSource:G,isReady:e,preload:function(){if(Me.getElement()||pe)return!1;if(!ue)throw ne;Z()},play:function(){if(!ge)throw te;(!me||i()&&ge)&&Ae.play()},isPaused:i,pause:function(){if(!ge)throw te;Ae.pause()},isSeeking:function(){if(!ge)throw te;return Ae.isSeeking()},isDynamic:function(){if(!ge)throw te;return Ae.getIsDynamic()},seek:function(e){if(!ge)throw te;if((0,B.checkParameterType)(e,"number"),isNaN(e))throw o["default"].BAD_ARGUMENT_ERROR;var t=Ae.getIsDynamic()?n(e):e;Ae.seek(t)},setPlaybackRate:function(e){q().playbackRate=e},getPlaybackRate:function(){return q().playbackRate},setMute:function(e){(0,B.checkParameterType)(e,"boolean"),q().muted=e},isMuted:function(){return q().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw o["default"].BAD_ARGUMENT_ERROR;q().volume=e},getVolume:function(){return q().volume},time:r,duration:H,timeAsUTC:function(){if(!ge)throw te;return r()<0?NaN:J(r())},durationAsUTC:function(){if(!ge)throw te;return J(H())},getActiveStream:V,getDVRWindowSize:function(){var e=Ie.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:n,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(i<10?"0"+i.toString():i.toString())+":"+(n<10?"0"+n.toString():n.toString())},formatUTC:function(e,t,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=new Date(1e3*e),a=r.toLocaleDateString(t),o=r.toLocaleTimeString(t,{hour12:i});return n?o+" "+a:o},getVersion:t,getDebug:function(){return le},getBufferLength:function(e){var t,i=[o["default"].VIDEO,o["default"].AUDIO,o["default"].FRAGMENTED_TEXT];return e?-1===i.indexOf(e)?(ce.warn("getBufferLength requested for invalid type"),NaN):(t=z().getCurrentBufferLevel(e))||NaN:(t=i.map(function(e){return 0<Y(e).length?z().getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return Me?Me.getTTMLRenderingDiv():null},getVideoElement:q,getSource:function(){if(!ue)throw ne;return ue},getCurrentLiveLatency:function(){if(!fe)throw re;return ge?Ae.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!pe)throw ee;return ve.getTopBitrateInfoFor(e)},setAutoPlay:U,getAutoPlay:function(){return me},getDashMetrics:z,getQualityFor:function(e){if(!pe)throw ee;if(e!==o["default"].IMAGE)return ve.getQualityFor(e);var t=V();if(!t)return-1;var i=t.getThumbnailController();return i?i.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!pe)throw ee;if(e===o["default"].IMAGE){var i=V();if(!i)return;var n=i.getThumbnailController();n&&n.setTrackByIndex(t)}ve.setPlaybackQuality(e,ke.getActiveStreamInfo(),t)},updatePortalSize:function(){ve.setElementSize(),ve.setWindowResizeEventCalled(!0)},setTextDefaultLanguage:function(e){void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.getTextDefaultEnabled()},enableText:function(e){void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.enableText(e)},enableForcedTextStreaming:function(e){void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.isTextEnabled()},setTextTrack:function(e){if(!ge)throw te;void 0===Pe&&(Pe=(0,v["default"])(ae).getInstance()),Pe.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!pe)throw ee;var t=V();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!pe)throw ee;return Te.getStreamsInfo(e)},getTracksFor:Y,getTracksForTypeFromManifest:function(e,t,i){if(!pe)throw ee;return(i=i||Te.getStreamsInfo(t,1)[0])?Te.getAllMediaInfoForType(i,e,t):[]},getCurrentTrackFor:function(e){if(!pe)throw ee;var t=ke.getActiveStreamInfo();return be.getCurrentTrackFor(e,t)},setInitialMediaSettingsFor:function(e,t){if(!fe)throw re;be.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!fe)throw re;return be.getInitialSettings(e)},setCurrentTrack:function(e){if(!pe)throw ee;be.setTrack(e)},getTrackSwitchModeFor:function(e){if(!fe)throw re;return be.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!fe)throw re;be.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!fe)throw re;be.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!fe)throw re;return be.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,i){Se.addABRCustomRule(e,t,i)},removeABRCustomRule:function(e){Se.removeABRCustomRule(e)},removeAllABRCustomRule:function(){Se.removeABRCustomRule()},getAverageThroughput:function(e){var t=ve.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,t){var i=X(),n=this;oe.on(k["default"].INTERNAL_MANIFEST_LOADED,function e(r){r.error?t(null,r.error):t(r.manifest),oe.off(k["default"].INTERNAL_MANIFEST_LOADED,e,n),i.reset()},n),Re.initialize(e),i.load(e)},addUTCTimingSource:function(e,t){Se.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){Se.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){Se.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:$,setXHRWithCredentialsForType:function(e,t){Se.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return Se.getXHRWithCredentialsForType(e)},getProtectionController:function(){return Q()},attachProtectionController:function(e){_e=e},setProtectionData:function(e){he=e,ke&&ke.setProtectionData(he)},displayCaptionsOnTop:function(e){var t=(0,g["default"])(ae).getInstance();t.setConfig({videoModel:Me}),t.initialize(),t.setDisplayCConTop(e)},attachTTMLRenderingDiv:function(e){if(!Me.getElement())throw ie;Me.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return Pe&&(e=Pe.getCurrentTrackIdx()),e},getThumbnail:function(e,t){
if(e<0)return null;var i=Ae.getIsDynamic()?n(e):e,r=ke.getStreamForTime(i);if(null===r)return null;var a=r.getThumbnailController();if(!a)return null;var o=ke.getTimeRelativeToStreamId(i,r.getId());return a.get(o,t)},getDashAdapter:function(){return Te},getSettings:function(){return se.get()},updateSettings:function(e){se.update(e)},resetSettings:function(){se.reset()},reset:function(){G(null),W(null),he=null,_e&&(_e.reset(),_e=null),we&&(we.reset(),we=null),se.reset()}},ce=le.getLogger(de),me=!(pe=ge=fe=!1),Te=he=_e=null,k["default"].extend(A["default"]),Se=(0,_["default"])(ae).getInstance(),Me=(0,E["default"])(ae).getInstance(),Re=(0,y["default"])(ae).getInstance(),de}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(2)),o=n(e(109)),s=n(e(110)),l=n(e(120)),d=n(e(122)),c=n(e(118)),u=n(e(113)),h=n(e(99)),f=n(e(210)),p=n(e(206)),g=n(e(201)),m=n(e(215)),v=n(e(199)),y=n(e(153)),b=n(e(150)),_=n(e(151)),w=n(e(112)),E=n(e(154)),T=n(e(208)),S=n(e(47)),C=n(e(53)),x=n(e(48)),k=n(e(56)),A=n(e(102)),I=n(e(49)),D=n(e(50)),M=e(52),P=n(e(58)),R=n(e(60)),O=n(e(83)),N=e(239),L=n(e(1)),F=n(e(9)),j=n(e(223)),B=e(216);r.__dashjs_factory_name="MediaPlayer";var H=I["default"].getClassFactory(r);H.events=A["default"],H.errors=C["default"],I["default"].updateClassFactory(r.__dashjs_factory_name,H),i["default"]=H,t.exports=i["default"]},{1:1,102:102,109:109,110:110,112:112,113:113,118:118,120:120,122:122,150:150,151:151,153:153,154:154,199:199,2:2,201:201,206:206,208:208,210:210,215:215,216:216,223:223,239:239,47:47,48:48,49:49,50:50,52:52,53:53,56:56,58:58,60:60,83:83,9:9,99:99}],102:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(57),o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{57:57}],103:[function(e,t,i){"use strict";function n(e,t,i){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var n=void 0,r=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==o})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return i=i||{},(n=(0,d["default"])(i).create()).initialize(e,t.src,e.autoplay),(s=s||n.getDebug().getLogger()).debug("Converted "+r+" to dash.js player and added content: "+t.src),e._dashjs_player=n}function r(e){for(var t=!0;t;){var i=e;if(t=!1,/^VIDEO$/i.test(i.nodeName))return i;e=i.parentNode,t=!0}}Object.defineProperty(i,"__esModule",{value:!0});var a,o,s,l=e(101),d=(a=l)&&a.__esModule?a:{"default":a},c=(o="application/dash+xml",s=void 0,{create:n,createAll:function(e,t){var i=[];e=e||"[data-dashjs-player]";for(var a=(t=t||document).querySelectorAll(e),s=0;s<a.length;s++){var l=n(a[s],null);i.push(l)}var d=t.querySelectorAll('source[type="'+o+'"]');for(s=0;s<d.length;s++)l=n(r(d[s]),null),i.push(l);return i}}),u=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?c.createAll():u=window.setInterval(function(){window.dashjs&&(window.clearInterval(u),c.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),c.createAll()})),i["default"]=c,t.exports=i["default"]},{101:101}],104:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t){s=s.filter(function(i){return!((isNaN(t)||i.start<t)&&(isNaN(e)||i.end>e))})}var i=this.context,n=void 0,r=void 0,o=void 0,s=[],l=e;return n={getAllBufferRanges:function(){for(var e=[],t=0;t<s.length;t++){var i=s[t];0===e.length||i.start>e[e.length-1].end?e.push({start:i.start,end:i.end}):e[e.length-1].end=i.end}var n={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(n,"length",{get:function(){return e.length}}),n},append:function(e){o="InitializationSegment"!==e.segmentType?(s.push(e),s.sort(function(e,t){return e.start-t.start}),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),l&&l({chunk:e})},remove:t,abort:function(){},discharge:function(e,i){var n=function(e,t){return s.filter(function(i){return(isNaN(t)||i.start<t)&&(isNaN(e)||i.end>e)})}(e,i);return o&&(n.push(o),o=null),t(e,i),n},reset:function(){s=[],l=o=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},r=(0,a["default"])(i).getInstance().getLogger(n),n}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(47)),o=n(e(49));r.__dashjs_factory_name="PreBufferSink";var s=o["default"].getClassFactory(r);i["default"]=s,t.exports=i["default"]},{47:47,49:49}],105:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,i,n){function r(){try{return w.buffered}catch(e){return _.error("getAllBufferRanges exception: "+e.message),null}}function d(e,t,i,n){t&&0<t.length&&t.length<i.length&&function(e,t){for(var i=0;i<e.length;i++){var n=Math.round(e.start(i)),r=Math.round(e.end(i));if(r===t.start||n===t.end||t.start>=n&&t.end<=r)return!0}return!1}(t,n)&&y.trigger(l["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:i.end(i.length-2),to:i.start(i.length-1),unintended:!0})}function h(){if(0<S.length){var e=S.shift();w.updating?m(e):(e(),h())}}function f(){w.updating||h()}function p(){w.updating||h()}function g(){_.error("SourceBufferSink error",t.type)}function m(e){S.push(e),w.updating||h()}var v=this.context,y=(0,s["default"])(v).getInstance(),b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=[],C=[],x=i;return b={getAllBufferRanges:r,getBuffer:function(){return w},append:function(e){e?(C.push(e),E||m(function e(){var t=this,i=this;0<C.length&&function(){E=!0;var n=C[0];C.splice(0,1);var a=[],s=function(){var t=r();d(i,a,t,n),0<C.length?e.call(this):(E=!1,x&&x({chunk:n}))};try{0===n.bytes.length?s.call(t):(a=r(),w.appendBuffer?w.appendBuffer(n.bytes):w.append(n.bytes,n),m(s.bind(t)))}catch(t){_.fatal('SourceBuffer append failed "'+t+'"'),0<C.length?e():E=!1,x&&x({chunk:n,error:new o["default"](t.code,t.message)})}}()}.bind(this))):x({chunk:e,error:new o["default"](u["default"].APPEND_ERROR_CODE,u["default"].APPEND_ERROR_MESSAGE)})},remove:function(t,i,n){var r=this;m(function(){try{0<=t&&t<i&&(n||"ended"!==e.readyState)&&w.remove(t,i),m(function(){y.trigger(l["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:i,unintended:!1})})}catch(e){y.trigger(l["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:i,unintended:!1,error:new o["default"](e.code,e.message)})}})},abort:function(){try{"open"===e.readyState?w.abort():w.setTextTrack&&"ended"===e.readyState&&w.abort()}catch(e){_.error('SourceBuffer append abort failed: "'+e+'"')}C=[]},reset:function(t){if(w){if("function"==typeof w.removeEventListener&&(w.removeEventListener("updateend",p,!1),w.removeEventListener("error",g,!1),w.removeEventListener("abort",g,!1)),clearInterval(T),!t){try{w.getClassName&&"TextSourceBuffer"===w.getClassName()||e.removeSourceBuffer(w)}catch(e){_.error("Failed to remove source buffer from media source.")}w=null}E=!1}C=[],x=null},updateTimestampOffset:function(e){w.timestampOffset===e||isNaN(e)||m(function(){w.timestampOffset=e})},hasDiscontinuitiesAfter:function(e){try{var t=r();if(t&&1<t.length)for(var i=0,n=t.length;i<n;i++)if(0<i&&e<t.start(i)&&t.start(i)>t.end(i-1)+.1)return!0}catch(e){_.error("hasDiscontinuities exception: "+e.message)}return!1},waitForUpdateEnd:m},function(){_=(0,a["default"])(v).getInstance().getLogger(b),E=!1;var i=t.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");if((w=n||e.addSourceBuffer(i)).changeType&&n&&(_.debug("Doing period transition with changeType"),w.changeType(i)),"function"==typeof w.addEventListener)try{w.addEventListener("updateend",p,!1),w.addEventListener("error",g,!1),w.addEventListener("abort",g,!1)}catch(e){T=setInterval(f,50)}else T=setInterval(f,50)}catch(e){if(!t.isText&&-1===i.indexOf('codecs="stpp')&&-1===i.indexOf('codecs="wvtt'))throw e;var r=(0,c["default"])(v).getInstance();w=r.getTextSourceBuffer()}}(),b}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(47)),o=n(e(223)),s=n(e(48)),l=n(e(56)),d=n(e(49)),c=n(e(199)),u=n(e(53));r.__dashjs_factory_name="SourceBufferSink";var h=d["default"].getClassFactory(r);i["default"]=h,t.exports=i["default"]},{199:199,223:223,47:47,48:48,49:49,53:53,56:56}],106:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){for(var t=ee?ee.length:0,i=0;i<t;i++)ee[i].getFragmentModel().removeExecutedRequestsBeforeTime(p()+r()),ee[i].reset(!1,e);O(ie=te=!(ee=[])),F.off(u["default"].CURRENT_TRACK_CHANGED,w,J)}function i(){t(),ne=null,ae=!(re={})}function n(){y(),G&&G.pause(),se&&(se.reset(),se=null),i(),F.off(u["default"].DATA_UPDATE_COMPLETED,I,J),F.off(u["default"].BUFFERING_COMPLETED,A,J),oe&&(F.off(u["default"].KEY_ERROR,b,J),F.off(u["default"].SERVER_CERTIFICATE_UPDATED,b,J),F.off(u["default"].LICENSE_REQUEST_COMPLETE,b,J),F.off(u["default"].KEY_SYSTEM_SELECTED,b,J),F.off(u["default"].KEY_SESSION_CREATED,b,J),F.off(u["default"].KEY_STATUSES_CHANGED,b,J)),O(!1)}function r(){return ne?ne.duration:NaN}function p(){return ne?ne.start:NaN}function m(){return ne}function v(){if(!(Y&&Y.hasOwnProperty("getBitrateList")&&U&&U.hasOwnProperty("getAllMediaInfoForType")&&U.hasOwnProperty("getEventsFor")))throw new Error(a["default"].MISSING_CONFIG_ERROR)}function y(){de&&de.stop()}function b(e){e.error&&(z.error(e.error),Z.fatal(e.error.message),n())}function _(e){var t,i=e?e.type:null,n=void 0;if(i===a["default"].MUXED)return n="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Z.fatal(n),z.error(new g["default"](f["default"].MANIFEST_ERROR_ID_MULTIPLEXED_CODE,n,j.getValue())),!1;if(i===a["default"].TEXT||i===a["default"].FRAGMENTED_TEXT||i===a["default"].EMBEDDED_TEXT||i===a["default"].IMAGE)return!0;if(t=e.codec,Z.debug(i+" codec: "+t),e.contentProtection&&!$.supportsEncryptedMedia())z.error(new g["default"](f["default"].CAPABILITY_MEDIAKEYS_ERROR_CODE,f["default"].CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!$.supportsCodec(t))return n=i+"Codec ("+t+") is not supported.",Z.error(n),!1;return!0}function w(e){if(e.newMediaInfo.streamInfo.id===ne.id){var t=e.newMediaInfo,i=j.getValue();U.setCurrentMediaInfo(ne.id,t.type,t);var n=D(e.newMediaInfo);if(n){var r=G.getTime();Z.info("Stream -  Process track changed at current time "+r),Z.debug("Stream -  Update stream controller"),i.refreshManifestOnSwitchTrack?(Z.debug("Stream -  Refreshing manifest for switch track"),ue=e,H.refreshManifest()):(n.selectMediaInfo(t),t.type!==a["default"].FRAGMENTED_TEXT?(Y.updateTopQualityIndex(t),n.switchTrackAsked(),n.getFragmentModel().abortRequests()):(n.getScheduleController().setSeekTarget(NaN),n.setIndexHandlerTime(r),n.resetIndexHandler()))}}}function E(t,i){var n=U.getAllMediaInfoForType(ne,t),r=null,s=void 0;if(n&&0!==n.length){for(var l=0,c=n.length;l<c;l++)if(r=n[l],t===a["default"].EMBEDDED_TEXT)K.addEmbeddedTrack(r);else{if(!_(r))continue;V.addTrack(r)}t!==a["default"].EMBEDDED_TEXT&&0!==V.getTracksFor(t,ne).length&&(t!==a["default"].IMAGE?((t!==a["default"].FRAGMENTED_TEXT||t===a["default"].FRAGMENTED_TEXT&&K.getTextDefaultEnabled())&&(V.checkInitialMediaSettingsForType(t,ne),s=V.getCurrentTrackFor(t,ne)),t!==a["default"].FRAGMENTED_TEXT||K.getTextDefaultEnabled()||(s=V.getTracksFor(t,ne)[0]),function(t,i,n,r){var s=(0,o["default"])(L).create({type:t?t.type:null,mimeType:t?t.mimeType:null,timelineConverter:q,adapter:U,manifestModel:j,mediaPlayerModel:B,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:J,abrController:Y,playbackController:G,mediaController:V,streamController:e.streamController,textController:K,errHandler:z,settings:Q});if(s.initialize(n),Y.updateTopQualityIndex(t),r?(s.setBuffer(r.buffer),s.setIndexHandlerTime(r.currentTime),ee[r.replaceIdx]=s):ee.push(s),!r||!r.ignoreMediaInfo)if(!t||t.type!==a["default"].TEXT&&t.type!==a["default"].FRAGMENTED_TEXT)s.addMediaInfo(t,!0);else{for(var l=void 0,d=0;d<i.length;d++)i[d].index===t.index&&(l=d),s.addMediaInfo(i[d]);s.selectMediaInfo(i[l])}}(s,n,i)):le=(0,d["default"])(L).create({adapter:U,baseURLController:e.baseURLController,stream:J,timelineConverter:e.timelineConverter}))}else Z.info("No "+t+" data.")}function T(){de||((de=(0,s["default"])(L).create()).setConfig({manifestUpdater:H,playbackController:G}),S())}function S(){var e=U.getEventsFor(ne);de.addInlineEvents(e)}function C(e){var t=U.getAdaptationForType(ne.index,e,ne);t&&Array.isArray(t.Representation_asArray)&&(t.Representation_asArray=t.Representation_asArray.filter(function(e,i){if(0===i)return!0;var n=U.getCodec(t,i,!0);return!!$.supportsCodec(n)||(Z.error("[Stream] codec not supported: "+n),!1)}))}function x(){for(var e=ee.length,t=re.audio||re.video?new g["default"](f["default"].DATA_UPDATE_FAILED_ERROR_CODE,f["default"].DATA_UPDATE_FAILED_ERROR_MESSAGE):null,i=0;i<e;i++)if(ee[i].isUpdating()||ae)return;if(ie){if(oe)for(i=0;i<e&&ee[i];i++)ee[i].getType()!==a["default"].AUDIO&&ee[i].getType()!==a["default"].VIDEO&&ee[i].getType()!==a["default"].FRAGMENTED_TEXT||oe.initializeForMedia(ee[i].getMediaInfo());t?z.error(t):F.trigger(u["default"].STREAM_INITIALIZED,{streamInfo:ne})}}function k(e){for(var t={},i=0,n=ee.length;i<n;i++){var r=ee[i].createBuffer(e);r&&(t[ee[i].getType()]=r.getBuffer())}return t}function A(e){if(e.streamInfo===ne){var t=M(),i=t.length;if(0!==i){for(var n=0;n<i;n++)if(!t[n].isBufferingCompleted()&&(t[n].getType()===a["default"].AUDIO||t[n].getType()===a["default"].VIDEO))return void Z.warn("onBufferingCompleted - One streamProcessor has finished but",t[n].getType(),"one is not buffering completed");Z.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),F.trigger(u["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:ne})}else Z.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function I(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===ne&&(re[t.getType()]=e.error,x())}function D(e){return e?M().filter(function(t){return t.getType()===e.type})[0]:null}function M(){for(var e=ee.length,t=[],i=void 0,n=void 0,r=0;r<e;r++)(i=(n=ee[r]).getType())!==a["default"].AUDIO&&i!==a["default"].VIDEO&&i!==a["default"].FRAGMENTED_TEXT&&i!==a["default"].TEXT||t.push(n);return t}function P(e,t){if(!e)return!1;var i=e.getStreamInfo(),n=m();if(!i||!n)return!1;var r=U.getAdaptationForType(i.index,t,i),a=U.getAdaptationForType(n.index,t,n);return r&&a?!r.ContentProtection&&!a.ContentProtection:!r&&!a}function R(e,t){if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var i=e.getStreamInfo(),n=m();if(!i||!n)return!1;var r=U.getAdaptationForType(i.index,t,i),a=U.getAdaptationForType(n.index,t,n);if(!r||!a)return!r&&!a;var o=r&&a&&r.mimeType===a.mimeType,s=a.Representation_asArray.map(function(e){return e.codecs}),l=r.Representation_asArray.map(function(e){return e.codecs}),d=l.some(function(e){return-1<s.indexOf(e)}),c=l.some(function(e){return s.some(function(t){return function(e,t){for(var i=e.split(".")[0],n=0===t.indexOf(i),r=void 0,a=0;a<he.length;a++)if(he[a].codec===i){r=he[a];break}return r?n||r.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):n}(t,e)})});return d||c&&o}function O(e){ce=e}function N(){return ce}e=e||{};var L=this.context,F=(0,c["default"])(L).getInstance(),j=e.manifestModel,B=e.mediaPlayerModel,H=e.manifestUpdater,U=e.adapter,$=e.capabilities,z=e.errHandler,q=e.timelineConverter,W=e.dashMetrics,Y=e.abrController,G=e.playbackController,V=e.mediaController,K=e.textController,X=e.videoModel,Q=e.settings,J=void 0,Z=void 0,ee=void 0,te=void 0,ie=void 0,ne=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,de=void 0,ce=void 0,ue=void 0,he=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];return J={initialize:function(e,t){ne=e,(oe=t)&&(F.on(u["default"].KEY_ERROR,b,J),F.on(u["default"].SERVER_CERTIFICATE_UPDATED,b,J),F.on(u["default"].LICENSE_REQUEST_COMPLETE,b,J),F.on(u["default"].KEY_SYSTEM_SELECTED,b,J),F.on(u["default"].KEY_SESSION_CREATED,b,J),F.on(u["default"].KEY_STATUSES_CHANGED,b,J))},activate:function(e,t){if(te)return t;var i=void 0;return F.on(u["default"].CURRENT_TRACK_CHANGED,w,J),i=N()?(function(){if(ae=!0,v(),C(a["default"].VIDEO),C(a["default"].AUDIO),ae=!(ie=!0),0===ee.length){var e="No streams to play.";z.error(new g["default"](f["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,j.getValue())),Z.debug(e)}else x()}(),t):function(e,t){v();var i=X.getElement();T(),ae=!0,C(a["default"].VIDEO),C(a["default"].AUDIO),(!i||i&&/^VIDEO$/i.test(i.nodeName))&&E(a["default"].VIDEO,e),E(a["default"].AUDIO,e),E(a["default"].TEXT,e),E(a["default"].FRAGMENTED_TEXT,e),E(a["default"].EMBEDDED_TEXT,e),E(a["default"].MUXED,e),E(a["default"].IMAGE,e);var n=k(t);if(ae=!(ie=!0),0===ee.length){var r="No streams to play.";z.error(new g["default"](f["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,r,j.getValue())),Z.fatal(r)}else x();return n}(e,t),te=!0,i},deactivate:t,isActive:function(){return te},getDuration:r,getStartTime:p,getId:function(){return ne?ne.id:null},getStreamInfo:m,preload:function(e,t){T(),E(a["default"].VIDEO,e),E(a["default"].AUDIO,e),E(a["default"].TEXT,e),E(a["default"].FRAGMENTED_TEXT,e),E(a["default"].EMBEDDED_TEXT,e),E(a["default"].MUXED,e),E(a["default"].IMAGE,e),k(t),F.on(u["default"].CURRENT_TRACK_CHANGED,w,J);for(var i=0;i<ee.length&&ee[i];i++)ee[i].getScheduleController().start();O(!0)},getFragmentController:function(){return se},getThumbnailController:function(){return le},getBitrateListFor:function(e){if(v(),e===a["default"].IMAGE)return le?le.getBitrateList():[];var t=function(e){for(var t=ee.length,i=null,n=0;n<t;n++)if((i=ee[n]).getType()===e)return i.getMediaInfo();return null}(e);return Y.getBitrateList(t)},startEventController:function(){de&&de.start()},stopEventController:y,updateData:function(e){Z.info("Manifest updated... updating data system wide."),ae=!(te=!1),ne=e,de&&S(),C(a["default"].VIDEO),C(a["default"].AUDIO);for(var t=0,i=ee.length;t<i;t++){var n=ee[t],r=U.getMediaInfoForType(ne,n.getType());Y.updateTopQualityIndex(r),n.addMediaInfo(r,!0)}if(ue&&"fragmentedText"!==(r=ue.newMediaInfo).type){var o=D(ue.oldMediaInfo);if(!o)return;o.switchTrackAsked(),ue=void 0}ae=!1,x()},reset:n,getProcessors:M,setMediaSource:function(e){for(var t=0;t<ee.length;)_(ee[t].getMediaInfo())?(ee[t].setMediaSource(e),t++):(ee[t].reset(),ee.splice(t,1));for(t=0;t<ee.length;t++)ee[t].dischargePreBuffer();if(0===ee.length){var i="No streams to play.";z.error(new g["default"](f["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,i+"nostreams",j.getValue())),Z.fatal(i)}},isMediaCodecCompatible:function(e){return R(e,a["default"].VIDEO)&&R(e,a["default"].AUDIO)},isProtectionCompatible:function(e){return P(e,a["default"].VIDEO)&&P(e,a["default"].AUDIO)},getPreloaded:N,addInbandEvents:function(e){de&&de.addInbandEvents(e)}},Z=(0,h["default"])(L).getInstance().getLogger(J),i(),se=(0,l["default"])(L).create({mediaPlayerModel:B,dashMetrics:W,errHandler:z,settings:Q}),F.on(u["default"].BUFFERING_COMPLETED,A,J),F.on(u["default"].DATA_UPDATE_COMPLETED,I,J),J}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(107)),s=n(e(116)),l=n(e(117)),d=n(e(202)),c=n(e(48)),u=n(e(56)),h=n(e(47)),f=n(e(53)),p=n(e(49)),g=n(e(223));r.__dashjs_factory_name="Stream",i["default"]=p["default"].getClassFactory(r),t.exports=i["default"]},{107:107,109:109,116:116,117:117,202:202,223:223,47:47,48:48,49:49,53:53,56:56}],107:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){F=[]}function i(){M=[],D=null,t()}function n(){return w?w.getStreamInfo():null}function r(){return D}e=e||{};var u=this.context,p=e.type,g=e.errHandler,m=e.mimeType,v=e.timelineConverter,y=e.adapter,b=e.manifestModel,_=e.mediaPlayerModel,w=e.stream,E=e.abrController,T=e.playbackController,S=e.streamController,C=e.mediaController,x=e.textController,k=e.dashMetrics,A=e.settings,I=void 0,D=void 0,M=void 0,P=void 0,R=void 0,O=void 0,N=void 0,L=void 0,F=void 0,j=void 0;return I={initialize:function(t){(j=(0,f["default"])(u).create({mimeType:m,timelineConverter:v,dashMetrics:k,mediaPlayerModel:_,baseURLController:e.baseURLController,errHandler:g,settings:A})).initialize(I),E.registerStreamType(p,I),(L=w.getFragmentController().getModel(p)).setStreamProcessor(I),P=function(e){var t=null;return t=e===a["default"].VIDEO||e===a["default"].AUDIO?(0,s["default"])(u).create({type:e,dashMetrics:k,mediaPlayerModel:_,manifestModel:b,errHandler:g,streamController:S,mediaController:C,adapter:y,textController:x,abrController:E,playbackController:T,streamProcessor:I,settings:A}):(0,l["default"])(u).create({type:e,mimeType:m,dashMetrics:k,mediaPlayerModel:_,manifestModel:b,errHandler:g,streamController:S,mediaController:C,adapter:y,textController:x,abrController:E,playbackController:T,streamProcessor:I,settings:A})}(p),R=(0,d["default"])(u).create({type:p,mimeType:m,adapter:y,dashMetrics:k,timelineConverter:v,mediaPlayerModel:_,abrController:E,playbackController:T,streamController:S,textController:x,streamProcessor:I,mediaController:C,settings:A}),(N=(0,c["default"])(u).create()).setConfig({abrController:E,dashMetrics:k,manifestModel:b,playbackController:T,timelineConverter:v,streamProcessor:I}),P.initialize(t),R.initialize(),N.initialize()},isUpdating:function(){return!!N&&N.isUpdating()},getType:function(){return p},getBufferController:function(){return P},getFragmentModel:function(){return L},getScheduleController:function(){return R},getLiveEdgeFinder:function(){return O},getFragmentController:function(){return w?w.getFragmentController():null},getRepresentationController:function(){return N},getIndexHandler:function(){return j},getRepresentationInfo:function(e){var t=void 0;return(t=void 0!==e?((0,h.checkInteger)(e),N?N.getRepresentationForQuality(e):null):N?N.getCurrentRepresentation():null)?y.convertDataToRepresentationInfo(t):null},getBufferLevel:function(){return P.getBufferLevel()},switchInitData:function(e,t){P&&P.switchInitData(n().id,e,t)},isBufferingCompleted:function(){return!!P&&P.getIsBufferingCompleted()},createBuffer:function(e){return P.getBuffer()||P.createBuffer(D,e)},getStreamInfo:n,selectMediaInfo:function(e){e===D||e&&D&&e.type!==D.type||(D=e);var t=y.getRealAdaptation(n(),D),i=y.getVoRepresentations(D);N&&N.updateData(t,i,p)},addMediaInfo:function(e,t){-1===M.indexOf(e)&&M.push(e),t&&this.selectMediaInfo(e)},switchTrackAsked:function(){R.switchTrackAsked()},getMediaInfoArr:function(){return M},getMediaInfo:r,getMediaSource:function(){return P.getMediaSource()},setMediaSource:function(e){P.setMediaSource(e,r())},dischargePreBuffer:function(){P.dischargePreBuffer()},getBuffer:function(){return P.getBuffer()},setBuffer:function(e){P.setBuffer(e)},registerExternalController:function(e){F.push(e)},unregisterExternalController:function(e){var t=F.indexOf(e);-1!==t&&F.splice(t,1)},getExternalControllers:function(){return F},unregisterAllExternalController:t,addInbandEvents:function(e){w&&w.addInbandEvents(e)},setIndexHandlerTime:function(e){j&&j.setCurrentTime(e)},getIndexHandlerTime:function(){return j?j.getCurrentTime():NaN},resetIndexHandler:function(){j&&j.resetIndex()},getInitRequest:function(e){(0,h.checkInteger)(e);var t=N?N.getRepresentationForQuality(e):null;return j?j.getInitRequest(t):null},getFragmentRequest:function(e,t,i){var n=null,r=N&&e?N.getRepresentationForQuality(e.quality):null;return j&&(n=void 0!==t&&void 0!==i?j.getSegmentRequestForTime(r,t,i):j.getNextSegmentRequest(r)),n},reset:function(e,t){j.reset(),P&&(P.reset(e,t),P=null),R&&(R.reset(),R=null),N&&(N.reset(),N=null),E&&E.unRegisterStreamType(p),F.forEach(function(e){e.reset()}),i(),w=p=null,O&&(O.reset(),O=null)}},T&&T.getIsDynamic()&&(O=(0,o["default"])(u).create({timelineConverter:v,streamProcessor:I})),i(),I}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(213)),s=n(e(115)),l=n(e(198)),d=n(e(121)),c=n(e(64)),u=n(e(49)),h=e(216),f=n(e(59));r.__dashjs_factory_name="StreamProcessor",i["default"]=u["default"].getClassFactory(r),t.exports=i["default"]},{109:109,115:115,121:121,198:198,213:213,216:216,49:49,59:59,64:64}],108:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){e=e||{};var t="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,n=(0,d["default"])(i).getInstance(),r=(0,o["default"])(i).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(e,i,o){function d(t,r){i.resolved=!0,i.resolvedContent=t||null,n.trigger(c["default"].XLINK_ELEMENT_LOADED,{element:i,resolveObject:o,error:t||r?null:new a["default"](h["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})}if(e===t)d(null,!0);else{var u=new l["default"](e,s.HTTPRequest.XLINK_EXPANSION_TYPE);r.load({request:u,success:function(e){d(e)},error:function(){d(null)}})}},reset:function(){r&&(r.abort(),r=null)}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(223)),o=n(e(156)),s=e(239),l=n(e(230)),d=n(e(48)),c=n(e(56)),u=n(e(49)),h=n(e(53));r.__dashjs_factory_name="XlinkLoader",i["default"]=u["default"].getClassFactory(r),t.exports=i["default"]},{156:156,223:223,230:230,239:239,48:48,49:49,53:53,56:56}],109:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(i,"__esModule",{value:!0});var a=new(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime"}}]),r);i["default"]=a,t.exports=i["default"]},{}],110:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(i,"__esModule",{value:!0});var a=new(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),r);i["default"]=a,t.exports=i["default"]},{}],111:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}Object.defineProperty(i,"__esModule",{value:!0});var a=new(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),r);i["default"]=a,t.exports=i["default"]},{}],112:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){(B=(0,a["default"])(O).create({dashMetrics:re,mediaPlayerModel:Q,settings:ae})).initialize()}function t(){U={},$={},q={},z={},ee={},ne={},void 0===Y&&(Y=!1),ie=te=Z=void 0,clearTimeout(W),W=null}function i(e){e.mediaType===o["default"].VIDEO&&(Z=e.oldQuality,te.push(Z,X.getPlaybackQuality()))}function n(e){e.metric!==s["default"].HTTP_REQUEST||!e.value||e.value.type!==b.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==o["default"].AUDIO&&e.mediaType!==o["default"].VIDEO||ie.push(e.mediaType,e.value,ae.get().streaming.abr.useDeadTimeLatency),e.metric!==s["default"].BUFFER_LEVEL||e.mediaType!==o["default"].AUDIO&&e.mediaType!==o["default"].VIDEO||function(e,t){var i=ae.get().streaming.ABRStrategy;if(i===o["default"].ABR_STRATEGY_BOLA)return ne[e]=!0;if(i===o["default"].ABR_STRATEGY_THROUGHPUT)return ne[e]=!1;var n=Q.getStableBufferTime(),r=n,a=.5*n,s=ne[e],l=(s?a:r)<t;(ne[e]=l)!==s&&(l?j.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):j.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function r(e,t){return U[t]=U[t]||{},U[t].hasOwnProperty(e)||(U[t][e]=0),
function(e,t){if(t!==o["default"].VIDEO||!ae.get().streaming.abr.limitBitrateByPortal||!z[t])return e;Y||P();var i=K.getAdaptationForType(0,t).Representation,n=e;if(0<G&&0<V){for(;0<n&&i[n]&&G<i[n].width&&G-i[n-1].width<i[n].width-G;)n-=1;for(;n<i.length-1&&i[n].width===i[n+1].width;)n+=1}return n}(function(e,t,i){var n=function(e){return ae.get().streaming.abr.maxRepresentationRatio[e]}(t);return isNaN(n)||1<=n||n<0?e:Math.min(e,Math.round(i*n))}(function(e,t){var i=e;if(!z[t])return i;var n=T(t);void 0!==n&&(i=Math.max(e,n));var r=h(t);return void 0!==r&&(i=Math.min(i,r)),i}(U[t][e],e),e,U[t][e]),e)}function h(e){var t=function(e){return ae.get().streaming.abr.maxBitrate[e]}(e);return-1<t?A(z[e].getMediaInfo(),t):void 0}function T(e){var t=function(e){return ae.get().streaming.abr.minBitrate[e]}(e);if(-1<t){var i=z[e].getMediaInfo(),n=I(i),r=A(i,t);return n[r]&&r<n.length-1&&n[r].bitrate<1e3*t&&r++,r}}function S(e){return!!ae.get().streaming.abr.autoSwitchBitrate[e]}function C(e,t,i,n){var a=t.id,o=M(e);(0,_.checkInteger)(i);var s=r(e,a);i!==o&&0<=i&&i<=s&&x(e,o,i,s,n)}function x(e,t,i,n,r){if(e&&z[e]){var a=z[e].getStreamInfo(),o=a?a.id:null;if(ae.get().debug.logLevel===y["default"].LOG_LEVEL_DEBUG){var s=re.getCurrentBufferLevel(e,!0);j.info("AbrController ("+e+") switch from "+t+" to "+i+"/"+n+" (buffer: "+s+") "+(r?JSON.stringify(r):"."))}!function(e,t,i){$[t]=$[t]||{},$[t][e]=i}(e,o,i),L.trigger(u["default"].QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:i,reason:r});var l=ie.getAverageThroughput(e);isNaN(l)||J.setSavedBitrateSettings(e,l)}}function k(e,t){q[e].state=t}function A(e,t,i){var n=e&&e.type?z[e.type].getRepresentationInfo():null;if(ae.get().streaming.abr.useDeadTimeLatency&&i&&n&&n.fragmentDuration){i/=1e3;var r=n.fragmentDuration;if(r<i)return 0;t*=1-i/r}for(var a=I(e),o=a.length-1;0<=o;o--)if(1e3*t>=a[o].bitrate)return o;return 0}function I(e){var t=[];if(!e||!e.bitrateList)return t;for(var i=e.bitrateList,n=e.type,r=void 0,a=0,o=i.length;a<o;a++)(r=new l["default"]).mediaType=n,r.qualityIndex=a,r.bitrate=i[a].bandwidth,r.width=i[a].width,r.height=i[a].height,r.scanType=i[a].scanType,t.push(r);return t}function D(e){return ne[e]}function M(e){if(e&&z[e]){var t=z[e].getStreamInfo(),i=t?t.id:null;if(i)return $[i]=$[i]||{},$[i].hasOwnProperty(e)||($[i][e]=0),$[i][e]}return 0}function P(){if(X){var e=ae.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;G=X.getClientWidth()*e,V=X.getClientHeight()*e}}function R(e){var t=e.request.mediaType;if(S(t)){var i=z[t];if(!i)return;var n=(0,f["default"])(O).create({abrController:F,streamProcessor:i,currentRequest:e.request,useBufferOccupancyABR:D(t)}),r=B.shouldAbandonFragment(n);if(r.quality>p["default"].NO_CHANGE){var a=i.getFragmentModel();a.getRequests({state:d["default"].FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(a.abortRequests(),k(t,w),ee[t].reset(),ee[t].push({oldValue:M(t),newValue:r.quality,confidence:1,reason:r.reason}),C(t,H.getActiveStreamInfo(),r.quality,r.reason),clearTimeout(W),W=setTimeout(function(){k(t,E),W=null},ae.get().streaming.abandonLoadTimeout))}}}var O=this.context,N=(0,y["default"])(O).getInstance(),L=(0,c["default"])(O).getInstance(),F=void 0,j=void 0,B=void 0,H=void 0,U=void 0,$=void 0,z=void 0,q=void 0,W=void 0,Y=void 0,G=void 0,V=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ie=void 0,ne=void 0,re=void 0,ae=void 0;return F={isPlayingAtTopQuality:function(e){var t=e?e.id:null,i=M(o["default"].AUDIO),n=M(o["default"].VIDEO);return i===r(o["default"].AUDIO,t)&&n===r(o["default"].VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,i=e.streamInfo.id,n=e.representationCount-1;return function(e,t,i){U[t]=U[t]||{},U[t][e]=i}(t,i,n),n},getThroughputHistory:function(){return ie},getBitrateList:I,getQualityForBitrate:A,getTopBitrateInfoFor:function(e){if(e&&z&&z[e]){var t=z[e].getStreamInfo();if(t&&t.id){var i=r(e,t.id),n=I(z[e].getMediaInfo());return n[i]?n[i]:null}}return null},getMaxAllowedIndexFor:h,getMinAllowedIndexFor:T,getInitialBitrateFor:function(e){if(function(){if(!J||!J.hasOwnProperty("getSavedBitrateSettings"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}(),e===o["default"].TEXT||e===o["default"].FRAGMENTED_TEXT)return NaN;var t=J.getSavedBitrateSettings(e),i=ae.get().streaming.abr.initialBitrate[e],n=ae.get().streaming.abr.initialRepresentationRatio[e];if(-1===i)if(-1<n){var r=K.getAdaptationForType(0,e).Representation;i=Array.isArray(r)?r[Math.max(Math.round(r.length*n)-1,0)].bandwidth:0}else i=isNaN(t)?e===o["default"].VIDEO?1e3:100:t;return i},getQualityFor:M,getAbandonmentStateFor:function(e){return q[e]?q[e].state:null},setPlaybackQuality:C,checkPlaybackQuality:function(e){if(e&&z&&z[e]){var t=z[e].getStreamInfo(),i=t?t.id:null,n=M(e),a=(0,f["default"])(O).create({abrController:F,streamProcessor:z[e],currentValue:n,switchHistory:ee[e],droppedFramesHistory:te,useBufferOccupancyABR:D(e)});if(te){var o=X.getPlaybackQuality();o&&te.push(Z,o)}if(S(e)){var s=T(e),l=r(e,i),d=B.getMaxQuality(a),c=d.quality;if(void 0!==s&&(c>p["default"].NO_CHANGE?c:n)<s&&(c=s),l<c&&(c=l),ee[e].push({oldValue:n,newValue:c}),c>p["default"].NO_CHANGE&&c!=n)(q[e].state===E||n<c)&&x(e,n,c,l,d.reason);else if(ae.get().debug.logLevel===y["default"].LOG_LEVEL_DEBUG){var u=re.getCurrentBufferLevel(e,!0);j.debug("AbrController ("+e+") stay on "+n+"/"+l+" (buffer: "+u+")")}}}},getTopQualityIndexFor:r,setElementSize:P,setWindowResizeEventCalled:function(e){Y=e},createAbrRulesCollection:e,registerStreamType:function(t,r){ee[t]=ee[t]||(0,g["default"])(O).create(),z[t]=r,q[t]=q[t]||{},q[t].state=E,ne[t]=!1,L.on(u["default"].LOADING_PROGRESS,R,this),t==o["default"].VIDEO&&(L.on(u["default"].QUALITY_CHANGE_RENDERED,i,this),te=te||(0,m["default"])(O).create(),P()),L.on(u["default"].METRIC_ADDED,n,this),L.on(u["default"].PERIOD_SWITCH_COMPLETED,e,this),ie=ie||(0,v["default"])(O).create({settings:ae})},unRegisterStreamType:function(e){delete z[e]},setConfig:function(e){e&&(e.streamController&&(H=e.streamController),e.domStorage&&(J=e.domStorage),e.mediaPlayerModel&&(Q=e.mediaPlayerModel),e.dashMetrics&&(re=e.dashMetrics),e.adapter&&(K=e.adapter),e.videoModel&&(X=e.videoModel),e.settings&&(ae=e.settings))},reset:function(){t(),L.off(u["default"].LOADING_PROGRESS,R,this),L.off(u["default"].QUALITY_CHANGE_RENDERED,i,this),L.off(u["default"].METRIC_ADDED,n,this),L.off(u["default"].PERIOD_SWITCH_COMPLETED,e,this),B&&B.reset()}},j=N.getLogger(F),t(),F}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(187)),o=n(e(109)),s=n(e(110)),l=n(e(222)),d=n(e(149)),c=n(e(48)),u=n(e(56)),h=n(e(49)),f=n(e(183)),p=n(e(184)),g=n(e(185)),m=n(e(182)),v=n(e(186)),y=n(e(47)),b=e(239),_=e(216),w="abandonload",E="allowload";r.__dashjs_factory_name="AbrController";var T=h["default"].getSingletonFactory(r);T.ABANDON_LOAD=w,T.QUALITY_DEFAULT=0,h["default"].updateSingletonFactory(r.__dashjs_factory_name,T),i["default"]=T,t.exports=i["default"]},{109:109,110:110,149:149,182:182,183:183,184:184,185:185,186:186,187:187,216:216,222:222,239:239,47:47,48:48,49:49,56:56}],113:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){h.invalidateSelectedIndexes(e.entry)}var t=void 0,i=void 0,n=this.context,r=(0,c["default"])(n).getInstance(),d=(0,s["default"])(n).getInstance(),h=void 0,f=void 0;return t={reset:function(){h.reset(),f.reset()},initialize:function(e){h.setConfig({adapter:i}),function(e){h.update(e),f.chooseSelector(i.getIsDVB(e))}(e)},resolve:function(e){var t=h.getForPath(e).reduce(function(e,t){var i=f.select(t);return i?(d.isRelative(i.url)?e.url=d.resolve(i.url,e.url):(e.url=i.url,e.serviceLocation=i.serviceLocation),e.availabilityTimeOffset=i.availabilityTimeOffset,e.availabilityTimeComplete=i.availabilityTimeComplete,e):new l["default"]},new l["default"]);if(!d.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(h=e.baseURLTreeModel),e.baseURLSelector&&(f=e.baseURLSelector),e.adapter&&(i=e.adapter)}},h=(0,a["default"])(n).create(),f=(0,o["default"])(n).create(),r.on(u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,e,t),t}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(148)),o=n(e(204)),s=n(e(218)),l=n(e(86)),d=n(e(49)),c=n(e(48)),u=n(e(56));r.__dashjs_factory_name="BaseURLController",i["default"]=d["default"].getSingletonFactory(r),t.exports=i["default"]},{148:148,204:204,218:218,48:48,49:49,56:56,86:86}],114:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(a,{entry:e}))}function i(e){t(e.entry)}e=e||{};var n=[],r=(0,o["default"])(this.context).getInstance(),a=e.updateEventName,s=e.addBlacklistEventName;return function(){s&&r.on(s,i,this)}(),{add:t,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(48));r.__dashjs_factory_name="BlackListController",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{48:48,49:49}],115:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t){if(!Ce||!e||!le)return null;if(me)try{"function"==typeof(be=t&&t[se]?(0,s["default"])(Q).create(me,e,T.bind(this),t[se]):(0,s["default"])(Q).create(me,e,T.bind(this))).getBuffer().initialize&&be.getBuffer().initialize(se,le)}catch(e){ue.fatal("Caught error on create SourceBuffer: "+e),ee.error(new v["default"](y["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,y["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+se))}else be=(0,l["default"])(Q).create(T.bind(this));return U(le.getRepresentationInfo(he).MSETimeOffset),be}function i(e){e.fragmentModel===le.getFragmentModel()&&(ue.info("Init fragment finished loading saving to",se+"'s init cache"),Ce.save(e.chunk),ue.debug("Append Init fragment",se," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),r(e.chunk))}function n(e){if(e.fragmentModel===le.getFragmentModel()){var t=e.chunk,i=t.bytes,n=t.quality,a=le.getRepresentationInfo(n),s=le.getRepresentationController(),l=s&&a?s.getRepresentationForQuality(a.quality):null,d=ne.getEventsFor(a.mediaInfo),c=ne.getEventsFor(a,l);if(d&&0<d.length||c&&0<c.length){var u=function(e,t,i,n){for(var r=Math.max(!t||isNaN(t.startTime)?0:t.startTime,0),a=[],o=[],s=i.concat(n),l=0,d=s.length;l<d;l++)a[s[l].schemeIdUri+"/"+s[l].value]=s[l];var c=(0,f["default"])(Q).getInstance().parse(e).getBoxes("emsg");for(l=0,d=c.length;l<d;l++){var u=ne.getEvent(c[l],a,r);u&&o.push(u)}return o}(i,le.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,quality:n,index:t.index})[0],d,c);le.addInbandEvents(u)}if(Ie){De=t;var h=be&&be.getAllBufferRanges();h&&0<h.length&&.5<oe.getTimeToStreamEnd()&&(ue.debug("Clearing buffer because track changed - "+(h.end(h.length-1)+.5)),j([{start:0,end:h.end(h.length-1)+.5,force:!0}]))}else r(t)}}function r(e){be.append(e),e.mediaInfo.type===a["default"].VIDEO&&J.trigger(h["default"].VIDEO_CHUNK_RECEIVED,{chunk:e})}function p(e){if(e&&0<e.length)for(var t=0,i=e.length;t<i;t++)ue.debug("Buffered Range for type:",se,":",e.start(t)," - ",e.end(t)," currentTime = ",oe.getTime())}function T(e){if(e.error){if(22===e.error.code&&(ge=.8*V(),ue.warn("Quota exceeded for type: "+se+", Critical Buffer: "+ge),0<ge)){var t=Math.max(.2*ge,1),i=ge-t,n={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferAheadToKeep:parseFloat(i.toFixed(5))}};de.update(n)}22!==e.error.code&&K()||(ue.warn("Clearing playback buffer to overcome quota exceed situation for type: "+se),J.trigger(h["default"].QUOTA_EXCEEDED,{sender:ce,criticalBufferLevel:ge}),k())}else{(Ee=e.chunk)&&!isNaN(Ee.index)&&(ve=Math.max(Ee.index,ve),O());var r=be.getAllBufferRanges();if(Ee.segmentType===b.HTTPRequest.MEDIA_SEGMENT_TYPE)p(r),A();else if(Ie){var a=oe.getTime();ue.debug("AppendToBuffer seek target should be "+a),le.getScheduleController().setSeekTarget(a),le.setIndexHandlerTime(a)}var o={sender:ce,quality:Ee.quality,startTime:Ee.start,index:Ee.index,bufferedRanges:r};Ee&&!Ee.endFragment?J.trigger(h["default"].BYTES_APPENDED,o):Ee&&J.trigger(h["default"].BYTES_APPENDED_END_FRAGMENT,o)}}function S(e){he!==e.newQuality&&se===e.mediaType&&le.getStreamInfo().id===e.streamInfo.id&&(U(le.getRepresentationInfo(e.newQuality).MSETimeOffset),he=e.newQuality)}function C(){fe&&(fe=!(ke=!0),ye=Number.POSITIVE_INFINITY),se!==a["default"].FRAGMENTED_TEXT?k():A()}function x(){xe=void 0}function k(){be.waitForUpdateEnd(function(){var e=function(){var e=[],t=be.getAllBufferRanges();if(!t||0===t.length)return e;var i=oe.getTime(),n=t.end(t.length-1)+.5,r=le.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,time:i,threshold:.01})[0];if(r){var a={start:0,end:r.startTime-.5},s=le.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,time:r.startTime-r.duration/2,threshold:.01})[0];s&&s.startTime!=r.startTime&&(a.end=s.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a);var l={start:r.startTime+r.duration+.5,end:n},d=le.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,time:r.startTime+r.duration+.5,threshold:.01})[0];d&&d.startTime!==r.startTime&&(l.start=d.startTime+d.duration+.5),l.start<l.end&&l.start<n&&e.push(l)}else ue.debug("getAllRangesWithSafetyFactor for",se,"- No request found in current time position, removing full buffer 0 -",n),e.push({start:0,end:n});return e}();e&&0!==e.length||A(),j(e)})}function A(){(!Ie||se===a["default"].FRAGMENTED_TEXT&&re.isTextEnabled())&&(P(),R())}function I(){N()}function D(){N()}function M(e,t){var i=be.getAllBufferRanges(),n=0,r=0,a=null,o=null,s=0,l=void 0,d=void 0,c=t||.15;if(null!=i){for(d=0,l=i.length;d<l;d++)if(n=i.start(d),r=i.end(d),null===a)s=Math.abs(n-e),n<=e&&e<r?(a=n,o=r):s<=c&&(a=n,o=r);else{if(!((s=n-o)<=c))break;o=r}if(null!==a)return{start:a,end:o}}return null}function P(){oe&&(pe=function(e,t){var i;return null===(i=M(e,t))?0:i.end-e}(function(){var e=oe.getTime();if(xe){var t=be.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),xe))}return e}()||0),J.trigger(h["default"].BUFFER_LEVEL_UPDATED,{sender:ce,bufferLevel:pe}),N())}function R(){le&&te&&le.getStreamInfo()&&(Z.addBufferState(se,we,le.getScheduleController().getBufferTarget()),Z.addBufferLevel(se,new Date,1e3*pe))}function O(){ye-1<=ve&&!fe&&void 0===be.discharge&&(fe=!0,ue.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),J.trigger(h["default"].BUFFERING_COMPLETED,{sender:ce,streamInfo:le.getStreamInfo()}))}function N(){"audio"!==se&&"video"!==se||(ke&&!fe&&oe&&oe.getTimeToStreamEnd()-pe<.5&&(fe=!(ke=!1),ue.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),J.trigger(h["default"].BUFFERING_COMPLETED,{sender:ce,streamInfo:le.getStreamInfo()})),(!de.get().streaming.lowLatencyEnabled&&pe<.5||0===pe)&&!fe?L(w):(fe||pe>=le.getStreamInfo().manifestInfo.minBufferTime)&&L(_))}function L(e){we===e||e===w&&0===oe.getTime()||se===a["default"].FRAGMENTED_TEXT&&!re.isTextEnabled()||(we=e,R(),J.trigger(h["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:ce,state:e,mediaType:se,streamInfo:le.getStreamInfo()}),J.trigger(e===_?h["default"].BUFFER_LOADED:h["default"].BUFFER_EMPTY,{mediaType:se}),ue.debug(e===_?"Got enough buffer to start for "+se:"Waiting for more buffer before starting playback for "+se))}function F(){be&&se!==a["default"].FRAGMENTED_TEXT&&(fe||j(function(){var e=[],t=be.getAllBufferRanges();if(!t||0===t.length)return e;var i=oe.getTime(),n={start:Math.max(0,i-de.get().streaming.bufferToKeep),end:i+de.get().streaming.bufferAheadToKeep},r=le.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,time:i,threshold:.01})[0];if(r)n.start=Math.min(r.startTime,n.start),n.end=Math.max(r.startTime+r.duration,n.end);else if(0===i&&oe.getIsDynamic())return[];if(t.start(0)<=n.start){for(var a={start:0,end:n.start},s=0;s<t.length&&t.end(s)<=n.start;s++)a.end=t.end(s);a.start<a.end&&e.push(a)}if(t.end(t.length-1)>=n.end){var l={start:n.end,end:t.end(t.length-1)+.01};l.start<l.end&&e.push(l)}return e}()))}function j(e){e&&be&&0!==e.length&&(Ae.push.apply(Ae,e),Se||B())}function B(){if(0===Ae.length||!be)return ue.debug("Nothing to prune, halt pruning"),void(Se=!(Ae=[]));var e=be.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return ue.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(Se=!(Ae=[]));var t=Ae.shift();ue.debug("Removing",se,"buffer from:",t.start,"to",t.end),Se=!0;var i=oe.getTime();i<t.end&&(fe=!1,ve=0,Ie||(le.getScheduleController().setSeekTarget(i),le.setIndexHandlerTime(i))),be.remove(t.start,t.end,t.force)}function H(e){be===e.buffer&&(ue.debug("onRemoved buffer from:",e.from,"to",e.to),p(be.getAllBufferRanges()),0===Ae.length&&(Se=!1),e.unintended&&(ue.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),le.setIndexHandlerTime(e.from)),Se?B():(Ie?(Ie=!1,De&&r(De)):(ue.debug("onRemoved : call updateBufferLevel"),P()),J.trigger(h["default"].BUFFER_CLEARED,{sender:ce,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:K()})))}function U(e){be&&be.updateTimestampOffset&&be.updateTimestampOffset(e)}function $(e){e.sender.getStreamProcessor()!==le||e.error||U(e.currentRepresentation.MSETimeOffset)}function z(e){e.fragmentModel===le.getFragmentModel()&&(ye=e.request.index,O())}function q(e){var t=be&&be.getAllBufferRanges();t&&e.newMediaInfo.type===se&&e.newMediaInfo.streamInfo.id===le.getStreamInfo().id&&(ue.info("Track change asked"),ie.getSwitchMode(se)===c["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&0<t.length&&.5<oe.getTimeToStreamEnd()&&(fe=!1,ye=Number.POSITIVE_INFINITY))}function W(){++Te*(de.get().streaming.wallclockTimeUpdateInterval/1e3)>=de.get().streaming.bufferPruningInterval&&(Te=0,F())}function Y(){N()}function G(e,i){me=e,be&&i&&"function"==typeof be.discharge&&(_e=be,t(i))}function V(){var e,t=be.getAllBufferRanges(),i=0,n=void 0;if(!t)return i;for(n=0,e=t.length;n<e;n++)i+=t.end(n)-t.start(n);return i}function K(){return V()<ge}function X(e,t){ge=Number.POSITIVE_INFINITY,we=void 0,he=d["default"].QUALITY_DEFAULT,ye=Number.POSITIVE_INFINITY,Ee=null,ke=Se=fe=!1,Te=pe=ve=0,Ae=[],be&&(e||be.abort(),be.reset(t),be=null),Ie=!1}e=e||{};var Q=this.context,J=(0,u["default"])(Q).getInstance(),Z=e.dashMetrics,ee=e.errHandler,te=e.streamController,ie=e.mediaController,ne=e.adapter,re=e.textController,ae=e.abrController,oe=e.playbackController,se=e.type,le=e.streamProcessor,de=e.settings,ce=void 0,ue=void 0,he=void 0,fe=void 0,pe=void 0,ge=void 0,me=void 0,ve=void 0,ye=void 0,be=void 0,_e=void 0,we=void 0,Ee=void 0,Te=void 0,Se=void 0,Ce=void 0,xe=void 0,ke=void 0,Ae=void 0,Ie=void 0,De=void 0;return ce={getBufferControllerType:function(){return E},initialize:function(e){G(e),he=ae.getQualityFor(se),J.on(h["default"].DATA_UPDATE_COMPLETED,$,this),J.on(h["default"].INIT_FRAGMENT_LOADED,i,this),J.on(h["default"].MEDIA_FRAGMENT_LOADED,n,this),J.on(h["default"].QUALITY_CHANGE_REQUESTED,S,this),J.on(h["default"].STREAM_COMPLETED,z,this),J.on(h["default"].PLAYBACK_PLAYING,D,this),J.on(h["default"].PLAYBACK_PROGRESS,A,this),J.on(h["default"].PLAYBACK_TIME_UPDATED,A,this),J.on(h["default"].PLAYBACK_RATE_CHANGED,Y,this),J.on(h["default"].PLAYBACK_SEEKING,C,this),J.on(h["default"].PLAYBACK_SEEKED,x,this),J.on(h["default"].PLAYBACK_STALLED,I,this),J.on(h["default"].WALLCLOCK_TIME_UPDATED,W,this),J.on(h["default"].CURRENT_TRACK_CHANGED,q,this,u["default"].EVENT_PRIORITY_HIGH),J.on(h["default"].SOURCEBUFFER_REMOVE_COMPLETED,H,this)},createBuffer:t,dischargePreBuffer:function(){if(be&&_e&&"function"==typeof _e.discharge){var e=_e.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+se+"PreBuffer discharge, adding buffer for:",i=0;i<e.length;i++)t+=" start: "+e.start(i)+", end: "+e.end(i)+";";ue.debug(t)}else ue.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var n=_e.discharge(),r=null,a=0;a<n.length;a++){var o=n[a],s=Ce.extract(o.streamId,o.representationId);s&&(r!==s&&(be.append(s),r=s),be.append(o))}_e.reset(),_e=null}},getType:function(){return se},getStreamProcessor:function(){return le},setSeekStartTime:function(e){xe=e},getBuffer:function(){return be},setBuffer:function(e){be=e},getBufferLevel:function(){return pe},getRangeAt:M,setMediaSource:G,getMediaSource:function(){return me},getIsBufferingCompleted:function(){return fe},switchInitData:function(e,t,i){var n=Ce.extract(e,t);Ie=!0===i&&i,n?(ue.info("Append Init fragment",se," with representationId:",n.representationId," and quality:",n.quality,", data size:",n.bytes.byteLength),r(n)):J.trigger(h["default"].INIT_REQUESTED,{sender:ce})},getIsPruningInProgress:function(){return Se},reset:function(e,t){J.off(h["default"].DATA_UPDATE_COMPLETED,$,this),J.off(h["default"].QUALITY_CHANGE_REQUESTED,S,this),J.off(h["default"].INIT_FRAGMENT_LOADED,i,this),J.off(h["default"].MEDIA_FRAGMENT_LOADED,n,this),J.off(h["default"].STREAM_COMPLETED,z,this),J.off(h["default"].CURRENT_TRACK_CHANGED,q,this),J.off(h["default"].PLAYBACK_PLAYING,D,this),J.off(h["default"].PLAYBACK_PROGRESS,A,this),J.off(h["default"].PLAYBACK_TIME_UPDATED,A,this),J.off(h["default"].PLAYBACK_RATE_CHANGED,Y,this),J.off(h["default"].PLAYBACK_SEEKING,C,this),J.off(h["default"].PLAYBACK_SEEKED,x,this),J.off(h["default"].PLAYBACK_STALLED,I,this),J.off(h["default"].WALLCLOCK_TIME_UPDATED,W,this),J.off(h["default"].SOURCEBUFFER_REMOVE_COMPLETED,H,this),X(e,t)}},ue=(0,g["default"])(Q).getInstance().getLogger(ce),Ce=(0,m["default"])(Q).getInstance(),X(),ce}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(149)),s=n(e(105)),l=n(e(104)),d=n(e(112)),c=n(e(118)),u=n(e(48)),h=n(e(56)),f=n(e(205)),p=n(e(49)),g=n(e(47)),m=n(e(211)),v=n(e(223)),y=n(e(53)),b=e(239),_="bufferLoaded",w="bufferStalled",E="BufferController";r.__dashjs_factory_name=E;var T=p["default"].getClassFactory(r);T.BUFFER_LOADED=_,T.BUFFER_EMPTY=w,p["default"].updateClassFactory(r.__dashjs_factory_name,T),i["default"]=T,t.exports=i["default"]},{104:104,105:105,109:109,112:112,118:118,149:149,205:205,211:211,223:223,239:239,47:47,48:48,49:49,53:53,56:56}],116:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){x=!1,y={},b={},_={},w=null,E=100,T=Date.now()/1e3}function t(){if(!S||!C)throw new Error("setConfig function has to be called previously")}function i(){null!==w&&x&&(clearInterval(w),w=null,x=!1)}function n(e){if(e.eventStream.value==u){var t=e.eventStream.timescale||1,i=e.presentationTime/t,n=void 0;n=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/t,v.info("Manifest validity changed: Valid until: "+i+"; remaining duration: "+n),g.trigger(l["default"].MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:i,newDuration:n,newManifestValidAfter:NaN})}}function r(){var e=C.getTime(),t=e-T;a(b,t,T=e),a(y,t,e),function(){if(_)for(var e=C.getTime(),t=Object.keys(_),i=0;i<t.length;i++){var n=t[i],r=_[n];null!==r&&(r.duration+r.presentationTime)/r.eventStream.timescale<e&&(v.debug("Remove Event "+n+" at time "+e),r=null,delete _[n])}}()}function a(e,i,n){var r,a;if(e)for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s],m=e[l];void 0!==m&&(0==(r=m.presentationTime/m.eventStream.timescale)||r<=n&&n<r+i)&&(v.debug("Start Event "+l+" at "+n),0<m.duration&&(_[l]=m),m.eventStream.schemeIdUri==c&&m.eventStream.value==u?0===m.duration&&0===m.presentationTimeDelta||(t(),S.refreshManifest()):m.eventStream.schemeIdUri==h&&m.eventStream.value==f?(a=m.messageData,(0,d["default"])(p).create({}).load({method:"get",url:a,request:{responseType:"arraybuffer"}})):g.trigger(m.eventStream.schemeIdUri,{event:m}),delete e[l])}}var c="urn:mpeg:dash:event:2012",u=1,h="urn:mpeg:dash:event:callback:2015",f=1,p=this.context,g=(0,s["default"])(p).getInstance(),m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0;return m={addInlineEvents:function(e){if(t(),y={},e)for(var i=0;i<e.length;i++){var n=e[i];y[n.id]=n,v.debug("Add inline event with id "+n.id)}v.debug("Added "+e.length+" inline events")},addInbandEvents:function(e){t();for(var i=0;i<e.length;i++){var r=e[i];r.id in b?v.debug("Repeated event with id "+r.id):(r.eventStream.schemeIdUri===c&&void 0===b[r.id]&&n(r),b[r.id]=r,v.debug("Add inband event with id "+r.id))}},stop:i,start:function(){t(),v.debug("Start Event Controller"),x||isNaN(E)||(x=!0,w=setInterval(r,E))},setConfig:function(e){e&&(e.manifestUpdater&&(S=e.manifestUpdater),e.playbackController&&(C=e.playbackController))},reset:function(){i(),e()}},v=(0,o["default"])(p).getInstance().getLogger(m),e(),m}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47)),s=n(e(48)),l=n(e(56)),d=n(e(157));r.__dashjs_factory_name="EventController",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{157:157,47:47,48:48,49:49,56:56}],117:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){return e&&e.type&&e.type===o.HTTPRequest.INIT_SEGMENT_TYPE}function i(){for(var e in _)_[e].reset();_={}}function n(e){if(_[e.request.mediaType]===e.sender){var i=e.request,n=e.response,r=t(i),o=i.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==a["default"].AUDIO&&e.request.mediaType!==a["default"].VIDEO&&e.request.mediaType!==a["default"].FRAGMENTED_TEXT||f.trigger(h["default"].SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),n&&o){var l=function(e,t,i,n){var r=new s["default"];return r.streamId=i,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r.representationId=t.representationId,r.endFragment=n,r}(n,i,o.id,e.type!==h["default"].FRAGMENT_LOADING_PROGRESS);f.trigger(r?h["default"].INIT_FRAGMENT_LOADED:h["default"].MEDIA_FRAGMENT_LOADED,{chunk:l,fragmentModel:e.sender})}else b.warn("No "+i.mediaType+" bytes to push or stream is inactive.")}}e=e||{};var r=this.context,f=(0,u["default"])(r).getInstance(),g=e.errHandler,m=e.mediaPlayerModel,v=e.dashMetrics,y=void 0,b=void 0,_=void 0;return y={getModel:function(t){var i=_[t];return i||(i=(0,l["default"])(r).create({dashMetrics:v,fragmentLoader:(0,d["default"])(r).create({dashMetrics:v,mediaPlayerModel:m,errHandler:g,requestModifier:(0,c["default"])(r).getInstance(),settings:e.settings})}),_[t]=i),i},isInitializationRequest:t,reset:function(){f.off(h["default"].FRAGMENT_LOADING_COMPLETED,n,this),f.off(h["default"].FRAGMENT_LOADING_PROGRESS,n,this),i()}},b=(0,p["default"])(r).getInstance().getLogger(y),i(),f.on(h["default"].FRAGMENT_LOADING_COMPLETED,n,y),f.on(h["default"].FRAGMENT_LOADING_PROGRESS,n,y),y}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=e(239),s=n(e(224)),l=n(e(149)),d=n(e(98)),c=n(e(215)),u=n(e(48)),h=n(e(56)),f=n(e(49)),p=n(e(47));r.__dashjs_factory_name="FragmentController",i["default"]=f["default"].getClassFactory(r),t.exports=i["default"]},{109:109,149:149,215:215,224:224,239:239,47:47,48:48,49:49,56:56,98:98}],118:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){if(!e||!t)return[];var i=t.id;return S[i]&&S[i][e]?S[i][e].list:[]}function t(e,t){return!e||!t||t&&!S[t.id]?null:S[t.id][e].current}function i(e){if(e&&e.streamInfo){var i=e.type,n=e.streamInfo,r=n.id,a=t(i,n);if(S[r]&&S[r][i]&&!m(e,a)){S[r][i].current=e,S[r][i].current&&w.trigger(o["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:k[i]});var s=function(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&0<t.role.length||t.accessibility&&0<t.accessibility.length||t.audioChannelConfiguration&&0<t.audioChannelConfiguration.length?t:null}(e);s&&S[r][i].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),A.setSavedMediaSettings(i,s))}}}function n(e,t){e&&t&&(C[e]=t)}function r(e){return e?C[e]:null}function l(){return x||p}function g(e){return e===a["default"].AUDIO||e===a["default"].VIDEO||e===a["default"].TEXT||e===a["default"].FRAGMENTED_TEXT||e===a["default"].IMAGE}function m(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var i=e.id===t.id,n=e.viewpoint===t.viewpoint,r=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return i&&n&&r&&a&&o&&s}function v(){S={},C={audio:null,video:null},k={audio:u,video:c}}function y(e,t){var i=!e.lang||e.lang===t.lang,n=!e.viewpoint||e.viewpoint===t.viewpoint,r=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return i&&n&&r&&a&&o}function b(e){function t(e){var t=0,i=[],n=void 0;return e.forEach(function(e){n=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t<n?(t=n,i=[e]):n===t&&i.push(e)}),i}function i(e){var t=0,i=[],n=void 0;return e.forEach(function(e){n=e.representationCount,t<n?(t=n,i=[e]):n===t&&i.push(e)}),i}var n=l(),r=[];switch(n){case h:1<(r=t(e)).length&&(r=i(r));break;case f:1<(r=i(e)).length&&(r=t(e));break;default:T.warn("Track selection mode is not supported: "+n)}return r[0]}var _=this.context,w=(0,s["default"])(_).getInstance(),E=void 0,T=void 0,S=void 0,C=void 0,x=void 0,k=void 0,A=void 0,I=[u,c],D=[h,f];return E={checkInitialMediaSettingsForType:function(t,o){var s=r(t),l=e(t,o),d=[];t!==a["default"].FRAGMENTED_TEXT?(s||n(t,s=A.getSavedMediaSettings(t)),l&&0!==l.length&&(s&&l.forEach(function(e){y(s,e)&&d.push(e)}),i(0===d.length?b(l):1<d.length?b(d):d[0]))):i(l[0])},addTrack:function(e){if(e){var n=e.type;if(g(n)){var a=e.streamInfo.id;S[a]||(S[a]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var o=S[a][n].list,s=0,l=o.length;s<l;++s)if(m(o[s],e))return;o.push(e);var d=r(n);d&&y(d,e)&&!t(n,e.streamInfo)&&i(e)}}},getTracksFor:e,getCurrentTrackFor:t,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,i=e.streamInfo.id;return S[i]&&S[i][t]&&m(S[i][t].current,e)},setTrack:i,setInitialSettings:n,getInitialSettings:r,setSwitchMode:function(e,t){-1!==I.indexOf(t)?k[e]=t:T.warn("Track switch mode is not supported: "+t)},getSwitchMode:function(e){return k[e]},setSelectionModeForInitialTrack:function(e){-1!==D.indexOf(e)?x=e:T.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:l,isMultiTrackSupportedByType:g,isTracksEqual:m,setConfig:function(e){e&&e.domStorage&&(A=e.domStorage)},reset:v},T=(0,d["default"])(_).getInstance().getLogger(E),v(),E}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(56)),s=n(e(48)),l=n(e(49)),d=n(e(47)),c="neverReplace",u="alwaysReplace",h="highestBitrate",f="widestRange",p=h;r.__dashjs_factory_name="MediaController";var g=l["default"].getSingletonFactory(r);g.TRACK_SWITCH_MODE_NEVER_REPLACE=c,g.TRACK_SWITCH_MODE_ALWAYS_REPLACE=u,g.TRACK_SELECTION_MODE_HIGHEST_BITRATE=h,g.TRACK_SELECTION_MODE_WIDEST_RANGE=f,g.DEFAULT_INIT_TRACK_SELECTION_MODE=p,l["default"].updateSingletonFactory(r.__dashjs_factory_name,g),i["default"]=g,t.exports=i["default"]},{109:109,47:47,48:48,49:49,56:56}],119:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=void 0,t=void 0,i=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var i=window.URL.createObjectURL(e);return t.setSource(i),i},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,i){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<i&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,i))},signalEndOfStream:function(e){var i=e.sourceBuffers,n=i.length;
if("open"===e.readyState){for(var r=0;r<n;r++){if(i[r].updating)return;if(0===i[r].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}},t=(0,o["default"])(i).getInstance().getLogger(e),e}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47));r.__dashjs_factory_name="MediaSourceController",i["default"]=a["default"].getSingletonFactory(r),t.exports=i["default"]},{47:47,49:49}],120:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){!se&&e.fromStreamInfo&&void 0!==ne[e.fromStreamInfo.id]&&(delete ae[e.fromStreamInfo.id],delete ne[e.fromStreamInfo.id])}function t(){return parseFloat((i()-f()).toFixed(5))}function i(){var e=w(!0),t=se&&oe?e-oe.start:0;return e+(oe?oe.duration-t:t)}function n(){oe&&Z&&Z.getElement()?Z.play():de=!0}function r(){return oe&&Z?Z.isPaused():null}function d(){oe&&Z&&Z.pause()}function u(){return oe&&Z?Z.isSeeking():null}function h(e,t,i){oe&&Z&&(!0===i?e!==Z.getTime()&&(Z.removeEventListener("seeking",M),K.info("Requesting seek to time: "+e),Z.setCurrentTime(e,t)):(G.trigger(l["default"].PLAYBACK_SEEK_ASKED),K.info("Requesting seek to time: "+e),Z.setCurrentTime(e,t)))}function f(){return oe&&Z?Z.getTime():null}function p(){var e=f();if(se&&!isNaN(ue)){var t=ue/1e3;t<e&&(e-=t)}return e}function g(){return oe&&Z?Z.getPlaybackRate():null}function m(){return oe&&Z?Z.getEnded():null}function v(){return se}function y(){if(!se||isNaN(ue))return NaN;var e=p();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*ee.getClientTimeOffset();return Math.max(((t-ue-1e3*e)/1e3).toFixed(3),0)}function b(){te=NaN,de=!1,ne={},ue=re=0,ae={},Z&&(G.off(l["default"].DATA_UPDATE_COMPLETED,C,this),G.off(l["default"].BUFFER_LEVEL_STATE_CHANGED,q,this),G.off(l["default"].BYTES_APPENDED_END_FRAGMENT,$,this),G.off(l["default"].LOADING_PROGRESS,z,this),G.off(l["default"].PERIOD_SWITCH_STARTED,e,this),G.off(l["default"].PLAYBACK_PROGRESS,H,this),G.off(l["default"].PLAYBACK_TIME_UPDATED,H,this),G.off(l["default"].PLAYBACK_ENDED,j,this),T(),Z.removeEventListener("canplay",x),Z.removeEventListener("play",k),Z.removeEventListener("waiting",A),Z.removeEventListener("playing",I),Z.removeEventListener("pause",D),Z.removeEventListener("error",B),Z.removeEventListener("seeking",M),Z.removeEventListener("seeked",P),Z.removeEventListener("timeupdate",R),Z.removeEventListener("progress",O),Z.removeEventListener("ratechange",N),Z.removeEventListener("loadedmetadata",L),Z.removeEventListener("stalled",W),Z.removeEventListener("ended",F)),se=oe=Z=ie=null}function _(){var e=me.getURIFragmentData(),t=void 0;if(e){t={};var i=parseInt(e.r,10);0<=i&&oe&&i<oe.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-oe.manifestInfo.DVRWindowSize,oe.manifestInfo.availableFrom.getTime()/1e3+oe.start)+i),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function w(e,t){var i=void 0,n=NaN;if(e)n=oe?oe.start:n;else{var r=_();n=r?isNaN(r.fragS)?r.fragT:r.fragS:0}if(se)!isNaN(n)&&oe&&(i=n-oe.manifestInfo.availableFrom.getTime()/1e3,(te<i||i<(isNaN(t)?NaN:t-oe.manifestInfo.DVRWindowSize))&&(i=null)),i=i||te;else if(oe)if(!isNaN(n)&&n<Math.max(oe.manifestInfo.duration,oe.duration)&&0<=n)i=n;else{var a=ne[oe.id];i=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,oe.start):oe.start}return i}function E(){null===ie&&(ie=setInterval(function(){G.trigger(l["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:se,time:new Date}),v()&&r()&&function(){var e=Date.now();(!ce||ce+500<e)&&(ce=e,R())}()},ve.get().streaming.wallclockTimeUpdateInterval))}function T(){clearInterval(ie),ie=null}function S(){if(!r()&&se&&0!==Z.getReadyState()){var e=p(),t=function(e){var t=Q.getCurrentDVRInfo(),i=t?t.range:null;return i?e>i.end?Math.max(i.end-2*oe.manifestInfo.minBufferTime,i.start):e+.25<i.start&&i.start-e>i.start-31536e4?i.start:e:NaN}(e);!isNaN(t)&&t!==e&&h(t)}}function C(e){if(!e.error){var t=J.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;oe.id===t.id&&(oe=t,S())}}function x(){G.trigger(l["default"].CAN_PLAY)}function k(){K.info("Native video element event: play"),S(),E(),G.trigger(l["default"].PLAYBACK_STARTED,{startTime:f()})}function A(){K.info("Native video element event: waiting"),G.trigger(l["default"].PLAYBACK_WAITING,{playingTime:f()})}function I(){K.info("Native video element event: playing"),G.trigger(l["default"].PLAYBACK_PLAYING,{playingTime:f()})}function D(){K.info("Native video element event: pause"),G.trigger(l["default"].PLAYBACK_PAUSED,{ended:m()})}function M(){var e=f();K.info("Seeking to: "+e),E(),G.trigger(l["default"].PLAYBACK_SEEKING,{seekTime:e})}function P(){K.info("Native video element event: seeked"),G.trigger(l["default"].PLAYBACK_SEEKED),Z.addEventListener("seeking",M)}function R(){oe&&G.trigger(l["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:t(),time:f()})}function O(){G.trigger(l["default"].PLAYBACK_PROGRESS)}function N(){var e=g();K.info("Native video element event: ratechange: ",e),G.trigger(l["default"].PLAYBACK_RATE_CHANGED,{playbackRate:e})}function L(){K.info("Native video element event: loadedmetadata"),G.trigger(l["default"].PLAYBACK_METADATA_LOADED),E()}function F(){K.info("Native video element event: ended"),d(),T(),G.trigger(l["default"].PLAYBACK_ENDED,{isLast:X.getActiveStreamInfo().isLast})}function j(e){ie&&e.isLast&&(K.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),Z.setCurrentTime(i()),d(),T())}function B(e){var t=e.target||e.srcElement;G.trigger(l["default"].PLAYBACK_ERROR,{error:t.error})}function H(){se&&ve.get().streaming.lowLatencyEnabled&&0<ve.get().streaming.lowLatencyEnabled&&!r()&&!u()&&(0<ve.get().streaming.liveCatchUpPlaybackRate&&0<f()&&Math.abs(y()-le.getLiveDelay())>ve.get().streaming.liveCatchUpMinDrift?function(){if(Z){var e=ve.get().streaming.liveCatchUpPlaybackRate,t=le.getLiveDelay(),i=y()-t,n=5*i,r=2*e/(1+Math.pow(Math.E,-n)),a=1-e+r;if(pe){var o=function(){var e=null;return X.getActiveStreamProcessors().forEach(function(t){var i=t.getBufferLevel();e=null===e?i:Math.min(e,i)}),e}();t/2<o?pe=!1:0<i&&(a=1)}Math.abs(Z.getPlaybackRate()-a)>ge&&Z.setPlaybackRate(a),0<ve.get().streaming.liveCatchUpMaxDrift&&!fe&&i>ve.get().streaming.liveCatchUpMaxDrift?(K.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),fe=!0,function(){var e=Q.getCurrentDVRInfo();h((e?e.range:null).end-le.getLiveDelay(),!0,!1)}()):fe=!1}}():U())}function U(){Z&&Z.setPlaybackRate(1)}function $(e){var t,i=void 0,n=e.bufferedRanges;if(n&&n.length&&(!ne[oe.id]||!0!==ne[oe.id].started)){var r=e.sender.getType();void 0===ae[oe.id]&&(ae[oe.id]=[]),ae[oe.id][r]=n,void 0===ne[oe.id]&&(ne[oe.id]=[],ne[oe.id].started=!1),void 0===ne[oe.id][r]&&(ne[oe.id][r]=Math.max(n.start(0),oe.start));var o=X.isTrackTypePresent(a["default"].VIDEO),s=X.isTrackTypePresent(a["default"].AUDIO);t=w(!1),s&&o?isNaN(ne[oe.id].audio)||isNaN(ne[oe.id].video)||(n=ne[oe.id].audio<ne[oe.id].video?(i=ne[oe.id].video>t?ne[oe.id].video:t,ae[oe.id].audio):(i=ne[oe.id].audio>t?ne[oe.id].audio:t,ae[oe.id].video),function(e,t){if(t&&0<t.length)for(var i=0,n=t.length;i<n;i++)if(e>=t.start(i)&&e<t.end(i))return!0;return!1}(i,n)&&(u()||he||0===i||h(i,!0,!0),ne[oe.id].started=!0)):ne[oe.id][r]&&(i=ne[oe.id][r]>t?ne[oe.id][r]:t,u()||he||h(i,!1,!0),ne[oe.id].started=!0)}}function z(e){if(!1===e.stream&&ve.get().streaming.lowLatencyEnabled&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;if(t>le.getLiveDelay()){K.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2));var i={streaming:{liveDelay:t}};ve.update(i)}}}function q(e){e.streamInfo.id===oe.id&&(ve.get().streaming.lowLatencyEnabled?e.state!==o["default"].BUFFER_EMPTY||u()||pe||(pe=!0,U()):Z.setStallState(e.mediaType,e.state===o["default"].BUFFER_EMPTY))}function W(e){G.trigger(l["default"].PLAYBACK_STALLED,{e:e})}var Y=this.context,G=(0,s["default"])(Y).getInstance(),V=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ie=void 0,ne=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,de=void 0,ce=void 0,ue=void 0,he=void 0,fe=void 0,pe=void 0,ge=void 0,me=void 0,ve=void 0;return V={initialize:function(t,i){oe=t,Z.addEventListener("canplay",x),Z.addEventListener("play",k),Z.addEventListener("waiting",A),Z.addEventListener("playing",I),Z.addEventListener("pause",D),Z.addEventListener("error",B),Z.addEventListener("seeking",M),Z.addEventListener("seeked",P),Z.addEventListener("timeupdate",R),Z.addEventListener("progress",O),Z.addEventListener("ratechange",N),Z.addEventListener("loadedmetadata",L),Z.addEventListener("stalled",W),Z.addEventListener("ended",F),se=oe.manifestInfo.isDynamic,pe=fe=!1,te=oe.start,he=i;var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",a=/safari/.test(r)&&!/chrome/.test(r);ge=a?.25:.02,G.on(l["default"].DATA_UPDATE_COMPLETED,C,this),G.on(l["default"].BYTES_APPENDED_END_FRAGMENT,$,this),G.on(l["default"].LOADING_PROGRESS,z,this),G.on(l["default"].BUFFER_LEVEL_STATE_CHANGED,q,this),G.on(l["default"].PERIOD_SWITCH_STARTED,e,this),G.on(l["default"].PLAYBACK_PROGRESS,H,this),G.on(l["default"].PLAYBACK_TIME_UPDATED,H,this),G.on(l["default"].PLAYBACK_ENDED,j,this),de&&(de=!1,n())},setConfig:function(e){e&&(e.streamController&&(X=e.streamController),e.dashMetrics&&(Q=e.dashMetrics),e.mediaPlayerModel&&(le=e.mediaPlayerModel),e.adapter&&(J=e.adapter),e.videoModel&&(Z=e.videoModel),e.timelineConverter&&(ee=e.timelineConverter),e.uriFragmentModel&&(me=e.uriFragmentModel),e.settings&&(ve=e.settings))},getStartTimeFromUriParameters:_,getStreamStartTime:w,getTimeToStreamEnd:t,getTime:f,getNormalizedTime:p,getPlaybackRate:g,getPlayedRanges:function(){return oe&&Z?Z.getPlayedRanges():null},getEnded:m,getIsDynamic:v,getStreamController:function(){return X},setLiveStartTime:function(e){te=e},getLiveStartTime:function(){return te},computeLiveDelay:function(e,t){var i,n=void 0,r=void 0,a=J.getSuggestedPresentationDelay();if(n=ve.get().streaming.useSuggestedPresentationDelay&&null!==a?a:ve.get().streaming.lowLatencyEnabled?0:le.getLiveDelay()?le.getLiveDelay():isNaN(e)?2*oe.manifestInfo.minBufferTime:e*ve.get().streaming.liveDelayFragmentCount,null!==(i=J.getAvailabilityStartTime())&&(ue=i),0<t){var o=Math.max(t-10,t/2);r=Math.min(n,o)}else r=n;return re=r},getLiveDelay:function(){return re},getCurrentLiveLatency:y,play:n,isPaused:r,pause:d,isSeeking:u,seek:h,reset:b},K=(0,c["default"])(Y).getInstance().getLogger(V),b(),V}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(115)),s=n(e(48)),l=n(e(56)),d=n(e(49)),c=n(e(47));r.__dashjs_factory_name="PlaybackController",i["default"]=d["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,115:115,47:47,48:48,49:49,56:56}],121:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){oe&&!ee.isBufferingCompleted()?(re.debug("Schedule Controller starts"),U(),le=!1,se=se&&!1,r(0)):re.warn("Start denied to Schedule Controller")}function i(){le||(re.debug("Schedule Controller stops"),le=!0,clearTimeout(ue))}function n(){var e=ee.getBufferController();if(le||de||!e||X.isPaused()&&!ie.get().streaming.scheduleWhilePaused||!(Z!==a["default"].FRAGMENTED_TEXT&&Z!==a["default"].TEXT||J.isTextEnabled()))re.debug("Schedule stop!");else if(e.getIsBufferingCompleted())re.debug("Schedule stop because buffering is completed!");else{!function(){var e=X.getTime(),t=1.5*oe.fragmentDuration,i=ae.getRequests({state:u["default"].FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(i&&-1===ye.indexOf(i)&&!W.getIsTextTrack(Z)){var n=ie.get().streaming.fastSwitchEnabled,r=ee.getBufferLevel(),a=K.getAbandonmentStateFor(Z),o=!te.isCurrentTrack(i.mediaInfo)&&te.getSwitchMode(i.mediaInfo.type)===m["default"].TRACK_SWITCH_MODE_NEVER_REPLACE,l=i.quality<oe.quality;n&&(o||l)&&t<=r&&a!==s["default"].ABANDON_LOAD?(b(i),Ee=!0,re.debug("Reloading outdated fragment at index: ",i.index)):i.quality>oe.quality&&!_e&&j(X.getTime()+ee.getBufferLevel())}}();var t=0<ye.length,i=ee.getStreamInfo();_e||isNaN(ve)||be||t||function(e,t){me[t]=me[t]||{};var i=K.getTopQualityIndexFor(e,t);return me[t][e]!=i&&(re.info("Top quality "+e+" index has changed from "+me[t][e]+" to "+i),me[t][e]=i,!0)}(oe.mediaInfo.type,i.id)||fe.execute(ee,Q.isTrackTypePresent(a["default"].VIDEO))?(v(!0),t||be||K.checkPlaybackQuality(Z),function(){var e=ee.getFragmentController();if(oe.quality===ve&&!be||_e){var t=ye.shift();if(e.isInitializationRequest(t))ee.switchInitData(t.representationId);else{var n=void 0;ee.getBufferController().getIsPruningInProgress()||(n=pe.execute(ee,he,t),j(NaN),n&&!t&&(isNaN(n.startTime+n.duration)||ee.setIndexHandlerTime(n.startTime+n.duration),n.delayLoadingTime=(new Date).getTime()+ce,B(0)),!n&&i.manifestInfo&&i.manifestInfo.isDynamic&&re.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),n?(re.debug("Next fragment request url is "+n.url),ae.executeRequest(n)):(v(!1),r(ie.get().streaming.lowLatencyEnabled?100:500))}}else re.debug("Quality has changed, get init request for representationid = "+oe.id),be?(_e=te.getSwitchMode(Z)===m["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE,re.debug("Switch track has been asked, get init request for "+Z+" with representationid = "+oe.id+"bufferResetInProgress = "+_e),ee.switchInitData(oe.id,_e),be=!1):ee.switchInitData(oe.id),ve=oe.quality}()):r(500)}}function r(e){clearTimeout(ue),ue=setTimeout(n,e)}function p(e){e.sender&&e.sender.getStreamProcessor()===ee&&y(oe.quality)}function v(e){de!==e?de=e:re.debug("isFragmentProcessingInProgress is already equal to",e)}function y(e){var t=ee.getInitRequest(e);t&&(v(!0),ae.executeRequest(t))}function b(e){ye.push(e)}function _(e){if(Z===e.mediaType&&ee.getStreamInfo().id===e.streamInfo.id){if(null==(oe=ee.getRepresentationInfo(e.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");H(new Date,o.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),U()}}function w(e){if(X&&ae){var t=ae.getRequests({state:u["default"].FRAGMENT_MODEL_EXECUTED,time:X.getTime(),threshold:0})[0];t&&X.getTime()>=t.startTime&&((!ge.mediaInfo||t.mediaInfo.type===ge.mediaInfo.type&&t.mediaInfo.id!==ge.mediaInfo.id)&&e&&q.trigger(f["default"].TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:ge.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===ge.quality&&t.adaptationIndex===ge.adaptationIndex||!e||q.trigger(f["default"].QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:ge.quality,newQuality:t.quality}),ge={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function E(e){e.error||e.sender.getStreamProcessor()!==ee||(oe=W.convertDataToRepresentationInfo(e.currentRepresentation))}function T(e){ee.getStreamInfo().id===e.streamInfo.id&&(oe=ee.getRepresentationInfo(),se&&(X.getIsDynamic()?(G.setTimeSyncCompleted(!0),function(){var e=ee.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),i=oe.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=t-X.computeLiveDelay(oe.fragmentDuration,i),r=ee.getFragmentRequest(oe,n,{ignoreIsFinished:!0});if(r)if(ie.get().streaming.lowLatencyEnabled){var a=r.duration<V.getLiveDelay()?r.startTime:r.startTime+r.duration-V.getLiveDelay();X.setLiveStartTime(a)}else X.setLiveStartTime(r.startTime);else re.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");j(X.getStreamStartTime(!1,t)),ee.getBufferController().setSeekStartTime(he),he>oe.mediaInfo.streamInfo.start+oe.mediaInfo.streamInfo.duration&&X.seek(he),Y.updateManifestUpdateInfo({currentTime:he,presentationStartTime:t,latency:t-he,clientTimeOffset:G.getClientTimeOffset()})}}()):(j(X.getStreamStartTime(!1)),ee.getBufferController().setSeekStartTime(he))),le&&t())}function S(e){e.fragmentModel===ae&&(i(),v(!1),re.info("Stream is complete"))}function C(e){e.sender===ae&&(re.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),W.getIsTextTrack(Z)&&v(!1),e.error&&e.request.serviceLocation&&!le&&(b(e.request),v(!1),r(0)),_e&&(we=e.request))}function x(){w(!0)}function k(e){if(e.sender.getStreamProcessor()===ee)if(_e&&!isNaN(e.startTime)&&(_e=!1,ae.addExecutedRequest(we)),v(!1),Ee&&!isNaN(e.startTime)){var t=X.getTime(),i=e.startTime+oe.fragmentDuration,n=1.5*oe.fragmentDuration;r(i<=t+n?0:1e3*(i-(t+n))),Ee=!1}else r(0)}function A(e){e.streamProcessor===ee&&(re.info("onFragmentLoadingAbandoned for "+Z+", request: "+e.request.url+" has been aborted"),X.isSeeking()||be||(re.info("onFragmentLoadingAbandoned for "+Z+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),b(e.request)),v(!1),r(0))}function I(e){e.sender.getStreamProcessor()===ee&&i()}function D(e){if(e.sender.getStreamProcessor()===ee){var i=ee.getStreamInfo();i&&(e.unintended?ae.removeExecutedRequestsAfterTime(e.from):ae.syncExecutedRequestsWithBufferedRange(ee.getBufferController().getBuffer().getAllBufferRanges(),i.duration)),e.hasEnoughSpaceToAppend&&le&&t()}}function M(e){e.sender.getStreamProcessor()!==ee||e.state!==l["default"].BUFFER_EMPTY||X.isSeeking()||(re.info("Buffer is empty! Stalling!"),H(new Date,o.PlayListTrace.REBUFFERING_REASON))}function P(e){e.sender.getStreamProcessor()===ee&&(i(),v(!1))}function R(){ae.abortRequests(),i()}function O(e){e.sender.getStreamProcessor()===ee&&J.isTextEnabled()&&y(e.index)}function N(){!le&&ie.get().streaming.scheduleWhilePaused||t()}function L(e){j(e.seekTime),B(0),le&&t();var i=oe.DVRWindow&&X?oe.DVRWindow.end-X.getTime():NaN;Y.updateManifestUpdateInfo({latency:i}),de?(re.debug("onPlaybackSeeking for "+Z+", call fragmentModel.abortRequests in order to seek quicker"),ae.abortRequests()):r(0)}function F(e){Y.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function j(e){he=e}function B(e){ce=e}function H(e,t){Y.pushPlayListTraceMetrics(e,t)}function U(){if(oe){var e=X.getPlaybackRate();Y.createPlaylistTraceMetrics(oe.id,1e3*X.getTime(),null!==e?e.toString():null)}}function $(){ge={mediaInfo:void(ce=0),quality:ve=he=NaN,adaptationIndex:NaN},me={},we=null,Ee=_e=be=!(le=se=!(de=!(ye=[])))}e=e||{};var z=this.context,q=(0,h["default"])(z).getInstance(),W=e.adapter,Y=e.dashMetrics,G=e.timelineConverter,V=e.mediaPlayerModel,K=e.abrController,X=e.playbackController,Q=e.streamController,J=e.textController,Z=e.type,ee=e.streamProcessor,te=e.mediaController,ie=e.settings,ne=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,de=void 0,ce=void 0,ue=void 0,he=void 0,fe=void 0,pe=void 0,ge=void 0,me=void 0,ve=void 0,ye=void 0,be=void 0,_e=void 0,we=void 0,Ee=void 0;return ne={initialize:function(){ae=ee.getFragmentModel(),fe=(0,d["default"])(z).create({abrController:K,dashMetrics:Y,mediaPlayerModel:V,textController:J,settings:ie}),pe=(0,c["default"])(z).create({textController:J,playbackController:X}),W.getIsTextTrack(e.mimeType)&&q.on(f["default"].TIMED_TEXT_REQUESTED,O,this),q.on(f["default"].QUALITY_CHANGE_REQUESTED,_,this),q.on(f["default"].DATA_UPDATE_STARTED,I,this),q.on(f["default"].DATA_UPDATE_COMPLETED,E,this),q.on(f["default"].FRAGMENT_LOADING_COMPLETED,C,this),q.on(f["default"].STREAM_COMPLETED,S,this),q.on(f["default"].STREAM_INITIALIZED,T,this),q.on(f["default"].BUFFER_LEVEL_STATE_CHANGED,M,this),q.on(f["default"].BUFFER_CLEARED,D,this),q.on(f["default"].BYTES_APPENDED_END_FRAGMENT,k,this),q.on(f["default"].INIT_REQUESTED,p,this),q.on(f["default"].QUOTA_EXCEEDED,P,this),q.on(f["default"].PLAYBACK_SEEKING,L,this),q.on(f["default"].PLAYBACK_STARTED,N,this),q.on(f["default"].PLAYBACK_RATE_CHANGED,F,this),q.on(f["default"].PLAYBACK_TIME_UPDATED,x,this),q.on(f["default"].URL_RESOLUTION_FAILED,R,this),q.on(f["default"].FRAGMENT_LOADING_ABANDONED,A,this)},getType:function(){return Z},setSeekTarget:j,setTimeToLoadDelay:B,replaceRequest:b,switchTrackAsked:function(){be=!0},isStarted:function(){return!1===le},start:t,stop:i,reset:function(){q.off(f["default"].DATA_UPDATE_STARTED,I,this),q.off(f["default"].DATA_UPDATE_COMPLETED,E,this),q.off(f["default"].BUFFER_LEVEL_STATE_CHANGED,M,this),q.off(f["default"].QUALITY_CHANGE_REQUESTED,_,this),q.off(f["default"].FRAGMENT_LOADING_COMPLETED,C,this),q.off(f["default"].STREAM_COMPLETED,S,this),q.off(f["default"].STREAM_INITIALIZED,T,this),q.off(f["default"].QUOTA_EXCEEDED,P,this),q.off(f["default"].BYTES_APPENDED_END_FRAGMENT,k,this),q.off(f["default"].BUFFER_CLEARED,D,this),q.off(f["default"].INIT_REQUESTED,p,this),q.off(f["default"].PLAYBACK_RATE_CHANGED,F,this),q.off(f["default"].PLAYBACK_SEEKING,L,this),q.off(f["default"].PLAYBACK_STARTED,N,this),q.off(f["default"].PLAYBACK_TIME_UPDATED,x,this),q.off(f["default"].URL_RESOLUTION_FAILED,R,this),q.off(f["default"].FRAGMENT_LOADING_ABANDONED,A,this),W.getIsTextTrack(Z)&&q.off(f["default"].TIMED_TEXT_REQUESTED,O,this),i(),w(!1),$()},getBufferTarget:function(){return fe.getBufferTarget(ee,Q.isTrackTypePresent(a["default"].VIDEO))},finalisePlayList:function(e,t){H(e,t)}},re=(0,g["default"])(z).getInstance().getLogger(ne),$(),ne}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=e(241),s=n(e(112)),l=n(e(115)),d=n(e(194)),c=n(e(195)),u=n(e(149)),h=n(e(48)),f=n(e(56)),p=n(e(49)),g=n(e(47)),m=n(e(118));r.__dashjs_factory_name="ScheduleController",i["default"]=p["default"].getClassFactory(r),t.exports=i["default"]},{109:109,112:112,115:115,118:118,149:149,194:194,195:195,241:241,47:47,48:48,49:49,56:56}],122:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){if(F(a["default"].VIDEO)){var e=Ce.getPlaybackQuality();e&&ae.addDroppedFrames(e)}}function t(){if(!(!Ue.get().streaming.jumpGaps||0===k()||xe.isSeeking()||Ae||we||Ee||Te)&&V<=++Ne){var e=xe.getTime();Be===e?function(e){for(var t=k(),i=Ue.get().streaming.smallGapLimit,n=void 0,r=0;r<t.length;r++){var a=t[r].getBuffer().getAllBufferRanges(),o=void 0;if(a&&!(a.length<=1)){for(var s=0;s<a.length;s++)if(e<a.start(s)){o=a.start(s);break}if(0<o){var l=o-e;0<l&&l<=i&&(void 0===n||n<o)&&(n=o)}}}var d=xe.getTimeToStreamEnd();void 0===n&&!isNaN(d)&&d<i&&(n=e+d),0<n&&(!isNaN(d)&&e+d<=n?(Z.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),Q.trigger(c["default"].PLAYBACK_ENDED,{isLast:$().isLast})):(Z.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",n),xe.seek(n,!0,!0)))}(e):Be=e,Ne=0}}function i(e){var t=x(e.seekTime);Re&&(u(),Pe=!1),Oe&&(Z.debug("[PreloadTimer] stop period preload timer."),clearTimeout(Oe),Oe=void 0),t===ve&&je&&je.deactivate(!0),t&&(t!==ve||je&&!ve.isActive())?(B(h.PlayListTrace.END_OF_PERIOD_STOP_REASON),D(ve,t,e.seekTime)):B(h.PlayListTrace.USER_REQUEST_STOP_REASON),H(h.PlayList.SEEK_START_REASON)}function n(){Z.debug("[onPlaybackStarted]"),Ie?(Ie=!1,H(h.PlayList.INITIAL_PLAYOUT_START_REASON)):Ae&&(Ae=!1,H(h.PlayList.RESUME_FROM_PAUSE_START_REASON),E())}function r(e){Z.debug("[onPlaybackPaused]"),e.ended||(Ae=!0,B(h.PlayListTrace.USER_REQUEST_STOP_REASON),E())}function u(){Z.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(Re),Re=void 0}function E(){if(Pe)if(Re)u();else{var e=xe.getTimeToStreamEnd(),t=0<e?1e3*e:0,i=t<K?t/4:t-K;Z.debug("[toggleEndPeriodTimer] Going to fire preload in",i,"milliseconds"),Oe=setTimeout(C,i),Z.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),Re=setTimeout(function(){Q.trigger(c["default"].PLAYBACK_ENDED,{isLast:$().isLast})},t)}}function T(e){if(e.sender&&(e.sender.getType()===a["default"].AUDIO||e.sender.getType()===a["default"].VIDEO)){var t=$().isLast;Se&&!t&&void 0===Re&&(Z.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),!(Pe=!0)===Ae&&E())}}function S(){var e=$().isLast;Se&&e&&(Z.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),oe.signalEndOfStream(Se))}function C(){var e,t=$().isLast;Se&&!t&&(e=I(),(Fe=ve.isProtectionCompatible(e)&&(He||ve.isMediaCodecCompatible(e)))&&(Z.info("[onStreamCanLoadNext] Preloading next stream"),ve.stopEventController(),ve.deactivate(!0),e.preload(Se,Le),(je=e).getProcessors().forEach(function(t){t.setIndexHandlerTime(e.getStartTime())})))}function x(e){var t=0,i=null,n=me.length;0<n&&(t+=me[0].getStartTime());for(var r=0;r<n;r++)if(i=me[r],e<(t=parseFloat((t+i.getDuration()).toFixed(5))))return i;return null}function k(){return ve?ve.getProcessors():[]}function A(){var e=I();e?(De=Me=void 0,D(ve,e,NaN)):Z.debug("StreamController no next stream found"),B(e?h.PlayListTrace.END_OF_PERIOD_STOP_REASON:h.PlayListTrace.END_OF_CONTENT_STOP_REASON),Re=void 0,Pe=!1}function I(){if(ve){var e=(t=$().start,i=$().duration,{v:me.filter(function(e){return e.getStreamInfo().start===parseFloat((t+i).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,i}function D(e,t,i){we||!t||e===t&&t.isActive()||(we=!0,Q.trigger(c["default"].PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),Fe=!1,e&&(e.stopEventController(),Fe=ve.isProtectionCompatible(t)&&(He||ve.isMediaCodecCompatible(t))&&!i||t.getPreloaded(),e.deactivate(Fe)),ve=t,je=!1,xe.initialize($(),Fe),Ce.getElement()?M(i,e,!1,Fe):function(e){P(e,Fe)}(i))}function M(e,t,i,n){function r(){Se&&(Z.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),Se.removeEventListener("sourceopen",r),Se.removeEventListener("webkitsourceopen",r),R(),t||Q.trigger(c["default"].SOURCE_INITIALIZED),i?ve.setMediaSource(Se):P(e,n))}var a=void 0;Se?n?(P(e,n),t||Q.trigger(c["default"].SOURCE_INITIALIZED)):(oe.detachMediaSource(Ce),Se.addEventListener("sourceopen",r,!1),Se.addEventListener("webkitsourceopen",r,!1),a=oe.attachMediaSource(Se,Ce),Z.debug("MediaSource attached to element.  Waiting on open...")):((Se=oe.createMediaSource()).addEventListener("sourceopen",r,!1),Se.addEventListener("webkitsourceopen",r,!1),a=oe.attachMediaSource(Se,Ce),Z.debug("MediaSource attached to element.  Waiting on open..."))}function P(e,t){if(Le=ve.activate(Se,t?Le:void 0),Me=j(a["default"].AUDIO),De=j(a["default"].VIDEO),Le){var i=Object.keys(Le);0<i.length&&Le[i[0]].changeType&&(Z.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),He=!0)}var n;Ie||(isNaN(e)?(n=xe.getStreamStartTime(!0),t||k().forEach(function(e){re.setIndexHandlerTime(e,n)})):xe.seek(e)),ve.startEventController(),!_e&&Ie||xe.play(),we=!1,Q.trigger(c["default"].PERIOD_SWITCH_COMPLETED,{toStreamInfo:$()})}function R(e){var t=e||$().manifestInfo.duration,i=oe.setDuration(Se,t);Z.debug("Duration successfully set to: "+i)}function O(e){for(var t=0,i=me.length;t<i;t++)if(me[t].getId()===e.id)return me[t];return null}function N(){var e=ne.getValue();ye&&(Q.trigger(c["default"].PROTECTION_CREATED,{controller:ye,manifest:e}),ye.setMediaElement(Ce.getElement()),be&&ye.setProtectionData(be)),function(){try{var e=re.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");ae.updateManifestUpdateInfo({currentTime:xe.getTime(),buffered:Ce.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:ge.getClientTimeOffset()});for(var t=0,i=e.length;t<i;t++){var n=e[t],r=O(n);r?r.updateData(n):(r=(0,s["default"])(X).create({manifestModel:ne,mediaPlayerModel:ke,dashMetrics:ae,manifestUpdater:te,adapter:re,timelineConverter:ge,capabilities:ee,errHandler:pe,baseURLController:le,abrController:de,playbackController:xe,mediaController:ce,textController:ue,videoModel:Ce,streamController:J,settings:Ue}),me.push(r),r.initialize(n,ye)),ae.addManifestUpdateStreamInfo(n)}if(!ve){var a=xe.getStartTimeFromUriParameters(),o=null;a&&(o=x(isNaN(a.fragS)?a.fragT:a.fragS)),D(null,null!==o?o:me[0],NaN)}Q.trigger(c["default"].STREAMS_COMPOSED)}catch(e){pe.error(new _["default"](w["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",ne.getValue())),Te=!0,Y()}}()}function L(e){e.error?(Te=!0,Y()):function(){var t=e.manifest;re.updatePeriods(t);var i=re.getStreamsInfo(void 0,1)[0],n=re.getMediaInfoForType(i,a["default"].VIDEO)||re.getMediaInfoForType(i,a["default"].AUDIO),r=void 0;n&&(r=re.getUseCalculatedLiveEdgeTimeForMediaInfo(n))&&(Z.debug("SegmentTimeline detected using calculated Live Edge Time"),Ue.update({streaming:{useManifestDateHeaderTimeSource:!1}}));var o=re.getUTCTimingSources(),s=!re.getIsDynamic()||r?o:o.concat(ke.getUTCTimingSources()),l=fe.isHTTPS(e.manifest.url);s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===ke.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),Z.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),le.initialize(t),se.setConfig({dashMetrics:ae,baseURLController:le}),se.initialize(s,Ue.get().streaming.useManifestDateHeaderTimeSource)}()}function F(e){var t=void 0;if(!e)return t;switch(e){case a["default"].VIDEO:t=De;break;case a["default"].AUDIO:t=Me}return t}function j(e){var t=!1;return k().forEach(function(i){i.getMediaInfo().type===e&&(t=!0)}),t}function B(e,t){t=t||new Date,k().forEach(function(i){var n=i.getScheduleController();n&&n.finalisePlayList(t,e)}),ae.addPlayList()}function H(e){ae.createPlaylistMetrics(1e3*xe.getTime(),e)}function U(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}Ee=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),Z.fatal("Video Element Error: "+t),e.error&&Z.fatal(e.error),pe.error(new _["default"](e.error.code,t)),Y()}}function $(){return ve?ve.getStreamInfo():null}function z(){if(!(ie&&ie.hasOwnProperty("load")&&ge&&ge.hasOwnProperty("initialize")&&ge.hasOwnProperty("reset")&&ge.hasOwnProperty("getClientTimeOffset")&&ne&&pe&&ae&&xe))throw new Error("setConfig function has to be called previously")}function q(e){isNaN(e.newDuration)||R(e.newDuration)}function W(){ve=ye=null,Re=Me=De=void 0,Pe=!(_e=!(Ae=!(Ie=!(Te=Ee=we=!(me=[]))))),Ne=0}function Y(){z(),se.reset(),B(Ee||Te?h.PlayListTrace.FAILURE_STOP_REASON:h.PlayListTrace.USER_REQUEST_STOP_REASON);for(var a=0,o=me?me.length:0;a<o;a++)me[a].reset(Ee);!function(){Q.off(c["default"].PLAYBACK_TIME_UPDATED,e,this),Q.off(c["default"].PLAYBACK_SEEKING,i,this),Q.off(c["default"].PLAYBACK_ERROR,U,this),Q.off(c["default"].PLAYBACK_STARTED,n,this),Q.off(c["default"].PLAYBACK_PAUSED,r,this),Q.off(c["default"].PLAYBACK_ENDED,A,this),Q.off(c["default"].MANIFEST_UPDATED,L,this),Q.off(c["default"].BUFFERING_COMPLETED,T,this),Q.off(c["default"].STREAM_BUFFERING_COMPLETED,S,this),Q.off(c["default"].MANIFEST_VALIDITY_CHANGED,q,this),Q.off(c["default"].TIME_SYNCHRONIZATION_COMPLETED,N,this),Q.off(c["default"].WALLCLOCK_TIME_UPDATED,t,this),Q.off(m["default"].METRIC_ADDED,G,this)}(),le.reset(),te.reset(),ae.clearAllCurrentMetrics(),ne.setValue(null),ie.reset(),ge.reset(),he.reset(),Se&&(oe.detachMediaSource(Ce),Se=null),Ce=null,ye&&(ye.setMediaElement(null),be=ye=null,ne.getValue()&&Q.trigger(c["default"].PROTECTION_DESTROYED,{data:ne.getValue().url})),Q.trigger(c["default"].STREAM_TEARDOWN_COMPLETE),W()}function G(e){e.metric===o["default"].DVR_INFO&&e.mediaType===a["default"].AUDIO&&oe.setSeekable(Se,e.value.range.start,e.value.range.end)}var V=40,K=2e3,X=this.context,Q=(0,d["default"])(X).getInstance(),J=void 0,Z=void 0,ee=void 0,te=void 0,ie=void 0,ne=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,de=void 0,ce=void 0,ue=void 0,he=void 0,fe=void 0,pe=void 0,ge=void 0,me=void 0,ve=void 0,ye=void 0,be=void 0,_e=void 0,we=void 0,Ee=void 0,Te=void 0,Se=void 0,Ce=void 0,xe=void 0,ke=void 0,Ae=void 0,Ie=void 0,De=void 0,Me=void 0,Pe=void 0,Re=void 0,Oe=void 0,Ne=void 0,Le=void 0,Fe=void 0,je=void 0,Be=void 0,He=void 0,Ue=void 0;return J={initialize:function(a,o){z(),_e=a,be=o,ge.initialize(),(te=(0,l["default"])(X).create()).setConfig({manifestModel:ne,adapter:re,mediaPlayerModel:ke,manifestLoader:ie,errHandler:pe,settings:Ue}),te.initialize(),le.setConfig({adapter:re}),function(){Q.on(c["default"].PLAYBACK_TIME_UPDATED,e,this),Q.on(c["default"].PLAYBACK_SEEKING,i,this),Q.on(c["default"].PLAYBACK_ERROR,U,this),Q.on(c["default"].PLAYBACK_STARTED,n,this),Q.on(c["default"].PLAYBACK_PAUSED,r,this),Q.on(c["default"].PLAYBACK_ENDED,A,this),Q.on(c["default"].MANIFEST_UPDATED,L,this),Q.on(c["default"].BUFFERING_COMPLETED,T,this),
Q.on(c["default"].STREAM_BUFFERING_COMPLETED,S,this),Q.on(c["default"].MANIFEST_VALIDITY_CHANGED,q,this),Q.on(c["default"].TIME_SYNCHRONIZATION_COMPLETED,N,this),Q.on(c["default"].WALLCLOCK_TIME_UPDATED,t,this),Q.on(m["default"].METRIC_ADDED,G,this)}()},getActiveStreamInfo:$,isTrackTypePresent:F,switchToVideoElement:function(e){ve&&(xe.initialize($()),M(e,null,!0,!1))},getStreamById:function(e){return me.filter(function(t){return t.getId()===e})[0]},getStreamForTime:x,getTimeRelativeToStreamId:function(e,t){for(var i=null,n=0,r=0,a=null,o=me.length,s=0;s<o;s++){if(r=(i=me[s]).getStartTime(),a=i.getDuration(),Number.isFinite(r)&&(n=r),i.getId()===t)return e-n;Number.isFinite(a)&&(n+=a)}return null},load:function(e){z(),ie.load(e)},loadWithManifest:function(e){!function(){if(!te||!te.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),te.setManifest(e)},getActiveStreamProcessors:k,setConfig:function(e){e&&(e.capabilities&&(ee=e.capabilities),e.manifestLoader&&(ie=e.manifestLoader),e.manifestModel&&(ne=e.manifestModel),e.mediaPlayerModel&&(ke=e.mediaPlayerModel),e.protectionController&&(ye=e.protectionController),e.adapter&&(re=e.adapter),e.dashMetrics&&(ae=e.dashMetrics),e.errHandler&&(pe=e.errHandler),e.timelineConverter&&(ge=e.timelineConverter),e.videoModel&&(Ce=e.videoModel),e.playbackController&&(xe=e.playbackController),e.abrController&&(de=e.abrController),e.mediaController&&(ce=e.mediaController),e.textController&&(ue=e.textController),e.settings&&(Ue=e.settings))},setProtectionData:function(e){be=e},reset:Y},Z=(0,f["default"])(X).getInstance().getLogger(J),se=(0,v["default"])(X).getInstance(),le=(0,y["default"])(X).getInstance(),oe=(0,b["default"])(X).getInstance(),he=(0,p["default"])(X).getInstance(),fe=(0,g["default"])(X).getInstance(),W(),J}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(110)),s=n(e(106)),l=n(e(100)),d=n(e(48)),c=n(e(56)),u=n(e(49)),h=e(241),f=n(e(47)),p=n(e(211)),g=n(e(218)),m=n(e(102)),v=n(e(123)),y=n(e(113)),b=n(e(119)),_=n(e(223)),w=n(e(53));r.__dashjs_factory_name="StreamController",i["default"]=u["default"].getSingletonFactory(r),t.exports=i["default"]},{100:100,102:102,106:106,109:109,110:110,113:113,119:119,123:123,211:211,218:218,223:223,241:241,47:47,48:48,49:49,53:53,56:56}],123:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){S=e}function t(e){T=e}function i(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t=void 0,i=void 0,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&(parseInt(n[6],10)||0),n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]&&(i=60*parseInt(n[9],10)+parseInt(n[10],10),t+=("+"===n[8]?-1:1)*i*60*1e3),new Date(t).getTime()}(e)),t}function n(e){return Date.parse(e)}function r(e){return Date.parse(e)}function c(e,t,i){i()}function f(e,t,n){var r=i(e);isNaN(r)?n():t(r)}function p(e,t,i,n,r){var a,s,l=!1,d=new XMLHttpRequest,c=r?o.HTTPRequest.HEAD:o.HTTPRequest.GET,u=t.match(/\S+/g);if(t=u.shift(),a=function(){l||(l=!0,u.length?p(e,u.join(" "),i,n,r):n())},s=function(){var t=void 0,n=void 0;200===d.status&&(t=r?d.getResponseHeader("Date"):d.response,n=e(t),isNaN(n)||(i(n),l=!0))},_.isRelative(t)){var h=A.resolve();h&&(t=_.resolve(t,h.url))}d.open(c,t),d.timeout=5e3,d.onload=s,d.onloadend=a,d.send()}function g(e,t,i){p(r,e,t,i,!0)}function m(){var e=k.getLatestMPDRequestHeaderValueByID("Date"),i=null!==e?new Date(e).getTime():Number.NaN;isNaN(i)?v(!0):(t(i-(new Date).getTime()),v(!1,i/1e3,T))}function v(t,i,n){e(!1),b.trigger(l["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:i,offset:n,error:t?new a["default"](d["default"].TIME_SYNC_FAILED_ERROR_CODE,d["default"].TIME_SYNC_FAILED_ERROR_MESSAGE):null})}var y=this.context,b=(0,s["default"])(y).getInstance(),_=(0,h["default"])(y).getInstance(),w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0,k=void 0,A=void 0;return w={initialize:function(r,a){C=a,T=0,S=!1,x={"urn:mpeg:dash:utc:http-head:2014":g,"urn:mpeg:dash:utc:http-xsdate:2014":p.bind(null,i),"urn:mpeg:dash:utc:http-iso:2014":p.bind(null,n),"urn:mpeg:dash:utc:direct:2014":f,"urn:mpeg:dash:utc:http-head:2012":g,"urn:mpeg:dash:utc:http-xsdate:2012":p.bind(null,i),"urn:mpeg:dash:utc:http-iso:2012":p.bind(null,n),"urn:mpeg:dash:utc:direct:2012":f,"urn:mpeg:dash:utc:http-ntp:2014":c,"urn:mpeg:dash:utc:ntp:2014":c,"urn:mpeg:dash:utc:sntp:2014":c},S||function i(n,r){var a=r||0,o=n[a],s=function(e,t){var i=!e||!t;i&&C?m():v(i,e,t)};e(!0),o?x.hasOwnProperty(o.schemeIdUri)?x[o.schemeIdUri](o.value,function(e){var i=(new Date).getTime(),n=e-i;t(n),E.info("Local time: "+new Date(i)),E.info("Server time: "+new Date(e)),E.info("Server Time - Local Time (ms): "+n),s(e,n)},function(){i(n,a+1)}):i(n,a+1):(t(0),s())}(r)},getOffsetToDeviceTimeMs:function(){return T},setConfig:function(e){e&&(e.dashMetrics&&(k=e.dashMetrics),e.baseURLController&&(A=e.baseURLController))},reset:function(){e(!1)}},E=(0,u["default"])(y).getInstance().getLogger(w),w}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(223)),o=e(239),s=n(e(48)),l=n(e(56)),d=n(e(53)),c=n(e(49)),u=n(e(47)),h=n(e(218));r.__dashjs_factory_name="TimeSyncController";var f=c["default"].getSingletonFactory(r);f.HTTP_TIMEOUT_MS=5e3,c["default"].updateSingletonFactory(r.__dashjs_factory_name,f),i["default"]=f,t.exports=i["default"]},{218:218,223:223,239:239,47:47,48:48,49:49,53:53,56:56}],124:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,i){var r={},a=void 0,o=void 0;r.elements=e,r.type=t,r.resolveType=i,0===r.elements.length&&n(r);for(var s=0;s<r.elements.length;s++)a=r.elements[s],o=p.isHTTPURL(a.url)?a.url:a.originalContent.BaseURL+a.url,_.load(o,a,r)}function i(e){var t,i=void 0,r="";if(i=e.element,t=e.resolveObject,i.resolvedContent){var a=0;0===i.resolvedContent.indexOf("<?xml")&&(a=i.resolvedContent.indexOf("?>")+2),r=i.resolvedContent.substr(0,a)+"<response>"+i.resolvedContent.substr(a)+"</response>",i.resolvedContent=b.xml_str2json(r)}!function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0}(t)||n(t)}function n(e){var i=[],n=void 0,a=void 0;if(function(e){var t=[],i=void 0,n=void 0,r=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;0<=a;a--){if(i=e.elements[a],n=i.type+"_asArray",i.resolvedContent){if(i.resolvedContent)for(o=0;o<i.resolvedContent[n].length;o++)r=i.resolvedContent[n][o],t.push(r)}else delete i.originalContent["xlink:actuate"],delete i.originalContent["xlink:href"],t.push(i.originalContent);for(i.parentElement[n].splice(i.index,1),s=0;s<t.length;s++)i.parentElement[n].splice(i.index+s,0,t[s]);t=[]}0<e.elements.length&&v.run(y)}(e),"onActuate"===e.resolveType&&f.trigger(s["default"].XLINK_READY,{manifest:y}),e.resolveType===h)switch(e.type){case u["default"].PERIOD:for(n=0;n<y[u["default"].PERIOD+"_asArray"].length;n++)(a=y[u["default"].PERIOD+"_asArray"][n]).hasOwnProperty(u["default"].ADAPTATION_SET+"_asArray")&&(i=i.concat(r(a[u["default"].ADAPTATION_SET+"_asArray"],a,u["default"].ADAPTATION_SET,h))),a.hasOwnProperty(u["default"].EVENT_STREAM+"_asArray")&&(i=i.concat(r(a[u["default"].EVENT_STREAM+"_asArray"],a,u["default"].EVENT_STREAM,h)));t(i,u["default"].ADAPTATION_SET,h);break;case u["default"].ADAPTATION_SET:f.trigger(s["default"].XLINK_READY,{manifest:y})}}function r(e,t,i,n){var r=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;0<=o;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===n&&(s={url:a["xlink:href"],parentElement:t,type:i,index:o,resolveType:n,originalContent:a,resolvedContent:null,resolved:!1},r.push(s));return r}e=e||{};var l=this.context,f=(0,o["default"])(l).getInstance(),p=(0,c["default"])(l).getInstance(),g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0;return g={resolveManifestOnLoad:function(e){b=new d["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:m}),t(r((y=e).Period_asArray,y,u["default"].PERIOD,h),u["default"].PERIOD,h)},setMatchers:function(e){e&&(m=e)},setIron:function(e){e&&(v=e)},reset:function(){f.off(s["default"].XLINK_ELEMENT_LOADED,i,g),_&&(_.reset(),_=null)}},f.on(s["default"].XLINK_ELEMENT_LOADED,i,g),_=(0,a["default"])(l).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),g}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(108)),o=n(e(48)),s=n(e(56)),l=n(e(49)),d=n(e(3)),c=n(e(218)),u=n(e(63)),h="onLoad";r.__dashjs_factory_name="XlinkController",i["default"]=l["default"].getClassFactory(r),t.exports=i["default"]},{108:108,218:218,3:3,48:48,49:49,56:56,63:63}],125:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context;return{createMetricsReporting:function(t){return(0,a["default"])(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}),(0,s["default"])(e).create(t)},getReportingFactory:function(){return(0,d["default"])(e).getInstance()},getMetricsHandlerFactory:function(){return(0,l["default"])(e).getInstance()}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(139)),o=n(e(126)),s=n(e(127)),l=n(e(132)),d=n(e(137));r.__dashjs_factory_name="MetricsReporting";var c=dashjs.FactoryMaker.getClassFactory(r);c.events=o["default"],dashjs.FactoryMaker.updateClassFactory(r.__dashjs_factory_name,c),i["default"]=c,t.exports=i["default"]},{126:126,127:127,132:132,137:137,139:139}],126:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(57),o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{57:57}],127:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(t){if(!t.error){var i=Object.keys(n);(0,o["default"])(r).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach(function(t){var o=JSON.stringify(t);if(n.hasOwnProperty(o))i.splice(o,1);else try{var s=(0,a["default"])(r).create(e);s.initialize(t),n[o]=s}catch(e){}}),i.forEach(function(e){n[e].reset(),delete n[e]}),l.trigger(s["default"].METRICS_INITIALISATION_COMPLETE)}}function i(){Object.keys(n).forEach(function(e){n[e].reset()}),n={}}e=e||{};var n={},r=this.context,l=e.eventBus,d=e.events;return l.on(d.MANIFEST_UPDATED,t),l.on(d.STREAM_TEARDOWN_COMPLETE,i),{reset:function(){l.off(d.MANIFEST_UPDATED,t),l.off(d.STREAM_TEARDOWN_COMPLETE,i)}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(128)),o=n(e(141)),s=n(e(126));r.__dashjs_factory_name="MetricsCollectionController",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{126:126,128:128,141:141}],128:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){i&&i.reset(),n&&n.reset(),r&&r.reset()}e=e||{};var i=void 0,n=void 0,r=void 0,l=this.context;return{initialize:function(d){try{(r=(0,a["default"])(l).create({mediaElement:e.mediaElement})).initialize(d.Range),(n=(0,o["default"])(l).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(d.Reporting,r),(i=(0,s["default"])(l).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(d.metrics,n)}catch(e){throw t(),e}},reset:t}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(130)),o=n(e(131)),s=n(e(129));r.__dashjs_factory_name="MetricsController",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{129:129,130:130,131:131}],129:[function(e,t,i){"use strict";function n(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}e=e||{};var i=[],n=void 0,r=this.context,a=e.eventBus,s=e.events,l=(0,o["default"])(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});return n={initialize:function(e,r){e.split(",").forEach(function(e,t,n){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=n[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete n[t+1])}(a=l.create(e,r))&&i.push(a)}),a.on(s.METRIC_ADDED,t,n),a.on(s.METRIC_UPDATED,t,n)},reset:function(){a.off(s.METRIC_ADDED,t,n),a.off(s.METRIC_UPDATED,t,n),i.forEach(function(e){return e.reset()}),i=[]}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(132),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="MetricsHandlersController",i["default"]=dashjs.FactoryMaker.getClassFactory(n),t.exports=i["default"]},{132:132}],130:[function(e,t,i){"use strict";function n(e){e=e||{};var t,i=!1,n=this.context,r=void 0,a=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,i=t+e.duration;r.add(t,i)}),i=!!e[0]._useWallClockTime)},reset:function(){r.clear()},isEnabled:function(){var e,t=r.length;if(!t)return!0;e=i?(new Date).getTime()/1e3:a.currentTime;for(var n=0;n<t;n+=1){var o=r.start(n),s=r.end(n);if(o<=e&&e<s)return!0}return!1}},r=(0,o["default"])(n).create(),t}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(207),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="RangeController",i["default"]=dashjs.FactoryMaker.getClassFactory(n),t.exports=i["default"]},{207:207}],131:[function(e,t,i){"use strict";function n(e){var t=[],i=(0,o["default"])(this.context).getInstance(e);return{initialize:function(e,n){e.some(function(e){var r=i.create(e,n);if(r)return t.push(r),!0})},reset:function(){t.forEach(function(e){return e.reset()}),t=[]},report:function(e,i){t.forEach(function(t){return t.report(e,i)})}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(137),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="ReportingController",i["default"]=dashjs.FactoryMaker.getClassFactory(n),t.exports=i["default"]},{137:137}],132:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(e=e||{}).debug,i=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,n=this.context,r={BufferLevel:a["default"],DVBErrors:o["default"],HttpList:s["default"],PlayList:l["default"],RepSwitchList:l["default"],TcpList:l["default"]};return{create:function(a,o){var s,l=a.match(i);if(l){try{(s=r[l[1]](n).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(l[1],o,l[3],l[5])}catch(e){s=null,t.error("MetricsHandlerFactory: Could not create handler for type "+l[1]+" with args "+l[3]+", "+l[5]+" ("+e.message+")")}return s}},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(133)),o=n(e(134)),s=n(e(136)),l=n(e(135));r.__dashjs_factory_name="MetricsHandlerFactory",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{133:133,134:134,135:135,136:136}],133:[function(e,t,i){"use strict";function n(e){function t(){var e=function(){try{return Object.keys(c).map(function(e){return c[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&s!==e.t&&(s=e.t,i.report(r,e))}e=e||{};var i=void 0,n=void 0,r=void 0,a=void 0,s=void 0,l=this.context,d=(0,o["default"])(l).getInstance(),c=[],u=e.metricsConstants;return{initialize:function(e,o,s){o&&(n=d.validateN(s),i=o,r=d.reconstructFullMetricName(e,s),a=setInterval(t,n))},reset:function(){clearInterval(a),n=0,s=i=a=null},handleNewMetric:function(e,t,i){e===u.BUFFER_LEVEL&&(c[i]=t)}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(140),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="BufferLevelHandler",i["default"]=dashjs.FactoryMaker.getClassFactory(n),t.exports=i["default"]},{140:140}],134:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n,r=e(126),a=(n=r)&&n.__esModule?n:{"default":n};i["default"]=dashjs.FactoryMaker.getClassFactory(function(e){function t(){n.off(a["default"].METRICS_INITIALISATION_COMPLETE,t,this),n.trigger(a["default"].BECAME_REPORTING_PLAYER)}var i=void 0,n=(e=e||{}).eventBus,r=e.metricsConstants;return{initialize:function(e,r){r&&(i=r,n.on(a["default"].METRICS_INITIALISATION_COMPLETE,t,this))},reset:function(){i=null},handleNewMetric:function(e,t){e===r.DVB_ERRORS&&i&&i.report(e,t)}}}),t.exports=i["default"]},{126:126}],135:[function(e,t,i){"use strict";function n(){var e=void 0,t=void 0;return{initialize:function(i,n){e=i,t=n},reset:function(){t=null,e=void 0},handleNewMetric:function(i,n){i===e&&t&&t.report(e,n)}}}Object.defineProperty(i,"__esModule",{value:!0}),n.__dashjs_factory_name="GenericMetricHandler",i["default"]=dashjs.FactoryMaker.getClassFactory(n),t.exports=i["default"]},{}],136:[function(e,t,i){"use strict";function n(e){function t(){var e=l;e.length&&i&&i.report(a,e),l=[]}e=e||{};var i=void 0,n=void 0,r=void 0,a=void 0,s=void 0,l=[],d=(0,o["default"])(this.context).getInstance(),c=e.metricsConstants;return{initialize:function(e,o,l,c){o&&(n=d.validateN(l),i=o,c&&c.length&&(r=c),a=d.reconstructFullMetricName(e,l,c),s=setInterval(t,n))},reset:function(){clearInterval(s),l=[],i=r=n=s=null},handleNewMetric:function(e,t){e===c.HTTP_REQUEST&&(r&&r!==t.type||l.push(t))}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(140),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="HttpListHandler",i["default"]=dashjs.FactoryMaker.getClassFactory(n),t.exports=i["default"]},{140:140}],137:[function(e,t,i){"use strict";function n(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":o["default"]},i=this.context,n=e.debug,r=e.metricsConstants;return{create:function(e,a){var o=void 0;try{(o=t[e.schemeIdUri](i).create({metricsConstants:r})).initialize(e,a)}catch(t){o=null,n.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return o},register:function(e,i){t[e]=i},unregister:function(e){delete t[e]}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(138),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="ReportingFactory",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{138:138}],138:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){d=l=!1,u=c=null}e=e||{};var i,n=this.context,r=void 0,s=void 0,l=void 0,d=void 0,c=void 0,u=void 0,h=[],f=e.metricsConstants;return i={report:function(e,t){Array.isArray(t)||(t=[t]),d&&u.isEnabled()&&t.forEach(function(t){var i=r.serialise(t);e!==f.DVB_ERRORS&&(i="metricname="+e+"&"+i),function(e,t,i){function n(){var e=h.indexOf(r);-1!==e&&(h.splice(e,1),200<=r.status&&r.status<300?t&&t():i&&i())}var r=new XMLHttpRequest;h.push(r);try{r.open("GET",e),r.onloadend=n,r.onerror=n,r.send()}catch(e){r.onerror()}}(i=c+"?"+i,null,function(){d=!1})})},initialize:function(e,t){var i=void 0;if(u=t,!(c=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");l||((i=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===i||i/1e3>=s.random())&&(d=!0),l=!0)},reset:function(){t()}},r=(0,a["default"])(n).getInstance(),s=(0,o["default"])(n).getInstance(),t(),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(142)),o=n(e(143));r.__dashjs_factory_name="DVBReporting",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{142:142,143:143}],139:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){var t=new a["default"];if(u){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=u.originalUrl||u.url),t.terror||(t.terror=new Date),f.addDVBErrors(t)}}function i(e){e.error||(u=e.manifest)}function n(e){t({errorcode:a["default"].BASE_URL_CHANGED,servicelocation:e.entry})}function r(){t({errorcode:a["default"].BECAME_REPORTER})}function s(e){switch(e.metric){case p.HTTP_REQUEST:!function(e){(0===e.responsecode||400<=e.responsecode||e.responsecode<100||600<=e.responsecode)&&t({errorcode:e.responsecode||a["default"].CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}(e.value)}}function l(e){var i=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:i=a["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:i=a["default"].CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:i})}function d(){h.on(g.MANIFEST_UPDATED,i,c),h.on(g.SERVICE_LOCATION_BLACKLIST_CHANGED,n,c),h.on(g.METRIC_ADDED,s,c),h.on(g.METRIC_UPDATED,s,c),h.on(g.PLAYBACK_ERROR,l,c),h.on(o["default"].BECAME_REPORTING_PLAYER,r,c)}var c=void 0,u=void 0,h=(e=e||{}).eventBus,f=e.dashMetrics,p=e.metricsConstants,g=e.events;return c={initialise:d,reset:function(){h.off(g.MANIFEST_UPDATED,i,c),h.off(g.SERVICE_LOCATION_BLACKLIST_CHANGED,n,c),h.off(g.METRIC_ADDED,s,c),h.off(g.METRIC_UPDATED,s,c),h.off(g.PLAYBACK_ERROR,l,c),h.off(o["default"].BECAME_REPORTING_PLAYER,r,c)}},d(),c}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(144)),o=n(e(126));r.__dashjs_factory_name="DVBErrorsTranslator",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{126:126,144:144}],140:[function(e,t,i){"use strict";function n(){return{reconstructFullMetricName:function(e,t,i){var n=e;return t&&(n+="("+t,i&&i.length&&(n+=","+i),n+=")"),n},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(i,"__esModule",{value:!0}),n.__dashjs_factory_name="HandlerHelpers",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{}],141:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(e=e||{}).adapter,i=e.constants;return{getMetrics:function(e){var n=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach(function(r){var l=new a["default"],d=t.getIsDynamic(e);r.hasOwnProperty("metrics")&&(l.metrics=r.metrics,r.Range_asArray&&r.Range_asArray.forEach(function(n){var r=new o["default"];r.starttime=function(e,n,r){var a=t.getMpd(e),o=void 0,s=void 0,l=0;return n?l=t.getAvailabilityStartTime(a)/1e3:(o=t.getRegularPeriods(a)).length&&(l=o[0].start),s=l,r&&r.hasOwnProperty(i.START_TIME)&&(s+=r.starttime),s}(e,d,n),n.hasOwnProperty("duration")?r.duration=n.duration:r.duration=t.getDuration(e),r._useWallClockTime=d,l.Range.push(r)}),r.Reporting_asArray&&(r.Reporting_asArray.forEach(function(e){var t=new s["default"];if(e.hasOwnProperty(i.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);l.Reporting.push(t)}}),n.push(l)))}),n}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(145)),o=n(e(146)),s=n(e(147));r.__dashjs_factory_name="ManifestParsing",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{145:145,146:146,147:147}],142:[function(e,t,i){"use strict";function n(){return{serialise:function e(t){var i=[],n=[],r=void 0,a=void 0;for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null==(a=t[r])&&(a=""),Array.isArray(a)){if(!a.length)continue;n=[],a.forEach(function(t){var i="Object"!==Object.prototype.toString.call(t).slice(8,-1);n.push(i?t:e(t))}),a=n.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));i.push(r+"="+a)}return i.join("&")}}}Object.defineProperty(i,"__esModule",{value:!0}),n.__dashjs_factory_name="MetricSerialiser",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{}],143:[function(e,t,i){"use strict";function n(){function e(){i&&(o=o||new n(a),i.getRandomValues(o),s=0)}var t,i=window.crypto||window.msCrypto,n=Uint32Array,r=Math.pow(2,8*n.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0;return t={random:function(t,n){var a=void 0;return t=t||0,n=n||1,i?(s===o.length&&e(),a=o[s]/r,s+=1):a=Math.random(),a*(n-t)+t}},e(),t}Object.defineProperty(i,"__esModule",{value:!0}),n.__dashjs_factory_name="RNG",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{}],144:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}Object.defineProperty(i,"__esModule",{value:!0}),n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00",i["default"]=n,t.exports=i["default"]},{}],145:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=i["default"]},{}],146:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=i["default"]},{}],147:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=i["default"]},{}],148:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[]}function a(){function e(e,t,i){var n=s.getBaseURLsFromElement(i);e[t]?d.areEqual(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=NaN):e[t]=new r(n)}function t(t){!function(){if(!s||!s.hasOwnProperty("getBaseURLsFromElement")||!s.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var i=s.getBaseURLsFromElement(t);d.areEqual(i,a.data.baseUrls)||(a.data.baseUrls=i,a.data.selectedIdx=NaN),t&&t.Period_asArray&&t.Period_asArray.forEach(function(t,i){e(a.children,i,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach(function(t,n){e(a.children[i].children,n,t),t.Representation_asArray&&t.Representation_asArray.sort(s.getRepresentationSortFunction()).forEach(function(t,r){e(a.children[i].children[n].children,r,t)})})})}function i(){a=new r}var n,a=void 0,s=void 0,l=this.context,d=(0,o["default"])(l).getInstance();return n={reset:i,update:function(e){t(e)},getForPath:function(e){var t=a,i=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&i.push(t.data)}),i.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(e){!function e(t,i){var n=i||a;t(n.data),n.children&&n.children.forEach(function(i){return e(t,i)})}(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=NaN)})},setConfig:function(e){e.adapter&&(s=e.adapter)}},i(),n}Object.defineProperty(i,"__esModule",{value:!0});var o=n(e(214)),s=n(e(49));a.__dashjs_factory_name="BaseURLTreeModel",i["default"]=s["default"].getClassFactory(a),t.exports=i["default"]},{214:214,49:49}],149:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){var t;return!!e&&(t=!1,T.some(function(i){if(function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex&&e.type===t.type}(e,i)||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,i)||function(e,t){return e.action===l["default"].ACTION_COMPLETE&&e.action===t.action}(e,i))return t=!0}),t)}function i(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function n(e){T=T.filter(function(t){var n=i(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n})}function r(e,t){t<=e+.5||(T=T.filter(function(n){var r=i(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r}))}function s(e,t){y.addSchedulingInfo(e,t),y.addRequestsQueue(e.mediaType,S,T)}function h(e){e.sender===b&&(S.splice(S.indexOf(e.request),1),e.response&&!e.error&&T.push(e.request),s(e.request,e.error?"failed":u),v.trigger(o["default"].FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function f(e){e.sender===b&&v.trigger(o["default"].FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function p(e){e.sender===b&&v.trigger(o["default"].FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function g(){T=[],S=[]}e=e||{};var m=this.context,v=(0,a["default"])(m).getInstance(),y=e.dashMetrics,b=e.fragmentLoader,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0;return _={setStreamProcessor:function(e){E=e},getStreamProcessor:function(){return E},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach(function(t){var r=function(e){var t=void 0;switch(e){case c:t=S;break;case u:t=T;break;default:t=[]}return t}(t);n=n.concat(function(e,t){return t.hasOwnProperty("time")?[function(e,t,n){for(var r=e.length-1;0<=r;r--){var a=e[r],o=a.startTime,s=o+a.duration;if(n=isNaN(n)?i(a):n,!isNaN(o)&&!isNaN(s)&&o<=t+n&&t-n<s||isNaN(o)&&isNaN(t))return a}return null}(e,t.time,t.threshold)]:e.filter(function(e){for(var i in t)if("state"!==i&&t.hasOwnProperty(i)&&e[i]!=t[i])return!1;return!0})}(r,e))}),n},isFragmentLoaded:t,isFragmentLoadedOrPending:function(e){var i=!1,n=0,r=void 0;if(!(i=t(e)))for(n=0;n<S.length;n++)r=S[n],e.url===r.url&&e.startTime===r.startTime&&(i=!0);return i},removeExecutedRequestsBeforeTime:n,removeExecutedRequestsAfterTime:function(e){T=T.filter(function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var i=0,a=0,o=e.length;a<o;a++)r(i,e.start(a)),i=e.end(a);0<t&&r(i,t)}else n()},abortRequests:function(){b.abort(),S=[]},executeRequest:function(e){switch(e.action){case l["default"].ACTION_COMPLETE:T.push(e),s(e,u),w.debug("executeRequest trigger STREAM_COMPLETED"),v.trigger(o["default"].STREAM_COMPLETED,{request:e,fragmentModel:this});break;case l["default"].ACTION_DOWNLOAD:s(e,c),S.push(e),function(e){v.trigger(o["default"].FRAGMENT_LOADING_STARTED,{sender:_,request:e}),b.load(e)}(e);break;default:w.warn("Unknown request action.")}},reset:function(){v.off(o["default"].LOADING_COMPLETED,h,this),v.off(o["default"].LOADING_DATA_PROGRESS,f,this),v.off(o["default"].LOADING_ABANDONED,p,this),b&&b.reset(),g()},addExecutedRequest:function(e){T.push(e)}},w=(0,d["default"])(m).getInstance().getLogger(_),g(),v.on(o["default"].LOADING_COMPLETED,h,_),v.on(o["default"].LOADING_DATA_PROGRESS,f,_),v.on(o["default"].LOADING_ABANDONED,p,_),_}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(48)),o=n(e(56)),s=n(e(49)),l=n(e(225)),d=n(e(47)),c="loading",u="executed";r.__dashjs_factory_name="FragmentModel";var h=s["default"].getClassFactory(r);h.FRAGMENT_MODEL_LOADING=c,h.FRAGMENT_MODEL_EXECUTED=u,h.FRAGMENT_MODEL_CANCELED="canceled",h.FRAGMENT_MODEL_FAILED="failed",s["default"].updateClassFactory(r.__dashjs_factory_name,h),
i["default"]=h,t.exports=i["default"]},{225:225,47:47,48:48,49:49,56:56}],150:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=(0,a["default"])(e).getInstance(),i=void 0;return{getValue:function(){return i},setValue:function(e){(i=e)&&t.trigger(o["default"].MANIFEST_LOADED,{data:e})}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(48)),o=n(e(56)),s=n(e(49));r.__dashjs_factory_name="ManifestModel",i["default"]=s["default"].getSingletonFactory(r),t.exports=i["default"]},{48:48,49:49,56:56}],151:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var t=void 0;for(t=0;t<u.length;t++)if(u[t].rulename===e)return t;return-1}function t(e,t){i(e,t);var n=new a["default"];n.schemeIdUri=e,n.value=t,r.push(n)}function i(e,t){(0,c.checkParameterType)(e,"string"),(0,c.checkParameterType)(t,"string"),r.forEach(function(i,n){i.schemeIdUri===e&&i.value===t&&r.splice(n,1)})}var n,r=void 0,o=void 0,u=void 0,h={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"},f=this.context,p=(0,d["default"])(f).getInstance();return n={getABRCustomRules:function(){return u},addABRCustomRule:function(t,i,n){if("string"!=typeof t||t!==l["default"].ABANDON_FRAGMENT_RULES&&t!==l["default"].QUALITY_SWITCH_RULES||"string"!=typeof i)throw s["default"].BAD_ARGUMENT_ERROR;var r=e(i);-1===r?u.push({type:t,rulename:i,rule:n}):(u[r].type=t,u[r].rule=n)},removeABRCustomRule:function(t){if(t){var i=e(t);-1!==i&&u.splice(i,1)}else u=[]},getStableBufferTime:function(){if(p.get().streaming.lowLatencyEnabled)return.6*p.get().streaming.liveDelay;var e=p.get().streaming.stableBufferTime;return-1<e?e:p.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){return p.get().streaming.lowLatencyEnabled?5*p.get().streaming.retryAttempts[e]:p.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){return p.get().streaming.lowLatencyEnabled?p.get().streaming.retryIntervals[e]/10:p.get().streaming.retryIntervals[e]},getLiveDelay:function(){return p.get().streaming.lowLatencyEnabled?p.get().streaming.liveDelay||3:p.get().streaming.liveDelay},addUTCTimingSource:t,removeUTCTimingSource:i,getUTCTimingSources:function(){return r},clearDefaultUTCTimingSources:function(){r=[]},restoreDefaultUTCTimingSources:function(){t(h.scheme,h.value)},setXHRWithCredentialsForType:function e(t,i){t?o[t]=!!i:Object.keys(o).forEach(function(t){e(t,i)})},getXHRWithCredentialsForType:function(e){var t=o[e];return void 0===t?o["default"]:t},getDefaultUtcTimingSource:function(){return h},reset:function(){}},o={"default":(r=[],!1)},u=[],n}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(97)),o=n(e(49)),s=n(e(109)),l=n(e(187)),d=n(e(50)),c=e(216);r.__dashjs_factory_name="MediaPlayerModel",i["default"]=o["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,187:187,216:216,49:49,50:50,97:97}],152:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){C.trigger(y["default"].METRICS_CHANGED)}function i(e){C.trigger(y["default"].METRIC_CHANGED,{mediaType:e}),t()}function n(e,t,n){C.trigger(y["default"].METRIC_UPDATED,{mediaType:e,metric:t,value:n}),i(e)}function r(e,t,n){C.trigger(y["default"].METRIC_ADDED,{mediaType:e,metric:t,value:n}),i(e)}function b(e,t){var i=null;return e&&(x.hasOwnProperty(e)?i=x[e]:t||(i=new s["default"],x[e]=i)),i}function _(e,t,i){var n=b(e);n[t].push(i),n[t].length>T.get().streaming.metricsMaxListDepth&&n[t].shift()}function w(e,t,i){_(e,t,i),r(e,t,i)}var E,T=(e=e||{}).settings,S=this.context,C=(0,m["default"])(S).getInstance(),x=void 0;return E={clearCurrentMetricsForType:function(e){delete x[e],i(e)},clearAllCurrentMetrics:function(){x={},t()},getMetricsFor:b,addHttpRequest:function e(t,i,n,r,a,s,d,c,u,h,f,p,g,m){var v=new l.HTTPRequest;a&&a!==r&&(e(t,null,n,r,null,null,d,c,null,null,null,p,null,null),v.actualurl=a),v.tcpid=i,v.type=n,v.url=r,v.range=d,v.trequest=c,v.tresponse=u,v.responsecode=f,v._tfinish=h,v._stream=t,v._mediaduration=p,v._responseHeaders=g,v._serviceLocation=s,m?m.forEach(function(e){!function(e,t,i,n){var r=new l.HTTPRequestTrace;r.s=t,r.d=i,r.b=n,e.trace.push(r),e.interval||(e.interval=0),e.interval+=i}(v,e.s,e.d,e.b)}):(delete v.interval,delete v.trace),w(t,o["default"].HTTP_REQUEST,v)},addRepresentationSwitch:function(e,t,i,n,r){var a=new d["default"];a.t=t,a.mt=i,a.to=n,r?a.lto=r:delete a.lto,w(e,o["default"].TRACK_SWITCH,a)},addBufferLevel:function(e,t,i){var n=new c["default"];n.t=t,n.level=i,w(e,o["default"].BUFFER_LEVEL,n)},addBufferState:function(e,t,i){var n=new u["default"];n.target=i,n.state=t,w(e,o["default"].BUFFER_STATE,n)},addDVRInfo:function(e,t,i,n){var r=new h["default"];r.time=t,r.range=n,r.manifestInfo=i,w(e,o["default"].DVR_INFO,r)},addDroppedFrames:function(e,t){var i=new f["default"],n=b(e).DroppedFrames;i.time=t.creationTime,i.droppedFrames=t.droppedVideoFrames,0<n.length&&n[n.length-1]==i||w(e,o["default"].DROPPED_FRAMES,i)},addSchedulingInfo:function(e,t,i,n,r,a,s,l,d){var c=new g["default"];c.mediaType=e,c.t=t,c.type=i,c.startTime=n,c.availabilityStartTime=r,c.duration=a,c.quality=s,c.range=l,c.state=d,w(e,o["default"].SCHEDULING_INFO,c)},addRequestsQueue:function(e,t,i){var n=new v["default"];n.loadingRequests=t,n.executedRequests=i,b(e).RequestsQueue=n,r(e,o["default"].REQUESTS_QUEUE,n)},addManifestUpdate:function(e,t,i,n,s,l,d,c,u,h){var f=new p.ManifestUpdate;f.mediaType=e,f.type=t,f.requestTime=i,f.fetchTime=n,f.availabilityStartTime=s,f.presentationStartTime=l,f.clientTimeOffset=d,f.currentTime=c,f.buffered=u,f.latency=h,_(a["default"].STREAM,o["default"].MANIFEST_UPDATE,f),r(e,o["default"].MANIFEST_UPDATE,f)},updateManifestUpdateInfo:function(e,t){if(e){for(var i in t)e[i]=t[i];n(e.mediaType,o["default"].MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,i,r,a){if(e){var s=new p.ManifestUpdateStreamInfo;s.id=t,s.index=i,s.start=r,s.duration=a,e.streamInfo.push(s),n(e.mediaType,o["default"].MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,i,r,a,s,l,d){if(e){var c=new p.ManifestUpdateRepresentationInfo;c.id=t,c.index=i,c.streamIndex=r,c.mediaType=a,c.startNumber=l,c.fragmentInfoType=d,c.presentationTimeOffset=s,e.representationInfo.push(c),n(e.mediaType,o["default"].MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,w(a["default"].STREAM,o["default"].PLAY_LIST,e)},addDVBErrors:function(e){w(a["default"].STREAM,o["default"].DVB_ERRORS,e)}},x={},E}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(110)),s=n(e(229)),l=e(239),d=n(e(242)),c=n(e(235)),u=n(e(236)),h=n(e(237)),f=n(e(238)),p=e(240),g=n(e(244)),m=n(e(48)),v=n(e(243)),y=n(e(56)),b=n(e(49));r.__dashjs_factory_name="MetricsModel",i["default"]=b["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,110:110,229:229,235:235,236:236,237:237,238:238,239:239,240:240,242:242,243:243,244:244,48:48,49:49,56:56}],153:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=void 0;return{initialize:function(t){if(e=new a["default"],!t)return null;var i=t.indexOf("#");if(-1!==i)for(var n=t.substr(i+1).split("&"),r=0,o=n.length;r<o;++r){var s=n[r],l=s.indexOf("=");if(-1!==l){var d=s.substring(0,l);e.hasOwnProperty(d)&&(e[d]=s.substr(l+1))}}},getURIFragmentData:function(){return e}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(234)),o=n(e(49));r.__dashjs_factory_name="URIFragmentModel",i["default"]=o["default"].getSingletonFactory(r),t.exports=i["default"]},{234:234,49:49}],154:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){c&&(c.playbackRate=h||1,c.removeEventListener("canplay",e))}function t(t){c&&(c.readyState<=2&&0<t?c.addEventListener("canplay",e):c.playbackRate=t)}function i(){return 0<m.length}function n(){if(c&&i()&&0===c.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),c.dispatchEvent(e)}}function r(){return c?c.buffered:null}var a=void 0,d=void 0,c=void 0,u=void 0,h=void 0,f="element is not video or audio DOM type!",p=this.context,g=(0,o["default"])(p).getInstance(),m=[];return a={initialize:function(){g.on(s["default"].PLAYBACK_PLAYING,n,this)},setCurrentTime:function(e,t){if(c){if(c.currentTime==e)return;try{e=t?function(e){var t=r(),i=e,n=9999999999;if(t)for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a),l=Math.abs(o-e),d=Math.abs(s-e);if(o<=e&&e<=s)return e;l<n&&(n=l,i=o),d<n&&(n=d,i=s)}return i}(e):e,c.currentTime=e}catch(t){0===c.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){c.currentTime=e},400)}}},play:function(){if(c){c.autoplay=!0;var e=c.play();e&&e["catch"]&&"undefined"!=typeof Promise&&e["catch"](function(e){"NotAllowedError"===e.name&&g.trigger(s["default"].PLAYBACK_NOT_ALLOWED),d.warn("Caught pending play exception - continuing ("+e+")")})}},isPaused:function(){return c?c.paused:null},pause:function(){c&&(c.pause(),c.autoplay=!1)},isSeeking:function(){return c?c.seeking:null},getTime:function(){return c?c.currentTime:null},getPlaybackRate:function(){return c?c.playbackRate:null},setPlaybackRate:t,getPlayedRanges:function(){return c?c.played:null},getEnded:function(){return c?c.ended:null},setStallState:function(e,n){!function(e,n){n?function(e){var i=void 0;null===e||c.seeking||-1!==m.indexOf(e)||(m.push(e),c&&1===m.length&&((i=document.createEvent("Event")).initEvent("waiting",!0,!1),h=c.playbackRate,t(0),c.dispatchEvent(i)))}(e):function(e){var n=m.indexOf(e),r=void 0;null!==e&&(-1!==n&&m.splice(n,1),c&&!1===i()&&0===c.playbackRate&&(t(h||1),c.paused||((r=document.createEvent("Event")).initEvent("playing",!0,!1),c.dispatchEvent(r))))}(e)}(e,n)},getElement:function(){return c},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw f;(c=e)&&(c.preload="auto")},setSource:function(e){c&&(e?c.src=e:(c.removeAttribute("src"),c.load()))},getSource:function(){return c?c.src:null},getTTMLRenderingDiv:function(){return u},setTTMLRenderingDiv:function(e){(u=e).style.position="absolute",u.style.display="flex",u.style.overflow="hidden",u.style.pointerEvents="none",u.style.top=0,u.style.left=0},getPlaybackQuality:function(){if(!c)return null;var e="webkitDroppedFrameCount"in c&&"webkitDecodedFrameCount"in c,t=null;return"getVideoPlaybackQuality"in c?t=c.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:c.webkitDroppedFrameCount,totalVideoFrames:c.webkitDroppedFrameCount+c.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){c&&c.addEventListener(e,t)},removeEventListener:function(e,t){c&&c.removeEventListener(e,t)},getReadyState:function(){return c?c.readyState:NaN},getBufferRange:r,getClientWidth:function(){return c?c.clientWidth:NaN},getClientHeight:function(){return c?c.clientHeight:NaN},getTextTracks:function(){return c?c.textTracks:[]},getTextTrack:function(e,t,i,n,r){if(c)for(var a=0;a<c.textTracks.length;a++)if(c.textTracks[a].kind===e&&(!t||c.textTracks[a].label==t)&&c.textTracks[a].language===i&&c.textTracks[a].isTTML===n&&c.textTracks[a].isEmbedded===r)return c.textTracks[a];return null},addTextTrack:function(e,t,i){return c?c.addTextTrack(e,t,i):null},appendChild:function(e){c&&(c.appendChild(e),void 0!==e.isTTML&&(c.textTracks[c.textTracks.length-1].isTTML=e.isTTML,c.textTracks[c.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){c&&c.removeChild(e)},getVideoWidth:function(){return c?c.videoWidth:NaN},getVideoHeight:function(){return c?c.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return c&&c.parentNode?c.getBoundingClientRect().top-c.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return c&&c.parentNode?c.getBoundingClientRect().left-c.parentNode.getBoundingClientRect().left:NaN},reset:function(){g.off(s["default"].PLAYBACK_PLAYING,n,this)}},d=(0,l["default"])(p).getInstance().getLogger(a),a}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(48)),s=n(e(56)),l=n(e(47));r.__dashjs_factory_name="VideoModel",i["default"]=a["default"].getSingletonFactory(r),t.exports=i["default"]},{47:47,48:48,49:49,56:56}],155:[function(e,t,i){"use strict";function n(e){function t(e,t){e.reader.read().then(t)["catch"](function(t){e.onerror&&200===e.response.status&&e.onerror(t)})}function i(e,t){if(1<(e=e.filter(function(i){return i.bytes>t/4/e.length})).length){var i=(n=0,r=(e[e.length-1].ts-e[0].ts)/e.length,e.forEach(function(t,i){var a=e[i+1];if(a){var o=a.ts-t.ts;n+=o<r?o:0}}),{v:n});if("object"==typeof i)return i.v}var n,r;return null}var n=(e=e||{}).requestModifier,r=e.boxParser;return{load:function(e){var a=new Date,o=e.request,s=new Headers;o.range&&s.append("Range","bytes="+o.range),o.requestStartDate||(o.requestStartDate=a),n&&n.modifyRequestHeader({setRequestHeader:function(e,t){s.append(e,t)}});var l=void 0;"function"==typeof window.AbortController&&(l=new AbortController,e.abortController=l);var d={method:e.method,headers:s,credentials:e.withCredentials?"include":void 0,signal:l?l.signal:void 0};fetch(e.url,d).then(function(n){e.response||(e.response={}),e.response.status=n.status,e.response.statusText=n.statusText,e.response.responseURL=n.url,n.ok||e.onerror();var a="",o=!0,s=!1,l=void 0;try{for(var d,c=n.headers.keys()[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var u=d.value;a+=u+": "+n.headers.get(u)+"\n"}}catch(e){s=!0,l=e}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw l}}if(e.response.responseHeaders=a,!n.body)return n.arrayBuffer().then(function(t){var i={loaded:(e.response.response=t).byteLength,total:t.byteLength,stream:!1};e.progress(i),e.onload(),e.onend()});var h=parseInt(n.headers.get("Content-Length"),10),f=0,p=!1,g=new Uint8Array,m=0;e.reader=n.body.getReader();var v=[];t(e,function n(a){var o=a.value;if(a.done)return g&&(e.progress({loaded:f,total:isNaN(h)?f:h,lengthComputable:!0,time:i(v,f),stream:!0}),e.response.response=g.buffer),e.onload(),void e.onend();if(o&&0<o.length){g=function(e,t){if(0===e.length)return t;var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}(g,o),f+=o.length,v.push({ts:Date.now(),bytes:o.length});var s=r.findLastTopIsoBoxCompleted(["moov","mdat"],g,m);if(s.found){var l=s.lastCompletedOffset+s.size,d=void 0;g=l===g.length?(d=g,new Uint8Array):(d=new Uint8Array(g.subarray(0,l)),g.subarray(l)),e.progress({data:d.buffer,lengthComputable:!1,noTrace:!0}),m=0}else m=s.lastCompletedOffset,p||(e.progress({lengthComputable:!1,noTrace:!0}),p=!0)}t(e,n)})})["catch"](function(t){e.onerror&&e.onerror(t)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}},calculateDownloadedTime:i}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="FetchLoader";var s=o["default"].getClassFactory(n);i["default"]=s,t.exports=i["default"]},{49:49}],156:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){e=e||{};var t,i,n=this.context,a=e.errHandler,d=e.dashMetrics,h=e.mediaPlayerModel,f=e.requestModifier,p=e.boxParser,g=e.useFetch||!1,m=void 0,v=void 0,y=void 0,b=void 0;return t={load:function(e){e.request?function e(t,i){function r(e){T=!1,_.requestStartDate=S,_.requestEndDate=new Date,_.firstByteDate=_.firstByteDate||S,_.checkExistenceOnly||(d.addHttpRequest(_,k.response?k.response.responseURL:null,k.response?k.response.status:null,k.response&&k.response.getAllResponseHeaders?k.response.getAllResponseHeaders():k.response?k.response.responseHeaders:[],e?w:null),_.type===l.HTTPRequest.MPD_TYPE&&d.addManifestUpdate(_.type,_.requestStartDate,_.requestEndDate))}function c(){-1!==m.indexOf(k)&&(m.splice(m.indexOf(k),1),T&&(r(!1),0<i?function(){i--;var n={config:t};y.push(n),n.timeout=setTimeout(function(){-1!==y.indexOf(n)&&(y.splice(y.indexOf(n),1),e(t,i))},h.getRetryIntervalsForType(_.type))}():(a.error(new u["default"](b[_.type],_.url+" is not available",{request:_,response:k.response})),t.error&&t.error(_,"error",k.response.statusText),t.complete&&t.complete(_,k.response.statusText))))}var _=t.request,w=[],E=!0,T=!0,S=new Date,C=S,x=0,k=void 0;if(!f||!d||!a)throw new Error("config object is not correct or missing");var A=void 0;A=g&&window.fetch&&"arraybuffer"===_.responseType&&_.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,s["default"])(n).create({requestModifier:f,boxParser:p}):(0,o["default"])(n).create({requestModifier:f});var I=f.modifyRequestURL(_.url),D=_.checkExistenceOnly?l.HTTPRequest.HEAD:l.HTTPRequest.GET,M=h.getXHRWithCredentialsForType(_.type);k={url:I,method:D,withCredentials:M,request:_,onload:function(){200<=k.response.status&&k.response.status<=299&&(r(!0),t.success&&t.success(k.response.response,k.response.statusText,k.response.responseURL),t.complete&&t.complete(_,k.response.statusText))},onend:c,onerror:c,progress:function(e){var i=new Date;E&&(E=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(_.firstByteDate=i)),e.lengthComputable&&(_.bytesLoaded=e.loaded,_.bytesTotal=e.total),e.noTrace||(w.push({s:C,d:e.time?e.time:i.getTime()-C.getTime(),b:[e.loaded?e.loaded-x:0]}),C=i,x=e.loaded),t.progress&&e&&t.progress(e)},onabort:function(){t.abort&&t.abort(_)},loader:A};var P,R=(new Date).getTime();isNaN(_.delayLoadingTime)||R>=_.delayLoadingTime?(m.push(k),A.load(k)):(P={httpRequest:k},v.push(P),P.delayTimeout=setTimeout(function(){if(-1!==v.indexOf(P)){v.splice(v.indexOf(P),1);try{S=new Date,C=S,m.push(P.httpRequest),A.load(P.httpRequest)}catch(e){P.httpRequest.onerror()}}},_.delayLoadingTime-R))}(e,h.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){y.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),y=[],v.forEach(function(e){return clearTimeout(e.delayTimeout)}),v=[],m.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),m=[]}},m=[],v=[],y=[],r(i={},l.HTTPRequest.MPD_TYPE,c["default"].DOWNLOAD_ERROR_ID_MANIFEST_CODE),r(i,l.HTTPRequest.XLINK_EXPANSION_TYPE,c["default"].DOWNLOAD_ERROR_ID_XLINK_CODE),r(i,l.HTTPRequest.INIT_SEGMENT_TYPE,c["default"].DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),r(i,l.HTTPRequest.MEDIA_SEGMENT_TYPE,c["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),r(i,l.HTTPRequest.INDEX_SEGMENT_TYPE,c["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),r(i,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,c["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),r(i,l.HTTPRequest.OTHER_TYPE,c["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),b=i,t}Object.defineProperty(i,"__esModule",{value:!0});var o=n(e(157)),s=n(e(155)),l=e(239),d=n(e(49)),c=n(e(53)),u=n(e(223));a.__dashjs_factory_name="HTTPLoader";var h=d["default"].getClassFactory(a);i["default"]=h,t.exports=i["default"]},{155:155,157:157,223:223,239:239,49:49,53:53}],157:[function(e,t,i){"use strict";function n(e){var t=(e=e||{}).requestModifier;return{load:function(e){var i=new Date,n=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=i),t&&(r=t.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="XHRLoader";var s=o["default"].getClassFactory(n);i["default"]=s,t.exports=i["default"]},{49:49}],158:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,i=0;i<e.length;++i){var n=e[i];"urn:mpeg:dash:mp4protection:2011"===n.schemeIdUri.toLowerCase()&&"cenc"===n.value.toLowerCase()&&(t=n)}return t}},{key:"getPSSHData",value:function(e){var t=8,i=new DataView(e),n=i.getUint8(t);return t+=20,0<n&&(t+=4+16*i.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var i=r.parsePSSHList(t);return e&&i.hasOwnProperty(e.uuid.toLowerCase())?i[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),i={},n=0;;){var r,a,o=void 0,s=n;if(n>=t.buffer.byteLength)break;if(r=n+t.getUint32(n),n+=4,1886614376===t.getUint32(n))if(n+=4,0===(a=t.getUint8(n))||1===a){n++,n+=3,o="";var l=void 0,d=void 0;for(l=0;l<4;l++)o+=1===(d=t.getUint8(n+l).toString(16)).length?"0"+d:d;for(n+=4,o+="-",l=0;l<2;l++)o+=1===(d=t.getUint8(n+l).toString(16)).length?"0"+d:d;for(n+=2,o+="-",l=0;l<2;l++)o+=1===(d=t.getUint8(n+l).toString(16)).length?"0"+d:d;for(n+=2,o+="-",l=0;l<2;l++)o+=1===(d=t.getUint8(n+l).toString(16)).length?"0"+d:d;for(n+=2,o+="-",l=0;l<6;l++)o+=1===(d=t.getUint8(n+l).toString(16)).length?"0"+d:d;n+=6,o=o.toLowerCase(),t.getUint32(n),n+=4,i[o]=t.buffer.slice(s,r),n=r}else n=r;else n=r}return i}}]),r);i["default"]=a,t.exports=i["default"]},{}],159:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("function"==typeof e[n[Object.keys(n)[0]]])return n}return null}var t=void 0,i=this.context;return t={createProtectionSystem:function(n){var r=null,s=(0,o["default"])(i).getInstance();s.setConfig({debug:n.debug,BASE64:n.BASE64}),s.initialize();var l=function(n){var r=n.debug,a=r.getLogger(t),o=n.eventBus,s=n.errHandler,l=n.videoModel?n.videoModel.getElement():null;return l&&void 0===l.onencrypted||l&&void 0===l.mediaKeys?e(l,f)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,c["default"])(i).create({debug:r,eventBus:o,events:n.events,api:e(l,f)})):e(l,h)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,u["default"])(i).create({debug:r,eventBus:o,errHandler:s,events:n.events,api:e(l,h)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,d["default"])(i).create({debug:r,eventBus:o,events:n.events}))}(n);return!r&&l&&(r=(0,a["default"])(i).create({protectionModel:l,protectionKeyController:s,eventBus:n.eventBus,debug:n.debug,events:n.events,BASE64:n.BASE64,constants:n.constants}),n.capabilities.setEncryptedMediaSupported(!0)),r}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(161)),o=n(e(162)),s=n(e(160)),l=n(e(167)),d=n(e(169)),c=n(e(170)),u=n(e(168)),h=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],f=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];r.__dashjs_factory_name="Protection";var p=dashjs.FactoryMaker.getClassFactory(r);p.events=s["default"],p.errors=l["default"],dashjs.FactoryMaker.updateClassFactory(r.__dashjs_factory_name,p),i["default"]=p,t.exports=i["default"]},{160:160,161:161,162:162,167:167,168:168,169:169,170:170}],160:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(57),o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{57:57}],161:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){if(!(w&&w.hasOwnProperty("on")&&b&&b.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function i(e,t){var i=a["default"].getPSSHForKeySystem(R,e),n=c(R);if(i){for(var r=_.getAllInitData(),o=0;o<r.length;o++)if(b.initDataEquals(i,r[o]))return void k.warn("DRM: Ignoring initData because we have already seen it!");try{_.createKeySession(i,n,h(R),t)}catch(e){w.trigger(E.KEY_SESSION_CREATED,{data:null,error:new d["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?_.createKeySession(e,n,h(R),t):w.trigger(E.KEY_SESSION_CREATED,{data:null,error:new d["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(R?R.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function n(e,i){t(),_.loadKeySession(e,i,h(R))}function r(e){t(),e?(_.setMediaElement(e),w.on(E.NEED_KEY,v,this)):null===e&&(_.setMediaElement(e),w.off(E.NEED_KEY,v,this))}function c(e){var t=null;if(e){var i=e.systemString;D&&(t=i in D?D[i]:null)}return t}function u(e){var t=c(e),i=[],n=[],r=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:P,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:P,l=h(e),d=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",u=t&&t.persistentState?t.persistentState:"temporary"===l?"optional":"required";return I.forEach(function(e){e.type===C.AUDIO?i.push(new o["default"](e.codec,r)):e.type===C.VIDEO&&n.push(new o["default"](e.codec,a))}),new s["default"](i,n,d,u,[l])}function h(e){var t=c(e);return t&&t.sessionType?t.sessionType:M}function f(e,t){var r=this,a=[],o=void 0;if(R)for(o=0;o<e.length&&(R!==e[o].ks||"break"!==function(){return a.push({ks:e[o].ks,configs:[u(R)]}),w.on(E.KEY_SYSTEM_ACCESS_COMPLETE,function a(s){w.off(E.KEY_SYSTEM_ACCESS_COMPLETE,a,r),s.error?t||w.trigger(E.KEY_SYSTEM_SELECTED,{error:new d["default"](l["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,l["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+s.error)}):(k.info("DRM: KeySystem Access Granted"),w.trigger(E.KEY_SYSTEM_SELECTED,{data:s.data}),e[o].sessionId?n(e[o].sessionId,e[o].initData):e[o].initData&&i(e[o].initData,e[o].cdmData))},r),_.requestKeySystemAccess(a),"break"}());o++);else if(void 0===R){var s;!function(){function h(e){w.off(E.KEY_SYSTEM_ACCESS_COMPLETE,h,r),e.error?(R=void 0,w.off(E.INTERNAL_KEY_SYSTEM_SELECTED,s,r),t||w.trigger(E.KEY_SYSTEM_SELECTED,{data:null,error:new d["default"](l["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,l["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(p=e.data,k.info("DRM: KeySystem Access Granted ("+p.keySystem.systemString+")!  Selecting key system..."),_.selectKeySystem(p))}R=null,A.push(e);for(var f=0;f<e.length;f++)a.push({ks:e[f].ks,configs:[u(e[f].ks)]});var p=void 0;s=function e(a){if(w.off(E.INTERNAL_KEY_SYSTEM_SELECTED,e,r),w.off(E.KEY_SYSTEM_ACCESS_COMPLETE,h,r),a.error)R=void 0,t||w.trigger(E.KEY_SYSTEM_SELECTED,{data:null,error:new d["default"](l["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,l["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+a.error)});else{if(!_)return;R=_.getKeySystem(),w.trigger(E.KEY_SYSTEM_SELECTED,{data:p});var s=c(R);s&&s.serverCertificate&&0<s.serverCertificate.length&&_.setServerCertificate(S.decodeArray(s.serverCertificate).buffer);for(var u=0;u<A.length;u++)for(o=0;o<A[u].length;o++)if(R===A[u][o].ks){if(b.isClearKey(R)&&s&&s.hasOwnProperty("clearkeys")){var f={kids:Object.keys(s.clearkeys)};A[u][o].initData=(new TextEncoder).encode(JSON.stringify(f))}A[u][o].sessionId?n(A[u][o].sessionId,A[u][o].initData):null!==A[u][o].initData&&i(A[u][o].initData,A[u][o].cdmData);break}}},w.on(E.INTERNAL_KEY_SYSTEM_SELECTED,s,r),w.on(E.KEY_SYSTEM_ACCESS_COMPLETE,h,r),_.requestKeySystemAccess(a)}()}else A.push(e)}function p(e,t){w.trigger(E.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function g(e){e.error?w.trigger(E.KEY_STATUSES_CHANGED,{data:null,error:e.error}):k.debug("DRM: key status = "+e.status)}function m(e){k.debug("DRM: onKeyMessage");var t=e.data;w.trigger(E.KEY_MESSAGE,{data:t});var i=t.messageType?t.messageType:"license-request",n=t.message,r=t.sessionToken,o=c(R),s=R?R.systemString:null,u=b.getLicenseServer(R,o,i),h={sessionToken:r,messageType:i};if(n&&0!==n.byteLength){if(!u)return k.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+r.getSessionID()),void p(h);if(b.isClearKey(R)){var f=b.processClearKeyLicenseRequest(R,o,n);if(f)return k.debug("DRM: ClearKey license request handled by application!"),p(h),void _.updateKeySession(r,f)}var g=null;if(o&&o.serverURL){var m=o.serverURL;"string"==typeof m&&""!==m?g=m:"object"==typeof m&&m.hasOwnProperty(i)&&(g=m[i])}else g=o&&o.laURL&&""!==o.laURL?o.laURL:(g=R.getLicenseServerURLFromInitData(a["default"].getPSSHData(r.initData)))||e.data.laURL;if(g=u.getServerURLFromMessage(g,n,i)){var v={},y=!1,T=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(y=!0),v[t]=e[t]};o&&T(o.httpRequestHeaders),T(R.getRequestHeadersFromMessage(n)),o&&"boolean"==typeof o.withCredentials&&(y=o.withCredentials);var S=function(e,t,i,n){var r=e.response?u.getErrorResponse(e.response,i,n):"NONE";p(t,new d["default"](l["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,l["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+i+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r))},C=R.getLicenseRequestFromMessage(n),x=u.getHTTPMethod(i),A=u.getResponseType(s,i),I=o&&!isNaN(o.httpTimeout)?o.httpTimeout:8e3;!function e(t,i,n,r,a,o,s,l,d,c,u){var h=new XMLHttpRequest;h.open(n,t,!0),h.responseType=r,h.withCredentials=a,0<l&&(h.timeout=l);for(var f in i)h.setRequestHeader(f,i[f]);var p=function(){s--,setTimeout(function(){e(t,i,n,r,a,o,s,l,d,c,u)},1e3)};h.onload=function(){200===this.status||s<=0?d(this):(k.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),p())},h.ontimeout=h.onerror=function(){
s<=0?u(this):(k.warn("License request network request failed . Retrying it... Pending retries: "+s),p())},h.onabort=function(){c(this)},h.send(o)}(g,v,x,A,y,C,3,I,function(e){if(_)if(200===e.status){var t=u.getLicenseMessage(e.response,s,i);null!==t?(p(h),_.updateKeySession(r,t)):S(e,h,s,i)}else S(e,h,s,i)},function(e){p(h,new d["default"](l["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,l["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+s+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},function(e){p(h,new d["default"](l["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,l["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+s+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))})}else p(h,new d["default"](l["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,l["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else p(h,new d["default"](l["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,l["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function v(e,t){if(k.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===I.length&&(k.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))x.push(setTimeout(function(){v(e,t)},500));else{var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),R){var n=a["default"].getPSSHForKeySystem(R,i);if(n)for(var r=_.getAllInitData(),o=0;o<r.length;o++)if(b.initDataEquals(n,r[o]))return void k.warn("DRM: Ignoring initData because we have already seen it!")}k.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var s=b.getSupportedKeySystems(i,D);0!==s.length?f(s,!1):k.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else k.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}var y,b=(e=e||{}).protectionKeyController,_=e.protectionModel,w=e.eventBus,E=e.events,T=e.debug,S=e.BASE64,C=e.constants,x=[],k=void 0,A=void 0,I=void 0,D=void 0,M=void 0,P=void 0,R=void 0;return y={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");t(),w.on(E.INTERNAL_KEY_MESSAGE,m,this),w.on(E.INTERNAL_KEY_STATUS_CHANGED,g,this),I.push(e);var i=b.getSupportedKeySystemsFromContentProtection(e.contentProtection);i&&0<i.length&&f(i,!0)},createKeySession:i,loadKeySession:n,removeKeySession:function(e){t(),_.removeKeySession(e)},closeKeySession:function(e){t(),_.closeKeySession(e)},setServerCertificate:function(e){t(),_.setServerCertificate(e)},setMediaElement:r,setSessionType:function(e){M=e},setRobustnessLevel:function(e){P=e},setProtectionData:function(e){D=e,b.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return t(),b.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return b?b.getKeySystems():[]},setKeySystems:function(e){b&&b.setKeySystems(e)},stop:function(){_&&_.stop()},reset:function(){t(),w.off(E.INTERNAL_KEY_MESSAGE,m,this),w.off(E.INTERNAL_KEY_STATUS_CHANGED,g,this),r(null),R=void 0,_&&(_.reset(),_=null),x.forEach(function(e){return clearTimeout(e)}),x=[],I=[]}},k=T.getLogger(y),A=[],I=[],M="temporary",P="",y}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(158)),o=n(e(180)),s=n(e(179)),l=n(e(167)),d=n(e(223));r.__dashjs_factory_name="ProtectionController",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{158:158,167:167,179:179,180:180,223:223}],162:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=void 0,i=void 0,n=void 0,r=void 0,g=void 0,m=void 0,v=void 0;return t={initialize:function(){r=[];var t=void 0;t=(0,d["default"])(e).getInstance({BASE64:g}),r.push(t),t=(0,l["default"])(e).getInstance({BASE64:g}),r.push(t),t=(0,o["default"])(e).getInstance({BASE64:g}),r.push(t),m=t,t=(0,s["default"])(e).getInstance({BASE64:g,debug:i}),r.push(t),v=t},setProtectionData:function(e){for(var t,i,n=0;n<r.length;n++){var a=r[n];a.hasOwnProperty("init")&&a.init((t=a.systemString,i=void 0,i=null,e&&(i=t in e?e[t]:null),i))}},isClearKey:function(e){return e===m||e===v},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var i=new Uint8Array(e),n=new Uint8Array(t),r=0;r<i.length;r++)if(i[r]!==n[r])return!1;return!0},getKeySystems:function(){return r},setKeySystems:function(e){r=e},getKeySystemBySystemString:function(e){for(var t=0;t<r.length;t++)if(r[t].systemString===e)return r[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,i=void 0,n=void 0,a=void 0,o=[];if(e)for(n=0;n<r.length;++n)for(i=r[n],a=0;a<e.length;++a)if((t=e[a]).schemeIdUri.toLowerCase()===i.schemeIdURI){var s=i.getInitData(t);o.push({ks:r[n],initData:s,cdmData:i.getCDMData(),sessionId:i.getSessionId(t)})}return o},getSupportedKeySystems:function(e,t){for(var i=[],n=a["default"].parsePSSHList(e),o=void 0,s=void 0,l=void 0,d=0;d<r.length;++d)s=(o=r[d]).systemString,l=!t||s in t,o.uuid in n&&l&&i.push({ks:o,initData:n[o.uuid],cdmData:o.getCDMData(),sessionId:o.getSessionId()});return i},getLicenseServer:function(t,i,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return i&&i.hasOwnProperty("drmtoday")?r=(0,c["default"])(e).getInstance({BASE64:g}):t.systemString===p["default"].WIDEVINE_KEYSTEM_STRING?r=(0,h["default"])(e).getInstance():t.systemString===p["default"].PLAYREADY_KEYSTEM_STRING?r=(0,u["default"])(e).getInstance():t.systemString===p["default"].CLEARKEY_KEYSTEM_STRING&&(r=(0,f["default"])(e).getInstance()),r},processClearKeyLicenseRequest:function(e,t,i){try{return e.getClearKeysFromProtectionData(t,i)}catch(e){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(i=e.debug,n=i.getLogger(t)),e.BASE64&&(g=e.BASE64))}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(158)),o=n(e(163)),s=n(e(165)),l=n(e(166)),d=n(e(164)),c=n(e(172)),u=n(e(173)),h=n(e(174)),f=n(e(171)),p=n(e(111));r.__dashjs_factory_name="ProtectionKeyController",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{111:111,158:158,163:163,164:164,165:165,166:166,171:171,172:172,173:173,174:174}],163:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(e=e||{}).BASE64;return{uuid:d,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:c,getInitData:function(e){return s["default"].parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var i=null;if(e){for(var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],s=0;s<n.kids.length;s++){var l=n.kids[s],d=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");r.push(new a["default"](l,d))}i=new o["default"](r)}return i}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(177)),o=n(e(175)),s=n(e(158)),l=n(e(111)),d="e2719d58-a985-b3c9-781a-b030af78d30e",c=l["default"].CLEARKEY_KEYSTEM_STRING;r.__dashjs_factory_name="KeySystemClearKey",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{111:111,158:158,175:175,177:177}],164:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}var i="utf-16",n=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:l,getInitData:function(e){var i,r,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),d=0,c=null,u=void 0,h=void 0;if(t(),!e)return null;if("pssh"in e)return a["default"].parseInitDataFromContentProtection(e,n);if("pro"in e)c=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;c=n.decodeArray(e.prheader.__text)}return i=c.length,r=4+s.length+l.length+4+i,o=new ArrayBuffer(r),u=new Uint8Array(o),(h=new DataView(o)).setUint32(d,r),d+=4,u.set(s,d),d+=s.length,u.set(l,d),d+=l.length,h.setUint32(d,i),d+=4,u.set(c,d),d+=i,u.buffer},getRequestHeadersFromMessage:function(e){var t,n=void 0,r={},a=new DOMParser,o="utf-16"===i?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,o);for(var s=(n=a.parseFromString(t,"application/xml")).getElementsByTagName("name"),l=n.getElementsByTagName("value"),d=0;d<s.length;d++)r[s[d].childNodes[0].nodeValue]=l[d].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r.hasOwnProperty("Content-Type")||(r["Content-Type"]="text/xml; charset="+i),r},getLicenseRequestFromMessage:function(e){var r=null,a=new DOMParser,o="utf-16"===i?new Uint16Array(e):new Uint8Array(e);t();var s=String.fromCharCode.apply(null,o),l=a.parseFromString(s,"application/xml");if(!l.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var d=l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return d&&(r=n.decode(d)),r},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),i=t.getUint16(4,!0),n=6,r=new DOMParser,a=0;a<i;a++){var o=t.getUint16(n,!0);n+=2;var s=t.getUint16(n,!0);if(n+=2,1===o){var l=e.slice(n,n+s),d=String.fromCharCode.apply(null,new Uint16Array(l)),c=r.parseFromString(d,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var u=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(u)return u}if(c.getElementsByTagName("LUI_URL")[0]){var h=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(h)return h}}else n+=s}return null},getCDMData:function(){var e=void 0,i=void 0,r=void 0,a=void 0;if(t(),d&&d.cdmData){for(e=[],a=0;a<d.cdmData.length;++a)e.push(d.cdmData.charCodeAt(a)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=n.encode(e),i='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),r=[],a=0;a<i.length;++a)r.push(i.charCodeAt(a)),r.push(0);return new Uint8Array(r).buffer}return null},getSessionId:function(e){return d&&d.sessionId?d.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');i=e},init:function(e){e&&(d=e)}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(158)),o=n(e(111)),s="9a04f079-9840-4286-ab92-e65be0885f95",l=o["default"].PLAYREADY_KEYSTEM_STRING,d=void 0;r.__dashjs_factory_name="KeySystemPlayReady",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{111:111,158:158}],165:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=void 0,i=e.BASE64,n=e.debug.getLogger(t);return t={uuid:d,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:c,getInitData:function(e){return s["default"].parseInitDataFromContentProtection(e,i)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var i=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],l=0;l<r.kids.length;l++){var d=r.kids[l],c=e.clearkeys&&e.clearkeys.hasOwnProperty(d)?e.clearkeys[d]:null;if(!c)throw new Error("DRM: ClearKey keyID ("+d+") is not known!");s.push(new a["default"](d,c))}i=new o["default"](s),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return i}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(177)),o=n(e(175)),s=n(e(158)),l=n(e(111)),d="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",c=l["default"].CLEARKEY_KEYSTEM_STRING;r.__dashjs_factory_name="KeySystemW3CClearKey",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{111:111,158:158,175:175,177:177}],166:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=null,i=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:l,init:function(e){e&&(t=e)},getInitData:function(e){return a["default"].parseInitDataFromContentProtection(e,i)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(158)),o=n(e(111)),s="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=o["default"].WIDEVINE_KEYSTEM_STRING;r.__dashjs_factory_name="KeySystemWidevine",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{111:111,158:158}],167:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(54),o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{54:54}],168:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){_&&r();for(var e=0;e<S.length;e++)i(S[e]);f.trigger(p.TEARDOWN_COMPLETE)}function i(e){try{_[m.cancelKeyRequest](w.systemString,e.sessionID)}catch(t){f.trigger(p.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function n(e,t){if(t&&e){for(var i=e.length,n=0;n<i;n++)if(e[n].sessionID==t)return e[n];return null}return null}function r(){_.removeEventListener(m.keyerror,x),_.removeEventListener(m.needkey,x),_.removeEventListener(m.keymessage,x),_.removeEventListener(m.keyadded,x)}e=e||{};var h=this.context,f=e.eventBus,p=e.events,g=e.debug,m=e.api,v=e.errHandler,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0;return y={getAllInitData:function(){for(var e=[],t=0;t<T.length;t++)e.push(T[t].initData);for(t=0;t<S.length;t++)e.push(S[t].initData);return e},requestKeySystemAccess:function(e){var t=_;t=t||document.createElement("video");for(var i=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,a=e[n].configs,o=null,s=0;s<a.length;s++){var l=a[s].videoCapabilities;if(l&&0!==l.length){o=[];for(var u=0;u<l.length;u++)""!==t.canPlayType(l[u].contentType,r)&&o.push(l[u])}if(o&&(!o||0!==o.length)){i=!0;var h=new d["default"](null,o),g=E.getKeySystemBySystemString(r);f.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{data:new c["default"](g,h)});break}}i||f.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return w},selectKeySystem:function(e){w=e.keySystem,f.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(_!==e){if(_){r();for(var t=0;t<S.length;t++)i(S[t]);S=[]}(_=e)&&(_.addEventListener(m.keyerror,x),_.addEventListener(m.needkey,x),_.addEventListener(m.keymessage,x),_.addEventListener(m.keyadded,x),f.trigger(p.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!w)throw new Error("Can not create sessions until you have selected a key system");if(C||0===S.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return T.push(t),_[m.generateKeyRequest](w.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var i=e.sessionID;if(E.isClearKey(w))for(var n=0;n<t.keyPairs.length;n++)_[m.addKey](w.systemString,t.keyPairs[n].key,t.keyPairs[n].keyID,i);else _[m.addKey](w.systemString,new Uint8Array(t),new Uint8Array(e.initData),i)},closeKeySession:i,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:t,reset:t},b=g.getLogger(y),w=_=null,T=[],S=[],E=(0,a["default"])(h).getInstance(),x={handleEvent:function(e){var t=null;switch(e.type){case m.needkey:var i=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(p.NEED_KEY,{key:new o["default"](i,"cenc")});break;case m.keyerror:if(t=(t=n(S,e.sessionId))||n(T,e.sessionId)){var r=u["default"].MEDIA_KEYERR_CODE,a="";switch(e.errorCode.code){case 1:r=u["default"].MEDIA_KEYERR_UNKNOWN_CODE,a+="MEDIA_KEYERR_UNKNOWN - "+u["default"].MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:r=u["default"].MEDIA_KEYERR_CLIENT_CODE,a+="MEDIA_KEYERR_CLIENT - "+u["default"].MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:r=u["default"].MEDIA_KEYERR_SERVICE_CODE,a+="MEDIA_KEYERR_SERVICE - "+u["default"].MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:r=u["default"].MEDIA_KEYERR_OUTPUT_CODE,a+="MEDIA_KEYERR_OUTPUT - "+u["default"].MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:r=u["default"].MEDIA_KEYERR_HARDWARECHANGE_CODE,a+="MEDIA_KEYERR_HARDWARECHANGE - "+u["default"].MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:r=u["default"].MEDIA_KEYERR_DOMAIN_CODE,a+="MEDIA_KEYERR_DOMAIN - "+u["default"].MEDIA_KEYERR_DOMAIN_MESSAGE}a+="  System Code = "+e.systemCode,f.trigger(p.KEY_ERROR,{data:new s["default"](r,a,t)})}else b.error("No session token found for key error");break;case m.keyadded:(t=(t=n(S,e.sessionId))||n(T,e.sessionId))?(b.debug("DRM: Key added."),f.trigger(p.KEY_ADDED,{data:t})):b.debug("No session token found for key added");break;case m.keymessage:if((C=null!==e.sessionId&&void 0!==e.sessionId)?!(t=n(S,e.sessionId))&&0<T.length&&(t=T.shift(),S.push(t),t.sessionID=e.sessionId,f.trigger(p.KEY_SESSION_CREATED,{data:t})):0<T.length&&(t=T.shift(),S.push(t),0!==T.length&&v.error(new s["default"](u["default"].MEDIA_KEY_MESSAGE_ERROR_CODE,u["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){var d=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=d,f.trigger(p.INTERNAL_KEY_MESSAGE,{data:new l["default"](t,d,e.defaultURL)})}else b.warn("No session token found for key message")}}},y}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(162)),o=n(e(181)),s=n(e(223)),l=n(e(176)),d=n(e(179)),c=n(e(178)),u=n(e(167));r.__dashjs_factory_name="ProtectionModel_01b",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{162:162,167:167,176:176,178:178,179:179,181:181,223:223}],169:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function i(e){for(var t=0;t<w.length;t++)if(w[t]===e){w.splice(t,1);break}}function n(e){var t=void 0,i=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:i=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:i=e[1])),{status:t,keyId:i}}function r(e,t,r,a){var o={session:e,initData:t,sessionId:a,handleEvent:function(e){switch(e.type){case"keystatuseschange":f.trigger(p.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=n(arguments);switch(e.status){case"expired":f.trigger(p.INTERNAL_KEY_STATUS_CHANGED,{error:new l["default"](s["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,s["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:f.trigger(p.INTERNAL_KEY_STATUS_CHANGED,e)}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;f.trigger(p.INTERNAL_KEY_MESSAGE,{data:new d["default"](this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach(function(){"usable"===n(arguments).status&&(t=!0)}),t},getSessionType:function(){return r}};return e.addEventListener("keystatuseschange",o),e.addEventListener("message",o),e.closed.then(function(){i(o),v.debug("DRM: Session closed.  SessionID = "+o.getSessionID()),f.trigger(p.KEY_SESSION_CLOSED,{data:o.getSessionID()})}),w.push(o),o}e=e||{};var h=this.context,f=e.eventBus,p=e.events,g=e.debug,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0;return m={getAllInitData:function(){for(var e=[],t=0;t<w.length;t++)w[t].initData&&e.push(w[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,i){return void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess?void f.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"}):void!function(i){var n=t[i].ks,r=t[i].configs,a=n.systemString;a===u["default"].PLAYREADY_KEYSTEM_STRING&&"required"===r[0].persistentState&&(a+=".recommendation"),navigator.requestMediaKeySystemAccess(a,r).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,i=new c["default"](n,t);i.mksa=e,f.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{data:i})})["catch"](function(n){++i<t.length?e(t,i):f.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+n.message})})}(i)}(e,0)},getKeySystem:function(){return y},selectKeySystem:function(e){e.mksa.createMediaKeys().then(function(t){y=e.keySystem,_=t,b?b.setMediaKeys(_).then(function(){f.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED)}):f.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){f.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){b!==e&&(b&&(b.removeEventListener("encrypted",E),b.setMediaKeys&&b.setMediaKeys(null)),(b=e)&&(b.addEventListener("encrypted",E),b.setMediaKeys&&_&&b.setMediaKeys(_)))},setServerCertificate:function(e){if(!y||!_)throw new Error("Can not set server certificate until you have selected a key system");_.setServerCertificate(e).then(function(){v.info("DRM: License server certificate successfully updated."),f.trigger(p.SERVER_CERTIFICATE_UPDATED)})["catch"](function(e){f.trigger(p.SERVER_CERTIFICATE_UPDATED,{error:new l["default"](s["default"].SERVER_CERTIFICATE_UPDATED_ERROR_CODE,s["default"].SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e,t,n){if(!y||!_)throw new Error("Can not create sessions until you have selected a key system");var a=_.createSession(n),o=r(a,e,n),d=this.getKeySystem().systemString===u["default"].CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";a.generateRequest(d,e).then(function(){v.debug("DRM: Session created.  SessionID = "+o.getSessionID()),f.trigger(p.KEY_SESSION_CREATED,{data:o})})["catch"](function(e){i(o),f.trigger(p.KEY_SESSION_CREATED,{data:null,error:new l["default"](s["default"].KEY_SESSION_CREATED_ERROR_CODE,s["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(e,t){var i=e.session;T.isClearKey(y)&&(t=t.toJWK()),i.update(t)["catch"](function(t){f.trigger(p.KEY_ERROR,{data:new l["default"](s["default"].MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})})},loadKeySession:function(e,t,n){if(!y||!_)throw new Error("Can not load sessions until you have selected a key system");for(var a=0;a<w.length;a++)if(e===w[a].sessionId)return void v.warn("DRM: Ignoring session ID because we have already seen it!");var o=_.createSession(n),d=r(o,t,n,e);o.load(e).then(function(t){t?(v.debug("DRM: Session loaded.  SessionID = "+d.getSessionID()),f.trigger(p.KEY_SESSION_CREATED,{data:d})):(i(d),f.trigger(p.KEY_SESSION_CREATED,{data:null,error:new l["default"](s["default"].KEY_SESSION_CREATED_ERROR_CODE,s["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})["catch"](function(t){i(d),f.trigger(p.KEY_SESSION_CREATED,{data:null,error:new l["default"](s["default"].KEY_SESSION_CREATED_ERROR_CODE,s["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})})},removeKeySession:function(e){e.session.remove().then(function(){v.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),f.trigger(p.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){f.trigger(p.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})},closeKeySession:function(e){t(e)["catch"](function(t){i(e),f.trigger(p.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})},stop:function(){for(var e=void 0,n=0;n<w.length;n++)(e=w[n]).getUsable()||t(e)["catch"](function(){i(e)})},reset:function(){var e=w.length,n=void 0;0!==e?function(){for(var r=function(e){i(e),0===w.length&&(b?(b.removeEventListener("encrypted",E),b.setMediaKeys(null).then(function(){f.trigger(p.TEARDOWN_COMPLETE)})):f.trigger(p.TEARDOWN_COMPLETE))},a=0;a<e;a++)!function(e){n.session.closed.then(function(){r(e)}),t(n)["catch"](function(){r(e)})}(n=w[a])}():f.trigger(p.TEARDOWN_COMPLETE)}},v=g.getLogger(m),_=b=y=null,w=[],T=(0,a["default"])(h).getInstance(),E={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(p.NEED_KEY,{key:new o["default"](t,e.initDataType)})}}}},m}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(162)),o=n(e(181)),s=n(e(167)),l=n(e(223)),d=n(e(176)),c=n(e(178)),u=n(e(111));r.__dashjs_factory_name="ProtectionModel_21Jan2015",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{111:111,162:162,167:167,176:176,178:178,181:181,223:223}],170:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){try{for(var e=0;e<E.length;e++)i(E[e]);y&&y.removeEventListener(g.needkey,T),h.trigger(f.TEARDOWN_COMPLETE)}catch(e){h.trigger(f.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function i(e){var t=e.session;t.removeEventListener(g.error,e),t.removeEventListener(g.message,e),t.removeEventListener(g.ready,e),t.removeEventListener(g.close,e);for(var i=0;i<E.length;i++)if(E[i]===e){E.splice(i,1);break}t[g.release]()}function n(){function e(){y.removeEventListener("loadedmetadata",t),y[g.setMediaKeys](_),h.trigger(f.VIDEO_ELEMENT_SELECTED)}var t=null;1<=y.readyState?e():(t=e.bind(this),y.addEventListener("loadedmetadata",t))}e=e||{};var r=this.context,h=e.eventBus,f=e.events,p=e.debug,g=e.api,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0;return m={getAllInitData:function(){for(var e=[],t=0;t<E.length;t++)e.push(E[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,i=0;i<e.length;i++)for(var n=e[i].ks.systemString,r=e[i].configs,a=null,o=null,s=0;s<r.length;s++){var l=r[s].audioCapabilities,d=r[s].videoCapabilities;if(l&&0!==l.length){a=[];for(var p=0;p<l.length;p++)window[g.MediaKeys].isTypeSupported(n,l[p].contentType)&&a.push(l[p])}if(d&&0!==d.length){o=[];for(var m=0;m<d.length;m++)window[g.MediaKeys].isTypeSupported(n,d[m].contentType)&&o.push(d[m])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var v=new c["default"](a,o),y=S.getKeySystemBySystemString(n);h.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{data:new u["default"](y,v)});break}}t||h.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return b},selectKeySystem:function(e){try{_=e.mediaKeys=new window[g.MediaKeys](e.keySystem.systemString),b=e.keySystem,w=e,y&&n(),h.trigger(f.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){h.trigger(f.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+b.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){y!==e&&(y&&y.removeEventListener(g.needkey,T),(y=e)&&(y.addEventListener(g.needkey,T),_&&n()))},createKeySession:function(e,t,i,n){if(!b||!_||!w)throw new Error("Can not create sessions until you have selected a key system");var r=null;if(w.ksConfiguration.videoCapabilities&&0<w.ksConfiguration.videoCapabilities.length&&(r=w.ksConfiguration.videoCapabilities[0]),null===r&&w.ksConfiguration.audioCapabilities&&0<w.ksConfiguration.audioCapabilities.length&&(r=w.ksConfiguration.audioCapabilities[0]),null===r)throw new Error("Can not create sessions for unknown content types.");var a=r.contentType,o=_.createSession(a,new Uint8Array(e),n?new Uint8Array(n):null),c=function(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case g.error:h.trigger(f.KEY_ERROR,{data:new s["default"](l["default"].MEDIA_KEYERR_CODE,"KeyError",this)});break;case g.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;h.trigger(f.INTERNAL_KEY_MESSAGE,{data:new d["default"](this,t,e.destinationURL)});break;case g.ready:v.debug("DRM: Key added."),h.trigger(f.KEY_ADDED);break;case g.close:v.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),h.trigger(f.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}(o,e);o.addEventListener(g.error,c),o.addEventListener(g.message,c),o.addEventListener(g.ready,c),o.addEventListener(g.close,c),E.push(c),v.debug("DRM: Session created.  SessionID = "+c.getSessionID()),h.trigger(f.KEY_SESSION_CREATED,{data:c})},updateKeySession:function(e,t){var i=e.session;S.isClearKey(b)?i.update(new Uint8Array(t.toJWK())):i.update(new Uint8Array(t));
},closeKeySession:i,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:t,reset:t},v=p.getLogger(m),w=_=b=y=null,E=[],S=(0,a["default"])(r).getInstance(),T={handleEvent:function(e){switch(e.type){case g.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;h.trigger(f.NEED_KEY,{key:new o["default"](t,"cenc")})}}}},m}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(162)),o=n(e(181)),s=n(e(223)),l=n(e(167)),d=n(e(176)),c=n(e(179)),u=n(e(178));r.__dashjs_factory_name="ProtectionModel_3Feb2014",i["default"]=dashjs.FactoryMaker.getClassFactory(r),t.exports=i["default"]},{162:162,167:167,176:176,178:178,179:179,181:181,223:223}],171:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){return{getServerURLFromMessage:function(e,t){var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var n=0;n<i.kids.length;n++)e+=i.kids[n]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],i=0;i<e.keys.length;i++){var n=e.keys[i],r=n.kid.replace(/=/g,""),s=n.k.replace(/=/g,"");t.push(new a["default"](r,s))}return new o["default"](t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(177)),o=n(e(175));r.__dashjs_factory_name="ClearKey",i["default"]=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=i["default"]},{175:175,177:177}],172:[function(e,t,i){"use strict";function n(e){var t=(e=e||{}).BASE64,i={};return i[o["default"].WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},i[o["default"].PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return i[e].responseType},getLicenseMessage:function(e,n){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),i[n].getLicenseMessage(e)},getErrorResponse:function(e,t){return i[t].getErrorResponse(e)}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(111),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="DRMToday",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{111:111}],173:[function(e,t,i){"use strict";function n(){function e(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}var t="http://schemas.xmlsoap.org/soap/envelope/";return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(i){return function(i){if(window.DOMParser){var n=e(i),r=(new window.DOMParser).parseFromString(n,"text/xml"),a=r?r.getElementsByTagNameNS(t,"Envelope")[0]:null,o=a?a.getElementsByTagNameNS(t,"Body")[0]:null;if(o?o.getElementsByTagNameNS(t,"Fault")[0]:null)return null}return i}.call(this,i)},getErrorResponse:function(i){return function(i){var n="",r="",a="",o=-1,s=-1;if(window.DOMParser){var l=e(i),d=(new window.DOMParser).parseFromString(l,"text/xml"),c=d?d.getElementsByTagNameNS(t,"Envelope")[0]:null,u=c?c.getElementsByTagNameNS(t,"Body")[0]:null,h=u?u.getElementsByTagNameNS(t,"Fault")[0]:null,f=h?h.getElementsByTagName("detail")[0]:null,p=f?f.getElementsByTagName("Exception")[0]:null,g=null;if(null===h)return l;n=(g=h.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==p&&(r=(g=p.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,o=(a=(g=p.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,s=a?a.indexOf("]"):-1,a=a?a.substring(o,s):"")}var m="code: "+r+", name: "+n;return a&&(m+=", message: "+a),m}.call(this,i)}}}Object.defineProperty(i,"__esModule",{value:!0}),n.__dashjs_factory_name="PlayReady",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{}],174:[function(e,t,i){"use strict";function n(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(i,"__esModule",{value:!0}),n.__dashjs_factory_name="Widevine",i["default"]=dashjs.FactoryMaker.getSingletonFactory(n),t.exports=i["default"]},{}],175:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,i={keys:[]};for(e=0;e<t;e++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};i.keys.push(n)}this.type&&(i.type=this.type);var r=JSON.stringify(i),a=r.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=r.charCodeAt(e);return o}}]),r);i["default"]=a,t.exports=i["default"]},{}],176:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=i,this.defaultURL=n,this.messageType=r||"license-request"},t.exports=i["default"]},{}],177:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=i},t.exports=i["default"]},{}],178:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=i},t.exports=i["default"]},{}],179:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),i&&i.length&&(this.videoCapabilities=i),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=a},t.exports=i["default"]},{}],180:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=i},t.exports=i["default"]},{}],181:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=i},t.exports=i["default"]},{}],182:[function(e,t,i){"use strict";function n(){var e=[],t=0,i=0;return{push:function(n,r){var a=r&&r.droppedVideoFrames?r.droppedVideoFrames:0,o=r&&r.totalVideoFrames?r.totalVideoFrames:0,s=a-t;t=a;var l=o-i;i=o,isNaN(n)||(e[n]?(e[n].droppedVideoFrames+=s,e[n].totalVideoFrames+=l):e[n]={droppedVideoFrames:s,totalVideoFrames:l})},getFrameHistory:function(){return e},reset:function(n){e=[],t=n.droppedVideoFrames,i=n.totalVideoFrames}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="DroppedFramesHistory";var s=o["default"].getClassFactory(n);i["default"]=s,t.exports=i["default"]},{49:49}],183:[function(e,t,i){"use strict";function n(e){function t(){return l?l.mediaInfo:null}var i=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,a=e.currentRequest,o=e.useBufferOccupancyABR,s=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;return{getMediaType:function(){var e=t();return e?e.type:null},getMediaInfo:t,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return a},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=t();return e?e.streamInfo:null},getScheduleController:function(){return s},getAbrController:function(){return i},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return o}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="RulesContext",i["default"]=o["default"].getClassFactory(n),t.exports=i["default"]},{49:49}],184:[function(e,t,i){"use strict";function n(e,t,i){var n,r;return(n=i)!==(r=s.DEFAULT)&&n!==s.STRONG&&n!==s.WEAK||(r=n),{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:r}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r},s={DEFAULT:.5,STRONG:1,WEAK:0};n.__dashjs_factory_name="SwitchRequest";var l=o["default"].getClassFactory(n);l.NO_CHANGE=-1,l.PRIORITY=s,o["default"].updateClassFactory(n.__dashjs_factory_name,l),i["default"]=l,t.exports=i["default"]},{49:49}],185:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=[],t=[];return{push:function(i){i.newValue===o["default"].NO_CHANGE&&(i.newValue=i.oldValue),e[i.oldValue]||(e[i.oldValue]={noDrops:0,drops:0,dropSize:0});var n=i.newValue-i.oldValue,r=n<0?1:0,a=r?-n:0,s=r?0:1;if(e[i.oldValue].drops+=r,e[i.oldValue].dropSize+=a,e[i.oldValue].noDrops+=s,t.push({idx:i.oldValue,noDrop:s,drop:r,dropSize:a}),8<t.length){var l=t.shift();e[l.idx].drops-=l.drop,e[l.idx].dropSize-=l.dropSize,e[l.idx].noDrops-=l.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(184));r.__dashjs_factory_name="SwitchRequestHistory";var s=a["default"].getClassFactory(r);i["default"]=s,t.exports=i["default"]},{184:184,49:49}],186:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,i,n){var r=Math.pow(.5,i/n.fast);e.fastEstimate=(1-r)*t+r*e.fastEstimate;var a=Math.pow(.5,i/n.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=i}function i(e,t,i){return h.get().streaming.abr.movingAverageMethod!==a["default"].MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var i=e?v.throughputHalfLife:v.latencyHalfLife,n=e?g[t]:m[t];if(!n||n.totalWeight<=0)return NaN;var r=n.fastEstimate/(1-Math.pow(.5,n.totalWeight/i.fast)),a=n.slowEstimate/(1-Math.pow(.5,n.totalWeight/i.slow));return e?Math.min(r,a):Math.max(r,a)}(e,t):function(e,t,i){var n=function(e,t,i){var n=void 0,r=void 0;if(r=e?(n=f[t],i?s:l):(n=p[t],d),n){if(r>=n.length)r=n.length;else if(e)for(var a=1;a<r;++a){var o=n[a]/n[a-1];if((u<=o||o<=1/c)&&(r+=1)===n.length)break}}else r=0;return r}(e,t,i),r=(e?f:p)[t];return 0!==n&&r&&0!==r.length?(r=r.slice(-n)).reduce(function(e,t){return e+t})/r.length:NaN}(e,t,i)}function n(e,t){return i(!0,e,t)}function r(e){f[e]=f[e]||[],p[e]=p[e]||[],g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},m[e]=m[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function o(){f={},p={},g={},m={}}var s=3,l=4,d=4,c=1.3,u=1.3,h=(e=e||{}).settings,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y={push:function(e,i,n){if(i.trace&&i.trace.length){var o=i.tresponse.getTime()-i.trequest.getTime()||1,s=i._tfinish.getTime()-i.tresponse.getTime()||1,l=i.trace.reduce(function(e,t){return e+t.b[0]},0),d=void 0;d=h.get().streaming.lowLatencyEnabled?i.trace.reduce(function(e,t){return e+t.d},0):n?s:o+s;var c=Math.round(8*l/d);if(r(e),function(e,t,i){return e===a["default"].VIDEO?i<h.get().streaming.cacheLoadThresholds[a["default"].VIDEO]:e===a["default"].AUDIO?i<h.get().streaming.cacheLoadThresholds[a["default"].AUDIO]:void 0}(e,0,s)){if(0<f[e].length&&!f[e].hasCachedEntries)return;f[e].hasCachedEntries=!0}else f[e]&&f[e].hasCachedEntries&&function(e){delete f[e],delete p[e],delete g[e],delete m[e],r(e)}(e);f[e].push(c),20<f[e].length&&f[e].shift(),p[e].push(o),20<p[e].length&&p[e].shift(),t(g[e],c,.001*s,v.throughputHalfLife),t(m[e],o,1,v.latencyHalfLife)}},getAverageThroughput:n,getSafeAverageThroughput:function(e,t){var i=n(e,t);return isNaN(i)||(i*=h.get().streaming.abr.bandwidthSafetyFactor),i},getAverageLatency:function(e){return i(!1,e)},reset:o};return v={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},o(),y}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(49));r.__dashjs_factory_name="ThroughputHistory",i["default"]=o["default"].getClassFactory(r),t.exports=i["default"]},{109:109,49:49}],187:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){return e.filter(function(e){return e.quality>h["default"].NO_CHANGE})}function i(e){var t,i={},r=void 0,a=void 0,o=void 0,s=void 0;if(0!==e.length){for(i[h["default"].PRIORITY.STRONG]=h["default"].NO_CHANGE,i[h["default"].PRIORITY.WEAK]=h["default"].NO_CHANGE,i[h["default"].PRIORITY.DEFAULT]=h["default"].NO_CHANGE,r=0,t=e.length;r<t;r+=1)(a=e[r]).quality!==h["default"].NO_CHANGE&&(i[a.priority]=i[a.priority]>h["default"].NO_CHANGE?Math.min(i[a.priority],a.quality):a.quality);return i[h["default"].PRIORITY.WEAK]!==h["default"].NO_CHANGE&&(o=i[h["default"].PRIORITY.WEAK]),i[h["default"].PRIORITY.DEFAULT]!==h["default"].NO_CHANGE&&(o=i[h["default"].PRIORITY.DEFAULT]),i[h["default"].PRIORITY.STRONG]!==h["default"].NO_CHANGE&&(o=i[h["default"].PRIORITY.STRONG]),o!==h["default"].NO_CHANGE&&(s=o),(0,h["default"])(n).create(s)}}e=e||{};var n=this.context,r=e.mediaPlayerModel,u=e.dashMetrics,g=e.settings,m=void 0,v=void 0;return{initialize:function(){m=[],v=[],g.get().streaming.abr.useDefaultABRRules&&(m.push((0,c["default"])(n).create({dashMetrics:u,mediaPlayerModel:r,settings:g})),m.push((0,a["default"])(n).create({dashMetrics:u})),m.push((0,o["default"])(n).create({dashMetrics:u})),m.push((0,d["default"])(n).create()),m.push((0,l["default"])(n).create()),v.push((0,s["default"])(n).create({dashMetrics:u,mediaPlayerModel:r,settings:g}))),r.getABRCustomRules().forEach(function(e){e.type===f&&m.push(e.rule(n).create()),e.type===p&&v.push(e.rule(n).create())})},reset:function(){[m,v].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),m=[],v=[]},getMaxQuality:function(e){return i(t(m.map(function(t){return t.getMaxIndex(e)})))||(0,h["default"])(n).create()},shouldAbandonFragment:function(e){return i(t(v.map(function(t){return t.shouldAbandon(e)})))||(0,h["default"])(n).create()}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(193)),o=n(e(191)),s=n(e(188)),l=n(e(190)),d=n(e(192)),c=n(e(189)),u=n(e(49)),h=n(e(184)),f="qualitySwitchRules",p="abandonFragmentRules";r.__dashjs_factory_name="ABRRulesCollection";var g=u["default"].getClassFactory(r);g.QUALITY_SWITCH_RULES=f,g.ABANDON_FRAGMENT_RULES=p,u["default"].updateSingletonFactory(r.__dashjs_factory_name,g),i["default"]=g,t.exports=i["default"]},{184:184,188:188,189:189,190:190,191:191,192:192,193:193,49:49}],188:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){u={},h={},f=[]}e=e||{};var i=this.context,n=e.mediaPlayerModel,o=e.dashMetrics,l=e.settings,d=void 0,c=void 0,u=void 0,h=void 0,f=void 0;return d={shouldAbandon:function(e){var t=(0,a["default"])(i).create(a["default"].NO_CHANGE,{name:r.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var s=e.getMediaInfo(),d=e.getMediaType(),p=e.getCurrentRequest();if(!isNaN(p.index)){if(function(e,t){u[e]=u[e]||{},u[e][t]=u[e][t]||{}}(d,p.index),n.getStableBufferTime()<o.getCurrentBufferLevel(d,!0))return t;var g=u[d][p.index];if(null===g||null===p.firstByteDate||h.hasOwnProperty(g.id))return t;if(void 0===g.firstByteTime&&(f[d]=[],g.firstByteTime=p.firstByteDate.getTime(),g.segmentDuration=p.duration,g.bytesTotal=p.bytesTotal,g.id=p.index),g.bytesLoaded=p.bytesLoaded,g.elapsedTime=(new Date).getTime()-g.firstByteTime,0<g.bytesLoaded&&0<g.elapsedTime&&function(e,t){f[e]=f[e]||[],f[e].push(t)}(d,Math.round(8*g.bytesLoaded/g.elapsedTime)),5<=f[d].length&&500<g.elapsedTime&&g.bytesLoaded<g.bytesTotal){var m=f[d].reduce(function(e,t){return e+t},0);if(g.measuredBandwidthInKbps=Math.round(m/f[d].length),g.estimatedTimeOfDownload=+(8*g.bytesTotal/g.measuredBandwidthInKbps/1e3).toFixed(2),g.estimatedTimeOfDownload<1.8*g.segmentDuration||0===e.getRepresentationInfo().quality)return t;if(!h.hasOwnProperty(g.id)){var v=e.getAbrController(),y=g.bytesTotal-g.bytesLoaded,b=v.getBitrateList(s),_=v.getQualityForBitrate(s,g.measuredBandwidthInKbps*l.get().streaming.abr.bandwidthSafetyFactor);g.bytesTotal*b[_].bitrate/b[v.getQualityFor(d)].bitrate<y&&(t.quality=_,t.reason.throughput=g.measuredBandwidthInKbps,t.reason.fragmentID=g.id,h[g.id]=g,c.debug("( ",d,"frag id",g.id,") is asking to abandon and switch to quality to ",_," measured bandwidth was",g.measuredBandwidthInKbps),delete u[d][g.id])}}else g.bytesLoaded===g.bytesTotal&&delete u[d][g.id]}return t},reset:t},c=(0,s["default"])(i).getInstance().getLogger(d),t(),d}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(184)),o=n(e(49)),s=n(e(47));r.__dashjs_factory_name="AbandonRequestsRule",i["default"]=o["default"].getClassFactory(r),t.exports=i["default"]},{184:184,47:47,49:49}],189:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,i){var n=i.reduce(function(e,t,n){return t>i[e]?n:e},0);if(0===n)return null;var r=Math.max(e,10+2*t.length),a=(i[n]-1)/(r/10-1);return{gp:a,Vp:10/a}}function i(e){var i={},r=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),a=function(e){return e.map(function(e){return Math.log(e)})}(r);a=a.map(function(e){return e-a[0]+1});var o=S.getStableBufferTime(),s=t(o,r,a);return s?(i.state=1,i.bitrates=r,i.utilities=a,i.stableBufferTime=o,i.Vp=s.Vp,i.gp=s.gp,i.lastQuality=0,n(i)):i.state=0,i}function n(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function r(e,i){var n=S.getStableBufferTime();if(e.stableBufferTime!==n){var r=t(n,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var a=T.getCurrentBufferLevel(i,!0),o=a+e.placeholderBuffer;o-=10,o*=r.Vp/e.Vp,o+=10,e.stableBufferTime=n,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,o-a)}}}function s(e,t){return e.Vp*(e.utilities[t]+e.gp)}function h(e,t){for(var i=e.bitrates[t],n=e.utilities[t],r=0,a=t-1;0<=a;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],l=e.Vp*(e.gp+(i*s-o*n)/(i-o));r=Math.max(r,l)}return r}function f(){for(var e in A)A.hasOwnProperty(e)&&2===A[e].state&&(A[e].placeholderBuffer=0)}function p(){for(var e in A)if(A.hasOwnProperty(e)){var t=A[e];0!==t.state&&(t.state=1,n(t))}}function g(){}function m(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=A[e.chunk.mediaInfo.type];if(t&&0!==t.state){var i=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,y(t,e.chunk.mediaInfo.type)}}}function v(e){if(e&&e.metric===a["default"].HTTP_REQUEST&&e.value&&e.value.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=A[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),y(t,e.mediaType))}}function y(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var i=T.getCurrentBufferLevel(t,!0)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=s(e,e.lastQuality),r=Math.max(0,n-i);e.placeholderBuffer=Math.min(r,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function b(e){if(e){var t=A[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function _(e){if(e){var t=A[e.mediaType];if(t&&0!==t.state){var i=T.getCurrentBufferLevel(e.mediaType,!0),n=void 0;n=0<t.abrQuality?h(t,t.abrQuality):10;var r=Math.max(0,n-i);t.placeholderBuffer=Math.min(t.placeholderBuffer,r)}}}function w(){A={}}e=e||{};var E=this.context,T=e.dashMetrics,S=e.mediaPlayerModel,C=(0,d["default"])(E).getInstance(),x=void 0,k=void 0,A=void 0;return x={getMaxIndex:function(e){var t=(0,o["default"])(E).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var a=e.getMediaInfo(),l=e.getMediaType(),d=e.getScheduleController(),c=e.getStreamInfo(),u=e.getAbrController(),f=u.getThroughputHistory(),p=c?c.id:null,g=c&&c.manifestInfo&&c.manifestInfo.isDynamic,m=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!m)return t;d.setTimeToLoadDelay(0);var v=function(e){var t=e.getMediaType(),n=A[t];return n?0!==n.state&&r(n,t):(n=i(e),A[t]=n),n}(e);if(0===v.state)return t;var y=T.getCurrentBufferLevel(l,!0),b=f.getAverageThroughput(l,g),_=f.getSafeAverageThroughput(l,g),w=f.getAverageLatency(l),S=void 0;if(t.reason.state=v.state,t.reason.throughput=b,t.reason.latency=w,isNaN(b))return t;switch(v.state){case 1:S=u.getQualityForBitrate(a,_,w),t.quality=S,t.reason.throughput=_,v.placeholderBuffer=Math.max(0,h(v,S)-y),v.lastQuality=S,!isNaN(v.lastSegmentDurationS)&&y>=v.lastSegmentDurationS&&(v.state=2);break;case 2:!function(e,t){var i=Date.now();if(isNaN(e.lastSegmentFinishTimeMs))isNaN(e.lastCallTimeMs)||(n=.001*(i-e.lastCallTimeMs),e.placeholderBuffer+=Math.max(0,n));else{var n=.001*(i-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,n)}e.lastCallTimeMs=i,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,r(e,t)}(v,l),S=function(e,t){for(var i=e.bitrates.length,n=NaN,r=NaN,a=0;a<i;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||r<=o)&&(r=o,n=a)}return n}(v,y+v.placeholderBuffer);var C=u.getQualityForBitrate(a,_,w);S>v.lastQuality&&C<S&&(S=Math.max(C,v.lastQuality));var x=Math.max(0,y+v.placeholderBuffer-s(v,S));x<=v.placeholderBuffer?(v.placeholderBuffer-=x,x=0):(x-=v.placeholderBuffer,v.placeholderBuffer=0,S<u.getTopQualityIndexFor(l,p)?d.setTimeToLoadDelay(1e3*x):x=0),t.quality=S,t.reason.throughput=b,t.reason.latency=w,t.reason.bufferLevel=y,t.reason.placeholderBuffer=v.placeholderBuffer,t.reason.delay=x,v.lastQuality=S;break;default:k.debug("BOLA ABR rule invoked in bad state."),t.quality=u.getQualityForBitrate(a,_,w),t.reason.state=v.state,t.reason.throughput=_,t.reason.latency=w,v.state=1,n(v)}return t},reset:function(){w(),C.off(c["default"].BUFFER_EMPTY,f,x),C.off(c["default"].PLAYBACK_SEEKING,p,x),C.off(c["default"].PERIOD_SWITCH_STARTED,g,x),C.off(c["default"].MEDIA_FRAGMENT_LOADED,m,x),C.off(c["default"].METRIC_ADDED,v,x),C.off(c["default"].QUALITY_CHANGE_REQUESTED,b,x),C.off(c["default"].FRAGMENT_LOADING_ABANDONED,_,x)}},k=(0,u["default"])(E).getInstance().getLogger(x),w(),C.on(c["default"].BUFFER_EMPTY,f,x),C.on(c["default"].PLAYBACK_SEEKING,p,x),C.on(c["default"].PERIOD_SWITCH_STARTED,g,x),C.on(c["default"].MEDIA_FRAGMENT_LOADED,m,x),C.on(c["default"].METRIC_ADDED,v,x),C.on(c["default"].QUALITY_CHANGE_REQUESTED,b,x),C.on(c["default"].FRAGMENT_LOADING_ABANDONED,_,x),x}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(110)),o=n(e(184)),s=n(e(49)),l=e(239),d=n(e(48)),c=n(e(56)),u=n(e(47));r.__dashjs_factory_name="BolaRule",i["default"]=s["default"].getClassFactory(r),t.exports=i["default"]},{110:110,184:184,239:239,47:47,48:48,49:49,56:56}],190:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=void 0,i=void 0;return t={getMaxIndex:function(t){var n=(0,o["default"])(e).create();if(!t||!t.hasOwnProperty("getDroppedFramesHistory"))return n;var r=t.getDroppedFramesHistory();if(r){for(var a=r.getFrameHistory(),s=0,l=0,d=o["default"].NO_CHANGE,c=1;c<a.length;c++)if(a[c]&&(s=a[c].droppedVideoFrames,375<(l=a[c].totalVideoFrames)&&.15<s/l)){d=c-1,i.debug("index: "+d+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,o["default"])(e).create(d,{droppedFrames:s})}return n}},i=(0,s["default"])(e).getInstance().getLogger(t),t}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(184)),s=n(e(47));r.__dashjs_factory_name="DroppedFramesRule",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{184:184,47:47,49:49}],191:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){m={}}function i(){t()}e=e||{};var n=.5,r=this.context,l=(0,o["default"])(r).getInstance(),f=e.dashMetrics,p=void 0,g=void 0,m=void 0;return p={getMaxIndex:function(e){var t=(0,c["default"])(r).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!f||!f.hasOwnProperty("getCurrentBufferLevel")||!f.hasOwnProperty("getLatestBufferInfoVO"))throw new Error(u["default"].MISSING_CONFIG_ERROR)}();var i=e.getMediaType(),o=f.getLatestBufferInfoVO(i,!0,h["default"].BUFFER_STATE),s=e.getRepresentationInfo().fragmentDuration;if(!o||!function(e,t){m[e]=m[e]||{};var i=!1;return m[e].firstBufferLoadedEvent?i=!0:t&&t.state===a["default"].BUFFER_LOADED&&(m[e].firstBufferLoadedEvent=!0,i=!0),i}(i,o)||!s)return t;if(o.state===a["default"].BUFFER_EMPTY)g.debug("Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var l=e.getMediaInfo(),d=e.getAbrController(),p=d.getThroughputHistory(),v=f.getCurrentBufferLevel(i,!0),y=p.getAverageThroughput(i),b=p.getAverageLatency(i),_=y*(v/s)*n;t.quality=d.getQualityForBitrate(l,_,b),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){t(),l.off(s["default"].PLAYBACK_SEEKING,i,p)}},g=(0,d["default"])(r).getInstance().getLogger(p),t(),l.on(s["default"].PLAYBACK_SEEKING,i,p),p}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(115)),o=n(e(48)),s=n(e(56)),l=n(e(49)),d=n(e(47)),c=n(e(184)),u=n(e(109)),h=n(e(110));r.__dashjs_factory_name="InsufficientBufferRule",i["default"]=l["default"].getClassFactory(r),t.exports=i["default"]},{109:109,110:110,115:115,184:184,47:47,48:48,49:49,56:56}],192:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=void 0,i=void 0;return t={getMaxIndex:function(t){for(var n=t?t.getSwitchHistory():null,r=n?n.getSwitchRequests():[],a=0,o=0,l=0,d=(0,s["default"])(e).create(),c=0;c<r.length;c++)if(void 0!==r[c]&&(a+=r[c].drops,o+=r[c].noDrops,l+=r[c].dropSize,6<=a+o&&.075<a/o)){d.quality=0<c&&0<r[c].drops?c-1:c,d.reason={index:d.quality,drops:a,noDrops:o,dropSize:l},i.debug("Switch history rule index: "+d.quality+" samples: "+(a+o)+" drops: "+a);break}return d}},i=(0,o["default"])(e).getInstance().getLogger(t),t}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47)),s=n(e(184));r.__dashjs_factory_name="SwitchHistoryRule",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{184:184,47:47,49:49}],193:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){e=e||{};var t=this.context,i=e.dashMetrics,n=void 0,r=void 0;return n={getMaxIndex:function(e){var n=(0,d["default"])(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return n;!function(){if(!i||!i.hasOwnProperty("getLatestBufferInfoVO"))throw new Error(c["default"].MISSING_CONFIG_ERROR)}();var s=e.getMediaInfo(),l=e.getMediaType(),h=i.getLatestBufferInfoVO(l,!0,u["default"].BUFFER_STATE),f=e.getScheduleController(),p=e.getAbrController(),g=e.getStreamInfo(),m=g&&g.manifestInfo?g.manifestInfo.isDynamic:null,v=p.getThroughputHistory(),y=v.getSafeAverageThroughput(l,m),b=v.getAverageLatency(l),_=e.useBufferOccupancyABR();return isNaN(y)||!h||_||p.getAbandonmentStateFor(l)!==o["default"].ABANDON_LOAD&&(h.state!==a["default"].BUFFER_LOADED&&!m||(n.quality=p.getQualityForBitrate(s,y,b),f.setTimeToLoadDelay(0),r.debug("requesting switch to index: ",n.quality,"type: ",l,"Average throughput",Math.round(y),"kbps"),n.reason={throughput:y,latency:b})),n},reset:function(){}},r=(0,l["default"])(t).getInstance().getLogger(n),n}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(115)),o=n(e(112)),s=n(e(49)),l=n(e(47)),d=n(e(184)),c=n(e(109)),u=n(e(110));r.__dashjs_factory_name="ThroughputRule",i["default"]=s["default"].getClassFactory(r),t.exports=i["default"]},{109:109,110:110,112:112,115:115,184:184,47:47,49:49}],194:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t){var l=NaN;if(!e)return l;var d=e.getType(),c=e.getRepresentationInfo();if(d===a["default"].FRAGMENTED_TEXT)l=r.isTextEnabled()?c.fragmentDuration:0;else if(d===a["default"].AUDIO&&t){var u=i.getCurrentBufferLevel(a["default"].VIDEO,!0);l=isNaN(c.fragmentDuration)?u:Math.max(u,c.fragmentDuration)}else{var h=c.mediaInfo.streamInfo;l=o.isPlayingAtTopQuality(h)?h.manifestInfo.duration>=s.get().streaming.longFormContentDurationThreshold?s.get().streaming.bufferTimeAtTopQualityLongForm:s.get().streaming.bufferTimeAtTopQuality:n.getStableBufferTime()}return l}var i=(e=e||{}).dashMetrics,n=e.mediaPlayerModel,r=e.textController,o=e.abrController,s=e.settings;return{execute:function(e,n){return!e||i.getCurrentBufferLevel(e.getType(),!0)<t(e,n)},getBufferTarget:t}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(49));r.__dashjs_factory_name="BufferLevelRule",i["default"]=o["default"].getClassFactory(r),t.exports=i["default"]},{109:109,49:49}],195:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){e=e||{};var t=this.context,i=e.textController,n=e.playbackController,r=void 0;return r={execute:function(e,t,r){if(!e)return null;var o=e.getRepresentationInfo(),s=e.getType(),d=!isNaN(t),c=e.getBufferController(),u=n.getNormalizedTime(),h=d?t:e.getIndexHandlerTime(),f=!1,p=void 0;if(isNaN(h)||s===a["default"].FRAGMENTED_TEXT&&!i.isTextEnabled())return null;if(c){var g=c.getRangeAt(h),m=c.getRangeAt(u),v=c.getBuffer().hasDiscontinuitiesAfter(u);null===g&&null===m||d||(!g||m&&m.start!=g.start&&m.end!=g.end)&&(v&&s!==a["default"].FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(m.end),f=!0),g=m)}if(r)h=r.startTime+r.duration/2,p=e.getFragmentRequest(o,h,{timeThreshold:0,ignoreIsFinished:!0});else for(p=e.getFragmentRequest(o,d||f?h:void 0,{keepIdx:!d&&!f});p&&p.action!==l["default"].ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(p);)p=e.getFragmentRequest(o);return p}},(0,o["default"])(t).getInstance().getLogger(r),r}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(47)),s=n(e(49)),l=n(e(225));r.__dashjs_factory_name="NextFragmentRequestRule",i["default"]=s["default"].getClassFactory(r),t.exports=i["default"]},{109:109,225:225,47:47,49:49}],196:[function(e,t,i){"use strict";function n(){function e(e){for(var t="",i=0;i<e.length;++i)t+=e[i].uchar;return t.length-t.replace(/^\s+/,"").length}function t(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e;
}function i(e,i){var n=e.videoHeight/15;return i?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(i.foreground?t(i.foreground):"rgb(255, 255, 255)")+"; font-style: "+(i.italics?"italic":"normal")+"; text-decoration: "+(i.underline?"underline":"none")+"; white-space: pre; background-color: "+(i.background?t(i.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}var n=0;return{createHTMLCaptionsFromScreen:function(t,r,a,o){var s=null,l=!1,d=-1,c={start:r,end:a,spans:[]},u="style_cea608_white_black",h={},f={},p=[],g=void 0,m=void 0;for(g=0;g<15;++g){var v=o.rows[g],y="",b=null;if(!1===v.isEmpty()){var _=e(v.chars);null===s&&(s={x:_,y1:g,y2:g+1,p:[]}),_!==d&&l&&(s.p.push(c),c={start:r,end:a,spans:[]},s.y2=g,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===h.hasOwnProperty(s.name)?(p.push(s),h[s.name]=s):h[s.name].p.contat(s.p),s={x:_,y1:g,y2:g+1,p:[]});for(var w=0;w<v.chars.length;++w){var E=v.chars[w],T=E.penState;if(null===b||!T.equals(b)){0<y.trim().length&&(c.spans.push({name:u,line:y,row:g}),y="");var S="style_cea608_"+T.foreground+"_"+T.background;T.underline&&(S+="_underline"),T.italics&&(S+="_italics"),f.hasOwnProperty(S)||(f[S]=JSON.parse(JSON.stringify(T))),b=T,u=S}y+=E.uchar}0<y.trim().length&&c.spans.push({name:u,line:y,row:g}),l=!0,d=_}else l=!1,d=-1,s&&(s.p.push(c),c={start:r,end:a,spans:[]},s.y2=g,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===h.hasOwnProperty(s.name)?(p.push(s),h[s.name]=s):h[s.name].p.contat(s.p),s=null)}s&&(s.p.push(c),s.y2=g+1,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===h.hasOwnProperty(s.name)?(p.push(s),h[s.name]=s):h[s.name].p.contat(s.p),s=null);var C,x=[];for(g=0;g<p.length;++g){var k=p[g],A="sub_cea608_"+n++,I=document.createElement("div");I.id=A;var D="left: "+3.125*(C=k).x+"%; top: "+6.66*C.y1+"%; width: "+(100-3.125*C.x)+"%; height: "+6.66*Math.max(C.y2-1-C.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";I.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+D;var M=document.createElement("div");M.className="paragraph bodyStyle",M.style.cssText=i(t);var P=document.createElement("div");P.className="cueUniWrapper",P.style.cssText="unicode-bidi: normal; direction: ltr;";for(var R=0;R<k.p.length;++R){var O=k.p[R],N=0;for(m=0;m<O.spans.length;++m){var L=O.spans[m];if(0<L.line.length){if(0!==m&&N!=L.row){var F=document.createElement("br");F.className="lineBreak",P.appendChild(F)}var j=!1;N===L.row&&(j=!0),N=L.row;var B=f[L.name],H=document.createElement("span");H.className="spanPadding "+L.name+" customSpanColor",H.style.cssText=i(t,B),0!==m&&j?m===O.spans.length-1?H.textContent=L.line.replace(/\s+$/g,""):H.textContent=L.line:1<O.spans.length&&m<O.spans.length-1&&L.row===O.spans[m+1].row?H.textContent=L.line.replace(/^\s+/g,""):H.textContent=L.line.trim(),P.appendChild(H)}}}M.appendChild(P),I.appendChild(M);var U={bodyStyle:["%",90]};for(var $ in f)f.hasOwnProperty($)&&(U[$]=["%",90]);x.push({type:"html",start:r,end:a,cueHTMLElement:I,cueID:A,cellResolution:[32,15],isFromCEA608:!0,fontSize:U,lineHeight:{},linePadding:{}})}return x}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="EmbeddedTextHtmlRender",i["default"]=o["default"].getSingletonFactory(n),t.exports=i["default"]},{49:49}],197:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){T=e}function i(e){if(e.sender.getStreamProcessor()===b&&!e.error){var t=b.getStreamInfo(),i=e.sender.getCurrentRepresentation();C.extract(t?t.id:null,i?i.id:null)||l.trigger(s["default"].TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}}function n(e){e.fragmentModel===b.getFragmentModel()&&e.chunk.bytes&&(C.save(e.chunk),S.append(e.chunk),l.trigger(s["default"].STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}e=e||{};var r=this.context,l=(0,o["default"])(r).getInstance(),g=(0,u["default"])(r).getInstance(),m=e.errHandler,v=e.type,y=e.mimeType,b=e.streamProcessor,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0;return _={getBufferControllerType:function(){return p},initialize:function(e){t(e),C=(0,d["default"])(r).getInstance()},createBuffer:function(e){try{if(S=(0,c["default"])(r).create(T,e),!E){var t=S.getBuffer();t.hasOwnProperty(a["default"].INITIALIZE)&&t.initialize(y,b),E=!0}return S}catch(t){if(e&&(e.isText||-1!==e.codec.indexOf('codecs="stpp')||-1!==e.codec.indexOf('codecs="wvtt')))try{S=g.getTextSourceBuffer()}catch(e){m.error(new h["default"](f["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,f["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+v+" : "+e.message))}else m.error(new h["default"](f["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,f["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+v))}},getType:function(){return v},getStreamProcessor:function(){return b},setSeekStartTime:function(){},getBuffer:function(){return S},getBufferLevel:function(){return 0},setMediaSource:t,getMediaSource:function(){return T},getIsBufferingCompleted:function(){return w},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(e,t){C.extract(e,t)||l.trigger(s["default"].TIMED_TEXT_REQUESTED,{index:0,sender:_})},getRangeAt:function(){return null},reset:function(e){l.off(s["default"].DATA_UPDATE_COMPLETED,i,_),l.off(s["default"].INIT_FRAGMENT_LOADED,n,_),!e&&S&&(S.abort(),S.reset(),S=null)},updateTimestampOffset:function(e){S.timestampOffset===e||isNaN(e)||(S.timestampOffset=e)}},T=null,w=E=!1,l.on(s["default"].DATA_UPDATE_COMPLETED,i,_),l.on(s["default"].INIT_FRAGMENT_LOADED,n,_),_}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(48)),s=n(e(56)),l=n(e(49)),d=n(e(211)),c=n(e(105)),u=n(e(199)),h=n(e(223)),f=n(e(53)),p="NotFragmentedTextBufferController";r.__dashjs_factory_name=p,i["default"]=l["default"].getClassFactory(r),t.exports=i["default"]},{105:105,109:109,199:199,211:211,223:223,48:48,49:49,53:53,56:56}],198:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){return r.getBuffer()}e=e||{};var i,n=this.context,r=void 0;return i={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e){return r.createBuffer(e)},getType:function(){return r.getType()},getStreamProcessor:function(){r.getStreamProcessor()},setSeekStartTime:function(e){r.setSeekStartTime(e)},getBuffer:t,setBuffer:function(e){r.setBuffer(e)},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e)},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},switchInitData:function(e,t){r.switchInitData(e,t)},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e)},updateTimestampOffset:function(e){var i=t();i.timestampOffset===e||isNaN(e)||(i.timestampOffset=e)}},r=e.type===a["default"].FRAGMENTED_TEXT?(0,s["default"])(n).create({type:e.type,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor,settings:e.settings}):(0,l["default"])(n).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor}),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(49)),s=n(e(115)),l=n(e(197));r.__dashjs_factory_name="TextBufferController",i["default"]=o["default"].getClassFactory(r),t.exports=i["default"]},{109:109,115:115,197:197,49:49}],199:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){void 0===P&&null!==e.fromStreamInfo&&(P=this.getCurrentTrackIdx())}function t(){void 0===P&&(P=this.getCurrentTrackIdx())}function i(){void 0!==P&&(this.setTextTrack(P),P=void 0)}function n(e){var t=this,i=e.tracks,n=e.index;i.some(function(e,i){if(e.lang===k)return t.setTextTrack(i),n=i,!0}),I||this.setTextTrack(-1),A=n,x.trigger(h["default"].TEXT_TRACKS_ADDED,{enabled:r(),index:n,tracks:i})}function r(){var e=!0;return D&&!M&&(e=!1),e}function o(){D=!1}var p=this.context,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0,k=void 0,A=void 0,I=void 0,D=void 0,M=void 0,P=void 0;return g={setConfig:function(e){e&&(e.errHandler&&(v=e.errHandler),e.adapter&&(y=e.adapter),e.manifestModel&&(b=e.manifestModel),e.mediaController&&(_=e.mediaController),e.videoModel&&(w=e.videoModel),e.streamController&&(E=e.streamController),e.textTracks&&(T=e.textTracks),e.vttParser&&(S=e.vttParser),e.ttmlParser&&(C=e.ttmlParser),m.setConfig({errHandler:v,adapter:y,manifestModel:b,mediaController:_,videoModel:w,streamController:E,textTracks:T,vttParser:S,ttmlParser:C}))},getTextSourceBuffer:function(){return m},getAllTracksAreDisabled:function(){return D},addEmbeddedTrack:function(e){m.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return k},setTextDefaultLanguage:function(e){(0,f.checkParameterType)(e,"string"),k=e},setTextDefaultEnabled:function(e){(0,f.checkParameterType)(e,"boolean"),(I=e)||this.setTextTrack(-1)},getTextDefaultEnabled:function(){return I},enableText:function(e){(0,f.checkParameterType)(e,"boolean"),r()!==e&&(e&&this.setTextTrack(A),e||(A=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:r,setTextTrack:function(e){var t=m.getConfig(),i=t.fragmentModel,n=t.fragmentedTracks,r=t.videoModel,o=void 0,s=void 0;D=-1===e;var l=T.getCurrentTrackIdx();if(l!==e){T.setModeForTrackIdx(l,a["default"].TEXT_HIDDEN),T.setCurrentTrackIdx(e),T.setModeForTrackIdx(e,a["default"].TEXT_SHOWING);var d=T.getCurrentTrackInfo();if(d&&d.isFragmented&&!d.isEmbedded)for(var c=0;c<n.length;c++){var u=n[c];if(d.lang===u.lang&&d.index===u.index&&(u.id?d.id===u.id:d.id===u.index))if(u!==_.getCurrentTrackFor(a["default"].FRAGMENTED_TEXT,E.getActiveStreamInfo()))i.abortRequests(),i.removeExecutedRequestsBeforeTime(),m.remove(),T.deleteCuesFromTrackIdx(l),_.setTrack(u),m.setCurrentFragmentedTrackIdx(c);else if(-1===l){for(var h=E.getActiveStreamProcessors(),f=0;f<h.length;f++)if(h[f].getType()===a["default"].FRAGMENTED_TEXT){s=h[f];break}s.setIndexHandlerTime(r.getTime()),s.getScheduleController().start()}}else if(d&&!d.isFragmented){for(h=E.getActiveStreamProcessors(),c=0;c<h.length;c++)if(h[c].getType()===a["default"].TEXT){o=(s=h[c]).getMediaInfoArr();break}if(s&&o)for(c=0;c<o.length;c++)if(o[c].index===d.index&&o[c].lang===d.lang){s.selectMediaInfo(o[c]);break}}}},getCurrentTrackIdx:function(){return T.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,f.checkParameterType)(e,"boolean"),M=e},reset:function(){o(),m.resetEmbedded(),m.reset()}},A=-1,M=!(I=!(k="")),T=(0,l["default"])(p).getInstance(),S=(0,d["default"])(p).getInstance(),C=(0,c["default"])(p).getInstance(),m=(0,s["default"])(p).getInstance(),x=(0,u["default"])(p).getInstance(),T.initialize(),x.on(h["default"].TEXT_TRACKS_QUEUE_INITIALIZED,n,g),x.on(h["default"].PERIOD_SWITCH_STARTED,e,g),x.on(h["default"].STREAM_COMPLETED,t,g),x.on(h["default"].PERIOD_SWITCH_COMPLETED,i,g),o(),g}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(49)),s=n(e(200)),l=n(e(201)),d=n(e(219)),c=n(e(217)),u=n(e(48)),h=n(e(56)),f=e(216);r.__dashjs_factory_name="TextController",i["default"]=o["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,200:200,201:201,216:216,217:217,219:219,48:48,49:49,56:56}],200:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){B=NaN,z=F=null,j=!(H=[])}function t(){e(),N=[],P=null}function i(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&_(t.bytes,t)}function n(){W=[],(L=(0,h["default"])(E).getInstance()).setConfig({videoModel:U}),L.initialize(),k=(0,l["default"])(E).getInstance(),K=[],V=[],S=!(G=q=null),X=(Y=0,f["default"])(E).getInstance();var e=$.getActiveStreamProcessors();for(var t in e)if("video"===e[t].getType()){Q=e[t].getRepresentationInfo().MSETimeOffset;break}T.on(v["default"].VIDEO_CHUNK_RECEIVED,i,this)}function r(e){q=e}function c(e,t){var i,n,r=new s["default"],o={subtitle:"subtitles",caption:"captions"};r.captionData=e,r.lang=t.lang,r.labels=t.labels,r.id=t.id?t.id:t.index,r.index=t.index,r.isTTML=(i=!1,t.codec&&0<=t.codec.search(a["default"].STPP)&&(i=!0),t.mimeType&&0<=t.mimeType.search(a["default"].TTML)&&(i=!0),i),r.defaultTrack=function(e){var t=!1;return 1<W.length&&e.isEmbedded?t=e.id&&e.id===a["default"].CC1:1===W.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===W.length&&(t=e.index===N[0].index),t}(t),r.isFragmented=!I.getIsTextTrack(t.mimeType),r.isEmbedded=!!t.isEmbedded,r.kind=n=(n=0<t.roles.length?o[t.roles[0]]:o.caption)===o.caption||n===o.subtitle?n:o.caption,r.roles=t.roles,r.accessibility=t.accessibility;var l=(N?N.length:0)+W.length;L.addTextTrack(r,l)}function _(e,t){var i=void 0,n=void 0,r=void 0,s=void 0,l=void 0,d=void 0,u=void 0,h=t.mediaInfo,f=h.type,m=h.mimeType,v=h.codec||m;if(v){if(f===a["default"].FRAGMENTED_TEXT)if(j||"InitializationSegment"!==t.segmentType){if(!j)return;if(n=(d=k.getSamplesInfo(e)).sampleList,null===z&&0<n.length&&(z=n[0].cts-t.start*B),0<=v.search(a["default"].STPP))for(P=null!==P?P:w(v),r=0;r<n.length;r++){var _=(N=n[r]).cts,E=_-z;this.buffered.add(E/B,(E+N.duration)/B);var T=new DataView(e,N.offset,N.subSizes[0]);u=p["default"].Utils.dataViewToString(T,a["default"].UTF8);var S=[],C=N.offset+N.subSizes[0];for(s=1;s<N.subSizes.length;s++){var I=new Uint8Array(e,C,N.subSizes[s]),M=String.fromCharCode.apply(null,I);S.push(M),C+=N.subSizes[s]}try{var R=D.getValue().ttmlTimeIsRelative?_/B:0;i=P.parse(u,R,_/B,(_+N.duration)/B,S),L.addCaptions(q,z/B,i)}catch(e){F.removeExecutedRequestsBeforeTime(),this.remove(),x.error("TTML parser error: "+e.message)}}else{var O=[];for(r=0;r<n.length;r++){var N;(N=n[r]).cts-=z,this.buffered.add(N.cts/B,(N.cts+N.duration)/B);var H=e.slice(N.offset,N.offset+N.size),$=p["default"].parseBuffer(H);for(s=0;s<$.boxes.length;s++){var J=$.boxes[s];if(x.debug("VTT box1: "+J.type),"vtte"!==J.type&&"vttc"===J.type)for(x.debug("VTT vttc boxes.length = "+J.boxes.length),l=0;l<J.boxes.length;l++){var Z=J.boxes[l];if(x.debug("VTT box2: "+Z.type),"payl"===Z.type){var ee=Z.cue_text;x.debug("VTT cue_text = "+ee);var te=N.cts/B,ie=(N.cts+N.duration)/B;O.push({start:te,end:ie,data:ee,styles:{}}),x.debug("VTT "+te+"-"+ie+" : "+ee)}}}}0<O.length&&L.addCaptions(q,0,O)}}else j=!0,B=k.getMediaTimescaleFromMoov(e);else if(f===a["default"].TEXT){T=new DataView(e,0,e.byteLength),u=p["default"].Utils.dataViewToString(T,a["default"].UTF8);try{i=w(v).parse(u,0),L.addCaptions(L.getCurrentTrackIdx(),0,i)}catch(e){A.error(new y["default"](b["default"].TIMED_TEXT_ERROR_ID_PARSE_CODE,b["default"].TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,u))}}else if(f===a["default"].VIDEO)if(t.segmentType===o.HTTPRequest.INIT_SEGMENT_TYPE){if(0===Y)for(Y=k.getMediaTimescaleFromMoov(e),r=0;r<W.length;r++)c(null,W[r])}else{if(0===Y)return void x.warn("CEA-608: No timescale for embeddedTextTrack yet");var ne=function(e,t){return function(e,i,n){var r=null;r=U.getTTMLRenderingDiv()?X.createHTMLCaptionsFromScreen(U.getElement(),e,i,n):[{start:e,end:i,data:n.getDisplayText(),styles:{}}],r&&L.addCaptions(t,0,r)}},re=(d=k.getSamplesInfo(e)).lastSequenceNumber;if(!K[0]&&!K[1]){var ae=void 0,oe=void 0;for(r=0;r<W.length;r++){if(W[r].id===a["default"].CC1?oe=L.getTrackIdxForId(a["default"].CC1):W[r].id===a["default"].CC3&&(oe=L.getTrackIdxForId(a["default"].CC3)),-1===oe)return void x.warn("CEA-608: data before track is ready.");ae=ne(0,oe),K[r]=new g["default"].Cea608Parser(r+1,{newCue:ae},null)}}if(Y&&-1==V.indexOf(re)){if(null!==G&&re!==G+d.numSequences)for(r=0;r<K.length;r++)K[r]&&K[r].reset();for(var se=function(e,t){if(0===t.length)return null;for(var i={splits:[],fields:[[],[]]},n=new DataView(e),r=0;r<t.length;r++)for(var a=t[r],o=g["default"].findCea608Nalus(n,a.offset,a.size),s=null,l=0,d=0;d<o.length;d++)for(var c=g["default"].extractCea608DataFromRange(n,o[d]),u=0;u<2;u++)0<c[u].length&&(a.cts!==s?l=0:l+=1,i.fields[u].push([a.cts+Q*Y,c[u],l]),s=a.cts);return i.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),i}(e,d.sampleList),le=0;le<K.length;le++){var de=se.fields[le],ce=K[le];if(ce)for(r=0;r<de.length;r++)ce.addData(de[r][0]/Y,de[r][1])}G=re,V.push(re)}}}else x.error("No text type defined")}function w(e){var t=void 0;return 0<=e.search(a["default"].VTT)?t=R:(0<=e.search(a["default"].TTML)||0<=e.search(a["default"].STPP))&&(t=O),t}var E=this.context,T=(0,m["default"])(E).getInstance(),S=!1,C=void 0,x=void 0,k=void 0,A=void 0,I=void 0,D=void 0,M=void 0,P=void 0,R=void 0,O=void 0,N=void 0,L=void 0,F=void 0,j=void 0,B=void 0,H=void 0,U=void 0,$=void 0,z=void 0,q=void 0,W=void 0,Y=void 0,G=void 0,V=void 0,K=void 0,X=void 0,Q=void 0;return C={initialize:function(e,t){S||n(),L.setConfig({videoModel:U}),L.initialize(),k=k||(0,l["default"])(E).getInstance(),function(e,t){var i=!I.getIsTextTrack(e);if(t){if(N=N.concat(t.getMediaInfoArr()),i){F=t.getFragmentModel(),C.buffered=(0,d["default"])(E).create(),H=M.getTracksFor(a["default"].FRAGMENTED_TEXT,t.getStreamInfo());for(var n=M.getCurrentTrackFor(a["default"].FRAGMENTED_TEXT,t.getStreamInfo()),o=0;o<H.length;o++)if(H[o]===n){r(o);break}}for(o=0;o<N.length;o++)c(null,N[o])}}(e,t)},append:_,abort:function(){L.deleteAllTextTracks(),e(),k=null,N=[]},addEmbeddedTrack:function(e){if(S||n(),e)if(e.id===a["default"].CC1||e.id===a["default"].CC3){for(var t=0;t<W.length;t++)if(W[t].id===e.id)return;W.push(e)}else x.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){T.off(v["default"].VIDEO_CHUNK_RECEIVED,i,this),L&&L.deleteAllTextTracks(),S=!1,W=[],K=[null,null],V=[],G=null},setConfig:function(e){e&&(e.errHandler&&(A=e.errHandler),e.adapter&&(I=e.adapter),e.manifestModel&&(D=e.manifestModel),e.mediaController&&(M=e.mediaController),e.videoModel&&(U=e.videoModel),e.streamController&&($=e.streamController),e.textTracks&&(L=e.textTracks),e.vttParser&&(R=e.vttParser),e.ttmlParser&&(O=e.ttmlParser))},getConfig:function(){return{fragmentModel:F,fragmentedTracks:H,videoModel:U}},setCurrentFragmentedTrackIdx:r,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){t(),L=U=$=null}},x=(0,u["default"])(E).getInstance().getLogger(C),t(),C}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=e(239),s=n(e(231)),l=n(e(205)),d=n(e(207)),c=n(e(49)),u=n(e(47)),h=n(e(201)),f=n(e(196)),p=n(e(9)),g=n(e(2)),m=n(e(48)),v=n(e(56)),y=n(e(223)),b=n(e(53));r.__dashjs_factory_name="TextSourceBuffer",i["default"]=c["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,196:196,2:2,201:201,205:205,207:207,223:223,231:231,239:239,47:47,48:48,49:49,53:53,56:56,9:9}],201:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var t=w[e].kind,i=void 0!==w[e].id?w[e].id:w[e].lang,n=w[e].lang,r=w[e].isTTML,a=w[e].isEmbedded,o=_.addTextTrack(t,i,n);return o.isEmbedded=a,o.isTTML=r,o}function t(e,t){var i=_.getClientWidth(),n=_.getClientHeight(),r=_.getVideoWidth(),a=_.getVideoHeight(),o=_.getVideoRelativeOffsetTop(),l=_.getVideoRelativeOffsetLeft(),d=r/a,c=!1;e.isFromCEA608&&(d=3.5/3,c=!0);var u=function(e,t,i,n,r,a){var o=0,s=0;i/n<e/t?o=(s=t)/n*i:s=(o=e)/i*n;var l,d,c=0,u=0;return r<o/s?c=(u=s)*r:u=(c=o)/r,l=(e-c)/2,d=(t-u)/2,a?{x:l+.1*c,y:d+.1*u,w:.8*c,h:.8*u}:{x:l,y:d,w:c,h:u}}.call(this,i,n,r,a,d,c),h=u.w,f=u.h,p=u.x,g=u.y;if(h!=x||f!=k||p!=S||g!=C||t){if(S=p+l,C=g+o,x=h,k=f,A){var v=A.style;v&&(v.left=S+"px",v.top=C+"px",v.width=x+"px",v.height=k+"px",v.zIndex=D&&document[D]||M?R:null,m.trigger(s["default"].CAPTION_CONTAINER_RESIZE,{}))}var y=e.activeCues;if(y)for(var b=y.length,w=0;w<b;++w){var E=y[w];E.scaleCue(E)}}}function i(e){var t=x,i=k,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0;if(e.cellResolution){var d=[t/e.cellResolution[0],i/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){a=(e.linePadding[r]*d[0]).toString();for(var c=document.getElementsByClassName("spanPadding"),u=0;u<c.length;u++)c[u].style.cssText=c[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a),c[u].style.cssText=c[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?o=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.fontSize[r][1]),a=(o*d[1]).toString(),l="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var h=0;h<l.length;h++)l[h].style.cssText=l[h].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?s=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(s=e.lineHeight[r][1]),a=(s*d[1]).toString(),l=document.getElementsByClassName(r);for(var f=0;f<l.length;f++)l[f].style.cssText=l[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a)}}}if(e.isd){var p=document.getElementById(e.cueID);p&&A.removeChild(p),n(e)}}function n(e){if(A){var t=document.createElement("div");A.appendChild(t),P=(0,c.renderHTML)(e.isd,t,function(t){var i=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(i.test(t)){var r=i.exec(t),a=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(e.images[a])}return n.test(t)?(a=(r=n.exec(t))[1],"data:image/png;base64,"+e.embeddedImages[a]):null},A.clientHeight,A.clientWidth,!1,function(e){y.info("renderCaption :",e)},P,!0),t.id=e.cueID,m.trigger(s["default"].CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:T})}}function r(e){return 0<=e&&w[e]?_.getTextTrack(w[e].kind,w[e].id,w[e].lang,w[e].isTTML,w[e].isEmbedded):null}function l(e){if(e!==T){var i=r(T=e);(function(e){p.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,i=_.getElement();try{i&&(i.id?t.insertRule("#"+i.id+"::cue {background: transparent}",0):0!==i.classList.length?t.insertRule("."+i.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){y.info(""+e.message)}}}.call(this):f.call(this)}).call(this,i),I&&(clearInterval(I),I=null),i&&"html"===i.renderingType&&(t.call(this,i,!0),I=setInterval(t.bind(this,i),500))}}function h(e){if(e.cues)for(var t=e.cues,i=t.length-1;0<=i;i--)e.removeCue(t[i])}function f(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function p(){if(A)for(;A.firstChild;)A.removeChild(A.firstChild)}var g=this.context,m=(0,o["default"])(g).getInstance(),v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0,S=void 0,C=void 0,x=void 0,k=void 0,A=void 0,I=void 0,D=void 0,M=void 0,P=void 0,R=void 0;return v={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(b=window.VTTCue||window.TextTrackCue,w=[],E=[],M=!(T=-1),R=2147483647,P=I=A=null,void(k=x=C=S=0)!==document.fullscreenElement?D="fullscreenElement":void 0!==document.webkitIsFullScreen?D="webkitIsFullScreen":document.msFullscreenElement?D="msFullscreenElement":document.mozFullScreen&&(D="mozFullScreen"))},setDisplayCConTop:function(e){(0,u.checkParameterType)(e,"boolean"),M=e,A&&!document[D]&&(A.style.zIndex=e?R:null)},addTextTrack:function(t,i){if(w.length!==i){if(w.push(t),w.length===i){w.sort(function(e,t){return e.index-t.index}),A=_.getTTMLRenderingDiv();for(var n=-1,o=0;o<w.length;o++){var d=e.call(this,o);E.push(d),w[o].defaultTrack&&(d["default"]=!0,n=o);var c=r(o);c&&(c.mode=a["default"].TEXT_SHOWING,A&&(w[o].isTTML||w[o].isEmbedded)?c.renderingType="html":c.renderingType="default"),this.addCaptions(o,0,w[o].captionData),m.trigger(s["default"].TEXT_TRACK_ADDED)}if(l.call(this,n),0<=n)for(var u=0;u<w.length;u++){var h=r(u);h&&(h.mode=u===n?a["default"].TEXT_SHOWING:a["default"].TEXT_HIDDEN)}m.trigger(s["default"].TEXT_TRACKS_QUEUE_INITIALIZED,{index:T,tracks:w})}}else y.error("Trying to add too many tracks.")},addCaptions:function(e,t,o){var l=r(e),d=this;if(l&&Array.isArray(o)&&0!==o.length)for(var c=0;c<o.length;c++){var u=void 0,f=o[c];l.cellResolution=f.cellResolution,l.isFromCEA608=f.isFromCEA608,"html"===f.type&&A?((u=new b(f.start-t,f.end-t,"")).cueHTMLElement=f.cueHTMLElement,u.isd=f.isd,u.images=f.images,u.embeddedImages=f.embeddedImages,u.cueID=f.cueID,u.scaleCue=i.bind(d),u.cellResolution=f.cellResolution,u.lineHeight=f.lineHeight,u.linePadding=f.linePadding,u.fontSize=f.fontSize,A.style.left=S+"px",A.style.top=C+"px",A.style.width=x+"px",A.style.height=k+"px",u.onenter=function(){l.mode===a["default"].TEXT_SHOWING&&(this.isd?(n(this),y.debug("Cue enter id:"+this.cueID)):(A.appendChild(this.cueHTMLElement),i.call(d,this),m.trigger(s["default"].CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:T})))},u.onexit=function(){if(A)for(var e=A.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(y.debug("Cue exit id:"+e[t].id),A.removeChild(e[t]),--t)}):f.data&&(u=new b(f.start-t,f.end-t,f.data),f.styles&&(void 0!==f.styles.align&&"align"in u&&(u.align=f.styles.align),void 0!==f.styles.line&&"line"in u&&(u.line=f.styles.line),void 0!==f.styles.position&&"position"in u&&(u.position=f.styles.position),void 0!==f.styles.size&&"size"in u&&(u.size=f.styles.size)),u.onenter=function(){l.mode===a["default"].TEXT_SHOWING&&m.trigger(s["default"].CAPTION_RENDERED,{currentTrackIdx:T})});try{u?l.addCue(u):y.error("impossible to display subtitles.")}catch(e){throw h(l),l.addCue(u),e}}},getCurrentTrackIdx:function(){return T},setCurrentTrackIdx:l,getTrackIdxForId:function(e){for(var t=-1,i=0;i<w.length;i++)if(w[i].id===e){t=i;break}return t},getCurrentTrackInfo:function(){return w[T]},setModeForTrackIdx:function(e,t){var i=r(e);i&&i.mode!==t&&(i.mode=t)},deleteCuesFromTrackIdx:function(e){var t=r(e);t&&h(t)},deleteAllTextTracks:function(){for(var e=E?E.length:0,t=0;t<e;t++){var i=r(t);i&&(h.call(this,i),i.mode="disabled")}E=[],w=[],I&&(clearInterval(I),I=null),T=-1,p.call(this)},deleteTextTrack:function(e){_.removeChild(E[e]),E.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(_=e.videoModel)}},y=(0,d["default"])(g).getInstance().getLogger(v),v}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(48)),s=n(e(56)),l=n(e(49)),d=n(e(47)),c=e(16),u=e(216);r.__dashjs_factory_name="TextTracks",i["default"]=l["default"].getSingletonFactory(r),t.exports=i["default"]},{109:109,16:16,216:216,47:47,48:48,49:49,56:56}],202:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){r&&r.reset()}var i,n=this.context,r=void 0;return i={get:function(e,t){var i=r.getCurrentTrack();if(!i||i.segmentDuration<=0||null==e)return null;var n=Math.floor(e/i.segmentDuration),a=e%i.segmentDuration,o=Math.floor(a*i.tilesHor*i.tilesVert/i.segmentDuration),l=new s["default"];return l.width=Math.floor(i.widthPerTile),l.height=Math.floor(i.heightPerTile),l.x=Math.floor(o%i.tilesHor)*i.widthPerTile,l.y=Math.floor(o/i.tilesHor)*i.heightPerTile,"readThumbnail"in i?i.readThumbnail(e,function(e){l.url=e,t&&t(l)}):(l.url=function(e,t){var i=t+e.startNumber,n=(0,c.replaceTokenForTemplate)(e.templateUrl,"Number",i);return n=(0,c.replaceTokenForTemplate)(n,"Time",(i-1)*e.segmentDuration),n=(0,c.replaceTokenForTemplate)(n,"Bandwidth",e.bandwidth),(0,c.unescapeDollarsInTemplate)(n)}(i,n),t&&t(l),l)},setTrackByIndex:function(e){r.setTrackByIndex(e)},getCurrentTrackIndex:function(){return r.getCurrentTrackIndex()},getBitrateList:function(){var e=r.getTracks(),t=0;return e.map(function(e){var i=new d["default"];return i.mediaType=o["default"].IMAGE,i.qualityIndex=t++,i.bitrate=e.bitrate,i.width=e.width,i.height=e.height,i})},reset:t},t(),r=(0,l["default"])(n).create({adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter}),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(109)),s=n(e(232)),l=n(e(203)),d=n(e(222)),c=e(81);r.__dashjs_factory_name="ThumbnailController",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{109:109,203:203,222:222,232:232,49:49,81:81}],203:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){n(),C=(0,f["default"])(s).create({}),k=(0,h["default"])(s).getInstance(),(x=(0,u["default"])(s).getInstance()).setConfig({baseURLController:m,dashMetrics:b,mediaPlayerModel:_,errHandler:w}),function(){if(v&&g){var e=v.getStreamInfo();if(e){var t=g.getMediaInfoForType(e,a["default"].IMAGE);if(t){var n=g.getVoRepresentations(t);n&&0<n.length&&n.forEach(function(e){e.segmentInfoType===o["default"].SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media&&i(e),e.segmentInfoType===o["default"].SEGMENT_BASE&&i(e,!0)}),0<T.length&&(T.sort(function(e,t){return e.bitrate-t.bitrate}),S=T.length-1)}}}}()}function i(e,t){var i=new l["default"];i.id=e.id,i.bitrate=e.bandwidth,i.width=e.width,i.height=e.height,i.tilesHor=1,i.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(0<=p.indexOf(e.schemeIdUri)&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(i.tilesHor=parseInt(t[0],10),i.tilesVert=parseInt(t[1],10))}}),t?x.loadSegments(e,a["default"].IMAGE,e.indexRange,{},function(e,t){var n=[];e=function(e,t){var i,n=[],r=0,a=void 0,o=void 0,s=void 0;for(a=0,i=e.length;a<i;a++)o=e[a],(s=(0,c.getTimeBasedSegment)(y,g.getIsDynamic(),t,o.startTime,o.duration,o.timescale,o.media,o.mediaRange,r))&&(n.push(s),s=null,r++);return n}(e,t),i.segmentDuration=e[0].duration,i.readThumbnail=function(i,r){var a=null;n.some(function(e){if(e.start<=i&&e.end>i)return a=e.url,!0}),a?r(a):e.some(function(e){if(e.mediaStartTime<=i&&e.mediaStartTime+e.duration>i){var a=m.resolve(t.path);return C.load({method:"get",url:a.url,request:{range:e.mediaRange,responseType:"arraybuffer"},onload:function(t){var i=k.getSamplesInfo(t.target.response),a=new Blob([t.target.response.slice(i.sampleList[0].offset,i.sampleList[0].offset+i.sampleList[0].size)],{type:"image/jpeg"}),o=window.URL.createObjectURL(a);n.push({start:e.mediaStartTime,end:e.mediaStartTime+e.duration,url:o}),r&&r(o)}}),!0}})}}):(i.startNumber=e.startNumber,i.segmentDuration=e.segmentDuration,i.timescale=e.timescale,i.templateUrl=function(e){var t=E.isRelative(e.media)?E.resolve(e.media,m.resolve(e.path).url):e.media;return t?(0,c.replaceIDForTemplate)(t,e.id):""}(e)),0<i.tilesHor&&0<i.tilesVert&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,T.push(i))}function n(){T=[],S=-1}var r,s=this.context,g=e.adapter,m=e.baseURLController,v=e.stream,y=e.timelineConverter,b=e.dashMetrics,_=e.mediaPlayerModel,w=e.errHandler,E=(0,d["default"])(s).getInstance(),T=void 0,S=void 0,C=void 0,x=void 0,k=void 0;return r={initialize:t,getTracks:function(){return T},reset:n,setTrackByIndex:function(e){T&&0!==T.length&&(e>=T.length&&(e=T.length-1),S=e)},getCurrentTrack:function(){return S<0?null:T[S]},getCurrentTrackIndex:function(){return S}},t(),r}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=n(e(63)),s=n(e(49)),l=n(e(233)),d=n(e(218)),c=e(81),u=n(e(61)),h=n(e(205)),f=n(e(157)),p=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];i.THUMBNAILS_SCHEME_ID_URIS=p,r.__dashjs_factory_name="ThumbnailTracks",i["default"]=s["default"].getClassFactory(r)},{109:109,157:157,205:205,218:218,233:233,49:49,61:61,63:63,81:81}],204:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){r.reset()}var t,i=this.context,n=(0,o["default"])(i).getInstance(),r=void 0,u=void 0,p=void 0,g=void 0;return t={chooseSelector:function(e){(0,f.checkParameterType)(e,"boolean"),g=e?p:u},select:function(t){if(t){var i=t.baseUrls,r=t.selectedIdx;
if(!isNaN(r))return i[r];var o=g.select(i);return o?(t.selectedIdx=i.indexOf(o),o):(n.trigger(s["default"].URL_RESOLUTION_FAILED,{error:new h["default"](a["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,a["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(g===u&&e()))}},reset:e,setConfig:function(e){e.selector&&(g=e.selector)}},r=(0,l["default"])(i).create({updateEventName:s["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:s["default"].SERVICE_LOCATION_BLACKLIST_ADD}),u=(0,c["default"])(i).create({blacklistController:r}),p=(0,d["default"])(i).create({blacklistController:r}),g=u,t}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(53)),o=n(e(48)),s=n(e(56)),l=n(e(114)),d=n(e(221)),c=n(e(220)),u=n(e(49)),h=n(e(223)),f=e(216);r.__dashjs_factory_name="BaseURLSelector",i["default"]=u["default"].getClassFactory(r),t.exports=i["default"]},{114:114,216:216,220:220,221:221,223:223,48:48,49:49,53:53,56:56}],205:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=l["default"].parseBuffer(e),i=(0,o["default"])(n).create();return i.setData(t),i}var t=void 0,i=void 0,n=this.context;return i={parse:e,findLastTopIsoBoxCompleted:function(e,t,i){if(void 0===i&&(i=0),!t||i+8>=t.byteLength)return new d["default"](0,!1);for(var n,r,a,o,s=t instanceof ArrayBuffer?new Uint8Array(t):t,l=void 0,c=0;i<s.byteLength;){var u=(a=s)[(o=i)+3]>>>0|a[o+2]<<8>>>0|a[o+1]<<16>>>0|a[o]<<24>>>0,h=(n=s,r=i+4,String.fromCharCode(n[r++])+String.fromCharCode(n[r++])+String.fromCharCode(n[r++])+String.fromCharCode(n[r]));if(0==u)break;i+u<=s.byteLength&&(0<=e.indexOf(h)?l=new d["default"](i,!0,u):c=i+u),i+=u}return l||new d["default"](c,!1)},getMediaTimescaleFromMoov:function(t){var i=e(t),n=i?i.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(t){if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var i,n,r=e(t),a=r.getBoxes("moof"),o=r.getBoxes("mfhd"),s=void 0,l=void 0,d=void 0,c=void 0,u=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,_=void 0;n=r.getBoxes("moof").length,i=o[o.length-1].sequence_number,u=[];var w=-1,E=-1;for(m=l=0;m<a.length;m++){var T=a[m],S=T.getChildBoxes("traf");for(p=0;p<S.length;p++){var C=S[p],x=C.getChildBox("tfhd"),k=C.getChildBox("tfdt");c=k.baseMediaDecodeTime;var A=C.getChildBoxes("trun"),I=C.getChildBoxes("subs");for(g=0;g<A.length;g++){var D=A[g];for(l=D.sample_count,b=(x.base_data_offset||0)+(D.data_offset||0),f=0;f<l;f++){s=void 0!==(h=D.samples[f]).sample_duration?h.sample_duration:x.default_sample_duration,d=void 0!==h.sample_size?h.sample_size:x.default_sample_size;var M={dts:c,cts:c+(void 0!==h.sample_composition_time_offset?h.sample_composition_time_offset:0),duration:s,offset:T.offset+b,size:d,subSizes:[d]};if(I)for(v=0;v<I.length;v++){var P=I[v];if(w<P.entry_count-1&&E<f&&(w++,E+=P.entries[w].sample_delta),f==E){M.subSizes=[];var R=P.entries[w];for(y=0;y<R.subsample_count;y++)M.subSizes.push(R.subsamples[y].subsample_size)}}u.push(M),b+=d,c+=s}}_=c-k.baseMediaDecodeTime}}return{sampleList:u,lastSequenceNumber:i,totalDuration:_,numSequences:n}},findInitRange:function(i){var n=null,r=e(i);if(!r)return n;var a=r.getBox("ftyp"),o=r.getBox("moov");return t.debug("Searching for initialization."),o&&o.isComplete&&(n=(a?a.offset:o.offset)+"-"+(o.offset+o.size-1),t.debug("Found the initialization.  Range: "+n)),n}},t=(0,a["default"])(n).getInstance().getLogger(i),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(47)),o=n(e(212)),s=n(e(49)),l=n(e(9)),d=n(e(228));r.__dashjs_factory_name="BoxParser",i["default"]=s["default"].getSingletonFactory(r),t.exports=i["default"]},{212:212,228:228,47:47,49:49,9:9}],206:[function(e,t,i){"use strict";function n(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}}),e}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="Capabilities",i["default"]=o["default"].getSingletonFactory(n),t.exports=i["default"]},{49:49}],207:[function(e,t,i){"use strict";function n(){return{customTimeRangeArray:[],length:0,add:function(e,t){var i=0;for(i=0;i<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[i].start;i++);for(this.customTimeRangeArray.splice(i,0,{start:e,end:t}),i=0;i<this.customTimeRangeArray.length-1;i++)this.mergeRanges(i,i+1)&&i--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var i=0;i<this.customTimeRangeArray.length;i++)if(e<=this.customTimeRangeArray[i].start&&t>=this.customTimeRangeArray[i].end)this.customTimeRangeArray.splice(i,1),i--;else{if(e>this.customTimeRangeArray[i].start&&t<this.customTimeRangeArray[i].end){this.customTimeRangeArray.splice(i+1,0,{start:t,end:this.customTimeRangeArray[i].end}),this.customTimeRangeArray[i].end=e;break}e>this.customTimeRangeArray[i].start&&e<this.customTimeRangeArray[i].end?this.customTimeRangeArray[i].end=e:t>this.customTimeRangeArray[i].start&&t<this.customTimeRangeArray[i].end&&(this.customTimeRangeArray[i].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var i=this.customTimeRangeArray[e],n=this.customTimeRangeArray[t];return i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(i.end=n.end,this.customTimeRangeArray.splice(t,1),!0):n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(i.start=n.start,this.customTimeRangeArray.splice(t,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end?(this.customTimeRangeArray.splice(e,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,s.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,s.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r},s=e(216);n.__dashjs_factory_name="CustomTimeRanges",i["default"]=o["default"].getClassFactory(n),t.exports=i["default"]},{216:216,49:49}],208:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){if(void 0!==v)return v;v=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return m.warn("DOMStorage access denied: "+e.message),v}if(!t||e!==u&&"sessionStorage"!==e)return v;try{t.setItem("1","1"),t.removeItem("1"),v=!0}catch(e){m.warn("DOMStorage is supported, but cannot be used: "+e.message)}return v}function i(){return 6e5*Math.round((new Date).getTime()/6e5)}function n(e,i){return t(e)&&p.get().streaming[i+"CachingInfo"].enabled}function r(){if(!p)throw new Error(s["default"].MISSING_CONFIG_ERROR)}e=e||{};var a=this.context,p=e.settings,g=void 0,m=void 0,v=void 0;return g={getSavedBitrateSettings:function(e){var t=NaN;if(r(),n(u,h)){var i=d.replace(/\?/,e);try{var a=JSON.parse(localStorage.getItem(i))||{},o=(new Date).getTime()-parseInt(a.timestamp,10)>=p.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(a.bitrate);isNaN(s)||o?o&&localStorage.removeItem(i):(t=s,m.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(n(u,h)&&t){var r=d.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t.toFixed(3),timestamp:i()}))}catch(e){m.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(r(),n(u,f)){var i=c.replace(/\?/,e);try{var a=JSON.parse(localStorage.getItem(i))||{},o=(new Date).getTime()-parseInt(a.timestamp,10)>=p.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=a.settings,o&&(localStorage.removeItem(i),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(n(u,f)){var r=c.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:i()}))}catch(e){m.error(e.message)}}}},m=(0,o["default"])(a).getInstance().getLogger(g),t(u)&&l.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){m.error(e.message)}}}),g}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47)),s=n(e(109)),l=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],d="dashjs_?_bitrate",c="dashjs_?_settings",u="localStorage",h="lastBitrate",f="lastMediaSettings";r.__dashjs_factory_name="DOMStorage";var p=a["default"].getSingletonFactory(r);i["default"]=p,t.exports=i["default"]},{109:109,47:47,49:49}],209:[function(e,t,i){"use strict";function n(e){function t(e,t){var i=!0,n=0;if(void 0===t&&(t=!1),n=16777215<e.tag?(r.getUint32(a)!==e.tag&&(i=!1),4):65535<e.tag?(256*r.getUint16(a)+r.getUint8(a+2)!==e.tag&&(i=!1),3):255<e.tag?(r.getUint16(a)!==e.tag&&(i=!1),2):(r.getUint8(a)!==e.tag&&(i=!1),1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(a+=n),i}function i(e){var t=1,i=128,n=-1,o=0,s=r.getUint8(a),l=0;for(l=0;l<8;l+=1){if((s&i)===i){o=void 0===e?s&~i:s,n=l;break}i>>=1}for(l=0;l<n;l+=1,t+=1)o=o<<8|255&r.getUint8(a+t);return a+=t,o}e=e||{};var n=void 0,r=new DataView(e.data),a=0;return n={getPos:function(){return a},setPos:function(e){a=e},consumeTag:t,consumeTagAndSize:function(e,n){var r=t(e,n);return r&&i(),r},parseTag:function(e){var r;return t(e),r=i(),n[e.parse](r)},skipOverElement:function(e,n){var r=t(e,n),o=void 0;return r&&(o=i(),a+=o),r},getMatroskaCodedNum:i,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=r.getFloat32(a),a+=4;break;case 8:t=r.getFloat64(a),a+=8}return t},getMatroskaUint:function(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&r.getUint8(a+i);return a+=e,t},moreData:function(){return a<r.byteLength}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="EBMLParser",i["default"]=o["default"].getClassFactory(n),t.exports=i["default"]},{49:49}],210:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=(0,a["default"])(e).getInstance();return{error:function(e){t.trigger(o["default"].ERROR,{error:e})}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(48)),o=n(e(56)),s=n(e(49));r.__dashjs_factory_name="ErrorHandler",i["default"]=s["default"].getSingletonFactory(r),t.exports=i["default"]},{48:48,49:49,56:56}],211:[function(e,t,i){"use strict";function n(){var e={};return{save:function(t){var i=t.streamId,n=t.representationId;e[i]=e[i]||{},e[i][n]=t},extract:function(t,i){return e&&e[t]&&e[t][i]?e[t][i]:null},reset:function(){e={}}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="InitCache",i["default"]=o["default"].getSingletonFactory(n),t.exports=i["default"]},{49:49}],212:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var n=[];if(!e||!i||"function"!=typeof i.fetchAll)return n;for(var r=i.fetchAll(e),a=void 0,o=0,s=r.length;o<s;o++)(a=t(r[o]))&&n.push(a);return n}function t(e){if(!e)return null;var t=new a["default"](e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}var i=void 0;return{getBox:function(e){return e&&i&&i.boxes&&0!==i.boxes.length&&"function"==typeof i.fetch?t(i.fetch(e)):null},getBoxes:e,setData:function(e){i=e},getLastBox:function(){if(!i||!i.boxes||!i.boxes.length)return null;var t=e(i.boxes[i.boxes.length-1].type);return 0<t.length?t[t.length-1]:null}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(227)),o=n(e(49));r.__dashjs_factory_name="IsoFile",i["default"]=o["default"].getClassFactory(r),t.exports=i["default"]},{227:227,49:49}],213:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(e=e||{}).timelineConverter,i=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(t&&t.hasOwnProperty("getExpectedLiveEdge")&&i&&i.hasOwnProperty("getRepresentationInfo")))throw new Error(o["default"].MISSING_CONFIG_ERROR)}();var e=i.getRepresentationInfo(),n=e.DVRWindow?e.DVRWindow.end:0,r=n;return e.useCalculatedLiveEdgeTime&&(r=t.getExpectedLiveEdge(),t.setClientTimeOffset(r-n)),r},reset:function(){i=t=null}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(109));r.__dashjs_factory_name="LiveEdgeFinder",i["default"]=a["default"].getClassFactory(r),t.exports=i["default"]},{109:109,49:49}],214:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){return{areEqual:function(e,t){return(0,o["default"])(e,t)}}}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(11));r.__dashjs_factory_name="ObjectUtils",i["default"]=a["default"].getSingletonFactory(r),t.exports=i["default"]},{11:11,49:49}],215:[function(e,t,i){"use strict";function n(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="RequestModifier",i["default"]=o["default"].getSingletonFactory(n),t.exports=i["default"]},{49:49}],216:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.checkParameterType=function(e,t){if(typeof e!==t)throw a["default"].BAD_ARGUMENT_ERROR},i.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw a["default"].BAD_ARGUMENT_ERROR+" : argument is not an integer"},i.checkRange=function(e,t,i){if(e<t||i<e)throw a["default"].BAD_ARGUMENT_ERROR+" : argument out of range"},i.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==a["default"].AUDIO&&e!==a["default"].VIDEO)throw a["default"].BAD_ARGUMENT_ERROR};var n,r=e(109),a=(n=r)&&n.__esModule?n:{"default":n}},{109:109}],217:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=this.context,t=(0,s["default"])(e).getInstance(),i=void 0,n=void 0,r=0;return i={parse:function(e,i,a,o,s){var c="",u=[],h=void 0,f=void 0,p=void 0,g={},m={},v="",y="",b={onOpenTag:function(e,t,i){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!i[" imagetype"]||"PNG"!==i[" imagetype"].value)return void n.warn("smpte-tt imagetype != PNG. Discarded");v=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){v&&(m[v]=y.trim()),v=y=""},onText:function(e){v&&(y+=e)}};if(!e)throw c="no ttml data to parse",new Error(c);g.data=e,t.trigger(l["default"].TTML_TO_PARSE,g);var _=(0,d.fromXML)(g.data,function(e){c=e},b);t.trigger(l["default"].TTML_PARSED,{ttmlString:g.data,ttmlDoc:_});var w,E=_.getMediaTimeEvents();for(p=0;p<E.length;p++){var T=(0,d.generateISD)(_,E[p],function(e){c=e});T.contents.some(function(e){return e.contents.length})&&(h=E[p]+i<a?a:E[p]+i)<(f=E[p+1]+i>o?o:E[p+1]+i)&&u.push({start:h,end:f,type:"html",cueID:(w="cue_TTML_"+r,r++,w),isd:T,images:s,embeddedImages:m})}if(""!==c)throw n.error(c),new Error(c);return u}},n=(0,o["default"])(e).getInstance().getLogger(i),i}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47)),s=n(e(48)),l=n(e(56)),d=e(16);r.__dashjs_factory_name="TTMLParser",i["default"]=a["default"].getSingletonFactory(r),t.exports=i["default"]},{16:16,47:47,48:48,49:49,56:56}],218:[function(e,t,i){"use strict";function n(){function e(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}}function t(e,t){var l=i;if(!t)return e;if(!a(e))return e;o(e)&&(l=n),s(e)&&(l=r);var d=l(t),c="/"!==d.charAt(d.length-1)&&"/"!==e.charAt(0)?"/":"";return[d,e].join(c)}function i(e){var t=e.indexOf("/"),i=e.lastIndexOf("/");return-1!==t?i===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,i+1)):""}function n(e){var t=e.match(h);return t?t[1]:""}function r(e){var t=e.match(d);return t?t[0]:""}function a(e){return!d.test(e)}function o(e){return a(e)&&"/"===e.charAt(0)}function s(e){return 0===e.indexOf("//")}var l=void 0,d=/^[a-z][a-z0-9+\-.]*:/i,c=/^https?:\/\//i,u=/^https:\/\//i,h=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i;return function(){try{new window.URL("x","http://y"),l=e}catch(e){}finally{l=l||t}}(),{parseBaseUrl:i,parseOrigin:n,parseScheme:r,isRelative:a,isPathAbsolute:o,isSchemeRelative:s,isHTTPURL:function(e){return c.test(e)},isHTTPS:function(e){return u.test(e)},resolve:function(e,t){return l(e,t)}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="URLUtils",i["default"]=o["default"].getSingletonFactory(n),t.exports=i["default"]},{49:49}],219:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var t=e.split(":"),i=t.length-1;return e=60*parseInt(t[i-1],10)+parseFloat(t[i]),2==i&&(e+=3600*parseInt(t[0],10)),e}function t(e){var t=e.split(l),i=t[1].split(c);return i.shift(),t[1]=i[0],i.shift(),{cuePoints:t,styles:function(e){var t={};return e.forEach(function(e){if(1<e.split(/:/).length){var i=e.split(/:/)[1];i&&-1!=i.search(/%/)&&(i=parseInt(i.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=i),(e.match(/line/)||e.match(/L/))&&(t.line=i),(e.match(/position/)||e.match(/P/))&&(t.position=i),(e.match(/size/)||e.match(/S/))&&(t.size=i)}}),t}(i)}}function i(e,t){for(var i,n=t,r="",a="";""!==e[n]&&n<e.length;)n++;if(1<(i=n-t))for(var o=0;o<i;o++){if((a=e[t+o]).match(l)){r="";break}r+=a,o!==i-1&&(r+="\n")}else(a=e[t]).match(l)||(r=a);return r}var n=this.context,r=void 0,a=void 0,s=void 0,l=void 0,d=void 0,c=void 0;return r={parse:function(n){var r,o=[],c=void 0;if(!n)return o;r=(n=n.split(s)).length,c=-1;for(var u=0;u<r;u++){var h=n[u];if(0<h.length&&"WEBVTT"!==h&&h.match(l)){var f=t(h),p=f.cuePoints,g=f.styles,m=i(n,u+1),v=e(p[0].replace(d,"")),y=e(p[1].replace(d,""));!isNaN(v)&&!isNaN(y)&&c<=v&&v<y?""!==m?(c=v,o.push({start:v,end:y,data:m,styles:g})):a.error("Skipping cue due to empty/malformed cue text"):a.error("Skipping cue due to incorrect cue timing")}}return o}},a=(0,o["default"])(n).getInstance().getLogger(r),s=/(?:\r\n|\r|\n)/gm,l=/-->/,d=/(^[\s]+|[\s]+$)/g,c=/\s\b/g,r}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(49)),o=n(e(47));r.__dashjs_factory_name="VTTParser",i["default"]=a["default"].getSingletonFactory(r),t.exports=i["default"]},{47:47,49:49}],220:[function(e,t,i){"use strict";function n(e){var t=(e=e||{}).blacklistController;return{select:function(e){var i=0,n=void 0;return e&&e.some(function(e,n){return i=n,!t.contains(e.serviceLocation)})&&(n=e[i]),n}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="BasicSelector",i["default"]=o["default"].getClassFactory(n),t.exports=i["default"]},{49:49}],221:[function(e,t,i){"use strict";function n(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,i=[],n=0,r=void 0,a=void 0;if((a=e.sort(function(e,t){var i=e.dvb_priority-t.dvb_priority;return isNaN(i)?0:i}).filter(function(e,t,i){return!t||i[0].dvb_priority&&e.dvb_priority&&i[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,i.push(t)}),r=Math.floor(Math.random()*(t-1)),i.every(function(e,t){return n=t,!(r<e)})),a[n]}(function(e){var i=[];return e.filter(function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&i.push(e.dvb_priority),!1)}).filter(function(e){return!i.length||!e.dvb_priority||-1===i.indexOf(e.dvb_priority)})}(e))}}}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(49),o=(r=a)&&r.__esModule?r:{"default":r};n.__dashjs_factory_name="DVBSelector",i["default"]=o["default"].getClassFactory(n),t.exports=i["default"]},{49:49}],222:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=i["default"]},{}],223:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=i||null,this.data=n||null},t.exports=i["default"]},{}],224:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=i["default"]},{}],225:[function(e,t,i){"use strict";function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.action=n.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}Object.defineProperty(i,"__esModule",{value:!0}),n.ACTION_DOWNLOAD="download",n.ACTION_COMPLETE="complete",i["default"]=n,t.exports=i["default"]},{}],226:[function(e,t,i){"use strict";function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}Object.defineProperty(i,"__esModule",{value:!0});var r,a=e(225),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,((r=a)&&r.__esModule?r:{"default":r})["default"]),n);i["default"]=o,t.exports=i["default"]},{225:225}],227:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new r(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references)for(this.references=[],t=0;t<e.references.length;t++){var i={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(i)}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[],t=0;for(var n=e.samples.length;t<n;t++){var a={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(a)}}}}Object.defineProperty(i,"__esModule",{value:!0});var a=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(r,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],i=0;i<this.boxes.length;i++)this.boxes[i].type===e&&t.push(this.boxes[i]);return t}}]),r);i["default"]=a,t.exports=i["default"]},{}],228:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=i,this.size=n},t.exports=i["default"]},{}],229:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=i["default"]},{}],230:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=a,i=o,n=!0,s=d=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=a["default"].STREAM,this.responseType=""}Object.defineProperty(i,"__esModule",{value:!0});var a=n(e(109)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n(e(225))["default"]),r);i["default"]=o,t.exports=i["default"]},{109:109,225:225}],231:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=i["default"]},{}],232:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=i["default"]},{}],233:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=i["default"]},{}],234:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=i["default"]},{}],235:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},t.exports=i["default"]},{}],236:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n,r=e(115),a=(n=r)&&n.__esModule?n:{"default":n};i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a["default"].BUFFER_EMPTY},t.exports=i["default"]},{115:115}],237:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=i["default"]},{}],238:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null},t.exports=i["default"]},{}],239:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){n(this,r),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null}Object.defineProperty(i,"__esModule",{value:!0}),r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",i.HTTPRequest=r,i.HTTPRequestTrace=function e(){n(this,e),this.s=null,this.d=null,this.b=[]}},{}],240:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.ManifestUpdate=function e(){n(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},i.ManifestUpdateStreamInfo=function e(){n(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},i.ManifestUpdateRepresentationInfo=function e(){n(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],241:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){n(this,r),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}function a(){n(this,a),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}Object.defineProperty(i,"__esModule",{value:!0}),r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start",a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",
a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",i.PlayList=r,i.PlayListTrace=a},{}],242:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=i["default"]},{}],243:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=i["default"]},{}],244:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=i["default"]},{}]},{},[4]),/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
function(e,t){function i(t,i){var r,a,o,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,a=r.name,!(!t.href||!a||"map"!==r.nodeName.toLowerCase())&&(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function r(t,i,n,r){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?s["inner"+n].call(this):this.each(function(){e(this).css(o,r(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){e(this).css(o,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,a=e.ui[t].prototype;for(r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;r.length>n;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0||(t[n]=1,r=t[n]>0,t[n]=0,r)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(i,n,r){var a,o,s,l,d={},c=i.split(".")[0];i=i.split(".")[1],a=c+"-"+i,r||(r=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},o=e[c][i],s=e[c][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new s(e,i)},e.extend(s,o,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),l=new n,l.options=e.widget.extend({},l.options),e.each(r,function(i,r){return e.isFunction(r)?(d[i]=function(){var e=function(){return n.prototype[i].apply(this,arguments)},t=function(e){return n.prototype[i].apply(this,e)};return function(){var i,n=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=r.apply(this,arguments),this._super=n,this._superApply=a,i}}(),t):(d[i]=r,t)}),s.prototype=e.widget.extend(l,{widgetEventPrefix:o?l.widgetEventPrefix:i},d,{constructor:s,namespace:c,widgetName:i,widgetFullName:a}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(i,s)},e.widget.extend=function(i){for(var r,a,o=n.call(arguments,1),s=0,l=o.length;l>s;s++)for(r in o[s])a=o[s][r],o[s].hasOwnProperty(r)&&a!==t&&(i[r]=e.isPlainObject(a)?e.isPlainObject(i[r])?e.widget.extend({},i[r],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,r){var a=r.prototype.widgetFullName||i;e.fn[i]=function(o){var s="string"==typeof o,l=n.call(arguments,1),d=this;return o=!s&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,s?this.each(function(){var n,r=e.data(this,a);return r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,l),n!==r&&n!==t?(d=n&&n.jquery?d.pushStack(n.get()):n,!1):t):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new r(o,this))}),d}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var r,a,o,s=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(s={},r=i.split("."),i=r.shift(),r.length){for(a=s[i]=e.widget.extend({},this.options[i]),o=0;r.length-1>o;o++)a[r[o]]=a[r[o]]||{},a=a[r[o]];if(i=r.pop(),n===t)return a[i]===t?null:a[i];a[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];s[i]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,r){var a,o=this;"boolean"!=typeof i&&(r=n,n=i,i=!1),r?(n=a=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,a=this.widget()),e.each(r,function(r,s){function l(){return i||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):t}"string"!=typeof s&&(l.guid=s.guid=s.guid||l.guid||e.guid++);var d=r.match(/^(\w+)\s*(.*)$/),c=d[1]+o.eventNamespace,u=d[2];u?a.delegate(u,c,l):n.bind(c,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){"string"==typeof r&&(r={effect:r});var o,s=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),o&&e.effects&&e.effects.effect[s]?n[t](r):s!==t&&n[s]?n[s](r.duration,r.easing,a):n.queue(function(i){e(this)[t](),a&&a.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,a=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(r&&!a&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;return r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=e(r.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,r,a,o=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,d=t.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(d=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(d=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,d=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),r=n.options,a=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var n=e(this).data("ui-draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("ui-draggable"),r=this;e.each(n.sortables,function(){var a=!1,o=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,r=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,r,a,o,s,l,d,c,u,h,f=e(this).data("ui-draggable"),p=f.options,g=p.snapTolerance,m=i.offset.left,v=m+f.helperProportions.width,y=i.offset.top,b=y+f.helperProportions.height;for(u=f.snapElements.length-1;u>=0;u--)s=f.snapElements[u].left,l=s+f.snapElements[u].width,d=f.snapElements[u].top,c=d+f.snapElements[u].height,s-g>v||m>l+g||d-g>b||y>c+g||!e.contains(f.snapElements[u].item.ownerDocument,f.snapElements[u].item)?(f.snapElements[u].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,t,e.extend(f._uiHash(),{snapItem:f.snapElements[u].item})),f.snapElements[u].snapping=!1):("inner"!==p.snapMode&&(n=g>=Math.abs(d-b),r=g>=Math.abs(c-y),a=g>=Math.abs(s-v),o=g>=Math.abs(l-m),n&&(i.position.top=f._convertPositionTo("relative",{top:d-f.helperProportions.height,left:0}).top-f.margins.top),r&&(i.position.top=f._convertPositionTo("relative",{top:c,left:0}).top-f.margins.top),a&&(i.position.left=f._convertPositionTo("relative",{top:0,left:s-f.helperProportions.width}).left-f.margins.left),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l}).left-f.margins.left)),h=n||r||a||o,"outer"!==p.snapMode&&(n=g>=Math.abs(d-y),r=g>=Math.abs(c-b),a=g>=Math.abs(s-m),o=g>=Math.abs(l-v),n&&(i.position.top=f._convertPositionTo("relative",{top:d,left:0}).top-f.margins.top),r&&(i.position.top=f._convertPositionTo("relative",{top:c-f.helperProportions.height,left:0}).top-f.margins.top),a&&(i.position.left=f._convertPositionTo("relative",{top:0,left:s}).left-f.margins.left),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[u].snapping&&(n||r||a||o||h)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,t,e.extend(f._uiHash(),{snapItem:f.snapElements[u].item})),f.snapElements[u].snapping=n||r||a||o||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i));
},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var r,a,o=(e.positionAbs||e.position.absolute).left,s=o+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,d=l+e.helperProportions.height,c=i.offset.left,u=c+i.proportions.width,h=i.offset.top,f=h+i.proportions.height;switch(n){case"fit":return o>=c&&u>=s&&l>=h&&f>=d;case"intersect":return o+e.helperProportions.width/2>c&&u>s-e.helperProportions.width/2&&l+e.helperProportions.height/2>h&&f>d-e.helperProportions.height/2;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(a,h,i.proportions.height)&&t(r,c,i.proportions.width);case"touch":return(l>=h&&f>=l||d>=h&&f>=d||h>l&&d>f)&&(o>=c&&u>=o||s>=c&&u>=s||c>o&&s>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,r,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;a.length>n;n++)if(!(a[n].options.disabled||t&&!a[n].accept.call(a[n].element[0],t.currentItem||t.element))){for(r=0;s.length>r;r++)if(s[r]===a[n].element[0]){a[n].proportions.height=0;continue e}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===o&&a[n]._activate.call(a[n],i),a[n].offset=a[n].element.offset(),a[n].proportions={width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,a,o=e.ui.intersect(t,this,this.options.tolerance),s=!o&&this.isover?"isout":o&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),a.length&&(n=e.data(a[0],"ui-droppable"),n.greedyChild="isover"===s)),n&&"isover"===s&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,i),n&&"isout"===s&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,r,a,o=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)n=e.trim(t[i]),a="ui-resizable-"+n,r=e("<div class='ui-resizable-handle "+a+"'></div>"),r.css({zIndex:s.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(t){var i,n,r,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){s.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,r=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(i){var n,r,a,o=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),n=t(this.helper.css("left")),r=t(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,r={},a=this.originalMousePosition,o=this.axis,s=this.position.top,l=this.position.left,d=this.size.width,c=this.size.height,u=t.pageX-a.left||0,h=t.pageY-a.top||0,f=this._change[o];return!!f&&(i=f.apply(this,[t,u,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==d&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),n.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,r,a,o,s,l,d=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&e.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,a=n?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-r},s=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,d.animate||this.element.css(e.extend(o,{top:l,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!d.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,r,a,o,s=this.options;o={minWidth:i(s.minWidth)?s.minWidth:0,maxWidth:i(s.maxWidth)?s.maxWidth:1/0,minHeight:i(s.minHeight)?s.minHeight:0,maxHeight:i(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),o.maxWidth>n&&(o.maxWidth=n),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,s=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),s&&u&&(e.top=d-t.minHeight),a&&u&&(e.top=d-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,r,a=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],n=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);r.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,r=i._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,s=a?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-o},d=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,r,a,o,s,l,d=e(this).data("ui-resizable"),c=d.options,u=d.element,h=c.containment,f=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;f&&(d.containerElement=e(f),/document/.test(h)||h===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(f),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=t(i.css("padding"+r))}),d.containerOffset=i.offset(),d.containerPosition=i.position(),d.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},r=d.containerOffset,a=d.containerSize.height,o=d.containerSize.width,s=e.ui.hasScroll(f,"left")?f.scrollWidth:o,l=e.ui.hasScroll(f)?f.scrollHeight:a,d.parentData={element:f,left:r.left,top:r.top,width:s,height:l}))},resize:function(t){var i,n,r,a,o=e(this).data("ui-resizable"),s=o.options,l=o.containerOffset,d=o.position,c=o._aspectRatio||t.shiftKey,u={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),d.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=s.helper?l.left:0),d.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-u.left:o.offset.left-u.left)+o.sizeDiff.width),n=Math.abs((o._helper?o.offset.top-u.top:o.offset.top-l.top)+o.sizeDiff.height),r=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),r&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,r=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,d=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:s.left-r.left-n.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:s.left-r.left-n.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),r=n.options,a=n.originalSize,o=n.originalPosition,s={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),a={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(r[t]||0)+(s[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,r=t.originalSize,a=t.originalPosition,o=t.axis,s="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=s[0]||1,d=s[1]||1,c=Math.round((n.width-r.width)/l)*l,u=Math.round((n.height-r.height)/d)*d,h=r.width+c,f=r.height+u,p=i.maxWidth&&h>i.maxWidth,g=i.maxHeight&&f>i.maxHeight,m=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>f;i.grid=s,m&&(h+=l),v&&(f+=d),p&&(h-=l),g&&(f-=d),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=f):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=f,t.position.top=a.top-u):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=f,t.position.left=a.left-c):(t.size.width=h,t.size.height=f,t.position.top=a.top-u,t.position.left=a.left-c)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,r=e.data(this,"selectable-item");return r?(n=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),r.unselecting=!n,r.selecting=n,r.selected=n,n?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,r=this.options,a=this.opos[0],o=this.opos[1],s=t.pageX,l=t.pageY;return a>s&&(i=s,s=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:s-a,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),d=!1;i&&i.element!==n.element[0]&&("touch"===r.tolerance?d=!(i.left>s||a>i.right||i.top>l||o>i.bottom):"fit"===r.tolerance&&(d=i.left>a&&s>i.right&&i.top>o&&l>i.bottom),d?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,r=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(n=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var r,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,r,a,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],r=n.item[0],a=this._intersectsWithPointer(n),a&&n.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"!==this.options.type||!e.contains(this.element[0],r))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),
this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,d=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||n+d>s&&l>n+d,h="y"===this.options.axis||t+c>a&&o>t+c,f=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>s&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=i&&n,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&n||"left"===a&&!n:r&&("down"===r&&i||"up"===r&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,a,o=[],s=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(r=e(l[i]),n=r.length-1;n>=0;n--)a=e.data(r[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=s.length-1;i>=0;i--)s[i][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,r,a,o,s,l,d,c=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(r=e(h[i]),n=r.length-1;n>=0;n--)a=e.data(r[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(u.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=u.length-1;i>=0;i--)for(o=u[i][1],s=u[i][0],n=0,d=s.length;d>n;n++)l=e(s[n]),l.data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,r,a;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=r.outerWidth(),n.height=r.outerHeight()),a=r.offset(),n.left=a.left,n.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===n&&r.attr("src",t.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(e,r){(!i||n.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var r,a,o,s,l,d,c,u,h,f,p=null,g=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],g=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",n,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",n,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(o=1e4,s=null,f=p.floating||i(this.currentItem),l=f?"left":"top",d=f?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[g].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(!f||t(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height))&&(u=this.items[a].item.offset()[l],h=!1,Math.abs(u-c)>Math.abs(u+this.items[a][d]-c)&&(h=!0,u+=this.items[a][d]),o>Math.abs(u-c)&&(o=Math.abs(u-c),s=this.items[a],this.direction=h?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;s?this._rearrange(n,s,null,!0):this._rearrange(n,null,this.containers[g].element,!0),this._trigger("change",n,this._uiHash()),this.containers[g]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",n,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],i=e(r.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,a=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0],a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=u[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function n(i){var n=d(),r=n._rgba=[];return i=i.toLowerCase(),p(l,function(e,a){var o,s=a.re.exec(i),l=s&&a.parse(s),d=a.space||"rgba";return l?(o=n[d](l),n[c[d].cache]=o[c[d].cache],r=n._rgba=o._rgba,!1):t}),r.length?("0,0,0,0"===r.join()&&e.extend(r,a.transparent),n):a[i]}function r(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=d.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),d.fn=e.extend(d.prototype,{parse:function(r,o,s,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(o),o=t);var u=this,h=e.type(r),f=this._rgba=[];return o!==t&&(r=[r,o,s,l],h="array"),"string"===h?this.parse(n(r)||a._default):"array"===h?(p(c.rgba.props,function(e,t){f[t.idx]=i(r[t.idx],t)}),this):"object"===h?(r instanceof d?p(c,function(e,t){r[t.cache]&&(u[t.cache]=r[t.cache].slice())}):p(c,function(t,n){var a=n.cache;p(n.props,function(e,t){if(!u[a]&&n.to){if("alpha"===e||null==r[e])return;u[a]=n.to(u._rgba)}u[a][t.idx]=i(r[e],t,!0)}),u[a]&&0>e.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,n.from&&(u._rgba=n.from(u[a])))}),this):t},is:function(e){var i=d(e),n=!0,r=this;return p(c,function(e,a){var o,s=i[a.cache];return s&&(o=r[a.cache]||a.to&&a.to(r._rgba)||[],p(a.props,function(e,i){return null!=s[i.idx]?n=s[i.idx]===o[i.idx]:t})),n}),n},_space:function(){var e=[],t=this;return p(c,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=d(e),r=n._space(),a=c[r],o=0===this.alpha()?d("transparent"):this,s=o[a.cache]||a.to(o._rgba),l=s.slice();return n=n[a.cache],p(a.props,function(e,r){var a=r.idx,o=s[a],d=n[a],c=u[r.type]||{};null!==d&&(null===o?l[a]=d:(c.mod&&(d-o>c.mod/2?o+=c.mod:o-d>c.mod/2&&(o-=c.mod)),l[a]=i((d-o)*t+o,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=d(t)._rgba;return d(e.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,a=e[2]/255,o=e[3],s=Math.max(n,r,a),l=Math.min(n,r,a),d=s-l,c=s+l,u=.5*c;return t=l===s?0:n===s?60*(r-a)/d+360:r===s?60*(a-n)/d+120:60*(n-r)/d+240,i=0===d?0:.5>=u?d/c:d/(2-c),[Math.round(t)%360,i,u,null==o?1:o]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],a=e[3],o=.5>=n?n*(1+i):n+i-n*i,s=2*n-o;return[Math.round(255*r(s,o,t+1/3)),Math.round(255*r(s,o,t)),Math.round(255*r(s,o,t-1/3)),a]},p(c,function(n,r){var a=r.props,o=r.cache,l=r.to,c=r.from;d.fn[n]=function(n){if(l&&!this[o]&&(this[o]=l(this._rgba)),n===t)return this[o].slice();var r,s=e.type(n),u="array"===s||"object"===s?n:arguments,h=this[o].slice();return p(a,function(e,t){var n=u["object"===s?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),c?(r=d(c(h)),r[o]=h,r):d(h)},p(a,function(t,i){d.fn[t]||(d.fn[t]=function(r){var a,o=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":n,d=this[l](),c=d[i.idx];return"undefined"===o?c:("function"===o&&(r=r.call(this,c),o=e.type(r)),null==r&&i.empty?this:("string"===o&&(a=s.exec(r),a&&(r=c+parseFloat(a[2])*("+"===a[1]?1:-1))),d[i.idx]=r,this[l](d)))})})}),d.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={set:function(t,r){var a,o,s="";if("transparent"!==r&&("string"!==e.type(r)||(a=n(r)))){if(r=d(a||r),!h.rgba&&1!==r._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[i]=r}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=d(t.elem,i),t.end=d(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},d.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(r&&r.length&&r[0]&&r[r[0]])for(n=r.length;n--;)i=r[n],"string"==typeof r[i]&&(a[e.camelCase(i)]=r[i]);else for(i in r)"string"==typeof r[i]&&(a[i]=r[i]);return a}function n(t,i){var n,r,o={};for(n in i)r=i[n],t[n]!==r&&(a[n]||(e.fx.step[n]||!isNaN(parseFloat(r)))&&(o[n]=r));return o}var r=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,a,o,s){var l=e.speed(a,o,s);return this.queue(function(){var a,o=e(this),s=o.attr("class")||"",d=l.children?o.find("*").addBack():o;d=d.map(function(){var t=e(this);return{el:t,start:i(this)}}),a=function(){e.each(r,function(e,i){t[i]&&o[i+"Class"](t[i])})},a(),d=d.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",s),d=d.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,d.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,n,r,a){return n?e.effects.animateClass.call(this,{add:i},n,r,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,r,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,r,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,r,a,o,s){return"boolean"==typeof r||r===t?a?e.effects.animateClass.call(this,r?{add:n}:{remove:n},a,o,s):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,a,o)}}(e.fn.toggleClass),switchClass:function(t,i,n,r,a){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,a)}})}(),function(){function n(t,i,n,r){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(r=n,n=i,i={}),e.isFunction(n)&&(r=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=r||i.complete,t}function r(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var r,a;for(a=0;n.length>a;a++)null!==n[a]&&(r=e.data(i+n[a]),r===t&&(r=""),e.css(n[a],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(e){a=document.body}return t.wrap(n),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,r){return r=r||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(r[i]=a[0]*n+a[1])}),r}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(a)&&a.call(r[0]),e.isFunction(t)&&t()}var r=e(this),a=i.complete,s=i.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),n()):o.call(r[0],i,n)}var i=n.apply(this,arguments),r=i.mode,a=i.queue,o=e.effects.effect[i.effect];return e.fx.off||!o?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(t):this.queue(a||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:a=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[n-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){
t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,r=n.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),r=i.next(),a=r.attr("id");n||(n=o+"-header-"+t,i.attr("id",n)),a||(a=o+"-panel-"+t,r.attr("id",a)),i.attr("aria-controls",a),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(i=a.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),a=r[0]===n[0],o=a&&i.collapsible,s=o?e():r.next(),l=n.next(),d={oldHeader:n,oldPanel:l,newHeader:o?e():r,newPanel:s};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=!o&&this.headers.index(r),this.active=a?e():r,this._toggle(d),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,r){var a,o,s,l=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=c&&u.down||u,f=function(){l._toggleComplete(r)};return"number"==typeof h&&(s=h),"string"==typeof h&&(o=h),o=o||h.easing||u.easing,s=s||h.duration||u.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(i,{duration:s,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:s,easing:o,complete:f,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?d+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-d),d=0)}})):t.animate(i,s,o,f):e.animate(n,s,o,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,r=this.element[0].nodeName.toLowerCase(),a="textarea"===r,o="input"===r;this.isMultiLine=!!a||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var a=e.ui.keyCode;switch(r.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",r);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case a.UP:t=!0,this._keyEvent("previous",r);break;case a.DOWN:t=!0,this._keyEvent("next",r);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case a.TAB:this.menu.active&&this.menu.select(r);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i,n,r,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},d=function(t){var i=t.name,n=t.form,r=e([]);return i&&(i=i.replace(/'/g,"\\'"),r=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,s=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",h="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){s.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){s.disabled||e(this).removeClass(u)}).bind("click"+this.eventNamespace,function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(h)}),c&&(this.element.bind("change"+this.eventNamespace,function(){r||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){s.disabled||(r=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){s.disabled||(i!==e.pageX||n!==e.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!s.disabled&&!r&&void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled||r)return!1;e(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var t=o.element[0];d(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!s.disabled&&(e(this).addClass("ui-state-active"),t=this,void o.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return!s.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return!s.disabled&&void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(s),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function r(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var a,o="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,r,a;n=t.nodeName.toLowerCase(),r="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),r),a.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,a):r&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,o,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,r,a,o=this._get(i,"appendText"),s=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(r=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:r,title:r}):r)),t[s?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,n=0,r=0;e.length>r;r++)e[r].length>i&&(i=e[r].length,n=r);return n},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,a,s){var l,d,c,u,h,f=this._dialogInst;return f||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},e.data(this._dialogInput[0],o,f)),r(f.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(d=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[d/2-100+u,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,f),this},_destroyDatepicker:function(t){var i,n=e(t),r=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===i?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,r=e(t),a=e.data(t,o);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=r.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,r=e(t),a=e.data(t,o);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=r.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,a){var o,s,l,d,c=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null:(o=n||{},"string"==typeof n&&(o={},o[n]=a),c&&(this._curInst===c&&this._hideDatepicker(),s=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(c,"min"),d=this._getMinMaxDate(c,"max"),r(c.settings,o),null!==l&&o.dateFormat!==t&&o.minDate===t&&(c.settings.minDate=this._formatDate(c,l)),null!==d&&o.dateFormat!==t&&o.maxDate===t&&(c.settings.maxDate=this._formatDate(c,d)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),c),this._autoSize(c),this._setDate(c,s),this._updateAlternate(c),this._updateDatepicker(c)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,a=e.datepicker._getInst(t.target),o=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),r[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,r[0]),i=e.datepicker._get(a,"onSelect"),i?(n=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[n,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var n,r,a=e.datepicker._getInst(i.target);return e.datepicker._get(a,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),r=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">r||!n||n.indexOf(r)>-1):t},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,s,l,d;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),s={left:e.datepicker._pos[0],
top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),s=e.datepicker._checkOffset(i,s,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),d=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),d):i.dpDiv[l||"show"](l?d:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,a=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),r=n[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),d=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?r-o:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+s?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+a>d&&d>a?Math.abs(a+s):0),i},_findPos:function(t){for(var i,n=this._getInst(t),r=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,r,a,s=this._curInst;!s||t&&s!==e.data(t,o)||this._datepickerShowing&&(i=this._get(s,"showAnim"),n=this._get(s,"duration"),r=function(){e.datepicker._tidyDialog(s)},e.effects&&(e.effects.effect[i]||e.effects[i])?s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),n,r):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1,a=this._get(s,"onClose"),a&&a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),a=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(a,i+("M"===n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),a=this._getInst(r[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(r)},_selectDay:function(t,i,n,r){var a,o=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",r).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=n,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),a=this._getInst(r[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),n=this._get(a,"onSelect"),n?n.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,r,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),r=this.formatDate(i,n,this._getFormatConfig(t)),e(a).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,n,r){if(null==i||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var a,o,s,l,d=0,c=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,f=(r?r.dayNames:null)||this._defaults.dayNames,p=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,g=(r?r.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,y=-1,b=-1,_=!1,w=function(e){var t=i.length>a+1&&i.charAt(a+1)===e;return t&&a++,t},E=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=RegExp("^\\d{1,"+i+"}"),a=n.substring(d).match(r);if(!a)throw"Missing number at position "+d;return d+=a[0].length,parseInt(a[0],10)},T=function(i,r,a){var o=-1,s=e.map(w(i)?a:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(s,function(e,i){var r=i[1];return n.substr(d,r.length).toLowerCase()===r.toLowerCase()?(o=i[0],d+=r.length,!1):t}),-1!==o)return o+1;throw"Unknown name at position "+d},S=function(){if(n.charAt(d)!==i.charAt(a))throw"Unexpected literal at position "+d;d++};for(a=0;i.length>a;a++)if(_)"'"!==i.charAt(a)||w("'")?S():_=!1;else switch(i.charAt(a)){case"d":y=E("d");break;case"D":T("D",h,f);break;case"o":b=E("o");break;case"m":v=E("m");break;case"M":v=T("M",p,g);break;case"y":m=E("y");break;case"@":l=new Date(E("@")),m=l.getFullYear(),v=l.getMonth()+1,y=l.getDate();break;case"!":l=new Date((E("!")-this._ticksTo1970)/1e4),m=l.getFullYear(),v=l.getMonth()+1,y=l.getDate();break;case"'":w("'")?S():_=!0;break;default:S()}if(n.length>d&&(s=n.substr(d),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(v=1,y=b;o=this._getDaysInMonth(m,v-1),!(o>=y);)v++,y-=o;if(l=this._daylightSavingAdjust(new Date(m,v-1,y)),l.getFullYear()!==m||l.getMonth()+1!==v||l.getDate()!==y)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},d=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",h=!1;if(t)for(n=0;e.length>n;n++)if(h)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":u+=d("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),r,a);break;case"o":u+=d("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=d("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),o,s);break;case"y":u+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,r=function(i){var n=e.length>t+1&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;e.length>t;t++)if(n)"'"!==e.charAt(t)||r("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),a=r,o=this._getFormatConfig(e);try{a=this.parseDate(i,n,o)||r}catch(e){n=t?"":n}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=n?a.getDate():0,e.currentMonth=n?a.getMonth():0,e.currentYear=n?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),a=n.getMonth(),o=n.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(r,a))}l=s.exec(i)}return new Date(r,a,o)},o=null==i||""===i?n:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?n:r(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?n:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),r===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,a,o,s,l,d,c,u,h,f,p,g,m,v,y,b,_,w,E,T,S,C,x,k,A,I,D,M,P,R,O,N,L,F,j,B,H=new Date,U=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),$=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),q=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),V=this._get(e,"stepMonths"),K=1!==Y[0]||1!==Y[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-G,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)Z--,0>Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-V,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+i+"</span></a>",r=this._get(e,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+V,1)),this._getFormatConfig(e)):r,a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+r+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+r+"</span></a>",o=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?X:U,o=W?this.formatDate(o,s,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",d=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+($?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+($?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",E=0;Y[0]>E;E++){for(T="",this.maxRows=4,S=0;Y[1]>S;S++){if(C=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),x=" ui-corner-all",k="",K){if(k+="<div class='ui-datepicker-group",Y[1]>1)switch(S){case 0:k+=" ui-datepicker-group-first",x=" ui-corner-"+($?"right":"left");break;case Y[1]-1:k+=" ui-datepicker-group-last",x=" ui-corner-"+($?"left":"right");break;default:k+=" ui-datepicker-group-middle",x=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===E?$?a:n:"")+(/all|right/.test(x)&&0===E?$?n:a:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,E>0||S>0,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)I=(w+c)%7,A+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[I]+"'>"+f[I]+"</span></th>";for(k+=A+"</tr></thead><tbody>",D=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),M=(this._getFirstDayOfMonth(ee,Z)-c+7)%7,P=Math.ceil((M+D)/7),R=K&&this.maxRows>P?this.maxRows:P,this.maxRows=R,O=this._daylightSavingAdjust(new Date(ee,Z,1-M)),N=0;R>N;N++){for(k+="<tr>",L=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(O)+"</td>":"",w=0;7>w;w++)F=m?m.apply(e.input?e.input[0]:null,[O]):[!0,""],j=O.getMonth()!==Z,B=j&&!y||!F[0]||Q&&Q>O||J&&O>J,L+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(O.getTime()===C.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===O.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+F[1]+(O.getTime()===X.getTime()?" "+this._currentClass:"")+(O.getTime()===U.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":B?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===U.getTime()?" ui-state-highlight":"")+(O.getTime()===X.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);k+=L+"</tr>"}Z++,Z>11&&(Z=0,ee++),k+="</tbody></table>"+(K?"</div>"+(Y[0]>0&&S===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),T+=k}_+=T}return _+=d,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,n,r,a,o,s){var l,d,c,u,h,f,p,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!m)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=n&&n.getFullYear()===i,d=r&&r.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=n.getMonth())&&(!d||r.getMonth()>=c)&&(_+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),f=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},p=f(u[0]),g=Math.max(p,f(u[1]||"")),p=n?Math.max(p,n.getFullYear()):p,g=r?Math.min(g,r.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=p;p++)e.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&m&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),r=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&i>t?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(0>t?t:r[0]*r[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),s=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(s+=n)),(!r||t.getTime()>=r.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!s||s>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),r=i.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(r.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:e("<a>").text(this.options.closeText).html(),icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var r,a;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),r=n.click,n.click=function(){r.apply(t.element[0],arguments)},a={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(r))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(r,a){n.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",r,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,r=n.resizable,a=this.uiDialog.css("position"),o="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,r){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(r))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(r,a){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",r,t(a))}}).css("position",a)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var r=this,a=!1,o={};e.each(n,function(e,n){r._setOption(e,n),e in t&&(a=!0),e in i&&(o[e]=n)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html}),"draggable"===e&&(i=r.is(":data(ui-draggable)"),i&&!t&&r.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=r.is(":data(ui-resizable)"),n&&!t&&r.resizable("destroy"),n&&"string"==typeof t&&r.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,
e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],r=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),i={my:n[0]+(0>r[0]?r[0]:"+"+r[0])+" "+n[1]+(0>r[1]?r[1]:"+"+r[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,r){var a,o,s,l=e(this),d=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,n.mode||"hide"),u=n.direction||"up",h=t.test(u),f=h?"height":"width",p=h?"top":"left",g=i.test(u),m={},v="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),d):e.effects.save(l,d),l.show(),a=e.effects.createWrapper(l).css({overflow:"hidden"}),o=a[f](),s=parseFloat(a.css(p))||0,m[f]=v?o:0,g||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),m[p]=v?s:o+s),v&&(a.css(f,0),g||a.css(p,s+o)),a.animate(m,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,d),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),d="hide"===l,c="show"===l,u=t.direction||"up",h=t.distance,f=t.times||5,p=2*f+(c||d?1:0),g=t.duration/p,m=t.easing,v="up"===u||"down"===u?"top":"left",y="up"===u||"left"===u,b=o.queue(),_=b.length;for((c||d)&&s.push("opacity"),e.effects.save(o,s),o.show(),e.effects.createWrapper(o),h||(h=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-h:2*h).animate(a,g,m)),d&&(h/=Math.pow(2,f-1)),a={},a[v]=0,n=0;f>n;n++)r={},r[v]=(y?"-=":"+=")+h,o.animate(r,g,m).animate(a,g,m),h=d?2*h:h/2;d&&(r={opacity:0},r[v]=(y?"-=":"+=")+h,o.animate(r,g,m)),o.queue(function(){d&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,p+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),d="show"===l,c=t.direction||"vertical",u="vertical"===c,h=u?"height":"width",f=u?"top":"left",p={};e.effects.save(o,s),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),r="IMG"===o[0].tagName?n:o,a=r[h](),d&&(r.css(h,0),r.css(f,a/2)),p[h]=d?a:0,p[f]=d?0:a/2,r.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){d||o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(r,t.mode||"hide"),s="show"===o,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:s?1:0};e.effects.save(r,a),r.show(),e.effects.createWrapper(r),n=t.distance||r["top"===d?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(d,"pos"===c?-n:n),u[d]=(s?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+n,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===u*h&&r()}function r(){f.css({visibility:"visible"}),e(b).remove(),g||f.hide(),i()}var a,o,s,l,d,c,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=u,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),g="show"===p,m=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/h),y=Math.ceil(f.outerHeight()/u),b=[];for(a=0;u>a;a++)for(l=m.top+a*y,c=a-(u-1)/2,o=0;h>o;o++)s=m.left+o*v,d=o-(h-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:s+(g?d*v:0),top:l+(g?c*y:0),opacity:g?0:1}).animate({left:s+(g?0:d*v),top:l+(g?0:c*y),opacity:g?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,r,a=e(this),o=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(a,t.mode||"hide"),l="show"===s,d="hide"===s,c=t.size||15,u=/([0-9]+)%/.exec(c),h=!!t.horizFirst,f=l!==h,p=f?["width","height"]:["height","width"],g=t.duration/2,m={},v={};e.effects.save(a,o),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),r=f?[n.width(),n.height()]:[n.height(),n.width()],u&&(c=parseInt(u[1],10)/100*r[d?0:1]),l&&n.css(h?{height:0,width:c}:{height:c,width:0}),m[p[0]]=l?r[0]:c,v[p[1]]=l?r[1]:0,n.animate(m,g,t.easing).animate(v,g,t.easing,function(){d&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(n,t.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),e.effects.restore(n,r),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,r=e(this),a=e.effects.setMode(r,t.mode||"show"),o="show"===a,s="hide"===a,l=o||"hide"===a,d=2*(t.times||5)+(l?1:0),c=t.duration/d,u=0,h=r.queue(),f=h.length;for((o||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),n=1;d>n;n++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing),r.queue(function(){s&&r.hide(),i()}),f>1&&h.splice.apply(h,[1,0].concat(h.splice(f,d+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"hide"),a="hide"===r,o=parseInt(t.percent,10)||150,s=o/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:i,percent:a?o:100,from:a?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),r=e.extend(!0,{},t),a=e.effects.setMode(n,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),s=t.direction||"both",l=t.origin,d={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},c={y:"horizontal"!==s?o/100:1,x:"vertical"!==s?o/100:1};r.effect="size",r.queue=!1,r.complete=i,"effect"!==a&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:d),r.to={height:d.height*c.y,width:d.width*c.x,outerHeight:d.outerHeight*c.y,outerWidth:d.outerWidth*c.x},r.fade&&("show"===a&&(r.from.opacity=0,r.to.opacity=1),"hide"===a&&(r.from.opacity=1,r.to.opacity=0)),n.effect(r)},e.effects.effect.size=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],d=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(o,t.mode||"effect"),p=t.restore||"effect"!==f,g=t.scale||"both",m=t.origin||["middle","center"],v=o.css("position"),y=p?s:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&o.show(),n={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===f?(o.from=t.to||b,o.to=t.from||n):(o.from=t.from||("show"===f?b:n),o.to=t.to||("hide"===f?b:n)),a={from:{y:o.from.height/n.height,x:o.from.width/n.width},to:{y:o.to.height/n.height,x:o.to.width/n.width}},("box"===g||"both"===g)&&(a.from.y!==a.to.y&&(y=y.concat(u),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,a.from.x,o.from),o.to=e.effects.setTransition(o,h,a.to.x,o.to))),("content"===g||"both"===g)&&a.from.y!==a.to.y&&(y=y.concat(c).concat(d),o.from=e.effects.setTransition(o,c,a.from.y,o.from),o.to=e.effects.setTransition(o,c,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(r=e.effects.getBaseline(m,n),o.from.top=(n.outerHeight-o.outerHeight())*r.y,o.from.left=(n.outerWidth-o.outerWidth())*r.x,o.to.top=(n.outerHeight-o.to.outerHeight)*r.y,o.to.left=(n.outerWidth-o.to.outerWidth)*r.x),o.css(o.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),h=h.concat(["marginLeft","marginRight"]),d=s.concat(u).concat(h),o.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,d),i.from={height:n.height*a.from.y,width:n.width*a.from.x,outerHeight:n.outerHeight*a.from.y,outerWidth:n.outerWidth*a.from.x},i.to={height:n.height*a.to.y,width:n.width*a.to.x,outerHeight:n.height*a.to.y,outerWidth:n.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,u,a.from.y,i.from),i.to=e.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,h,a.from.x,i.from),i.to=e.effects.setTransition(i,h,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,d)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===f&&o.hide(),e.effects.restore(o,y),p||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var n=parseInt(i,10),r=e?o.to.left:o.to.top;return"auto"===i?r+"px":n+r+"px"})})),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,d=t.times||3,c=2*d+1,u=Math.round(t.duration/c),h="up"===s||"down"===s?"top":"left",f="up"===s||"left"===s,p={},g={},m={},v=r.queue(),y=v.length;for(e.effects.save(r,a),r.show(),e.effects.createWrapper(r),p[h]=(f?"-=":"+=")+l,g[h]=(f?"+=":"-=")+2*l,m[h]=(f?"-=":"+=")+2*l,r.animate(p,u,t.easing),n=1;d>n;n++)r.animate(g,u,t.easing).animate(m,u,t.easing);r.animate(g,u,t.easing).animate(p,u/2,t.easing).queue(function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,c+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(r,t.mode||"show"),s="show"===o,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};e.effects.save(r,a),r.show(),n=t.distance||r["top"===d?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(d,c?isNaN(n)?"-"+n:-n:n),u[d]=(s?c?"+=":"-=":c?"-=":"+=")+n,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),r=e(t.to),a="fixed"===r.css("position"),o=e("body"),s=a?o.scrollTop():0,l=a?o.scrollLeft():0,d=r.offset(),c={top:d.top-s,left:d.left-l,height:r.innerHeight(),width:r.innerWidth()},u=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-s,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){h.remove(),i()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,a,o,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===r?o=!0:a=r+a,s=RegExp("^"+i(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())}),n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(a=String.fromCharCode(t.keyCode),s=RegExp("^"+i(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,a,o,s;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-i-n,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),0>r?this.activeMenu.scrollTop(a+r):r+s>o&&this.activeMenu.scrollTop(a+r-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-n-r}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+r>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function r(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,o=Math.max,s=Math.abs,l=Math.round,d=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(a!==t)return a;var i,n,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),i=o.offsetWidth,r.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),a=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var a,f,g,m,v,y,b=e(t.of),_=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(_),E=(t.collision||"flip").split(" "),T={};return y=r(b),b[0].preventDefault&&(t.at="left top"),f=y.width,g=y.height,m=y.offset,v=e.extend({},m),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=d.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=d.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),T[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===E.length&&(E[1]=E[0]),"right"===t.at[0]?v.left+=f:"center"===t.at[0]&&(v.left+=f/2),"bottom"===t.at[1]?v.top+=g:"center"===t.at[1]&&(v.top+=g/2),a=i(T.at,f,g),v.left+=a[0],v.top+=a[1],this.each(function(){var r,d,c=e(this),u=c.outerWidth(),h=c.outerHeight(),p=n(this,"marginLeft"),y=n(this,"marginTop"),S=u+p+n(this,"marginRight")+w.width,C=h+y+n(this,"marginBottom")+w.height,x=e.extend({},v),k=i(T.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?x.left-=u:"center"===t.my[0]&&(x.left-=u/2),"bottom"===t.my[1]?x.top-=h:"center"===t.my[1]&&(x.top-=h/2),x.left+=k[0],x.top+=k[1],e.support.offsetFractions||(x.left=l(x.left),x.top=l(x.top)),r={marginLeft:p,marginTop:y},e.each(["left","top"],function(i,n){e.ui.position[E[i]]&&e.ui.position[E[i]][n](x,{targetWidth:f,targetHeight:g,elemWidth:u,elemHeight:h,collisionPosition:r,collisionWidth:S,collisionHeight:C,offset:[a[0]+k[0],a[1]+k[1]],my:t.my,at:t.at,within:_,elem:c})}),t.using&&(d=function(e){var i=m.left-x.left,n=i+f-u,r=m.top-x.top,a=r+g-h,l={target:{element:b,left:m.left,top:m.top,width:f,height:g},element:{element:c,left:x.left,top:x.top,width:u,height:h},horizontal:0>n?"left":i>0?"right":"center",vertical:0>a?"top":r>0?"bottom":"middle"};u>f&&f>s(i+n)&&(l.horizontal="center"),h>g&&g>s(r+a)&&(l.vertical="middle"),l.important=o(s(i),s(n))>o(s(r),s(a))?"horizontal":"vertical",t.using.call(this,e,l)}),c.offset(e.extend(x,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,d=s+t.collisionWidth-a-r;t.collisionWidth>a?l>0&&0>=d?(i=e.left+l+t.collisionWidth-a-r,e.left+=l-i):e.left=d>0&&0>=l?r:l>d?r+a-t.collisionWidth:r:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-s,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,d=s+t.collisionHeight-a-r;t.collisionHeight>a?l>0&&0>=d?(i=e.top+l+t.collisionHeight-a-r,e.top+=l-i):e.top=d>0&&0>=l?r:l>d?r+a-t.collisionHeight:r:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,a=r.offset.left+r.scrollLeft,o=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>c?(i=e.left+h+f+p+t.collisionWidth-o-a,(0>i||s(c)>i)&&(e.left+=h+f+p)):u>0&&(n=e.left-t.collisionPosition.marginLeft+h+f+p-l,(n>0||u>s(n))&&(e.left+=h+f+p))},top:function(e,t){var i,n,r=t.within,a=r.offset.top+r.scrollTop,o=r.height,l=r.isWindow?r.scrollTop:r.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-o-l,h="top"===t.my[1],f=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];0>c?(n=e.top+f+p+g+t.collisionHeight-o-a,e.top+f+p+g>c&&(0>n||s(c)>n)&&(e.top+=f+p+g)):u>0&&(i=e.top-t.collisionPosition.marginTop+f+p+g-l,e.top+f+p+g>u&&(i>0||u>s(i))&&(e.top+=f+p+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,r,a,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in n)t.style[a]=n[a];t.appendChild(s),i=o||document.documentElement,i.insertBefore(t,i.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=n.values&&n.values.length||1,r.length>i&&(r.slice(i).remove(),r=r.slice(0,i)),t=r.length;i>t;t++)o.push(a);this.handles=r.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,a,o,s,l,d,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));(r>i||r===i&&(t===c._lastChangedValue||c.values(t)===u.min))&&(r=i,a=e(this),o=t)}),s=this._start(t,o),s!==!1&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),d=!e(t.target).parents().addBack().is(".ui-slider-handle"),
this._clickOffset=d?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),a=this._valueMin()+n*r,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,a;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(r=this.values(),r[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),n=this.values(t?0:1),a!==!1&&this.values(t,i,!0))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,r,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,r=arguments[0],a=0;n.length>a;a+=1)n[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var n,r=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;r>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,r,a,o=this.options.range,s=this.options,l=this,d=!this._animateOff&&s.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},s.animate),1===n&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},s.animate),1===n&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:s.animate}))),t=i}):(n=this.value(),r=this._valueMin(),a=this._valueMax(),i=a!==r?100*((n-r)/(a-r)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(i){var n,r,a,o,s=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,s),n===!1))return}switch(o=this.options.step,r=a=this.options.values&&this.options.values.length?this.values(s):this.value(),i.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;a=this._trimAlignValue(r+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;a=this._trimAlignValue(r-o)}this._slide(i,s,a)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var r=i.attr(n);void 0!==r&&r.length&&(t[n]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&n.min>e?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++r}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var r=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);return null===i&&(r&&this.tabs.each(function(n,a){return e(a).attr("aria-controls")===r?(i=n,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=!!this.tabs.length&&0)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=!n&&0)),!n&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(i){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),a=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:a=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(r),t;case e.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(r!==this.options.active&&r),t;default:return}i.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,a),i.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function n(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,i){return"active"===e?(this._activate(i),t):"disabled"===e?(this._setupDisabled(i),t):(this._super(e,i),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(i),"heightStyle"===e&&this._setupHeightStyle(i),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,r){var a,o,s,l=e(r).uniqueId().attr("id"),d=e(r).closest("li"),c=d.attr("aria-controls");n(r)?(a=r.hash,o=t.element.find(t._sanitizeSelector(a))):(s=t._tabId(d),a="#"+s,o=t.element.find(a),o.length||(o=t._createPanel(s),o.insertAfter(t.panels[i-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&d.data("ui-tabs-aria-controls",c),d.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),a=r.closest("li"),o=a[0]===n[0],s=o&&i.collapsible,l=s?e():this._getPanelForTab(a),d=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:d,newTab:s?e():a,newPanel:l};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=!s&&this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),d.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),t),this._toggle(t,c))},_toggle:function(t,i){function n(){a.running=!1,a._trigger("activate",t,i)}function r(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,n):(o.show(),n())}var a=this,o=i.newPanel,s=i.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),r()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&s.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var r=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),s=this._getPanelForTab(a),l={tab:a,panel:s};n(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){s.html(e),r._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&r.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,a){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);-1!==r&&n.splice(r,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,r=this,a=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&r._delay(function(){t&&(t.type=a),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,r){function a(e){d.of=e,o.is(":hidden")||o.position(d)}var o,s,l,d=e.extend({},this.options.position);if(r){if(o=this._find(n),o.length)return void o.find(".ui-tooltip-content").html(r);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),t(n,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(d.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:o}),s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(s.mouseleave="close"),i&&"focusin"!==i.type||(s.focusout="close"),this._on(!0,n,s)}},close:function(t){var n=this,r=e(t?t.currentTarget:this.element),a=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),a.stop(!0),this._hide(a,this.options.hide,function(){n._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,r=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[i]=t,r},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),/*! jPlayer 2.9.2 for jQuery ~ (c) 2009-2014 Happyworm Ltd ~ MIT License */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery?e.jQuery:e.Zepto)}(this,function(e,t){e.fn.jPlayer=function(i){var n="jPlayer",r="string"==typeof i,a=Array.prototype.slice.call(arguments,1),o=this;return i=!r&&a.length?e.extend.apply(null,[!0,i].concat(a)):i,r&&"_"===i.charAt(0)?o:(this.each(r?function(){var r=e(this).data(n),s=r&&e.isFunction(r[i])?r[i].apply(r,a):r;return s!==r&&s!==t?(o=s,!1):void 0}:function(){var t=e(this).data(n);t?t.option(i||{}):e(this).data(n,new e.jPlayer(i,this))}),o)},e.jPlayer=function(t,i){if(arguments.length){this.element=e(i),this.options=e.extend(!0,{},this.options,t);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof e.fn.stop&&(e.fn.stop=function(){}),e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={},e.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){e.jPlayer.event[this]="jPlayer_"+this}),e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],e.jPlayer.pause=function(){e.jPlayer.prototype.destroyRemoved(),e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){e=e&&"number"==typeof e?e:0;var t=new Date(1e3*e),i=t.getUTCHours(),n=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*i,r=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*n,a=this.options.timeFormat.padHour&&10>i?"0"+i:i,o=this.options.timeFormat.padMin&&10>n?"0"+n:n,s=this.options.timeFormat.padSec&&10>r?"0"+r:r,l="";return l+=this.options.timeFormat.showHour?a+this.options.timeFormat.sepHour:"",l+=this.options.timeFormat.showMin?o+this.options.timeFormat.sepMin:"",l+=this.options.timeFormat.showSec?s+this.options.timeFormat.sepSec:""}};var n=new i;e.jPlayer.convertTime=function(e){return n.time(e)},e.jPlayer.uaBrowser=function(e){var t=e.toLowerCase(),i=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,r=/(msie) ([\w.]+)/,a=/(mozilla)(?:.*? rv:([\w.]+))?/,o=i.exec(t)||n.exec(t)||r.exec(t)||t.indexOf("compatible")<0&&a.exec(t)||[];return{browser:o[1]||"",version:o[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),i=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,n=/(ipad|playbook)/,r=/(android)/,a=/(mobile)/,o=i.exec(t)||[],s=n.exec(t)||!a.exec(t)&&r.exec(t)||[];return o[1]&&(o[1]=o[1].replace(/\s/g,"_")),{platform:o[1]||"",tablet:s[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var r=e.jPlayer.uaBrowser(navigator.userAgent);r.browser&&(e.jPlayer.browser[r.browser]=!0,e.jPlayer.browser.version=r.version);var a=e.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(e.jPlayer.platform[a.platform]=!0,e.jPlayer.platform.mobile=!a.tablet,e.jPlayer.platform.tablet=!!a.tablet),e.jPlayer.getDocMode=function(){var t;return e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7))),t},e.jPlayer.browser.documentMode=e.jPlayer.getDocMode(),e.jPlayer.nativeFeatures={init:function(){var e,t,i,n=document,r=n.createElement("video"),a={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},o=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=e={support:{w3c:!!n[a.w3c[0]],moz:!!n[a.moz[0]],webkit:"function"==typeof n[a.webkit[3]],webkitVideo:"function"==typeof r[a.webkitVideo[2]],ms:"function"==typeof r[a.ms[2]]},used:{}},t=0,i=o.length;i>t;t++){var s=o[t];if(e.support[s]){e.spec=s,e.used[s]=!0;break}}if(e.spec){var l=a[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return e=e?e:n,e[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return e=e?e:n,e[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={}}},e.jPlayer.nativeFeatures.init(),e.jPlayer.focus=null,e.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var o=function(t){var i,n=e.jPlayer.focus;n&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,n){return t.target.nodeName.toUpperCase()===n.toUpperCase()?(i=!0,!1):void 0}),i||e.each(n.options.keyBindings,function(i,r){return r&&e.isFunction(r.fn)&&("number"==typeof r.key&&t.which===r.key||"string"==typeof r.key&&t.key===r.key)?(t.preventDefault(),r.fn(n),!1):void 0}))};e.jPlayer.keys=function(t){var i="keydown.jPlayer";e(document.documentElement).unbind(i),t&&e(document.documentElement).bind(i,o)},e.jPlayer.keys(!0),e.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},e.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var a=!1;e.each(i.formats,function(e,t){return r===t?(a=!0,!1):void 0}),a||i.formats.push(r)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.solution[r]){var a=!1;e.each(i.solutions,function(e,t){return r===t?(a=!0,!1):void 0}),a||i.solutions.push(r)}}),e.each(this.options.auroraFormats.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var a=!1;e.each(i.aurora.formats,function(e,t){return r===t?(a=!0,!1):void 0}),a||i.aurora.formats.push(r)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,n){i.options[e]!==t&&(i.element.bind(n+".jPlayer",i.options[e]),i.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){i.require[i.format[t].media]=!0}),this.options=this.require.video?e.extend(!0,{},this.optionsVideo,this.options):e.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},e.each(this.formats,function(t,n){i.html.canPlay[n]=i.html[i.format[n].media].available&&""!==i.htmlElement[i.format[n].media].canPlayType(i.format[n].codec),i.aurora.canPlay[n]=e.inArray(n,i.aurora.formats)>-1,i.flash.canPlay[n]=i.format[n].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,n){if(0===t)i[n].desired=!0;else{var r=!1,a=!1;e.each(i.formats,function(e,t){i[i.solutions[0]].canPlay[t]&&("video"===i.format[t].media?a=!0:r=!0)}),i[n].desired=i.require.audio&&!r||i.require.video&&!a}}),this.html.support={},this.aurora.support={},this.flash.support={},e.each(this.formats,function(e,t){i.html.support[t]=i.html.canPlay[t]&&i.html.desired,i.aurora.support[t]=i.aurora.canPlay[t]&&i.aurora.desired,i.flash.support[t]=i.flash.canPlay[t]&&i.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,n){e.each(i.formats,function(e,t){return i[n].support[t]?(i[n].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,r="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(Number(e.jPlayer.browser.version)<9||e.jPlayer.browser.documentMode<9)){var a='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',o=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+r+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];n=document.createElement(a);for(var s=0;s<o.length;s++)n.appendChild(document.createElement(o[s]))}else{var l=function(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)};n=document.createElement("object"),n.setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),l(n,"flashvars",r),l(n,"allowscriptaccess","always"),l(n,"bgcolor",this.options.backgroundColor),l(n,"wmode",this.options.wmode)}this.element.append(n),this.internal.flash.jq=e(n)}this.status.playbackRateEnabled=!(!this.html.used||this.flash.used)&&this._testPlaybackRate("audio"),this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(e.jPlayer.event.repeat),i._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===e.jPlayer.focus&&(e.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var t=this;e.each(this.instances,function(e,i){t.element!==i&&(i.data("jPlayer")||(i.jPlayer("destroy"),delete t.instances[e]))})},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(e){return!1}},_testPlaybackRate:function(e){var t,i=.5;e="string"==typeof e?e:"audio",t=document.createElement(e);try{return"playbackRate"in t&&(t.playbackRate=i,t.playbackRate===i)}catch(e){return!1}},_uaBlocklist:function(t){var i=navigator.userAgent.toLowerCase(),n=!1;return e.each(t,function(e,t){return t&&t.test(i)?(n=!0,!1):void 0}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,i){var n=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,this.status.playbackRateEnabled&&(t.defaultPlaybackRate=this.options.defaultPlaybackRate,t.playbackRate=this.options.playbackRate),t.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("loadeddata",function(){i.gate&&(n.androidFix.setMedia=!1,n.androidFix.play&&(n.androidFix.play=!1,n.play(n.androidFix.time)),n.androidFix.pause&&(n.androidFix.pause=!1,n.pause(n.androidFix.time)),n._trigger(e.jPlayer.event.loadeddata))},!1),t.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){i.gate&&(n.options.volume=t.volume,n.options.muted=t.muted,n._updateMute(),n._updateVolume(),n._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("ratechange",function(){i.gate&&(n.options.defaultPlaybackRate=t.defaultPlaybackRate,n.options.playbackRate=t.playbackRate,n._updatePlaybackRate(),n._trigger(e.jPlayer.event.ratechange))},!1),t.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){i.gate&&(e.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(r,a){t.addEventListener(this,function(){i.gate&&n._trigger(e.jPlayer.event[a])},!1)})},_addAuroraEventListeners:function(t,i){var n=this;t.volume=100*this.options.volume,t.on("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress),t.duration>0&&n._trigger(e.jPlayer.event.timeupdate))},!1),t.on("ready",function(){i.gate&&n._trigger(e.jPlayer.event.loadeddata)},!1),t.on("duration",function(){i.gate&&(n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.on("end",function(){i.gate&&(n._updateButtons(!1),n._getAuroraStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.on("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(e,t){var i=0,n=0,r=0,a=0;isFinite(e.duration)&&(this.status.duration=e.duration),i=e.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(r=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,a=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(r=100,a=n),t&&(i=0,a=0,n=0),this.status.seekPercent=r,this.status.currentPercentRelative=a,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_getAuroraStatus:function(e,t){var i=0,n=0,r=0,a=0;this.status.duration=e.duration/1e3,i=e.currentTime/1e3,n=this.status.duration>0?100*i/this.status.duration:0,e.buffered>0?(r=this.status.duration>0?e.buffered*this.status.duration/this.status.duration:100,a=this.status.duration>0?i/(e.buffered*this.status.duration):0):(r=100,a=n),t&&(i=0,a=0,n=0),this.status.seekPercent=r,this.status.currentPercentRelative=a,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,i,n){var r=e.Event(t);r.jPlayer={},r.jPlayer.version=e.extend({},this.version),r.jPlayer.options=e.extend(!0,{},this.options),r.jPlayer.status=e.extend(!0,{},this.status),r.jPlayer.html=e.extend(!0,{},this.html),r.jPlayer.aurora=e.extend(!0,{},this.aurora),r.jPlayer.flash=e.extend(!0,{},this.flash),i&&(r.jPlayer.error=e.extend({},i)),n&&(r.jPlayer.warning=e.extend({},n)),this.element.trigger(r)},jPlayerFlashEvent:function(t,i){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,r=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),n>0&&(r?this.pause(n):this.play(n))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:i.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.remaining=e.duration-e.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e,e?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var e="";this.css.jq.currentTime.length&&(e=this._convertTime(this.status.currentTime),e!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var t="",i=this.status.duration,n=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?t=this.status.media.duration:("number"==typeof this.status.media.duration&&(i=this.status.media.duration,n=i-this.status.currentTime),t=this.options.remainingDuration?(n>0?"-":"")+this._convertTime(n):this._convertTime(i)),t!==this.css.jq.duration.text()&&this.css.jq.duration.text(t))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this._escapeHtml(e)+'">x</a>',t.firstChild.href},_absoluteMediaUrls:function(t){var i=this;return e.each(t,function(e,n){n&&i.format[e]&&"data:"!==n.substr(0,5)&&(t[e]=i._qualifyURL(n))}),t},addStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[e])},removeStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[e])},setMedia:function(t){var i=this,n=!1,r=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,t=this._absoluteMediaUrls(t),e.each(this.formats,function(r,a){var o="video"===i.format[a].media;return e.each(i.solutions,function(r,s){
if(i[s].support[a]&&i._validString(t[a])){var l="html"===s,d="aurora"===s;return o?(l?(i.html.video.gate=!0,i._html_setVideo(t),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(l?(i.html.audio.gate=!0,i._html_setAudio(t),i.html.active=!0,e.jPlayer.platform.android&&(i.androidFix.setMedia=!0)):d?(i.aurora.gate=!0,i._aurora_setAudio(t),i.aurora.active=!0):(i.flash.gate=!0,i._flash_setAudio(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),!n&&void 0}),n?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(t.poster)&&(r?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),"string"==typeof t.title&&(this.css.jq.title.length&&this.css.jq.title.html(t.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",t.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",t.title)),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface(),this._trigger(e.jPlayer.event.setmedia)):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&!this.status.paused?this.pause(e):(e="number"==typeof e?e:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.aurora.active?this._aurora_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.aurora.active?this._aurora_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},tellOthers:function(t,i){var n=this,r="function"==typeof i,a=Array.prototype.slice.call(arguments);"string"==typeof t&&(r&&a.splice(1,1),e.jPlayer.prototype.destroyRemoved(),e.each(this.instances,function(){n.element!==this&&(!r||i.call(this.data("jPlayer"),n))&&this.jPlayer.apply(this,a)}))},pauseOthers:function(e){this.tellOthers("pause",function(){return this.status.srcSet},e)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.aurora.active?this._aurora_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(e){this.mutedWorker(e),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},e)},mutedWorker:function(t){this.options.muted=t,this.html.used&&this._html_setProperty("muted",t),this.aurora.used&&this._aurora_mute(t),this.flash.used&&this._flash_mute(t),this.html.video.gate||this.html.audio.gate||(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){var i="object"==typeof e;i&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(e=e===t||!!e,this._muted(e))},unmute:function(e){e=e===t||!!e,this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted),e?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){this.volumeWorker(e),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},e)},volumeWorker:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_setProperty("volume",t),this.aurora.used&&this._aurora_volume(t),this.flash.used&&this._flash_volume(t),this.html.video.gate||this.html.audio.gate||(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var i=e(t.currentTarget),n=i.offset(),r=t.pageX-n.left,a=i.width(),o=i.height()-t.pageY+n.top,s=i.height();this.volume(this.options.verticalVolume?o/s:r/a)}this.options.muted&&this._muted(!1)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var i=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){i._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(t,i){var n=this;if("string"==typeof i)if(e.jPlayer.prototype.options.cssSelector[t]){if(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=i,this.css.cs[t]=this.options.cssSelectorAncestor+" "+i,this.css.jq[t]=i?e(this.css.cs[t]):[],this.css.jq[t].length&&this[t]){var r=function(i){i.preventDefault(),n[t](i),n.options.autoBlur?e(this).blur():e(this).focus()};this.css.jq[t].bind("click.jPlayer",r)}i&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(e){this.options.toggleDuration&&(this.options.captureDuration&&e.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(t){if(this.css.jq.seekBar.length){var i=e(t.currentTarget),n=i.offset(),r=t.pageX-n.left,a=i.width(),o=100*r/a;this.playHead(o)}},playbackRate:function(e){this._setOption("playbackRate",e)},playbackRateBar:function(t){if(this.css.jq.playbackRateBar.length){var i,n,r=e(t.currentTarget),a=r.offset(),o=t.pageX-a.left,s=r.width(),l=r.height()-t.pageY+a.top,d=r.height();i=this.options.verticalPlaybackRate?l/d:o/s,n=i*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(n)}},_updatePlaybackRate:function(){var e=this.options.playbackRate,t=(e-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*t+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(e){var t="object"==typeof e;this._loop(!(t&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},option:function(i,n){var r=i;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof i){var a=i.split(".");if(n===t){for(var o=e.extend(!0,{},this.options),s=0;s<a.length;s++){if(o[a[s]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:i,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;o=o[a[s]]}return o}r={};for(var l=r,d=0;d<a.length;d++)d<a.length-1?(l[a[d]]={},l=l[a[d]]):l[a[d]]=n}return this._setOptions(r),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(t,i){var n=this;switch(t){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"globalVolume":this.options[t]=i;break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":e.each(i,function(e,t){n._cssSelector(e,t)});break;case"playbackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",i),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",i),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[t]=i=this._limitValue(i,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[t]!==i){var r=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!r||r&&!this.status.waitForPlay)&&(r||(this.options[t]=i),i?this._requestFullscreen():this._exitFullscreen(),r||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[t]!==i&&(this._removeUiClass(),this.options[t]=i,this._refreshSize());break;case"size":this.options.fullWindow||this.options[t].cssClass===i.cssClass||this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==i.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"remainingDuration":this.options[t]=i,this._updateInterface();break;case"toggleDuration":this.options[t]=i;break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==i&&(this.options[t]=i,i?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],i);break;case"keyEnabled":this.options[t]=i,i||this!==e.jPlayer.focus||(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(!0,{},this.options[t],i);break;case"audioFullScreen":this.options[t]=i;break;case"autoBlur":this.options[t]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t="mousemove.jPlayer",i=".jPlayerAutohide",n=t+i,r=function(t){var i,n,r=!1;"undefined"!=typeof e.internal.mouse?(i=e.internal.mouse.x-t.pageX,n=e.internal.mouse.y-t.pageY,r=Math.floor(i)>0||Math.floor(n)>0):r=!0,e.internal.mouse={x:t.pageX,y:t.pageY},r&&e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId),e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(i),this.css.jq.gui.unbind(i),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(n,r),this.css.jq.gui.bind(n,r),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var t=this,i=e.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var t=e.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(t.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(t)},_exitFullscreen:function(){var t,i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(t)},_html_initMedia:function(t){var i=e(this.htmlElement.media).empty();e.each(t.track||[],function(e,t){var n=document.createElement("track");n.setAttribute("kind",t.kind?t.kind:""),n.setAttribute("src",t.src?t.src:""),n.setAttribute("srclang",t.srclang?t.srclang:""),n.setAttribute("label",t.label?t.label:""),t.def&&n.setAttribute("default",t.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var i=this;e.each(this.formats,function(e,n){return i.html.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0})},_html_setAudio:function(e){this._html_setFormat(e),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=e;else if(isNaN(e))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e,i.play()}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250))}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.play=!1,e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=e;else if(!isNaN(e))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250))}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=e*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=e*i.duration/100}}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(e,t){this.html.audio.available&&(this.htmlElement.audio[e]=t),this.html.video.available&&(this.htmlElement.video[e]=t)},_aurora_setAudio:function(t){var i=this;e.each(this.formats,function(e,n){return i.aurora.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(t){this.status.waitForLoad||isNaN(t)||this.aurora.player.seek(t),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(e.jPlayer.event.play)},_aurora_pause:function(t){isNaN(t)||this.aurora.player.seek(1e3*t),this.aurora.player.pause(),t>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(e.jPlayer.event.pause)},_aurora_playHead:function(e){this.aurora.player.duration>0&&this.aurora.player.seek(e*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(e){this.aurora.player.volume=100*e},_aurora_mute:function(e){e?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=e},_flash_setAudio:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(t[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(t[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_setVideo:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(t[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(e){this._flashError(e)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(e){this._flashError(e)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(e){this._flashError(e)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e,t=0;if(window.ActiveXObject)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=e.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),t=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(e){}else navigator.plugins&&navigator.mimeTypes.length>0&&(e=navigator.plugins["Shockwave Flash"],e&&(t=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*t},_checkForFlash:function(e){var t=!1;return this._getFlashPluginVersion()>=e&&(t=!0),t},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,i){return t>e?t:e>i?i:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var i;i=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:e.jPlayer.error[i],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[i]+t.message,hint:e.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n"+t.message:"")+(t.hint?"\n"+t.hint:"")+"\nContext: "+t.context)},_warning:function(i){this._trigger(e.jPlayer.event.warning,t,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n"+i.message:"")+(i.hint?"\n"+i.hint:"")+"\nContext: "+i.context)},_alert:function(e){var t="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(t):alert(t)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,i){t.internal.domNode[i]=function(e){t[i](e)}}),e.each(e.jPlayer.event,function(i,n){var r=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){return t===i?(r=!1,!1):void 0}),r&&t.element.bind(n+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(i,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.status[i]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.options[i]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml");var i=e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions;e.each(i.split(/\s+/g),function(e,i){delete t.internal.domNode[i]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),!function(e,t,i,n){var r=t.document,a=e(r),o=e(t),s=Array.prototype,l=1.41,d=!0,c=3e4,u=!1,h=navigator.userAgent.toLowerCase(),f=t.location.hash.replace(/#\//,""),p=t.location.protocol,g=Math,m=function(){},v=function(){return!1},y=function(){var e=3,t=r.createElement("div"),i=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(i[0]);return e>4?e:r.documentMode||n}(),b=function(){return{html:r.documentElement,body:r.body,head:r.getElementsByTagName("head")[0],title:r.title}},_=t.parent!==t.self,w="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",E=function(){var t=[];return e.each(w.split(" "),function(e,i){t.push(i),/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),T=function(t){var i;return"object"!=typeof t?t:(e.each(t,function(n,r){/^[a-z]+_/.test(n)&&(i="",e.each(n.split("_"),function(e,t){i+=e>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=r,delete t[n])}),t)},S=function(t){return e.inArray(t,E)>-1?i[t.toUpperCase()]:t},C={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return"http://www.youtube.com/embed/"+this.id},getUrl:function(){return p+"//gdata.youtube.com/feeds/api/videos/"+this.id+"?v=2&alt=json-in-script&callback=?"},get_thumb:function(e){return e.entry.media$group.media$thumbnail[2].url},get_image:function(e){return e.entry.yt$hd?p+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg":e.entry.media$group.media$thumbnail[3].url}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return"http://player.vimeo.com/video/"+this.id},getUrl:function(){return p+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(e){return e[0].thumbnail_medium},get_image:function(e){return e[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return p+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(e){return e.thumbnail_240_url},get_image:function(e){return e.thumbnail_720_url}},_inst:[]},x=function(t,i){for(var n=0;n<C._inst.length;n++)if(C._inst[n].id===i&&C._inst[n].type==t)return C._inst[n];this.type=t,this.id=i,this.readys=[],C._inst.push(this);var r=this;e.extend(this,C[t]),e.getJSON(this.getUrl(),function(t){r.data=t,e.each(r.readys,function(e,t){t(r.data)}),r.readys=[]}),this.getMedia=function(e,t,i){i=i||m;var n=this,r=function(i){t(n["get_"+e](i))};try{n.data?r(n.data):n.readys.push(r)}catch(e){i()}}},k=function(e){var t;for(var i in C)if(t=e&&C[i].reg&&e.match(C[i].reg),t&&t.length)return{id:t[2],provider:i};return!1},A={support:function(){var e=b().html;return!_&&(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen)}(),callback:m,enter:function(e,t,i){this.instance=e,this.callback=t||m,i=i||b().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(e){this.callback=e||m,r.exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitCancelFullScreen&&r.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var e=function(){if(A.instance){var e=A.instance._fullscreen;r.fullscreen||r.mozFullScreen||r.webkitIsFullScreen||r.msFullscreenElement&&null!==r.msFullscreenElement?e._enter(A.callback):e._exit(A.callback)}};r.addEventListener("fullscreenchange",e,!1),r.addEventListener("MSFullscreenChange",e,!1),r.addEventListener("mozfullscreenchange",e,!1),r.addEventListener("webkitfullscreenchange",e,!1)}}},I=[],D=[],M=!1,P=!1,R=[],O=[],N=function(t){O.push(t),e.each(R,function(e,i){i._options.theme!=t.name&&(i._initialized||i._options.theme)||(i.theme=t,i._init.call(i))})},L=function(){return{clearTimer:function(t){e.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){e.each(i.get(),function(){this.addTimer(t)})},array:function(e){return s.slice.call(e,0)},create:function(e,t){t=t||"div";var i=r.createElement(t);return i.className=e,i},removeFromArray:function(t,i){return e.each(t,function(e,n){if(n==i)return t.splice(e,1),!1}),t},getScriptPath:function(t){t=t||e("script:last").attr("src");var i=t.split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:function(){var n,a,o,s,l,d,c,u=function(e){
var i,n="transition WebkitTransition MozTransition OTransition".split(" ");if(t.opera)return!1;for(i=0;n[i];i++)if("undefined"!=typeof e[n[i]])return n[i];return!1}((r.body||r.documentElement).style),h={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[u],f={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},p=function(t,i,n){var r={};n=n||"transition",e.each("webkit moz ms o".split(" "),function(){r["-"+this+"-"+n]=i}),t.css(r)},g=function(e){p(e,"none","transition"),i.WEBKIT&&i.TOUCH&&(p(e,"translate3d(0,0,0)","transform"),e.data("revert")&&(e.css(e.data("revert")),e.data("revert",null)))};return function(r,v,y){return y=e.extend({duration:400,complete:m,stop:!1},y),r=e(r),y.duration?u?(y.stop&&(r.off(h),g(r)),n=!1,e.each(v,function(e,t){c=r.css(e),L.parseValue(c)!=L.parseValue(t)&&(n=!0),r.css(e,c)}),n?(a=[],o=y.easing in f?f[y.easing]:f._default,s=" "+y.duration+"ms cubic-bezier("+o.join(",")+")",void t.setTimeout(function(t,n,r,o){return function(){t.one(n,function(e){return function(){g(e),y.complete.call(e[0])}}(t)),i.WEBKIT&&i.TOUCH&&(l={},d=[0,0,0],e.each(["left","top"],function(e,i){i in r&&(d[e]=L.parseValue(r[i])-L.parseValue(t.css(i))+"px",l[i]=r[i],delete r[i])}),(d[0]||d[1])&&(t.data("revert",l),a.push("-webkit-transform"+o),p(t,"translate3d("+d.join(",")+")","transform"))),e.each(r,function(e){a.push(e+o)}),p(t,a.join(",")),t.css(r)}}(r,h,v,s),2)):void t.setTimeout(function(){y.complete.call(r[0])},y.duration)):void r.animate(v,y):(r.css(v),void y.complete.call(r[0]))}}(),removeAlpha:function(e){if(e instanceof jQuery&&(e=e[0]),y<9&&e){var t=e.style,i=e.currentStyle,n=i&&i.filter||t.filter||"";/alpha/.test(n)&&(t.filter=n.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){t=e(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){e.each(L.array(arguments),function(t,i){i=e(i),i.removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(e){L.forceStyles(e,{position:"absolute",left:-1e4})},moveIn:function(){L.revertStyles.apply(L,L.array(arguments))},hide:function(t,i,n){n=n||m;var r=e(t);t=r[0],r.data("opacity")||r.data("opacity",r.css("opacity"));var a={opacity:0};if(i){var o=y<9&&t?function(){L.removeAlpha(t),t.style.visibility="hidden",n.call(t)}:n;L.animate(t,a,{duration:i,complete:o,stop:!0})}else y<9&&t?(L.removeAlpha(t),t.style.visibility="hidden"):r.css(a)},show:function(t,i,n){n=n||m;var r=e(t);t=r[0];var a=parseFloat(r.data("opacity"))||1,o={opacity:a};if(i){y<9&&(r.css("opacity",0),t.style.visibility="visible");var s=y<9&&t?function(){1==o.opacity&&L.removeAlpha(t),n.call(t)}:n;L.animate(t,o,{duration:i,complete:s,stop:!0})}else y<9&&1==o.opacity&&t?(L.removeAlpha(t),t.style.visibility="visible"):r.css(o)},wait:function(n){i._waiters=i._waiters||[],n=e.extend({until:v,success:m,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},n);var r,a,o,s=L.timestamp(),l=function(){return a=L.timestamp(),r=a-s,L.removeFromArray(i._waiters,o),n.until(r)?(n.success(),!1):"number"==typeof n.timeout&&a>=s+n.timeout?(n.error(),!1):void i._waiters.push(o=t.setTimeout(l,10))};i._waiters.push(o=t.setTimeout(l,10))},toggleQuality:function(e,t){7!==y&&8!==y||!e||"IMG"!=e.nodeName.toUpperCase()||("undefined"==typeof t&&(t="nearest-neighbor"===e.style.msInterpolationMode),e.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){if(!i||!e("#"+i).length){var n=r.createElement("style");if(i&&(n.id=i),b().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=t;else{var a=r.createTextNode(t);n.appendChild(a)}}},loadScript:function(t,i){var n=!1,r=e("<script>").attr({src:t,async:!0}).get(0);r.onload=r.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,r.onload=r.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},b().head.appendChild(r)},parseValue:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=e.match(/\-?\d|\./g);return t&&t.constructor===Array?1*t.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,a,o){var s,l;if(e("link[rel=stylesheet]").each(function(){if(new RegExp(t).test(this.href))return s=this,!1}),"function"==typeof a&&(o=a,a=n),o=o||m,s)return o.call(s,s),s;if(l=r.styleSheets.length,e("#"+a).length)e("#"+a).attr("href",t),l--;else{s=e("<link>").attr({rel:"stylesheet",href:t,id:a}).get(0);var d=e('link[rel="stylesheet"], style');if(d.length?d.get(0).parentNode.insertBefore(s,d[0]):b().head.appendChild(s),y&&l>=31)return void i.raise("You have reached the browser stylesheet limit (31)",!0)}if("function"==typeof o){var c=e("<s>").attr("id","galleria-loader").hide().appendTo(b().body);L.wait({until:function(){return 1==c.height()},success:function(){c.remove(),o.call(s,s)},error:function(){c.remove(),i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})}return s}}}(),F=function(t){var i=".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}";return L.insertStyleTag(i,"galleria-videoicon"),e(L.create("galleria-videoicon")).html("<i></i>").appendTo(t).click(function(){e(this).siblings("img").mouseup()})},j=function(){var t=function(t,i,n,r){var a=this.getOptions("easing"),o=this.getStageWidth(),s={left:o*(t.rewind?-1:1)},l={left:0};n?(s.opacity=0,l.opacity=1):s.opacity=1,e(t.next).css(s),L.animate(t.next,l,{duration:t.speed,complete:function(e){return function(){i(),e.css({left:0})}}(e(t.next).add(t.prev)),queue:!1,easing:a}),r&&(t.rewind=!t.rewind),t.prev&&(s={left:0},l={left:o*(t.rewind?1:-1)},n&&(s.opacity=1,l.opacity=0),e(t.prev).css(s),L.animate(t.prev,l,{duration:t.speed,queue:!1,easing:a,complete:function(){e(this).css("opacity",0)}}))};return{active:!1,init:function(e,t,i){j.effects.hasOwnProperty(e)&&j.effects[e].call(this,t,i)},effects:{fade:function(t,i){e(t.next).css({opacity:0,left:0}),L.animate(t.next,{opacity:1},{duration:t.speed,complete:i}),t.prev&&(e(t.prev).css("opacity",1).show(),L.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){e(t.next).css({opacity:0,left:0}),t.prev?L.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){L.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):L.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&e(t.prev).hide(),e(t.next).css({opacity:0,left:0}).show(),L.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(){t.apply(this,L.array(arguments))},fadeslide:function(){t.apply(this,L.array(arguments).concat([!0]))},doorslide:function(){t.apply(this,L.array(arguments).concat([!1,!0]))}}}}();A.listen(),e.event.special["click:fast"]={propagate:!0,add:function(i){var n=function(e){if(e.touches&&e.touches.length){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}},r={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};e(this).data({clickstate:r,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(e(this).data("timer")),e(this).data("clickstate",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var i=n(t.originalEvent),r=e(this).data("clickstate"),a=Math.max(Math.abs(r.coords.x-i.x),Math.abs(r.coords.y-i.y));a>6&&e(this).data("clickstate",e.extend(r,{touchdown:!1}))}).on("touchend.fast",function(n){var a=e(this),o=a.data("clickstate");o.touchdown&&i.handler.call(this,n),a.data("timer",t.setTimeout(function(){a.data("clickstate",r)},400))}).on("click.fast",function(t){var n=e(this).data("clickstate");return!n.touched&&(e(this).data("clickstate",r),void i.handler.call(this,t))})},remove:function(){e(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},o.on("orientationchange",function(){e(this).resize()}),i=function(){var s=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*g.random(),10);var l="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",d="current total";e.each(l.split(" "),function(e,t){s._dom[t]=L.create("galleria-"+t)}),e.each(d.split(" "),function(e,t){s._dom[t]=L.create("galleria-"+t,"span")});var c=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(e){var t=e.keyCode||e.which;t in c.map&&"function"==typeof c.map[t]&&c.map[t].call(s,e)},attach:function(e){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=t.toUpperCase(),i in c.keys?c.map[c.keys[i]]=e[t]:c.map[i]=e[t]);c.bound||(c.bound=!0,a.on("keydown",c.press))},detach:function(){c.bound=!1,c.map={},a.off("keydown",c.press)}},u=this._controls={0:n,1:n,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return s._options.swipe?u.slides[s._active]:u[u.active]},getNext:function(){return s._options.swipe?u.slides[s.getNext(s._active)]:u[1-u.active]},slides:[],frames:[],layers:[]},f=this._carousel={next:s.$("thumb-nav-right"),prev:s.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,n=[0];e.each(s._thumbnails,function(r,a){if(a.ready){t+=a.outerWidth||e(a.container).outerWidth(!0);var o=e(a.container).width();t+=o-g.floor(o),n[r+1]=t,i=g.max(i,a.outerHeight||e(a.container).outerHeight(!0))}}),s.$("thumbnails").css({width:t,height:i}),f.max=t,f.hooks=n,f.width=s.$("thumbnails-list").width(),f.setClasses(),s.$("thumbnails-container").toggleClass("galleria-carousel",t>f.width),f.width=s.$("thumbnails-list").width()},bindControls:function(){var e;f.next.on("click:fast",function(t){if(t.preventDefault(),"auto"===s._options.carouselSteps){for(e=f.current;e<f.hooks.length;e++)if(f.hooks[e]-f.hooks[f.current]>f.width){f.set(e-2);break}}else f.set(f.current+s._options.carouselSteps)}),f.prev.on("click:fast",function(t){if(t.preventDefault(),"auto"===s._options.carouselSteps)for(e=f.current;e>=0;e--){if(f.hooks[f.current]-f.hooks[e]>f.width){f.set(e+2);break}if(0===e){f.set(0);break}}else f.set(f.current-s._options.carouselSteps)})},set:function(e){for(e=g.max(e,0);f.hooks[e-1]+f.width>=f.max&&e>=0;)e--;f.current=e,f.animate()},getLast:function(e){return(e||f.current)-1},follow:function(e){if(0===e||e===f.hooks.length-2)return void f.set(e);for(var t=f.current;f.hooks[t]-f.hooks[f.current]<f.width&&t<=f.hooks.length;)t++;e-1<f.current?f.set(e-1):e+2>t&&f.set(e-t+f.current+2)},setClasses:function(){f.prev.toggleClass("disabled",!f.current),f.next.toggleClass("disabled",f.hooks[f.current]+f.width>=f.max)},animate:function(){f.setClasses();var t=f.hooks[f.current]*-1;isNaN(t)||(s.$("thumbnails").css("left",function(){return e(this).css("left")}),L.animate(s.get("thumbnails"),{left:t},{duration:s._options.carouselSpeed,easing:s._options.easing,queue:!1}))}},p=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+s._id,swapTimer:"swap"+s._id,init:function(){p.initialized=!0;var e=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";L.insertStyleTag(e,"galleria-tooltip"),s.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(e){var t=s.getMousePosition(e).x,i=s.getMousePosition(e).y,n=s.$("tooltip"),r=t,a=i,o=n.outerHeight(!0)+1,l=n.outerWidth(!0),d=o+15,c=s.$("container").width()-l-2,u=s.$("container").height()-o-2;isNaN(r)||isNaN(a)||(r+=10,a-=o+8,r=g.max(0,g.min(c,r)),a=g.max(0,g.min(u,a)),i<d&&(a=d),n.css({left:r,top:a}))},bind:function(t,n){if(!i.TOUCH){p.initialized||p.init();var r=function(){s.$("container").off("mousemove",p.move),s.clearTimer(p.timer),s.$("tooltip").stop().animate({opacity:0},200,function(){s.$("tooltip").hide(),s.addTimer(p.swapTimer,function(){p.open=!1},1e3)})},a=function(t,i){p.define(t,i),e(t).hover(function(){s.clearTimer(p.swapTimer),s.$("container").off("mousemove",p.move).on("mousemove",p.move).trigger("mousemove"),p.show(t),s.addTimer(p.timer,function(){s.$("tooltip").stop().show().animate({opacity:1}),p.open=!0},p.open?0:500)},r).click(r)};"string"==typeof n?a(t in s._dom?s.get(t):t,n):e.each(t,function(e,t){a(s.get(e),t)})}},show:function(i){i=e(i in s._dom?s.get(i):i);var n=i.data("tt"),r=function(e){t.setTimeout(function(e){return function(){p.move(e)}}(e),10),i.off("mouseup",r)};n="function"==typeof n?n():n,n&&(s.$("tooltip").html(n.replace(/\s/,"&#160;")),i.on("mouseup",r))},define:function(t,i){if("function"!=typeof i){var n=i;i=function(){return n}}t=e(t in s._dom?s.get(t):t).data("tt",i),p.show(t)}},m=this._fullscreen={scrolled:0,crop:n,active:!1,prev:e(),beforeEnter:function(e){e()},beforeExit:function(e){e()},keymap:s._keyboard.map,parseCallback:function(t,i){return j.active?function(){"function"==typeof t&&t.call(s);var n=s._controls.getActive(),r=s._controls.getNext();s._scaleImage(r),s._scaleImage(n),i&&s._options.trueFullscreen&&e(n.container).add(r.container).trigger("transitionend")}:t},enter:function(e){m.beforeEnter(function(){e=m.parseCallback(e,!0),s._options.trueFullscreen&&A.support?(m.active=!0,L.forceStyles(s.get("container"),{width:"100%",height:"100%"}),s.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(h)?(s.$("stage").css("opacity",0),t.setTimeout(function(){m.scale(),s.$("stage").css("opacity",1)},4)):(s.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){m.scale(),s.$("container").css("opacity",1)},50)):s.$("container").addClass("fullscreen"),o.resize(m.scale),A.enter(s,e,s.get("container"))):(m.scrolled=o.scrollTop(),i.TOUCH||t.scrollTo(0,0),m._enter(e))})},_enter:function(a){m.active=!0,_&&(m.iframe=function(){var n,a=r.referrer,o=r.createElement("a"),s=t.location;return o.href=a,o.protocol!=s.protocol||o.hostname!=s.hostname||o.port!=s.port?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(m.pd=t.parent.document,e(m.pd).find("iframe").each(function(){var e=this.contentDocument||this.contentWindow.document;if(e===r)return n=this,!1}),n)}()),L.hide(s.getActiveImage()),_&&m.iframe&&(m.iframe.scrolled=e(t.parent).scrollTop(),t.parent.scrollTo(0,0));var l=s.getData(),d=s._options,c=!s._options.trueFullscreen||!A.support,u={height:"100%",overflow:"hidden",margin:0,padding:0};if(c&&(s.$("container").addClass("fullscreen"),m.prev=s.$("container").prev(),m.prev.length||(m.parent=s.$("container").parent()),s.$("container").appendTo("body"),L.forceStyles(s.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),L.forceStyles(b().html,u),L.forceStyles(b().body,u)),_&&m.iframe&&(L.forceStyles(m.pd.documentElement,u),L.forceStyles(m.pd.body,u),L.forceStyles(m.iframe,e.extend(u,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),m.keymap=e.extend({},s._keyboard.map),s.attachKeyboard({escape:s.exitFullscreen,right:s.next,left:s.prev}),m.crop=d.imageCrop,d.fullscreenCrop!=n&&(d.imageCrop=d.fullscreenCrop),l&&l.big&&l.image!==l.big){var h=new i.Picture,f=h.isCached(l.big),p=s.getIndex(),g=s._thumbnails[p];s.trigger({type:i.LOADSTART,cached:f,rewind:!1,index:p,imageTarget:s.getActiveImage(),thumbTarget:g,galleriaData:l}),h.load(l.big,function(t){s._scaleImage(t,{complete:function(t){s.trigger({type:i.LOADFINISH,cached:f,index:p,rewind:!1,imageTarget:t.image,thumbTarget:g});var n=s._controls.getActive().image;n&&e(n).width(t.image.width).height(t.image.height).attr("style",e(t.image).attr("style")).attr("src",t.image.src)}})});var v=s.getNext(p),y=new i.Picture,w=s.getData(v);y.preload(s.isFullscreen()&&w.big?w.big:w.image)}s.rescale(function(){s.addTimer(!1,function(){c&&L.show(s.getActiveImage()),"function"==typeof a&&a.call(s),s.rescale()},100),s.trigger(i.FULLSCREEN_ENTER)}),c?o.resize(m.scale):L.show(s.getActiveImage())},scale:function(){s.rescale()},exit:function(e){m.beforeExit(function(){e=m.parseCallback(e),s._options.trueFullscreen&&A.support?A.exit(e):m._exit(e)})},_exit:function(e){m.active=!1;var n=!s._options.trueFullscreen||!A.support,r=s.$("container").removeClass("fullscreen");if(m.parent?m.parent.prepend(r):r.insertAfter(m.prev),n){L.hide(s.getActiveImage()),L.revertStyles(s.get("container"),b().html,b().body),i.TOUCH||t.scrollTo(0,m.scrolled);var a=s._controls.frames[s._controls.active];a&&a.image&&(a.image.src=a.image.src)}_&&m.iframe&&(L.revertStyles(m.pd.documentElement,m.pd.body,m.iframe),m.iframe.scrolled&&t.parent.scrollTo(0,m.iframe.scrolled)),s.detachKeyboard(),s.attachKeyboard(m.keymap),s._options.imageCrop=m.crop;var l=s.getData().big,d=s._controls.getActive().image;!s.getData().iframe&&d&&l&&l==d.src&&t.setTimeout(function(e){return function(){d.src=e}}(s.getData().image),1),s.rescale(function(){s.addTimer(!1,function(){n&&L.show(s.getActiveImage()),"function"==typeof e&&e.call(s),o.trigger("resize")},50),s.trigger(i.FULLSCREEN_EXIT)}),o.off("resize",m.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(t,n,r,a){if(t&&!i.TOUCH){v.bound||v.addEvent(),t=e(t),"boolean"==typeof r&&(a=r,r={}),r=r||{};var o,s={};for(o in n)n.hasOwnProperty(o)&&(s[o]=t.css(o));t.data("idle",{from:e.extend(s,r),to:n,complete:!0,busy:!1}),a?t.css(n):v.addTimer(),v.trunk.push(t)}},remove:function(t){t=e(t),e.each(v.trunk,function(e,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),v.trunk.splice(e,1))}),v.trunk.length||(v.removeEvent(),s.clearTimer(v.timer))},addEvent:function(){v.bound=!0,s.$("container").on("mousemove click",v.showAll),"hover"==s._options.idleMode&&s.$("container").on("mouseleave",v.hide)},removeEvent:function(){v.bound=!1,s.$("container").on("mousemove click",v.showAll),"hover"==s._options.idleMode&&s.$("container").off("mouseleave",v.hide)},addTimer:function(){"hover"!=s._options.idleMode&&s.addTimer("idle",function(){v.hide()},s._options.idleTime)},hide:function(){if(s._options.idleMode&&s.getIndex()!==!1){s.trigger(i.IDLE_ENTER);var t=v.trunk.length;e.each(v.trunk,function(e,i){var n=i.data("idle");n&&(i.data("idle").complete=!1,L.animate(i,n.to,{duration:s._options.idleSpeed,complete:function(){e==t-1&&(v.active=!1)}}))})}},showAll:function(){s.clearTimer("idle"),e.each(v.trunk,function(e,t){v.show(t)})},show:function(t){var n=t.data("idle");v.active&&(n.busy||n.complete)||(n.busy=!0,s.trigger(i.IDLE_EXIT),s.clearTimer("idle"),L.animate(t,n.from,{duration:s._options.idleSpeed/2,complete:function(){v.active=!0,e(t).data("idle").busy=!1,e(t).data("idle").complete=!0}})),v.addTimer()}},w=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!w.initialized){w.initialized=!0;var t="overlay box content shadow title info close prevholder prev nextholder next counter image",n={},r=s._options,a="",o="position:absolute;",l="lightbox-",d={overlay:"position:fixed;display:none;opacity:"+r.overlayOpacity+";filter:alpha(opacity="+100*r.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+r.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:o+"background:#000;width:100%;height:100%;",content:o+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:o+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:o+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:o+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:o+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:o+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},c=function(t){return t.hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")})},u={},h="";h=y>7?y<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999",d.nextholder+=h,d.prevholder+=h,e.each(d,function(e,t){a+=".galleria-"+l+e+"{"+t+"}"}),a+=".galleria-"+l+"box.iframe .galleria-"+l+"prevholder,.galleria-"+l+"box.iframe .galleria-"+l+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",L.insertStyleTag(a,"galleria-lightbox"),e.each(t.split(" "),function(e,t){s.addElement("lightbox-"+t),n[t]=w.elems[t]=s.get("lightbox-"+t)}),w.image=new i.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var n=[];e.each(i.split(" "),function(e,t){n.push(l+t)}),u[l+t]=n}),s.append(u),e(n.image).append(w.image.container),e(b().body).append(n.overlay,n.box),c(e(n.close).on("click:fast",w.hide).html("&#215;")),e.each(["Prev","Next"],function(t,r){var a=e(n[r.toLowerCase()]).html(/v/.test(r)?"&#8249;&#160;":"&#160;&#8250;"),o=e(n[r.toLowerCase()+"holder"]);return o.on("click:fast",function(){w["show"+r]()}),y<8||i.TOUCH?void a.show():void o.hover(function(){a.show()},function(){a.stop().fadeOut(200)})}),e(n.overlay).on("click:fast",w.hide),i.IPAD&&(s._options.lightboxTransitionSpeed=0)}},rescale:function(t){var n=g.min(o.width()-40,w.width),r=g.min(o.height()-60,w.height),a=g.min(n/w.width,r/w.height),l=g.round(w.width*a)+40,d=g.round(w.height*a)+60,c={width:l,height:d,"margin-top":g.ceil(d/2)*-1,"margin-left":g.ceil(l/2)*-1};t?e(w.elems.box).css(c):e(w.elems.box).animate(c,{duration:s._options.lightboxTransitionSpeed,easing:s._options.easing,complete:function(){var t=w.image,n=s._options.lightboxFadeSpeed;s.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image}),e(t.container).show(),e(t.image).animate({opacity:1},n),L.show(w.elems.info,n)}})},hide:function(){w.image.image=null,o.off("resize",w.rescale),e(w.elems.box).hide().find("iframe").remove(),L.hide(w.elems.info),s.detachKeyboard(),s.attachKeyboard(w.keymap),w.keymap=!1,L.hide(w.elems.overlay,200,function(){e(this).hide().css("opacity",s._options.overlayOpacity),s.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){w.show(s.getNext(w.active))},showPrev:function(){w.show(s.getPrev(w.active))},show:function(n){w.active=n="number"==typeof n?n:s.getIndex()||0,w.initialized||w.init(),s.trigger(i.LIGHTBOX_OPEN),w.keymap||(w.keymap=e.extend({},s._keyboard.map),s.attachKeyboard({escape:w.hide,right:w.showNext,left:w.showPrev})),o.off("resize",w.rescale);var r,a,l,d=s.getData(n),c=s.getDataLength(),u=s.getNext(n);L.hide(w.elems.info);try{for(l=s._options.preload;l>0;l--)a=new i.Picture,r=s.getData(u),a.preload(r.big?r.big:r.image),u=s.getNext(u)}catch(e){}w.image.isIframe=d.iframe&&!d.image,e(w.elems.box).toggleClass("iframe",w.image.isIframe),e(w.image.container).find(".galleria-videoicon").remove(),w.image.load(d.big||d.image||d.iframe,function(i){if(i.isIframe){var r=e(t).width(),a=e(t).height();if(i.video&&s._options.maxVideoSize){var l=g.min(s._options.maxVideoSize/r,s._options.maxVideoSize/a);l<1&&(r*=l,a*=l)}w.width=r,w.height=a}else w.width=i.original.width,w.height=i.original.height;if(e(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),w.elems.title.innerHTML=d.title||"",w.elems.counter.innerHTML=n+1+" / "+c,o.resize(w.rescale),w.rescale(),d.image&&d.iframe){if(e(w.elems.box).addClass("iframe"),d.video){var u=F(i.container).hide();t.setTimeout(function(){u.fadeIn(200)},200)}e(i.image).css("cursor","pointer").mouseup(function(t,i){return function(n){e(w.image.container).find(".galleria-videoicon").remove(),n.preventDefault(),i.isIframe=!0,i.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:y<8?e(w.image.container).height():"100%"})}}(d,i))}}),e(w.elems.overlay).show().css("visibility","visible"),e(w.elems.box).show()}},E=this._timer={trunk:{},add:function(e,i,n,r){if(e=e||(new Date).getTime(),r=r||!1,this.clear(e),r){var a=i;i=function(){a(),E.add(e,i,n)}}this.trunk[e]=t.setTimeout(i,n)},clear:function(e){var i,n=function(e){t.clearTimeout(this.trunk[e]),delete this.trunk[e]};if(e&&e in this.trunk)n.call(this,e);else if("undefined"==typeof e)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(t,r){if(r=T(r),this._original={target:t,options:r,data:null},this._target=this._dom.target=t.nodeName?t:e(t).get(0),this._original.html=this._target.innerHTML,D.push(this),!this._target)return void i.raise("Target not found",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:"galleria",extend:function(){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:n,transition:"fade",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,r&&(r.debug===!1&&(d=!1),"number"==typeof r.imageTimeout&&(c=r.imageTimeout),"string"==typeof r.dummy&&(u=r.dummy),"string"==typeof r.theme&&(this._options.theme=r.theme)),e(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),O.length)if(this._options.theme){for(var a=0;a<O.length;a++)if(this._options.theme===O[a].name){this.theme=O[a];break}}else this.theme=O[0];return"object"==typeof this.theme?this._init():R.push(this),this},_init:function(){var a=this,s=this._options;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(e.extend(!0,s,this.theme.defaults,this._original.options,i.configure.options),s.swipe=function(e){return"enforced"==e||e!==!1&&"disabled"!=e&&!!i.TOUCH}(s.swipe),s.swipe&&(s.clicknext=!1,s.imagePan=!1),!function(e){return"getContext"in e?void(P=P||{elem:e,context:e.getContext("2d"),cache:{},length:0}):void(e=null)}(r.createElement("canvas")),this.bind(i.DATA,function(){t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(e){var i="devicePixelRatio"in t?t.devicePixelRatio:1,n=g.max(t.screen.width,t.screen.height);n*i<1024&&(e.big=e.image)}),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var e=this.$("container");a._options.height<2&&(a._userRatio=a._ratio=a._options.height);var n={width:0,height:0},r=function(){return a.$("stage").height()};L.wait({until:function(){return n=a._getWH(),e.width(n.width).height(n.height),r()&&n.width&&n.height>50},success:function(){a._width=n.width,a._height=n.height,a._ratio=a._ratio||n.height/n.width,i.WEBKIT?t.setTimeout(function(){a._run()},1):a._run()},error:function(){r()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+r()+"px.",!0)},timeout:"number"==typeof this._options.wait&&this._options.wait})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),L.hide(this.$("counter").append(this.get("current"),r.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),L.hide(a.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||e.each(new Array(2),function(t){var n=new i.Picture;e(n.container).css({position:"absolute",top:0,left:0}).prepend(a._layers[t]=e(L.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),a.$("images").append(n.container),a._controls[t]=n;var r=new i.Picture;r.isIframe=!0,e(r.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),a._controls.frames[t]=r}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),s.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new i.Finger(this.get("stage"),{onchange:function(e){a.pause().show(e)},oncomplete:function(t){var i=g.max(0,g.min(parseInt(t,10),a.getDataLength()-1)),n=a.getData(i);e(a._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),n&&(a.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),a._options.carousel&&a._options.carouselFollow&&a._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(){var i=a.getData();if(i){if(i.iframe){a.isPlaying()&&a.pause();var r=a._controls.frames[a._active],o=a._stageWidth,s=a._stageHeight;if(e(r.container).find("iframe").length)return;return e(r.container).css({width:o,height:s,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){r.load(i.iframe+(i.video?"&autoplay=1":""),{width:o,height:s},function(e){a.$("container").addClass("videoplay"),e.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:i.video?a._options.maxVideoSize:n})})},100)}if(i.link)if(a._options.popupLinks){t.open(i.link,"_blank")}else t.location.href=i.link;else;}}),this.bind(i.IMAGE,function(t){a.setCounter(t.index),a.setInfo(t.index);var i=this.getNext(),n=this.getPrev(),r=[n,i];r.push(this.getNext(i),this.getPrev(n),a._controls.slides.length-1);var o=[];e.each(r,function(t,i){e.inArray(i,o)==-1&&o.push(i)}),e.each(o,function(t,i){var n=a.getData(i),r=a._controls.slides[i],o=a.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(r.isIframe=!0),r.ready||a._controls.slides[i].load(o,function(t){t.isIframe||e(t.image).css("visibility","hidden"),a._scaleImage(t,{complete:function(t){t.isIframe||e(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(){
s.pauseOnInteraction&&a.pause();var e=/right/.test(this.className)?"next":"prev";a[e]()}).on("click",function(e){e.preventDefault(),(s.clicknext||s.swipe)&&e.stopPropagation()}),e.each(["info","counter","image-nav"],function(e,t){s["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&L.moveOut(a.get(t.toLowerCase()))}),this.load(),s.keepSource||y||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),s.carousel){var l=0,d=s.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++l==this.getDataLength()&&"number"==typeof d&&d>0&&this._carousel.follow(d)})}return s.responsive&&o.on("resize",function(){a.isFullscreen()||a.resize()}),s.fullscreenDoubleTap&&this.$("stage").on("touchstart",function(){var e,t,i,n,r,o,s=function(e){return e.originalEvent.touches?e.originalEvent.touches[0]:e};return a.$("stage").on("touchmove",function(){e=0}),function(l){if(!/(-left|-right)/.test(l.target.className)){if(o=L.timestamp(),t=s(l).pageX,i=s(l).pageY,l.originalEvent.touches.length<2&&o-e<300&&t-n<20&&i-r<20)return a.toggleFullscreen(),void l.preventDefault();e=o,n=t,r=i}}}()),e.each(i.on.binds,function(t,i){e.inArray(i.hash,a._binds)==-1&&a.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,L.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,L.array(arguments)),this},_getWH:function(){var t,i=this.$("container"),n=this.$("target"),r=this,a={};return e.each(["width","height"],function(e,o){r._options[o]&&"number"==typeof r._options[o]?a[o]=r._options[o]:(t=[L.parseValue(i.css(o)),L.parseValue(n.css(o)),i[o](),n[o]()],r["_"+o]||t.splice(t.length,L.parseValue(i.css("min-"+o)),L.parseValue(n.css("min-"+o))),a[o]=g.max.apply(g,t))}),r._userRatio&&(a.height=a.width*r._userRatio),a},_createThumbnails:function(n){this.get("total").innerHTML=this.getDataLength();var a,o,s,l,d=this,c=this._options,u=n?this._data.length-n.length:0,h=u,f=[],p=0,g=y<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",m=function(){var e=d.$("thumbnails").find(".active");return!!e.length&&e.find("img").attr("src")}(),v="string"==typeof c.thumbnails?c.thumbnails.toLowerCase():null,b=function(e){return r.defaultView&&r.defaultView.getComputedStyle?r.defaultView.getComputedStyle(o.container,null)[e]:l.css(e)},_=function(t,n,r){return function(){e(r).append(t),d.trigger({type:i.THUMBNAIL,thumbTarget:t,index:n,galleriaData:d.getData(n)})}},w=function(t){c.pauseOnInteraction&&d.pause();var i=e(t.currentTarget).data("index");d.getIndex()!==i&&d.show(i),t.preventDefault()},E=function(t,n){e(t.container).css("visibility","visible"),d.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:d.getData(t.data.order)}),"function"==typeof n&&n.call(d,t)},T=function(t,i){t.scale({width:t.data.width,height:t.data.height,crop:c.thumbCrop,margin:c.thumbMargin,canvas:c.useCanvas,position:c.thumbPosition,complete:function(t){var n,r,a=["left","top"],o=["Width","Height"];d.getData(t.index);e.each(o,function(i,o){n=o.toLowerCase(),c.thumbCrop===!0&&c.thumbCrop!==n||(r={},r[n]=t[n],e(t.container).css(r),r={},r[a[i]]=0,e(t.image).css(r)),t["outer"+o]=e(t.container)["outer"+o](!0)}),L.toggleQuality(t.image,c.thumbQuality===!0||"auto"===c.thumbQuality&&t.original.width<3*t.width),c.thumbDisplayOrder&&!t.lazy?e.each(f,function(e,t){if(e===p&&t.ready&&!t.displayed)return p++,t.displayed=!0,void E(t,i)}):E(t,i)}})};for(n||(this._thumbnails=[],this.$("thumbnails").empty());this._data[u];u++)s=this._data[u],a=s.thumb||s.image,c.thumbnails!==!0&&"lazy"!=v||!s.thumb&&!s.image?s.iframe&&null!==v||"empty"===v||"numbers"===v?(o={container:L.create("galleria-image"),image:L.create("img","span"),ready:!0,data:{order:u}},"numbers"===v&&e(o.image).text(u+1),s.iframe&&e(o.image).addClass("iframe"),this.$("thumbnails").append(o.container),t.setTimeout(_(o.image,u,o.container),50+20*u)):o={container:null,image:null}:(o=new i.Picture(u),o.index=u,o.displayed=!1,o.lazy=!1,o.video=!1,this.$("thumbnails").append(o.container),l=e(o.container),l.css("visibility","hidden"),o.data={width:L.parseValue(b("width")),height:L.parseValue(b("height")),order:u,src:a},c.thumbCrop!==!0?l.css({width:"auto",height:"auto"}):l.css({width:o.data.width,height:o.data.height}),"lazy"==v?(l.addClass("lazy"),o.lazy=!0,o.load(g,{height:o.data.height,width:o.data.width})):o.load(a,T),"all"===c.preload&&o.preload(s.image)),e(o.container).add(c.keepSource&&c.linkSourceImages?s.original:null).data("index",u).on(c.thumbEventType,w).data("thumbload",T),m===a&&e(o.container).addClass("active"),this._thumbnails.push(o);return f=this._thumbnails.slice(h),this},lazyLoad:function(t,i){var n=t.constructor==Array?t:[t],r=this,a=0;return e.each(n,function(t,o){if(!(o>r._thumbnails.length-1)){var s=r._thumbnails[o],l=s.data,d=function(){++a==n.length&&"function"==typeof i&&i.call(r)},c=e(s.container).data("thumbload");s.video?c.call(r,s,d):s.load(l.src,function(e){c.call(r,e,d)})}}),this},lazyLoadChunks:function(e,i){var n=this.getDataLength(),r=0,a=0,o=[],s=[],l=this;for(i=i||0;r<n;r++)s.push(r),++a!=e&&r!=n-1||(o.push(s),a=0,s=[]);var d=function(e){var n=o.shift();n&&t.setTimeout(function(){l.lazyLoad(n,function(){d(!0)})},i&&e?i:0)};return d(!1),this},_run:function(){var r=this;r._createThumbnails(),L.wait({timeout:1e4,until:function(){return i.OPERA&&r.$("stage").css("display","inline-block"),r._stageWidth=r.$("stage").width(),r._stageHeight=r.$("stage").height(),r._stageWidth&&r._stageHeight>50},success:function(){if(I.push(r),r._options.swipe){var a=r.$("images").width(r.getDataLength()*r._stageWidth);e.each(new Array(r.getDataLength()),function(t){var n=new i.Picture,o=r.getData(t);e(n.container).css({position:"absolute",top:0,left:r._stageWidth*t}).prepend(r._layers[t]=e(L.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(a),o.video&&F(n.container),r._controls.slides.push(n);var s=new i.Picture;s.isIframe=!0,e(s.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),r._controls.frames.push(s)}),r.finger.setup()}return L.show(r.get("counter")),r._options.carousel&&r._carousel.bindControls(),r._options.autoplay&&(r.pause(),"number"==typeof r._options.autoplay&&(r._playtime=r._options.autoplay),r._playing=!0),r._firstrun?(r._options.autoplay&&r.trigger(i.PLAY),void("number"==typeof r._options.show&&r.show(r._options.show))):(r._firstrun=!0,i.History&&i.History.change(function(e){isNaN(e)?t.history.go(-1):r.show(e,n,!0)}),r.trigger(i.READY),r.theme.init.call(r,r._options),e.each(i.ready.callbacks,function(e,t){"function"==typeof t&&t.call(r,r._options)}),r._options.extend.call(r,r._options),/^[0-9]{1,4}$/.test(f)&&i.History?r.show(f,n,!0):r._data[r._options.show]&&r.show(r._options.show),void(r._options.autoplay&&r.trigger(i.PLAY)))},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+r._stageWidth+"px, height: "+r._stageHeight+"px.",!0)}})},load:function(t,n,r){var a=this,o=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof n&&(r=n,n=null),t=t||o.dataSource,n=n||o.dataSelector,r=r||o.dataConfig,e.isPlainObject(t)&&(t=[t]),e.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(n+=",.video,.iframe",e(t).find(n).each(function(t,i){i=e(i);var n={},o=i.parent(),s=o.attr("href"),l=o.attr("rel");s&&("IMG"==i[0].nodeName||i.hasClass("video"))&&k(s)?n.video=s:s&&i.hasClass("iframe")?n.iframe=s:n.image=n.big=s,l&&(n.big=l),e.each("big title description link layer image".split(" "),function(e,t){i.data(t)&&(n[t]=i.data(t).toString())}),n.big||(n.big=n.image),a._data.push(e.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},n,r(i)))})),"function"==typeof o.dataSort?s.sort.call(this._data,o.dataSort):"random"==o.dataSort&&this._data.sort(function(){return g.round(g.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){var i,r=this,a=!1,o=function(){var i=!0;e.each(r._data,function(e,t){if(t.loading)return i=!1,!1}),i&&!a&&(a=!0,t.call(r))};return e.each(this._data,function(t,a){if(i=r._data[t],"thumb"in a==!1&&(i.thumb=a.image),a.big||(i.big=a.image),"video"in a){var s=k(a.video);s&&(i.iframe=new x(s.provider,s.id).embed()+function(){if("object"==typeof r._options[s.provider]){var t="?",i=[];return e.each(r._options[s.provider],function(e,t){i.push(e+"="+t)}),"youtube"==s.provider&&(i=["wmode=opaque"].concat(i)),t+i.join("&")}return""}(),i.thumb&&i.image||e.each(["thumb","image"],function(e,t){if("image"==t&&!r._options.videoPoster)return void(i.image=n);var a=new x(s.provider,s.id);i[t]||(i.loading=!0,a.getMedia(t,function(e,t){return function(i){e[t]=i,"image"!=t||e.big||(e.big=e.image),delete e.loading,o()}}(i,t)))}))}}),o(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),L.removeFromArray(D,this),L.removeFromArray(I,this),i._waiters.length&&e.each(i._waiters,function(e,i){i&&t.clearTimeout(i)}),this},splice:function(){var e=this,i=L.array(arguments);return t.setTimeout(function(){s.splice.apply(e._data,i),e._parseData(function(){e._createThumbnails()})},2),e},push:function(){var e=this,i=L.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),t.setTimeout(function(){s.push.apply(e._data,i),e._parseData(function(){e._createThumbnails(i)})},2),e},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(e,t){return e=S(e),this.$("container").on(e,this.proxy(t)),this},unbind:function(e){return e=S(e),this.$("container").off(e),this},trigger:function(t){return t="object"==typeof t?e.extend(t,{scope:this}):{type:S(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,L.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,L.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,L.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,L.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,L.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,L.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,L.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,L.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,L.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,L.array(arguments)),this},hasVariation:function(t){return e.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var e=this._getActive();return e?e.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(e){return{x:e.pageX-this.$("container").offset().left,y:e.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=e(t||this.getActiveImage());var i=this,n=t.width()/2,r=t.height()/2,a=parseInt(t.css("left"),10),o=parseInt(t.css("top"),10),s=a||0,l=o||0,d=0,c=0,u=!1,h=L.timestamp(),f=0,p=0,m=function(e,i,n){if(e>0&&(p=g.round(g.max(e*-1,g.min(0,i))),f!==p))if(f=p,8===y)t.parent()["scroll"+n](p*-1);else{var r={};r[n.toLowerCase()]=p,t.css(r)}},v=function(e){L.timestamp()-h<50||(u=!0,n=i.getMousePosition(e).x,r=i.getMousePosition(e).y)},b=function(){u&&(d=t.width()-i._stageWidth,c=t.height()-i._stageHeight,a=n/i._stageWidth*d*-1,o=r/i._stageHeight*c*-1,s+=(a-s)/i._options.imagePanSmoothness,l+=(o-l)/i._options.imagePanSmoothness,m(c,l,"Top"),m(d,s,"Left"))};return 8===y&&(t.parent().scrollTop(l*-1).scrollLeft(s*-1),t.css({top:0,left:0})),this.$("stage").off("mousemove",v).on("mousemove",v),this.addTimer("pan"+i._id,b,50,!0),this}},proxy:function(e,t){return"function"!=typeof e?m:(t=t||this,function(){return e.apply(t,L.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var t=this._dom;return e.each(L.array(arguments),function(e,i){t[i]=L.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,L.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,L.array(arguments)),this},appendChild:function(e,t){return this.$(e).append(this.get(t)||t),this},prependChild:function(e,t){return this.$(e).prepend(this.get(t)||t),this},remove:function(){return this.$(L.array(arguments).join(",")).remove(),this},append:function(e){var t,i;for(t in e)if(e.hasOwnProperty(t))if(e[t].constructor===Array)for(i=0;e[t][i];i++)this.appendChild(t,e[t][i]);else this.appendChild(t,e[t]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive()){var n,r=function(t){e(t.container).children(":first").css({top:g.max(0,L.parseValue(t.image.style.top)),left:g.max(0,L.parseValue(t.image.style.left)),width:L.parseValue(t.image.width),height:L.parseValue(t.image.height)})};return i=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?"function"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(t,t),r(t)}):i.complete=r:e(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){"function"==typeof t&&(i=t,t=n),t=e.extend({width:0,height:0},t);var r=this,a=this.$("container");return e.each(t,function(e,i){i||(a[e]("auto"),t[e]=r._getWH()[e])}),e.each(t,function(e,t){a[e](t)}),this.rescale(i)},rescale:function(t,r,a){var o=this;"function"==typeof t&&(a=t,t=n);var s=function(){o._stageWidth=t||o.$("stage").width(),o._stageHeight=r||o.$("stage").height(),o._options.swipe?(e.each(o._controls.slides,function(t,i){o._scaleImage(i),e(i.container).css("left",o._stageWidth*t)}),o.$("images").css("width",o._stageWidth*o.getDataLength())):o._scaleImage(),o._options.carousel&&o.updateCarousel();var n=o._controls.frames[o._controls.active];n&&o._controls.frames[o._controls.active].scale({width:o._stageWidth,height:o._stageHeight,iframelimit:o._options.maxVideoSize}),o.trigger(i.RESCALE),"function"==typeof a&&a.call(o)};return s.call(o),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var e,t,n,r=this.getNext();try{for(t=this._options.preload;t>0;t--)e=new i.Picture,n=this.getData(r),e.preload(this.isFullscreen()&&n.big?n.big:n.image),r=this.getNext(r)}catch(e){}}},show:function(n,r,a){var o=this._options.swipe;if(o||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=g.max(0,g.min(parseInt(n,10),this.getDataLength()-1)),r="undefined"!=typeof r?!!r:n<this.getIndex(),a=a||!1,!a&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,o){var l=this.getData(n),d=this;if(!l)return;var c=this.isFullscreen()&&l.big?l.big:l.image||l.iframe,u=this._controls.slides[n],h=u.isCached(c),f=this._thumbnails[n],p={cached:h,index:n,rewind:r,imageTarget:u.image,thumbTarget:f.image,galleriaData:l};this.trigger(e.extend(p,{type:i.LOADSTART})),d.$("container").removeClass("videoplay");var m=function(){d._layers[n].innerHTML=d.getData().layer||"",d.trigger(e.extend(p,{type:i.LOADFINISH})),d._playCheck()};d._preload(),t.setTimeout(function(){u.ready&&e(u.image).attr("src")==c?(d.trigger(e.extend(p,{type:i.IMAGE})),m()):(l.iframe&&!l.image&&(u.isIframe=!0),u.load(c,function(t){p.imageTarget=t.image,d._scaleImage(t,m).trigger(e.extend(p,{type:i.IMAGE})),m()}))},100)}else s.push.call(this._queue,{index:n,rewind:r}),this._queue.stalled||this._show();return this}},_show:function(){var r=this,a=this._queue[0],o=this.getData(a.index);if(o){var l=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,d=this._controls.getActive(),c=this._controls.getNext(),u=c.isCached(l),h=this._thumbnails[a.index],f=function(){e(c.image).trigger("mouseup")};r.$("container").toggleClass("iframe",!!o.isIframe).removeClass("videoplay");var p=function(a,o,l,d,c){return function(){var u;j.active=!1,L.toggleQuality(o.image,r._options.imageQuality),r._layers[r._controls.active].innerHTML="",e(l.container).css({zIndex:0,opacity:0}).show(),e(l.container).find("iframe, .galleria-videoicon").remove(),e(r._controls.frames[r._controls.active].container).hide(),e(o.container).css({zIndex:1,left:0,top:0}).show(),r._controls.swap(),r._options.imagePan&&r.addPan(o.image),(a.iframe&&a.image||a.link||r._options.lightbox||r._options.clicknext)&&e(o.image).css({cursor:"pointer"}).on("mouseup",function(o){if(!("number"==typeof o.which&&o.which>1)){if(a.iframe){r.isPlaying()&&r.pause();var s=r._controls.frames[r._controls.active],l=r._stageWidth,d=r._stageHeight;return e(s.container).css({width:l,height:d,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){s.load(a.iframe+(a.video?"&autoplay=1":""),{width:l,height:d},function(e){r.$("container").addClass("videoplay"),e.scale({width:r._stageWidth,height:r._stageHeight,iframelimit:a.video?r._options.maxVideoSize:n})})},100)}return r._options.clicknext&&!i.TOUCH?(r._options.pauseOnInteraction&&r.pause(),void r.next()):a.link?void(r._options.popupLinks?u=t.open(a.link,"_blank"):t.location.href=a.link):void(r._options.lightbox&&r.openLightbox())}}),r._playCheck(),r.trigger({type:i.IMAGE,index:d.index,imageTarget:o.image,thumbTarget:c.image,galleriaData:a}),s.shift.call(r._queue),r._queue.stalled=!1,r._queue.length&&r._show()}}(o,c,d,a,h);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(a.index),r._preload(),L.show(c.container),c.isIframe=o.iframe&&!o.image,e(r._thumbnails[a.index].container).addClass("active").siblings(".active").removeClass("active"),r.trigger({type:i.LOADSTART,cached:u,index:a.index,rewind:a.rewind,imageTarget:c.image,thumbTarget:h.image,galleriaData:o}),r._queue.stalled=!0,c.load(l,function(t){var s=e(r._layers[1-r._controls.active]).html(o.layer||"").hide();r._scaleImage(t,{complete:function(t){"image"in d&&L.toggleQuality(d.image,!1),L.toggleQuality(t.image,!1),r.removePan(),r.setInfo(a.index),r.setCounter(a.index),o.layer&&(s.show(),(o.iframe&&o.image||o.link||r._options.lightbox||r._options.clicknext)&&s.css("cursor","pointer").off("mouseup").mouseup(f)),o.video&&o.image&&F(t.container);var l=r._options.transition;if(e.each({initial:null===d.image,touch:i.TOUCH,fullscreen:r.isFullscreen()},function(e,t){if(t&&r._options[e+"Transition"]!==n)return l=r._options[e+"Transition"],!1}),l in j.effects==!1)p();else{var c={prev:d.container,next:t.container,rewind:a.rewind,speed:r._options.transitionSpeed||400};j.active=!0,j.init.call(r,l,c,p)}r.trigger({type:i.LOADFINISH,cached:u,index:a.index,rewind:a.rewind,imageTarget:t.image,thumbTarget:r._thumbnails[a.index].image,galleriaData:r.getData(a.index)})}})})}},getNext:function(e){return e="number"==typeof e?e:this.getIndex(),e===this.getDataLength()-1?0:e+1},getPrev:function(e){return e="number"==typeof e?e:this.getIndex(),0===e?this.getDataLength()-1:e-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(e){return e in this._dom?this._dom[e]:null},getData:function(e){return e in this._data?this._data[e]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(e){return"undefined"==typeof e?this._options:this._options[e]},setOptions:function(t,i){return"object"==typeof t?e.extend(this._options,t):this._options[t]=i,this},play:function(e){return this._playing=!0,this._playtime=e||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(e){return this._playing?this.pause():this.play(e)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var e=this,t=0,n=20,r=L.timestamp(),a="play"+this._id;if(this._playing){this.clearTimer(a);var o=function(){return t=L.timestamp()-r,t>=e._playtime&&e._playing?(e.clearTimer(a),void e.next()):void(e._playing&&(e.trigger({type:i.PROGRESS,percent:g.ceil(t/e._playtime*100),seconds:g.floor(t/1e3),milliseconds:t}),e.addTimer(a,o,n)))};e.addTimer(a,o,n)}},setPlaytime:function(e){return this._playtime=e,this},setIndex:function(e){return this._active=e,this},setCounter:function(e){if("number"==typeof e?e++:"undefined"==typeof e&&(e=this.getIndex()+1),this.get("current").innerHTML=e,y){var t=this.$("counter"),i=t.css("opacity");1===parseInt(i,10)?L.removeAlpha(t[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var i=this,n=this.getData(t);return e.each(["title","description"],function(e,t){var r=i.$("info-"+t);n[t]?r[n[t].length?"show":"hide"]().html(n[t]):r.empty().hide()}),this},hasInfo:function(e){var t,i="title description".split(" ");for(t=0;i[t];t++)if(this.getData(e)[i[t]])return!0;return!1},jQuery:function(t){var i=this,n=[];e.each(t.split(","),function(t,r){r=e.trim(r),i.get(r)&&n.push(r)});var r=e(i.get(n.shift()));return e.each(n,function(e,t){r=r.add(i.get(t))}),r},$:function(){return this.jQuery.apply(this,L.array(arguments))}},e.each(E,function(e,t){var n=/_/.test(t)?t.replace(/_/g,""):t;i[t.toUpperCase()]="galleria."+n}),e.extend(i,{IE9:9===y,IE8:8===y,IE7:7===y,IE6:6===y,IE:y,WEBKIT:/webkit/.test(h),CHROME:/chrome/.test(h),SAFARI:/safari/.test(h)&&!/chrome/.test(h),QUIRK:y&&r.compatMode&&"BackCompat"===r.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(h),IPAD:/ipad/.test(h),ANDROID:/android/.test(h),TOUCH:"ontouchstart"in r}),i.addTheme=function(n){n.name||i.raise("No theme name specified"),"object"!=typeof n.defaults?n.defaults={}:n.defaults=T(n.defaults);var r,a=!1;return"string"==typeof n.css?(e("link").each(function(e,t){if(r=new RegExp(n.css),r.test(t.href))return a=!0,N(n),!1}),a||e(function(){var o=0,s=function(){e("script").each(function(e,i){r=new RegExp("galleria\\."+n.name.toLowerCase()+"\\."),r.test(i.src)&&(a=i.src.replace(/[^\/]*$/,"")+n.css,t.setTimeout(function(){L.loadCSS(a,"galleria-theme-"+n.name,function(){N(n)})},1))}),a||(o++>5?i.raise("No theme CSS loaded"):t.setTimeout(s,500))};s()})):N(n),n},i.loadTheme=function(n){if(!e("script").filter(function(){return e(this).attr("src")==n}).length){var r,a=!1;return e(t).load(function(){a||(r=t.setTimeout(function(){a||i.raise("Galleria had problems loading theme at "+n+". Please check theme path or load manually.",!0)},2e4))}),L.loadScript(n,function(){a=!0,t.clearTimeout(r)}),i}},i.get=function(e){return D[e]?D[e]:"number"!=typeof e?D:void i.raise("Gallery index "+e+" not found")},i.configure=function(t,n){var r={};return"string"==typeof t&&n?(r[t]=n,t=r):e.extend(r,t),i.configure.options=r,e.each(i.get(),function(e,t){t.setOptions(r)}),i},i.configure.options={},i.on=function(t,n){if(t){n=n||m;var r=t+n.toString().replace(/\s/g,"")+L.timestamp();return e.each(i.get(),function(e,i){i._binds.push(r),i.bind(t,n)}),i.on.binds.push({type:t,callback:n,hash:r}),i}},i.on.binds=[],i.run=function(t,n){return e.isFunction(n)&&(n={extend:n}),e(t||"#galleria").galleria(n),i},i.addTransition=function(e,t){return j.effects[e]=t,i},i.utils=L,i.log=function(){var i=L.array(arguments);if(!("console"in t&&"log"in t.console))return t.alert(i.join("<br>"));try{return t.console.log.apply(t.console,i)}catch(n){e.each(i,function(){t.console.log(this)})}},i.ready=function(t){return"function"!=typeof t?i:(e.each(I,function(e,i){t.call(i,i._options)}),i.ready.callbacks.push(t),i)},i.ready.callbacks=[],i.raise=function(t,i){var n=i?"Fatal error":"Error",r={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},a=function(t){var a='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+n+": </strong>":"")+t+"</div>";e.each(D,function(){var e=this.$("errors"),t=this.$("target");e.length||(t.css("position","relative"),e=this.addElement("errors").appendChild("target","errors").$("errors").css(r)),e.append(a)}),D.length||e("<div>").css(e.extend(r,{position:"fixed"})).append(a).appendTo(b().body)};if(d){if(a(t),i)throw new Error(n+": "+t)}else if(i){if(M)return;M=!0,i=!1,a("Gallery could not load.")}},i.version=l,i.getLoadedThemes=function(){return e.map(O,function(e){return e.name})},i.requires=function(e,t){return t=t||"You need to upgrade Galleria to version "+e+" to use one or more components.",i.version<e&&i.raise(t,!0),i},i.Picture=function(t){this.id=t||null,this.image=null,this.container=L.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){L.show(this.image)},hide:function(){L.moveOut(this.image)},clear:function(){this.image=null},isCached:function(e){return!!this.cache[e]},preload:function(t){e(new Image).load(function(e,t){return function(){t[e]=e}}(t,this.cache)).attr("src",t)},load:function(n,r,a){if("function"==typeof r&&(a=r,r=null),this.isIframe){var o="if"+(new Date).getTime(),s=this.image=e("<iframe>",{src:n,frameborder:0,id:o,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return r&&e(s).css(r),e(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),e("#"+o).load(function(i,n){return function(){t.setTimeout(function(){e(i.image).css("visibility","visible"),"function"==typeof n&&n.call(i,i)},10)}}(this,a)),this.container}this.image=new Image,i.IE8&&e(this.image).css("filter","inherit"),i.IE||i.CHROME||i.SAFARI||e(this.image).css("image-rendering","optimizequality");var l=!1,d=!1,c=e(this.container),h=e(this.image),f=function(){l?u?e(this).attr("src",u):i.raise("Image not found: "+n):(l=!0,t.setTimeout(function(e,t){return function(){e.attr("src",t+(t.indexOf("?")>-1?"&":"?")+L.timestamp())}}(e(this),n),50))},p=function(n,a,o){return function(){var s=function(){e(this).off("load"),n.original=r||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"),c.append(this),n.cache[o]=o,"function"==typeof a&&t.setTimeout(function(){a.call(n,n)},1)};this.width&&this.height?s.call(this):!function(t){L.wait({until:function(){return t.width&&t.height},success:function(){s.call(t)},error:function(){d?i.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(e(new Image).load(p).attr("src",t.src),d=!0)},timeout:100})}(this)}}(this,a,n);return c.find("iframe,img").remove(),h.css("display","block"),L.hide(this.image),e.each("minWidth minHeight maxWidth maxHeight".split(" "),function(e,t){h.css(t,/min/.test(t)?"0":"none")}),h.load(p).on("error",f).attr("src",n),this.container},scale:function(t){var r=this;if(t=e.extend({width:0,height:0,min:n,max:n,margin:0,complete:m,position:"center",crop:!1,canvas:!1,iframelimit:n},t),this.isIframe){var a,o,s=t.width,l=t.height;if(t.iframelimit){var d=g.min(t.iframelimit/s,t.iframelimit/l);d<1?(a=s*d,o=l*d,e(this.image).css({top:l/2-o/2,left:s/2-a/2,position:"absolute"})):e(this.image).css({top:0,left:0})}e(this.image).width(a||s).height(o||l).removeAttr("width").removeAttr("height"),e(this.container).width(s).height(l),t.complete.call(r,r);try{this.image.contentWindow&&e(this.image.contentWindow).trigger("resize")}catch(e){}return this.container}if(!this.image)return this.container;var c,u,h,f=e(r.container);return L.wait({until:function(){return c=t.width||f.width()||L.parseValue(f.css("width")),u=t.height||f.height()||L.parseValue(f.css("height")),c&&u},success:function(){var i=(c-2*t.margin)/r.original.width,n=(u-2*t.margin)/r.original.height,a=g.min(i,n),o=g.max(i,n),s={"true":o,width:i,height:n,"false":a,landscape:r.original.width>r.original.height?o:a,portrait:r.original.width<r.original.height?o:a},l=s[t.crop.toString()],d="";t.max&&(l=g.min(t.max,l)),t.min&&(l=g.max(t.min,l)),e.each(["width","height"],function(t,i){e(r.image)[i](r[i]=r.image[i]=g.round(r.original[i]*l))}),e(r.container).width(c).height(u),t.canvas&&P&&(P.elem.width=r.width,P.elem.height=r.height,d=r.image.src+":"+r.width+"x"+r.height,r.image.src=P.cache[d]||function(e){P.context.drawImage(r.image,0,0,r.original.width*l,r.original.height*l);try{return h=P.elem.toDataURL(),P.length+=h.length,P.cache[e]=h,h}catch(e){return r.image.src}}(d));var f={},p={},m=function(t,i,n){var a=0;if(/\%/.test(t)){var o=parseInt(t,10)/100,s=r.image[i]||e(r.image)[i]();a=g.ceil(s*-1*o+n*o)}else a=L.parseValue(t);return a},v={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};e.each(t.position.toLowerCase().split(" "),function(e,t){"center"===t&&(t="50%"),f[e?"top":"left"]=t}),e.each(f,function(t,i){v.hasOwnProperty(i)&&e.extend(p,v[i])}),f=f.top?e.extend(f,p):p,f=e.extend({top:"50%",left:"50%"},f),e(r.image).css({position:"absolute",top:m(f.top,"height",u),left:m(f.left,"width",c)}),r.show(),r.ready=!0,t.complete.call(r,r)},error:function(){i.raise("Could not scale image: "+r.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},galleriaIn:function(e,t,i,n,r){return n*(t/=r)*t+i},galleriaOut:function(e,t,i,n,r){return-n*(t/=r)*(t-2)+i}}),i.Finger=function(){var n=(g.abs,i.HAS3D=function(){var t,i,n=r.createElement("p"),a=["webkit","O","ms","Moz",""],o=0,s="transform";for(b().html.insertBefore(n,null);a[o];o++)i=a[o]?a[o]+"Transform":s,void 0!==n.style[i]&&(n.style[i]="translate3d(1px,1px,1px)",t=e(n).css(a[o]?"-"+a[o].toLowerCase()+"-"+s:s));return b().html.removeChild(n),void 0!==t&&t.length>0&&"none"!==t}()),o=function(){var e="RequestAnimationFrame";return t.requestAnimationFrame||t["webkit"+e]||t["moz"+e]||t["o"+e]||t["ms"+e]||function(e){t.setTimeout(e,1e3/60)}}(),s=function(i,r){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(e,t,i,n,r){return-n*((t=t/r-1)*t*t*t-1)+i}},this.easeout=function(e,t,i,n,r){return n*((t=t/r-1)*t*t*t*t+1)+i},i.children.length){var a=this;e.extend(this.config,r),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position="absolute",this.elem.style.position="relative"),e.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(e,t){a[t]=function(e){return function(){e.apply(a,arguments)}}(a[t])}),this.setX=function(){var e=a.child.style;return n?void(e.MozTransform=e.webkitTransform=e.transform="translate3d("+a.pos+"px,0,0)"):void(e.left=a.pos+"px")},e(i).on("touchstart",this.ontouchstart),e(t).on("resize",this.setup),e(t).on("orientationchange",this.setup),this.setup(),!function e(){o(e),a.loop.call(a)}()}};return s.prototype={constructor:s,setup:function(){this.width=e(this.elem).width(),this.length=g.ceil(e(this.child).width()/this.width),0!==this.index&&(this.index=g.max(0,g.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(e){this.pos=e,this.to=e},ontouchstart:function(e){var t=e.originalEvent.touches;this.start={pageX:t[0].pageX,pageY:t[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,a.on("touchmove",this.ontouchmove),a.on("touchend",this.ontouchend)},ontouchmove:function(e){var t=e.originalEvent.touches;
t&&t.length>1||e.scale&&1!==e.scale||(this.deltaX=t[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||g.abs(this.deltaX)<g.abs(t[0].pageY-this.start.pageY))),this.isScrolling||(e.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?g.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),e.stopPropagation())},ontouchend:function(){this.touching=!1;var e=+new Date-this.start.time<250&&g.abs(this.deltaX)>40||g.abs(this.deltaX)>this.width/2,t=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!t?this.deltaX<0?1:-1:0)),a.off("touchmove",this.ontouchmove),a.off("touchend",this.ontouchend)},show:function(e){e!=this.index?this.config.onchange.call(this,e):this.to=-(e*this.width)},moveTo:function(e){e!=this.index&&(this.pos=this.to=-(e*this.width),this.index=e)},loop:function(){var e=this.to-this.pos,t=1;if(this.width&&e&&(t=g.max(.5,g.min(1.5,g.abs(e/this.width)))),this.touching||g.abs(e)<=1)this.pos=this.to,e=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:e,factor:t,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},s}(),e.fn.galleria=function(t){var n=this.selector;return e(this).length?this.each(function(){e.data(this,"galleria")&&(e.data(this,"galleria").destroy(),e(this).find("*").hide()),e.data(this,"galleria",(new i).init(this,t))}):(e(function(){e(n).length?e(n).galleria(t):i.utils.wait({until:function(){return e(n).length},success:function(){e(n).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+n+'".')},timeout:5e3})}),this)},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(t.Galleria=i,"function"==typeof define&&define.amd&&define("galleria",["jquery"],function(){return i}))}(jQuery,this),function(e){Galleria.addTheme({name:"classic",author:"Galleria",defaults:{transition:"slide",thumbCrop:"height",_toggleInfo:!0},init:function(t){Galleria.requires(1.4,"This version of Classic theme requires Galleria 1.4 or later"),this.addElement("info-link","info-close"),this.append({info:["info-link","info-close"]});var i=this.$("info-link,info-close,info-text"),n=Galleria.TOUCH;this.$("loader,counter").show().css("opacity",.4),n||(this.addIdleState(this.get("image-nav-left"),{left:-50}),this.addIdleState(this.get("image-nav-right"),{right:-50}),this.addIdleState(this.get("counter"),{opacity:0})),t._toggleInfo===!0?i.bind("click:fast",function(){i.toggle()}):(i.show(),this.$("info-link, info-close").hide()),this.bind("thumbnail",function(t){n?e(t.thumbTarget).css("opacity",this.getIndex()?1:.6).bind("click:fast",function(){e(this).css("opacity",1).parent().siblings().children().css("opacity",.6)}):(e(t.thumbTarget).css("opacity",.6).parent().hover(function(){e(this).not(".active").children().stop().fadeTo(100,1)},function(){e(this).not(".active").children().stop().fadeTo(400,.6)}),t.index===this.getIndex()&&e(t.thumbTarget).css("opacity",1))});var r=function(t){e(t.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",.6)};this.bind("loadstart",function(e){e.cached||this.$("loader").show().fadeTo(200,.4),window.setTimeout(function(){r(e)},n?300:0),this.$("info").toggle(this.hasInfo())}),this.bind("loadfinish",function(){this.$("loader").fadeOut(200)})}})}(jQuery),/*!
 * Lightbox v2.8.1
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.lightbox=t(e.jQuery)}(this,function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){this.enable(),this.build()},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;e('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" aria-label="previous"></a><a class="lb-next" href="" aria-label="next"></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){function i(e){n.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var n=this,r=e(window);r.on("resize",e.proxy(this.sizeOverlay,this)),e("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var a,o=0,s=t.attr("data-lightbox");if(s){a=e(t.prop("tagName")+'[data-lightbox="'+s+'"]');for(var l=0;l<a.length;l=++l)i(e(a[l])),a[l]===t[0]&&(o=l)}else if("lightbox"===t.attr("rel"))i(t);else{a=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var d=0;d<a.length;d=++d)i(e(a[d])),a[d]===t[0]&&(o=d)}var c=r.scrollTop()+this.options.positionFromTop,u=r.scrollLeft();this.$lightbox.css({top:c+"px",left:u+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(o)},t.prototype.changeImage=function(t){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var r=new Image;r.onload=function(){var a,o,s,l,d,c,u;n.attr("src",i.album[t].link),a=e(r),n.width(r.width),n.height(r.height),i.options.fitImagesInViewport&&(u=e(window).width(),c=e(window).height(),d=u-i.containerLeftPadding-i.containerRightPadding-20,l=c-i.containerTopPadding-i.containerBottomPadding-120,i.options.maxWidth&&i.options.maxWidth<d&&(d=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<d&&(l=i.options.maxHeight),(r.width>d||r.height>l)&&(r.width/d>r.height/l?(s=d,o=parseInt(r.height/(r.width/s),10),n.width(s),n.height(o)):(o=l,s=parseInt(r.width/(r.height/o),10),n.width(s),n.height(o)))),i.sizeContainer(n.width(),n.height())},r.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){this.$overlay.width(e(window).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){function i(){n.$lightbox.find(".lb-dataContainer").width(o),n.$lightbox.find(".lb-prevLink").height(s),n.$lightbox.find(".lb-nextLink").height(s),n.showImage()}var n=this,r=this.$outerContainer.outerWidth(),a=this.$outerContainer.outerHeight(),o=e+this.containerLeftPadding+this.containerRightPadding,s=t+this.containerTopPadding+this.containerBottomPadding;r!==o||a!==s?this.$outerContainer.animate({width:o,height:s},this.options.resizeDuration,"swing",function(){i()}):i()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(e){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){void 0!==e(this).attr("target")?window.open(e(this).attr("href"),e(this).attr("target")):location.href=e(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t=27,i=37,n=39,r=e.keyCode,a=String.fromCharCode(r).toLowerCase();r===t||a.match(/x|o|c/)?this.end():"p"===a||r===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===a||r===n)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},new t}),/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// CodeMirror, copyright (c) by Marijn Haverbeke and others
/*!
 * HTMLHint v0.9.13
 * https://github.com/yaniswang/HTMLHint
 *
 * (c) 2014-2016 Yanis Wang <yanis.wang@gmail.com>.
 * MIT Licensed
 */
/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
function(e,t){"function"==typeof define&&define.amd?define([],t):e.Redactor=t()}(this,function(){var e,t,i;return function(n){function r(e,t){return _.call(e,t)}function a(e,t){var i,n,r,a,o,s,l,d,c,u,h,f=t&&t.split("/"),p=y.map,g=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),o=e.length-1,y.nodeIdCompat&&E.test(e[o])&&(e[o]=e[o].replace(E,"")),e=f.slice(0,f.length-1).concat(e),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||g)&&p){for(i=e.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(u=f.length;u>0;u-=1)if(r=p[f.slice(0,u).join("/")],r&&(r=r[n])){a=r,s=c;break}if(a)break;!l&&g&&g[n]&&(l=g[n],d=c)}!a&&l&&(a=l,s=d),a&&(i.splice(0,s,a),e=i.join("/"))}return e}function o(e,t){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(n,i.concat([e,t]))}}function s(e){return function(t){return a(t,e)}}function l(e){return function(t){m[e]=t}}function d(e){if(r(v,e)){var t=v[e];delete v[e],b[e]=!0,h.apply(n,t)}if(!r(m,e)&&!r(b,e))throw new Error("No "+e);return m[e]}function c(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function u(e){return function(){return y&&y.config&&y.config[e]||{}}}var h,f,p,g,m={},v={},y={},b={},_=Object.prototype.hasOwnProperty,w=[].slice,E=/\.js$/;p=function(e,t){var i,n=c(e),r=n[0];return e=n[1],r&&(r=a(r,t),i=d(r)),r?e=i&&i.normalize?i.normalize(e,s(t)):a(e,t):(e=a(e,t),n=c(e),r=n[0],e=n[1],r&&(i=d(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}},g={require:function(e){return o(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},h=function(e,t,i,a){var s,c,u,h,f,y,_=[],w=typeof i;if(a=a||e,"undefined"===w||"function"===w){for(t=!t.length&&i.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if(h=p(t[f],a),c=h.f,"require"===c)_[f]=g.require(e);else if("exports"===c)_[f]=g.exports(e),y=!0;else if("module"===c)s=_[f]=g.module(e);else if(r(m,c)||r(v,c)||r(b,c))_[f]=d(c);else{if(!h.p)throw new Error(e+" missing "+c);h.p.load(h.n,o(a,!0),l(c),{}),_[f]=m[c]}u=i?i.apply(m[e],_):void 0,e&&(s&&s.exports!==n&&s.exports!==m[e]?m[e]=s.exports:u===n&&y||(m[e]=u))}else e&&(m[e]=i)},e=t=f=function(e,t,i,r,a){if("string"==typeof e)return g[e]?g[e](t):d(p(e,t).f);if(!e.splice){if(y=e,y.deps&&f(y.deps,y.callback),!t)return;t.splice?(e=t,t=i,i=null):e=n}return t=t||function(){},"function"==typeof i&&(i=r,r=a),r?h(n,e,t,i):setTimeout(function(){h(n,e,t,i)},4),f},f.config=function(e){return f(e)},e._defined=m,i=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),!r(m,e)&&!r(v,e)&&(v[e]=[e,t,i])},i.amd={jQuery:!0}}(),i("lib/almond",function(){}),i("jquery",[],function(){return jQuery}),i("underscore",[],function(){return _||FS._}),t.config({baseUrl:"src/js",packages:[{name:"codemirror",location:"lib/codeMirror",main:"lib/codemirror"}],paths:{text:"lib/text"}}),i("main",function(){}),i("jquery-redactor-shim",["jquery"],function(e){"use strict";e.fn.jquery.split(".")[0]<=1&&e.fn.jquery.split(".")[1]<9&&(e.fn.extend({addBack:function(e){return this.add(null===e?this.prevObject:this.prevObject.filter(e))}}),e.support.createHTMLDocument=function(){var e=document.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),e.parseHTML=function(t,i,n){if("string"!=typeof t)return[];"boolean"==typeof i&&(n=i,i=!1),i=i||(e.support.createHTMLDocument?document.implementation.createHTMLDocument(""):document);var r=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/.exec(t),a=!n&&[];return r?[i.createElement(r[1])]:(r=e.buildFragment([t],[i],a),a&&a.length&&e(a).remove(),e.merge([],r.fragment.childNodes))})}),i("options",["jquery"],function(e){"use strict";return{browseFileURL:"",browseMediaURL:"",browseSiteURL:"",browseComposerSiteURL:"",codeOnly:!1,lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!1,paragraphize:!1,cleanStyleOnEnter:!1,enterKey:!0,resizable:!1,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","undo","redo","formatting","styles","bold","italic","underline","deleted","unorderedlist","orderedlist","outdent","indent","image","media","embed","file","table","link","alignment","fontcolor","backcolor","fontfamily","fontsize","horizontalrule","textdirection","fullscreen"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:[],allowedTags:!1,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],removeComments:!1,replaceTags:[["strike","del"],["b","strong"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:!1,removeEmpty:!1,activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:parseFloat(e(document.body).css("font-size")),verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],langs:{en:{add_head:"Add Head",alignment:"Alignment",align_center:"Center text",align_justify:"Justify text",align_left:"Align text to the left",align_right:"Align text to the right",anchor:"Anchor",backcolor:"Background Color",bold:"Bold",browse:"Browse",browse_composer:"Browse Composer",cancel:"Cancel",center:"Center",choose:"Choose","class":"Class",class_attr_description:"Optional; can be used to assign a particular CSS class to this link.",code:"Code",columns:"Columns",composer_site_page_browse_title:"Browse Composer Site Pages",deleted:"Deleted",delete_column:"Delete Column",delete_head:"Delete Head",delete_row:"Delete Row",delete_table:"Delete Table",download:"Download",drop_file_here:"Drop file here",edit:"Edit",embed:"Insert Embed",file:"Insert File",filename:"Name (optional)",fontcolor:"Font Color",formatting:"Formatting",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",header6:"Header 6",horizontalrule:"Insert Horizontal Rule",html:"HTML",id_attr_description:"Give this link a unique ID, allowing users to jump directly to this element from a different spot on the page. Create the jump using another link that starts with a # and points to this ID.",indent:"Indent",insert:"Insert",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_table:"Insert Table",image:"Insert Image",image_position:"Position",image_web_link:"Image Web Link",italic:"Italic",left:"Left",link:"Link",link_insert:"Insert link",link_edit:"Edit link",link_new_tab:"Open link in new tab",mailto:"Email",media:"Media",media_browse_title:"Browse Media",media_select:"Please select media",none:"None",orderedlist:"Ordered List",or_choose:"Or choose",outdent:"Outdent",paragraph:"Normal text",quote:"Quote",right:"Right",rows:"Rows",save:"Save",site_file:"Site File",site_file_select:"Please select a file",site_file_browse_title:"Browse Site Files",site_page:"Site Page",site_page_select:"Please select a site page",site_page_browse_title:"Browse Site Pages",style:"Style",table:"Table",text:"Text",title:"Title",title_attr_description:"Optional but strongly recommended. This text appears when users hover over the link; it's used to provide additional details about the link target. (Not related to SEO optimization.)",underline:"Underline",unlink:"Unlink",unorderedlist:"Unordered List",upload:"Upload",upload_label:"Drop file here or ",web:"URL",video:"Insert Embed",video_html_code:"Embed Code",_delete:"Delete"}},linkify:{regexps:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,image:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},codemirror:!1}}),i("modules/alignment",["jquery"],function(e){"use strict";function t(){}return t.prototype={left:function(){this.alignment.set("left")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(e){this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=e,this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var t=this.selection.wrap("div");e(t).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){e.each(this.alignment.blocks,e.proxy(function(e,t){var i=this.utils.getAlignmentElement(t);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks||this.alignment.blocks[0]===!1},isNeedReplaceElement:function(e){return""===this.alignment.type&&"undefined"!=typeof e.data("tagblock")},replaceElement:function(e){e.replaceWith(e.html())},alignElement:function(e){e.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(e,"style")}},t}),i("modules/block",["jquery"],function(e){"use strict";function t(){}return t.prototype={formatting:function(e){this.block.clearStyle=!1;var t,i;"undefined"!=typeof this.formatting[e].data?t="data":"undefined"!=typeof this.formatting[e].attr?t="attr":"undefined"!=typeof this.formatting[e]["class"]&&(t="class"),"undefined"!=typeof this.formatting[e].clear&&(this.block.clearStyle=!0),t&&(i=this.formatting[e][t]),this.block.format(this.formatting[e].tag,t,i)},format:function(t,i,n){"quote"===t&&(t="blockquote");var r=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];e.inArray(t,r)!==-1&&(this.block.isRemoveInline="pre"===t||t.search(/h[1-6]/i)!==-1,this.utils.browser("msie")||this.$editor[0].focus(),this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(t),this.selection.restore(),this.code.sync())},set:function(e){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(e):this.block.setMultiple(e)},setCollapsed:function(t){var i=this.block.blocks[0];if(i!==!1){if("LI"===i.tagName){if("blockquote"!==t)return;return void this.block.formatListToBlockquote()}var n="TD"===this.block.containerTag||"TH"===this.block.containerTag;if(n&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+t+">"),i=this.selection.getBlock(),this.block.toggle(e(i));else if(i.tagName.toLowerCase()!==t)if(this.opts.linebreaks&&"p"===t)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var r=this.utils.replaceToTag(i,t);this.block.toggle(r),"p"!==t&&"blockquote"!==t&&r.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"===t||this.block.headTag)&&r.find("p").contents().unwrap(),this.block.formatTableWrapping(r)}else if("blockquote"===t&&i.tagName.toLowerCase()===t)if(this.opts.linebreaks)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var a=this.utils.replaceToTag(i,"p");this.block.toggle(a)}else i.tagName.toLowerCase()===t&&this.block.toggle(e(i));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&e(i).removeAttr("class").removeAttr("style")}},setMultiple:function(t){var i=this.block.blocks[0],n="TD"===this.block.containerTag||"TH"===this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()===t&&"blockquote"===t)if(this.opts.linebreaks)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var r=this.utils.replaceToTag(i,"p");this.block.toggle(r)}else if("LI"===i.tagName){if("blockquote"!==t)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"===this.block.containerTag)this.block.formatBlockquote(t);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!==i))this.block.formatWrap(t);else if(this.opts.linebreaks&&"p"===t)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(t);else{var a=this.utils.replaceToTag(i,t);this.block.toggle(a),this.block.isRemoveInline&&this.utils.removeInlineTags(a),("p"===t||this.block.headTag)&&a.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!==t){if("blockquote"===t){for(var o=0,s=0;s<this.block.blocksSize;s++)"BLOCKQUOTE"===this.block.blocks[s].tagName&&o++;if(o===this.block.blocksSize)return void e.each(this.block.blocks,e.proxy(function(t,i){var n=!1;this.opts.linebreaks?(e(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(t)}else{var l=0,d=!1;"class"===this.block.type&&(d="toggle",l=e(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize===l?d="toggle":this.block.blocksSize>l?d="set":0===l&&(d="set"));var c=["ul","ol","li","td","th","dl","dt","dd"];e.each(this.block.blocks,e.proxy(function(i,n){if(e.inArray(n.tagName.toLowerCase(),c)===-1){var r=this.utils.replaceToTag(n,t);d?"toggle"===d?this.block.toggle(r):"remove"===d?this.block.remove(r):"set"===d&&this.block.setForce(r):this.block.toggle(r),"p"!==t&&"blockquote"!==t&&r.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"===t||this.block.headTag)&&r.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&r.removeAttr("class").removeAttr("style")}},this))}},setForce:function(e){return this.block.clearStyle&&e.removeAttr("class").removeAttr("style"),"class"===this.block.type?void e.addClass(this.block.value):"attr"===this.block.type||"data"===this.block.type?void e.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(e){return this.block.clearStyle&&e.removeAttr("class").removeAttr("style"),"class"===this.block.type?void e.toggleClass(this.block.value):"attr"===this.block.type||"data"===this.block.type?void(e.attr(this.block.value.name)===this.block.value.value?e.removeAttr(this.block.value.name):e.attr(this.block.value.name,this.block.value.value)):void e.removeAttr("style class")},remove:function(e){e.removeClass(this.block.value)},formatListToBlockquote:function(){var t=e(this.block.blocks[0]).closest("ul, ol",this.$editor[0]);e(t).find("ul, ol").contents().unwrap(),e(t).find("li").append(e("<br>")).contents().unwrap();var i=this.utils.replaceToTag(t,"blockquote");this.block.toggle(i)},formatBlockquote:function(t){document.execCommand("outdent"),document.execCommand("formatblock",!1,t),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!==t&&e(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(e(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(e.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"===t&&this.utils.replaceWithContents(i)},formatWrap:function(t){if("UL"===this.block.containerTag||"OL"===this.block.containerTag){if("blockquote"!==t)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(t);if(i!==!1){var n=e(i);this.block.formatTableWrapping(n);var r=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");(this.opts.linebreaks&&"p"===t||"pre"===t||"blockquote"===t)&&r.append("<br />"),r.contents().unwrap(),"p"!==t&&"blockquote"!==t&&n.find("img").remove(),e.each(this.block.blocks,e.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(e.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"===t&&this.utils.replaceWithContents(n)}},formatTableWrapping:function(e){0!==e.closest("table",this.$editor[0]).length&&(0===e.closest("tr",this.$editor[0]).length&&e.wrap("<tr>"),0===e.closest("td",this.$editor[0]).length&&0===e.closest("th").length&&e.wrap("<td>"))},removeData:function(t){var i=this.selection.getBlocks();e(i).removeAttr("data-"+t),this.code.sync()},setData:function(t,i){var n=this.selection.getBlocks();e(n).attr("data-"+t,i),this.code.sync()},toggleData:function(t,i){var n=this.selection.getBlocks();e.each(n,function(){e(this).attr("data-"+t)?e(this).removeAttr("data-"+t):e(this).attr("data-"+t,i)})},removeAttr:function(t){var i=this.selection.getBlocks();e(i).removeAttr(t),this.code.sync()},setAttr:function(t,i){var n=this.selection.getBlocks();e(n).attr(t,i),this.code.sync()},toggleAttr:function(t,i){var n=this.selection.getBlocks();e.each(n,function(){e(this).attr(name)?e(this).removeAttr(name):e(this).attr(name,i)})},removeClass:function(t){var i=this.selection.getBlocks();e(i).removeClass(t),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(t){var i=this.selection.getBlocks();e(i).addClass(t),this.code.sync()},toggleClass:function(t){var i=this.selection.getBlocks();e(i).toggleClass(t),this.code.sync()}},t}),i("modules/buffer",["jquery"],function(e){"use strict";function t(){}return t.prototype={set:function(e,t){"undefined"==typeof e||"undo"===e?(this.buffer.setUndo(),t||this.buffer.clearRebuffer()):this.buffer.setRedo(),this.buffer.toggleUndoButtonStatus()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop()),this.buffer.toggleUndoButtonStatus()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop()),this.buffer.toggleUndoButtonStatus()},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo",!0),this.buffer.getRedo(),this.selection.restore(),setTimeout(e.proxy(this.observe.load,this),50))},clearBuffer:function(){for(;this.opts.buffer.length>0;)this.opts.buffer.pop();this.buffer.toggleUndoButtonStatus()},clearRebuffer:function(){for(;this.opts.rebuffer.length>0;)this.opts.rebuffer.pop();this.buffer.toggleUndoButtonStatus()},toggleUndoButtonStatus:function(){this.$toolbar.find(".re-undo").toggleClass("redactor-button-disabled",!this.opts.buffer.length),this.$toolbar.find(".re-redo").toggleClass("redactor-button-disabled",!this.opts.rebuffer.length)},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(e.proxy(this.observe.load,this),50))}},t}),i("modules/build",["jquery"],function(e){"use strict";function t(){}return t.prototype={run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=e('<div class="redactor-box" />')},createTextarea:function(){this.$textarea=e("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){if(this.$sourceTextarea=e("textarea.redactorContent",this.$element[0]),this.$sourceTextarea.length)return this.content=this.$sourceTextarea.val(),void this.$sourceTextarea.detach();if(this.$element.next("textarea").length)return void(this.content=this.$element.next("textarea").val());var t=this.build.isTextarea()?"val":"html";this.content=e.trim(this.$element[t]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var e=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[e]()},fromTextarea:function(){this.$editor=e("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(e.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(e.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){e(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(e){if(e.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var t=e.dataTransfer.files;this.upload.directUpload(t[0],e)}},setEventDrop:function(e){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",e)},setEvents:function(){this.$editor.on("drop.redactor",e.proxy(function(e){return e=e.originalEvent||e,void 0===window.FormData||!e.dataTransfer||(0===e.dataTransfer.files.length?this.build.setEventDrop(e):(this.build.setEventDropUpload(e),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",e),void 0))},this)),this.$editor.on("click.redactor",e.proxy(function(e){var t=this.core.getEvent(),i="click"!==t&&"arrow"!==t&&"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",e)},this)),this.$editor.on("paste.redactor",e.proxy(this.paste.init,this)),this.$editor.on("cut.redactor",e.proxy(this.code.sync,this)),this.$editor.on("keydown.redactor",e.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",e.proxy(this.keyup.init,this)),e.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",e.proxy(this.opts.codeKeydownCallback,this)),e.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",e.proxy(this.opts.codeKeyupCallback,this)),e.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",e.proxy(this.opts.focusCallback,this));var t;e(document).on("mousedown focusin",function(e){t=e.target}),this.$editor.on("blur.redactor",e.proxy(function(i){this.rtePaste||this.build.isBlured(t)&&(this.code.sync(),this.$textarea.trigger("change"),this.utils.disableSelectAll(),e.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",i))},this))},isBlured:function(t){var i=e(t);return!(!i.is(".redactor-editor")||i[0]===this.$editor[0])||!i.hasClass("redactor-toolbar, redactor-dropdown")&&!i.is("#redactor-modal")&&0===i.parents(".redactor-toolbar, .redactor-dropdown, #redactor-modal").length&&0===i.closest(this.$editor).length},setHelpers:function(){this.linkify.isEnabled()&&this.linkify.format(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){e.each(this.modules,e.proxy(function(t,i){e.isFunction(this[i].initialize)&&this[i].initialize()},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}}},t}),i("modules/button",["jquery"],function(e){"use strict";function t(){}return t.prototype={build:function(t,i){var n=e('<a href="#" class="re-icon re-'+t+'" rel="'+t+'" />').attr("tabindex","-1");if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,t,i),i.dropdown){var r=e('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+t+'" style="display: none;">');n.data("dropdown",r),this.dropdown.build(t,r,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,t,i.title),n},setEvent:function(t,i,n){t.on("mousedown",function(e){e.stopPropagation()}),t.on("touchstart click",e.proxy(function(e){if(t.hasClass("redactor-button-disabled"))return!1;var r="func",a=n.func;n.command?(r="command",a=n.command):n.dropdown&&(r="dropdown",a=!1),this.button.onClick(e,i,r,a)},this))},createTooltip:function(t,i,n){var r=e("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+i).hide().html(n);r.appendTo("body"),t.on("mouseover",function(){if(!e(this).hasClass("redactor-button-disabled")){var i=t.offset();r.show(),r.css({top:i.top+t.innerHeight()+"px",left:i.left+t.innerWidth()/2-r.innerWidth()/2+"px"})}}),t.on("mouseout mouseup",function(){r.hide()})},onClick:function(e,t,i,n){this.button.caretOffset=this.caret.getOffset(),e.preventDefault(),this.utils.browser("msie")&&(e.returnValue=!1),"command"===i?this.inline.format(n):"dropdown"===i?this.dropdown.show(e,t):this.button.onClickCallback(e,n,t)},onClickCallback:function(t,i,n){var r;if(e.isFunction(i))i.call(this,n);else if("-1"!==i.search(/\./)){if(r=i.split("."),"undefined"==typeof this[r[0]])return;this[r[0]][r[1]](n)}else this[i](n);this.observe.buttons(t,n)},get:function(e){return this.$toolbar.find("a.re-"+e)},setActive:function(e){this.button.get(e).addClass("redactor-act")},setInactive:function(e){this.button.get(e).removeClass("redactor-act")},setInactiveAll:function(e){"undefined"==typeof e?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+e).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html").addClass("redactor-button-disabled")},changeIcon:function(e,t){this.button.get(e).addClass("re-"+t)},removeIcon:function(e,t){this.button.get(e).removeClass("re-"+t)},setAwesome:function(e,t){var i=this.button.get(e);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+t+'"></i>')},addCallback:function(t,i){var n="dropdown"===i?"dropdown":"func",r=t.attr("rel");"dropdown"===n&&t.addClass("re-has-dropdown"),t.on("mousedown",function(e){e.stopPropagation()}),t.on("touchstart click",e.proxy(function(e){return!t.hasClass("redactor-button-disabled")&&void this.button.onClick(e,r,n,i)},this))},addDropdown:function(t,i){var n=t.attr("rel");this.button.addCallback(t,"dropdown");var r=e('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return t.data("dropdown",r),r.on("mousedown",function(e){e.stopPropagation()}),i&&this.dropdown.build(n,r,i),r},add:function(t,i){if(this.opts.toolbar){var n=this.button.build(t,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(e("<li>").append(n)),n}},addFirst:function(t,i){if(this.opts.toolbar){var n=this.button.build(t,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(e("<li>").append(n)),n}},addAfter:function(t,i,n){if(this.opts.toolbar){var r=this.button.build(i,{title:n});r.addClass("redactor-btn-image");var a=this.button.get(t);return 0!==a.length?a.parent().after(e("<li>").append(r)):this.$toolbar.append(e("<li>").append(r)),r}},addBefore:function(t,i,n){if(this.opts.toolbar){var r=this.button.build(i,{title:n});r.addClass("redactor-btn-image");var a=this.button.get(t);return 0!==a.length?a.parent().before(e("<li>").append(r)):this.$toolbar.append(e("<li>").append(r)),r}},remove:function(e){this.button.get(e).remove()}},t}),i("modules/caret",["jquery"],function(e){"use strict";function t(){}return t.prototype={setStart:function(t){if(this.utils.isInline(t)){var i=this.utils.createSpaceElement();e(t).prepend(i),this.caret.setEnd(i)}else this.caret.set(t,0,t,0)},setEnd:function(e){this.caret.set(e,1,e,1)},set:function(t,i,n,r){if(t=t[0]||t,n=n[0]||n,this.utils.isBlockTag(t.tagName)&&""===t.innerHTML&&(t.innerHTML=this.opts.invisibleSpace),"BR"===t.tagName&&this.opts.linebreaks===!1){var a=e(this.opts.emptyHtml)[0];e(t).replaceWith(a),t=a,n=t}this.selection.get();try{this.range.setStart(t,i),this.range.setEnd(n,r)}catch(e){}this.selection.addRange()},setAfter:function(t){try{var i=e(t)[0].tagName;if("BR"!==i&&this.utils.isInline(t)){var n=this.utils.createSpaceElement();e(t).after(n),this.caret.setEnd(n)}else"BR"!==i&&this.utils.browser("msie")?this.caret.setStart(e(t).next()):this.caret.setAfterOrBefore(t,"after")}catch(i){var n=this.utils.createSpaceElement();e(t).after(n),this.caret.setEnd(n)}},setBefore:function(t){this.utils.isBlock(t)?this.caret.setEnd(e(t).prev()):this.caret.setAfterOrBefore(t,"before")},setAfterOrBefore:function(e,t){if(this.utils.browser("msie")||this.$editor[0].focus(),e=e[0]||e,this.selection.get(),"after"===t)try{this.range.setStartAfter(e),this.range.setEndAfter(e)}catch(e){}else try{this.range.setStartBefore(e),this.range.setEndBefore(e)}catch(e){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(t){t=t[0]||t,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(t),i.setEnd(this.range.endContainer,this.range.endOffset),e.trim(i.toString()).length},getOffset:function(){var e=0,t=window.getSelection();if(t.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),e=n.toString().length}return e},setOffset:function(e,t){"undefined"==typeof t&&(t=e),this.focus.isFocused()||this.focus.setStart();for(var i,n=0,r=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=r.nextNode();)if(n+=i.nodeValue.length,n>e&&(this.range.setStart(i,i.nodeValue.length+e-n),e=1/0),n>=t){this.range.setEnd(i,i.nodeValue.length+t-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(e,t){this.caret.setOffset(e,t)},getCoords:function(){
return this.caret.getOffset()}},t}),i("modules/clean",["jquery"],function(e){"use strict";function t(){}var i=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","multicol","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];return t.prototype={onSet:function(t){t=this.clean.savePreCode(t),t=this.clean.convertPre(t,"redactor-script-tag","script",!0),t=this.clean.convertPre(t,"redactor-noscript-tag","noscript"),t=t.replace(/<a href="([^>]*?)\xae([^>]*?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.clean.saveFormTags(t);var i=e("<div>");i.html(t);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var t=e(this),i=e("<span>").attr("style",t.attr("style"));return i.append(t.contents())}),t=i.html()),i.remove(),t=t.replace(/<font([^<]*)>/gi,""),t=t.replace(/<\/font>/gi,""),t=this.tidy.load(t),this.opts.paragraphize&&(t=this.paragraphize.load(t)),t=this.clean.setVerified(t),t=this.clean.convertInline(t)},onSync:function(t){if(t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(t=t.replace(/&nbsp;/gi," ")),t.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i)!==-1)return"";t=this.clean.restoreFormTags(t);var i={"\u2122":"&trade;","\xa9":"&copy;","\u2026":"&hellip;","\u2014":"&mdash;","\u2010":"&dash;"};return e.each(i,function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t=t.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),t=t.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),t=t.replace(/<div([^>]*) data-tagblock="redactor"([^>]*)>/gi,"<div$1$2>"),t=t.replace(/<([^>]*) data-verified="redactor"([^>]*)>/gi,"<$1$2>"),t=t.replace(/<span([^>]*)\srel="([^>]*?)"([^>]*)>/gi,"<span$1$3>"),t=t.replace(/<img([^>]*)\srel="([^>]*?)"([^>]*)>/gi,"<img$1$3>"),t=t.replace(/<img([^>]*)\sstyle="" ([^>]*)>'/gi,"<img$1 $2>"),t=t.replace(/<img([^>]*)\sstyle ([^>]*)>'/gi,"<img$1 $2>"),t=t.replace(/<span class="redactor-invisible-space">([^<]*)<\/span>/gi,"$1"),t=t.replace(/ data-save-url="([^>]*?)"/gi,""),t=t.replace(/<span([^>]*)id="redactor-image-box"([^>]*)>([\w\W]*?)<img([^>]*)><\/span>/gi,"$3<img$4>"),t=t.replace(/<span([^>]*)id="redactor-image-resizer"([^>]*)>([^<]*)<\/span>/gi,""),t=t.replace(/<span([^>]*)id="redactor-image-editter"([^>]*)>([^<]*)<\/span>/gi,""),t=t.replace(/<font([^>]*)>/gi,""),t=t.replace(/<\/font>/gi,""),t=this.tidy.load(t),t=this.clean.reconvertPre(t,"redactor-script-tag","script",!0),t=this.clean.reconvertPre(t,"redactor-noscript-tag","noscript"),this.opts.linkNofollow&&(t=t.replace(/<a([^>]*)rel="nofollow"([^>]*)>/gi,"<a$1$2>"),t=t.replace(/<a([^>]*)>/gi,'<a$1 rel="nofollow">')),t=t.replace(/\sdata-redactor-(tag|class|style)="([^>]*?)"/gi,""),t=t.replace(new RegExp('<([^>]*) data-verified="redactor"([^>]*)>',"gi"),"<$1$2>"),t=t.replace(new RegExp('<([^>]*) data-verified="redactor">',"gi"),"<$1>")},convertPre:function(e,t,i,n){var r=new RegExp("<"+i+"([^>]*)>([\\w\\W]*?)</"+i+">","gi"),a=e.split(r);if(a.length<4)return e;for(var o=1;o<a.length;o+=3)a[o]='<pre class="'+t+'" style="display: none;"'+a[o]+">",a[o+1]=n?this.clean.encodeEntities(a[o+1]):a[o+1],a[o+2]="</pre>"+a[o+2];return a.join("")},reconvertPre:function(e,t,i,n){var r,a=new RegExp('<pre class="'+t+'" style="display: none;"([^>]*)>([\\w\\W]*?)</pre>',"gi"),o=e.split(a),s=0;if(o.length<4)return e;for(var l=1;l<o.length;l+=3)r=this.$editor.find("pre."+t+":eq("+s+")"),o[l]="<"+i+" "+o[l]+">",o[l+1]=n?r.text():r.html(),o[l+2]="</"+i+">"+o[l+2],s++;return o.join("")},onPaste:function(t,i){if(t=e.trim(t),t=t.replace(/<span class="s1">/gi,"<span>"),t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),t=t.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"\t"),t=t.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(t);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(t,!1);if(this.utils.isCurrentOrParent("PRE"))return t=t.replace(/\u201d/g,'"'),t=t.replace(/\u201c/g,'"'),t=t.replace(/\u2018/g,"'"),t=t.replace(/\u2019/g,"'"),this.clean.getPreCode(t);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(t=this.clean.getOnlyImages(t),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"===n.tagName&&(t=t.replace(/<img([^>]*)>/gi,"<p><img$1></p>"))}return t}if(this.utils.isCurrentOrParent(["TD"]))return t=this.clean.onPasteTidy(t,"td"),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.clean.replaceDivsToBr(t);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(t,"li")}return t=this.clean.isSingleLine(t,i),this.clean.singleLine||(this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),t=this.clean.saveFormTags(t)),t=this.clean.onPasteWord(t),t=this.clean.onPasteExtra(t),t=this.clean.onPasteTidy(t,"strict"),!this.clean.singleLine&&this.opts.paragraphize&&(t=this.paragraphize.load(t)),t=this.clean.removeDirtyStyles(t),t=this.clean.onPasteRemoveSpans(t),t=this.clean.onPasteRemoveEmpty(t),t=this.clean.convertInline(t)},onPasteWord:function(e){return e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(e)&&(e=this.clean.onPasteIeFixLinks(e),e=e.replace(/<img([^>]*)v:shapes=([^>]*)>/gi,""),e=e.replace(/src="file\:\/\/(.*?)"/,'src=""'),e=e.replace(/<p([^>]*)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),e=e.replace(/<p([^>]*)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),e=e.replace(/<p([^>]*)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),e=e.replace(/<p([^>]*)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),e=e.replace(/\xb7/g,""),e=e.replace(/<p class="Mso([^>]*?)"/gi,"<p"),e=e.replace(/ class=\"(mso[^\"]*)\"/gi,""),e=e.replace(/ class=(mso\w+)/gi,""),e=e.replace(/<o:p([^>]*)>([\w\W]*?)<\/o:p>/gi,"$2"),e=e.replace(/<w:sdt([^>]*)>([\w\W]*?)<\/w:sdt[^>]*>/gi,"$2"),e=e.replace(/<w:sdt([^>]*)>([\w\W]*?)<\/w:sdt[^>]*>/gi,"$2"),e=e.replace(/\n/g," "),e=e.replace(/<p>\n?<li>/gi,"<li>")),this.opts.cleanSpaces&&(e=e.replace(/(\s|&nbsp;)+/g," ")),e},onPasteExtra:function(e){return e=e.replace(/<b\sid="internal-source-marker([^>]*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b([^>]*)id="docs-internal-guid([^>]*?)">([\w\W]*?)<\/b>/gi,"$3"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),e=e.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),e=e.replace(/<img>/gi,""),e=e.replace(/\n{3,}/gi,"\n"),e=e.replace(/<font([^>]*)>([\w\W]*?)<\/font>/gi,"$2"),e=e.replace(/<p><p>/gi,"<p>"),e=e.replace(/<\/p><\/p>/gi,"</p>"),e=e.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),e=e.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),e=e.replace(/<\/p>\s<p/gi,"</p><p"),e=e.replace(/<img src="webkit-fake-url\:\/\/([^>]*?)"([^>]*)>/gi,""),e=e.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(e=e.replace(/<br\s?\/?>$/gi,"")),e},onPasteTidy:function(e,t){var n,r=i,a=!1,o=!1,s=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];if("all"===t)for(a=["p","span","h1","h2","h3","h4","h5","h6"],s=[],n=0;n<r.length;n++)s.push([r[n],["*"]]);else if("strict"===t)for(a=["p","span","h1","h2","h3","h4","h5","h6"],s=[],o=[],n=0;n<r.length;n++)o.push([r[n],["style"]]);else"td"===t?r=["table","tr","td","tbody","thead","tfoot","colgroup","col","caption","ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"===t&&(r=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var l={deniedTags:!!this.opts.deniedTags&&this.opts.deniedTags,allowedTags:this.opts.allowedTags?this.opts.allowedTags:r,removeComments:!0,removePhp:!0,removeAttr:this.opts.removeAttr?this.opts.removeAttr:o,allowedAttr:this.opts.allowedAttr?this.opts.allowedAttr:s,removeEmpty:a};return this.tidy.load(e,l)},onPasteRemoveEmpty:function(e){return e=e.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(e=e.replace(/<br>$/i,"")),e},onPasteRemoveSpans:function(e){return e=e.replace(/<span>([^<]*)<\/span>/gi,"$1"),e=e.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(t){if(!this.utils.browser("msie"))return t;var i=e.trim(t);return 0===i.search(/^<a([^>]*)>([^<]*)<\/a>$/i)&&(t=t.replace(/^<a([^>]*)>([^<]*)<\/a>$/i,"$2")),t},isSingleLine:function(e,t){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof t){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=e.match(new RegExp("</("+i+")>","gi")),r=e.match(/<\/(p|div)>/gi);if(!n&&(null===r||r&&r.length<=1)){var a=e.match(/<br\s?\/?>/gi),o=e.match(/<img([^>]*)>/gi);!a&&!o&&(this.clean.singleLine=!0,e=e.replace(/<\/?(p|div)([^>]*)>/gi,""))}}return e},stripTags:function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})},savePreCode:function(e){return e=this.clean.savePreFormatting(e),e=this.clean.saveCodeFormatting(e)},savePreFormatting:function(t){var i=t.match(/<pre([^>]*)>([\w\W]*?)<\/pre>/gi);return null!==i&&e.each(i,e.proxy(function(e,i){var n=i.match(/<pre([^>]*)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),t},saveCodeFormatting:function(t){var i=t.match(/<code([^>]*)>([^<]*)<\/code>/gi);return null!==i&&e.each(i,e.proxy(function(e,i){var n=i.match(/<code([^>]*)>([^<]*)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),t},getTextFromHtml:function(t){t=t.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=t,t=i.textContent||i.innerText,e.trim(t)},getPlainText:function(e,t){return e=this.clean.getTextFromHtml(e),e=e.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof t&&!this.utils.browser("mozilla")&&(e=this.paragraphize.load(e)),e},getPreCode:function(e){return e=e.replace(/<img([^>]*) style="([^>]*?)"([^>]*)>/gi,"<img$1$3>"),e=e.replace(/<img([^>]*)>/gi,"&lt;img$1&gt;"),e=this.clean.getTextFromHtml(e),this.opts.preSpaces&&(e=e.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),e=this.clean.encodeEntities(e)},getOnlyImages:function(e){return e=e.replace(/<img([^>]*)>/gi,"[img$1]"),e=e.replace(/<([Ss]*?)>/gi,""),e=e.replace(/\[img([^>]*)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(e){return e=e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),e=e.replace(/<img(.*?)>/gi,"[img$1]"),e=e.replace(/<(.*?)>/gi,""),e=e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),e=e.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(e){return e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(t){if(this.utils.browser("msie"))return t;var i=document.createElement("div");return i.innerHTML=t,this.clean.clearUnverifiedRemove(e(i)),t=i.innerHTML,e(i).remove(),t},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var e=this.$editor.find("h1, h2, h3, h4, h5, h6");e.find("span").removeAttr("style"),e.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(t){t.find("span").not('[data-verified="redactor"]').contents().unwrap(),t.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(t,i){var n=e(i);n.attr("style",n.attr("rel"))})},cleanEmptyParagraph:function(){var e=this.$editor.find("p").first();this.utils.isEmpty(e.html())&&e.remove()},setVerified:function(e){if(this.utils.browser("msie"))return e;e=e.replace(new RegExp("<img([^>]*)>","gi"),'<img$1 data-verified="redactor">'),e=e.replace(new RegExp("<span([^>]*)>","gi"),'<span$1 data-verified="redactor">');var t=e.match(new RegExp('<(span|img)([^>]*)style="([^"]*)"([^>]*)>',"gi"));if(t)for(var i=t.length,n=0;n<i;n++)try{var r=t[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');e=e.replace(t[n],r)}catch(e){}return e},convertInline:function(t){var i=e("<div />").html(t),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var t=e(this),i=this.tagName.toLowerCase();t.attr("data-redactor-tag",i),"span"===i&&(t.attr("style")?t.attr("data-redactor-style",t.attr("style")):t.attr("class")&&t.attr("data-redactor-class",t.attr("class")))}),t=i.html(),i.remove(),t},normalizeLists:function(){this.$editor.find("li").each(function(t,i){var n=e(i).next();0!==n.length&&("UL"===n[0].tagName||"OL"===n[0].tagName)&&e(i).append(n)})},removeSpaces:function(e){return e},replaceDivs:function(e){return this.opts.linebreaks?(e=e.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),e=e.replace(/<div([^>]*)>/gi,""),e=e.replace(/<\/div>/gi,"")},replaceDivsToBr:function(e){return e=e.replace(/<div\s(.*?)>/gi,"<p>"),e=e.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),e=e.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(e){return e=e.replace(/<p\s(.*?)>/gi,"<p>"),e=e.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),e=e.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(e){return e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(e){return e.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}},t}),i("modules/code",["jquery"],function(e){"use strict";function t(){}return t.prototype={set:function(t){t=e.trim(t.toString()),t=this.clean.onSet(t),this.$editor.html(t),this.code.sync(),""!==t&&this.placeholder.remove(),setTimeout(e.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var e=this.$textarea.val();return e},sync:function(){var t=function(){this.code.syncTimeout=null,this.code.startSync.apply(this)};this.code.syncTimeout||this.code.startSync.apply(this),clearTimeout(this.code.syncTimeout),this.code.syncTimeout=setTimeout(e.proxy(t,this),50)},startSync:function(){var e=this.$editor.html();"undefined"!=typeof this.code.syncCode&&this.code.syncCode===e||(this.utils.isIe11()&&"<br>"===e&&(e=""),this.code.syncCode=e,e=this.core.setCallback("syncBefore",e),e=this.clean.onSync(e),this.$textarea.val(e),this.core.setCallback("sync",e),e=this.$textarea.val(),this.start===!1&&this.core.setCallback("change",e),this.start=!1,this.opts.codemirror&&this.$textarea.next(".CodeMirror").each(function(t,i){i.CodeMirror.setValue(e)}))},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.code.offset=this.caret.getOffset();var t=e(window).scrollTop(),i=this.$editor.innerHeight();this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),this.$textarea.val(n),this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(t,r){e(r).show(),r.CodeMirror.setValue(n),r.CodeMirror.setSize(null,i),r.CodeMirror.refresh(),r.CodeMirror.focus()}):(this.$textarea.height(i).show().get(0).focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),e(window).scrollTop(t),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(0,0),this.$textarea[0].scrollTop=0),this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){var e;this.opts.visual||(this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(t,i){e=i.CodeMirror.getValue()}):e=this.$textarea.hide().val(),this.modified!==this.clean.removeSpaces(e)&&this.code.set(e),this.opts.codemirror&&this.$textarea.next(".CodeMirror").hide(),this.$editor.show(),this.utils.isEmpty(e)||this.placeholder.remove(),this.caret.setOffset(this.code.offset),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",e))},textareaIndenting:function(e){if(9!==e.keyCode)return!0;var t=this.$textarea,i=t.get(0).selectionStart;return t.val(t.val().substring(0,i)+"\t"+t.val().substring(t.get(0).selectionEnd)),t.get(0).selectionStart=t.get(0).selectionEnd=i+1,!1}},t}),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof i&&i.amd)return i("codemirror/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){"use strict";function e(i,n){if(!(this instanceof e))return new e(i,n);this.options=n=n?gr(n):{},gr(Pa,n,!1),p(n);var r=n.value;"string"==typeof r&&(r=new io(r,n.mode)),this.doc=r;var a=this.display=new t(i,r);a.wrapper.CodeMirror=this,c(this),l(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!da&&Ct(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new lr},Jr&&Zr<11&&setTimeout(mr(St,this,!0),20),At(this),Dr(),Ze(this),this.curOp.forceUpdate=!0,In(this,r),n.autofocus&&!da||Sr()==a.input?setTimeout(mr(Qt,this),20):Jt(this);for(var o in Ra)Ra.hasOwnProperty(o)&&Ra[o](this,n[o],Oa);_(this);for(var s=0;s<ja.length;++s)ja[s](this);tt(this)}function t(e,t){var i=this,n=i.input=_r("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");ea?n.style.width="1000px":n.setAttribute("wrap","off"),la&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=_r("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=_r("div",[_r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=_r("div",[_r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=_r("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=_r("div",null,"CodeMirror-gutter-filler"),i.lineDiv=_r("div",null,"CodeMirror-code"),i.selectionDiv=_r("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=_r("div",null,"CodeMirror-cursors"),i.measure=_r("div",null,"CodeMirror-measure"),i.lineMeasure=_r("div",null,"CodeMirror-measure"),i.lineSpace=_r("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=_r("div",[_r("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=_r("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=_r("div",null,null,"position: absolute; height: "+fo+"px; width: 1px;"),i.gutters=_r("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=_r("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=_r("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Jr&&Zr<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),la&&(n.style.width="0px"),ea||(i.scroller.draggable=!0),aa&&(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"),Jr&&Zr<8&&(i.scrollbarH.style.minHeight=i.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(i.wrapper):e(i.wrapper),i.viewFrom=i.viewTo=t.first,i.view=[],i.externalMeasured=null,i.viewOffset=0,i.lastSizeC=0,i.updateLineNumbers=null,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new lr,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ee(e,100),e.state.modeGen++,e.curOp&&pt(e)}function r(e){e.options.lineWrapping?(kr(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(xr(e.display.wrapper,"CodeMirror-wrap"),f(e)),o(e),pt(e),He(e),setTimeout(function(){v(e)},100)}function a(e){var t=Qe(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/Je(e.display)-3);return function(r){if(tn(e.doc,r))return 0;var a=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(a+=r.widgets[o].height);return i?a+(Math.ceil(r.text.length/n)||1)*t:a+t}}function o(e){var t=e.doc,i=a(e);t.iter(function(e){var t=i(e);t!=e.height&&Rn(e,t)})}function s(e){var t=za[e.options.keyMap],i=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(i?" cm-keymap-"+i:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),He(e)}function d(e){c(e),pt(e),setTimeout(function(){b(e)},20)}function c(e){var t=e.display.gutters,i=e.options.gutters;wr(t);for(var n=0;n<i.length;++n){var r=i[n],a=t.appendChild(_r("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=a,a.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function h(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=Vi(n);){var r=t.find(0,!0);n=r.from.line,i+=r.from.ch-r.to.ch}for(n=e;t=Ki(n);){var r=t.find(0,!0);i-=n.text.length-r.from.ch,n=r.to.line,i+=n.text.length-r.to.ch}return i}function f(e){var t=e.display,i=e.doc;t.maxLine=Dn(i,i.first),t.maxLineLength=h(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=h(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function p(e){var t=hr(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function g(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<fo-3}function m(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:g(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+ke(e.display))}}function v(e,t){t||(t=m(e));var i=e.display,n=Pr(i.measure),r=t.docHeight+fo,a=t.scrollWidth>t.clientWidth;a&&t.scrollWidth<=t.clientWidth+1&&n>0&&!t.hScrollbarTakesSpace&&(a=!1);var o=r>t.clientHeight;if(o?(i.scrollbarV.style.display="block",i.scrollbarV.style.bottom=a?n+"px":"0",i.scrollbarV.firstChild.style.height=Math.max(0,r-t.clientHeight+(t.barHeight||i.scrollbarV.clientHeight))+"px"):(i.scrollbarV.style.display="",i.scrollbarV.firstChild.style.height="0"),a?(i.scrollbarH.style.display="block",i.scrollbarH.style.right=o?n+"px":"0",i.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||i.scrollbarH.clientWidth)+"px"):(i.scrollbarH.style.display="",i.scrollbarH.firstChild.style.width="0"),a&&o?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=i.scrollbarFiller.style.width=n+"px"):i.scrollbarFiller.style.display="",a&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n+"px",i.gutterFiller.style.width=i.gutters.offsetWidth+"px"):i.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===n){var s=ca&&!oa?"12px":"18px";i.scrollbarV.style.minWidth=i.scrollbarH.style.minHeight=s;var l=function(t){er(t)!=i.scrollbarV&&er(t)!=i.scrollbarH&&dt(e,Pt)(t)};lo(i.scrollbarV,"mousedown",l),lo(i.scrollbarH,"mousedown",l)}e.state.checkedOverlayScrollbar=!0}}function y(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-xe(e));var r=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,a=Nn(t,n),o=Nn(t,r);if(i&&i.ensure){var s=i.ensure.from.line,l=i.ensure.to.line;if(s<a)return{from:s,to:Nn(t,Ln(Dn(t,s))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=o)return{from:Nn(t,Ln(Dn(t,l))-e.wrapper.clientHeight),to:l}}return{from:a,to:Math.max(o,a+1)}}function b(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=E(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,a=n+"px",o=0;o<i.length;o++)if(!i[o].hidden){e.options.fixedGutter&&i[o].gutter&&(i[o].gutter.style.left=a);var s=i[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}}function _(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=w(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(_r("div",[_r("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=r.firstChild.offsetWidth,o=r.offsetWidth-a;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(a,n.lineGutter.offsetWidth-o),n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",u(e),!0}return!1}function w(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function E(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function T(e,t,i){var n=e.display;this.viewport=t,this.visible=y(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=i,this.dims=M(e)}function S(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return mt(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&0==_t(e))return!1;_(e)&&(mt(e),t.dims=M(e));var r=n.first+n.size,a=Math.max(t.visible.from-e.options.viewportMargin,n.first),o=Math.min(r,t.visible.to+e.options.viewportMargin);i.viewFrom<a&&a-i.viewFrom<20&&(a=Math.max(n.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(r,i.viewTo)),ma&&(a=Zi(e.doc,a),o=en(e.doc,o));var s=a!=i.viewFrom||o!=i.viewTo||i.lastSizeC!=t.wrapperHeight;bt(e,a,o),i.viewOffset=Ln(Dn(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=_t(e);if(!s&&0==l&&!t.force&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var d=Sr();return l>4&&(i.lineDiv.style.display="none"),P(e,i.updateLineNumbers,t.dims),l>4&&(i.lineDiv.style.display=""),d&&Sr()!=d&&d.offsetHeight&&d.focus(),wr(i.cursorDiv),wr(i.selectionDiv),s&&(i.lastSizeC=t.wrapperHeight,Ee(e,400)),i.updateLineNumbers=null,!0}function C(e,t){for(var i=t.force,n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)i=!0;else if(i=!1,n&&null!=n.top&&(n={top:Math.min(e.doc.height+ke(e.display)-fo-e.display.scroller.clientHeight,n.top)}),t.visible=y(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!S(e,t))break;I(e);var a=m(e);ye(e),k(e,a),v(e,a)}ir(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&ir(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function x(e,t){var i=new T(e,t);if(S(e,i)){I(e),C(e,i);var n=m(e);ye(e),k(e,n),v(e,n)}}function k(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-fo)+"px"}function A(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function I(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var r,a=t.view[n];if(!a.hidden){if(Jr&&Zr<8){var o=a.node.offsetTop+a.node.offsetHeight;r=o-i,i=o}else{var s=a.node.getBoundingClientRect();r=s.bottom-s.top}var l=a.line.height-r;if(r<2&&(r=Qe(t)),(l>.001||l<-.001)&&(Rn(a.line,r),D(a.line),a.rest))for(var d=0;d<a.rest.length;d++)D(a.rest[d])}}}function D(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function M(e){for(var t=e.display,i={},n={},r=t.gutters.clientLeft,a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o)i[e.options.gutters[o]]=a.offsetLeft+a.clientLeft+r,n[e.options.gutters[o]]=a.clientWidth;return{fixedPos:E(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function P(e,t,i){function n(t){var i=t.nextSibling;return ea&&ca&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var r=e.display,a=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild,l=r.view,d=r.viewFrom,c=0;c<l.length;c++){var u=l[c];if(!u.hidden)if(u.node){for(;s!=u.node;)s=n(s);var h=a&&null!=t&&t<=d&&u.lineNumber;u.changes&&(hr(u.changes,"gutter")>-1&&(h=!1),R(e,u,d,i)),h&&(wr(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(w(e.options,d)))),s=u.node.nextSibling}else{var f=U(e,u,d,i);o.insertBefore(f,s)}d+=u.size}for(;s;)s=n(s)}function R(e,t,i,n){for(var r=0;r<t.changes.length;r++){var a=t.changes[r];"text"==a?F(e,t):"gutter"==a?B(e,t,i,n):"class"==a?j(t):"widget"==a&&H(t,n)}t.changes=null}function O(e){return e.node==e.text&&(e.node=_r("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Jr&&Zr<8&&(e.node.style.zIndex=2)),e.node}function N(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=O(e);e.background=i.insertBefore(_r("div",null,t),i.firstChild)}}function L(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):vn(e,t)}function F(e,t){var i=t.text.className,n=L(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,j(t)):i&&(t.text.className=i)}function j(e){N(e),e.line.wrapClass?O(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}
function B(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var r=t.line.gutterMarkers;if(e.options.lineNumbers||r){var a=O(t),o=t.gutter=a.insertBefore(_r("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),t.text);if(e.options.lineNumbers&&(!r||!r["CodeMirror-linenumbers"])&&(t.lineNumber=o.appendChild(_r("div",w(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),r)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],d=r.hasOwnProperty(l)&&r[l];d&&o.appendChild(_r("div",[d],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function H(e,t){e.alignable&&(e.alignable=null);for(var i,n=e.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}$(e,t)}function U(e,t,i,n){var r=L(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),j(t),B(e,t,i,n),$(t,n),t.node}function $(e,t){if(z(e.line,e,t,!0),e.rest)for(var i=0;i<e.rest.length;i++)z(e.rest[i],e,t,!1)}function z(e,t,i,n){if(e.widgets)for(var r=O(t),a=0,o=e.widgets;a<o.length;++a){var s=o[a],l=_r("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(l.ignoreEvents=!0),q(s,l,t,i),n&&s.above?r.insertBefore(l,t.gutter||t.text):r.appendChild(l),ir(s,"redraw")}}function q(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var r=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(r-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function W(e){return va(e.line,e.ch)}function Y(e,t){return ya(e,t)<0?t:e}function G(e,t){return ya(e,t)<0?e:t}function V(e,t){this.ranges=e,this.primIndex=t}function K(e,t){this.anchor=e,this.head=t}function X(e,t){var i=e[t];e.sort(function(e,t){return ya(e.from(),t.from())}),t=hr(e,i);for(var n=1;n<e.length;n++){var r=e[n],a=e[n-1];if(ya(a.to(),r.from())>=0){var o=G(a.from(),r.from()),s=Y(a.to(),r.to()),l=a.empty()?r.from()==r.head:a.from()==a.head;n<=t&&--t,e.splice(--n,2,new K(l?s:o,l?o:s))}}return new V(e,t)}function Q(e,t){return new V([new K(e,t||e)],0)}function J(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Z(e,t){if(t.line<e.first)return va(e.first,0);var i=e.first+e.size-1;return t.line>i?va(i,Dn(e,i).text.length):ee(t,Dn(e,t.line).text.length)}function ee(e,t){var i=e.ch;return null==i||i>t?va(e.line,t):i<0?va(e.line,0):e}function te(e,t){return t>=e.first&&t<e.first+e.size}function ie(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=Z(e,t[n]);return i}function ne(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var r=t.anchor;if(n){var a=ya(i,r)<0;a!=ya(n,r)<0?(r=i,i=n):a!=ya(i,n)<0&&(i=n)}return new K(r,i)}return new K(n||i,i)}function re(e,t,i,n){ce(e,new V([ne(e,e.sel.primary(),t,i)],0),n)}function ae(e,t,i){for(var n=[],r=0;r<e.sel.ranges.length;r++)n[r]=ne(e,e.sel.ranges[r],t[r],null);var a=X(n,e.sel.primIndex);ce(e,a,i)}function oe(e,t,i,n){var r=e.sel.ranges.slice(0);r[t]=i,ce(e,X(r,e.sel.primIndex),n)}function se(e,t,i,n){ce(e,Q(t,i),n)}function le(e,t){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new K(Z(e,t[i].anchor),Z(e,t[i].head))}};return uo(e,"beforeSelectionChange",e,i),e.cm&&uo(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?X(i.ranges,i.ranges.length-1):t}function de(e,t,i){var n=e.history.done,r=ur(n);r&&r.ranges?(n[n.length-1]=t,ue(e,t,i)):ce(e,t,i)}function ce(e,t,i){ue(e,t,i),qn(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function ue(e,t,i){(or(e,"beforeSelectionChange")||e.cm&&or(e.cm,"beforeSelectionChange"))&&(t=le(e,t));var n=i&&i.bias||(ya(t.primary().head,e.sel.primary().head)<0?-1:1);he(e,pe(e,t,n,!0)),(!i||i.scroll!==!1)&&e.cm&&yi(e.cm)}function he(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ar(e.cm)),ir(e,"cursorActivity",e))}function fe(e){he(e,pe(e,e.sel,null,!1),go)}function pe(e,t,i,n){for(var r,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=ge(e,o.anchor,i,n),l=ge(e,o.head,i,n);(r||s!=o.anchor||l!=o.head)&&(r||(r=t.ranges.slice(0,a)),r[a]=new K(s,l))}return r?X(r,t.primIndex):t}function ge(e,t,i,n){var r=!1,a=t,o=i||1;e.cantEdit=!1;e:for(;;){var s=Dn(e,a.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var d=s.markedSpans[l],c=d.marker;if((null==d.from||(c.inclusiveLeft?d.from<=a.ch:d.from<a.ch))&&(null==d.to||(c.inclusiveRight?d.to>=a.ch:d.to>a.ch))){if(n&&(uo(c,"beforeCursorEnter"),c.explicitlyCleared)){if(!s.markedSpans)break;--l;continue}if(!c.atomic)continue;var u=c.find(o<0?-1:1);if(0==ya(u,a)&&(u.ch+=o,u.ch<0?u=u.line>e.first?Z(e,va(u.line-1)):null:u.ch>s.text.length&&(u=u.line<e.first+e.size-1?va(u.line+1,0):null),!u)){if(r)return n?(e.cantEdit=!0,va(e.first,0)):ge(e,t,i,!0);r=!0,u=t,o=-o}a=u;continue e}}return a}}function me(e){for(var t=e.display,i=e.doc,n={},r=n.cursors=document.createDocumentFragment(),a=n.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++){var s=i.sel.ranges[o],l=s.empty();(l||e.options.showCursorWhenSelecting)&&be(e,s,r),l||_e(e,s,a)}if(e.options.moveInputWithCursor){var d=Ye(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,d.top+u.top-c.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,d.left+u.left-c.left))}return n}function ve(e,t){Er(e.display.cursorDiv,t.cursors),Er(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function ye(e){ve(e,me(e))}function be(e,t,i){var n=Ye(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),r=i.appendChild(_r("div","\xa0","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var a=i.appendChild(_r("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=n.other.left+"px",a.style.top=n.other.top+"px",a.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function _e(e,t,i){function n(e,t,i,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(_r("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?c-e:i)+"px; height: "+(n-t)+"px"))}function r(t,i,r){function a(i,n){return We(e,va(t,i),"div",u,n)}var s,l,u=Dn(o,t),h=u.text.length;return Lr(Fn(u),i||0,null==r?h:r,function(e,t,o){var u,f,p,g=a(e,"left");if(e==t)u=g,f=p=g.left;else{if(u=a(t-1,"right"),"rtl"==o){var m=g;g=u,u=m}f=g.left,p=u.right}null==i&&0==e&&(f=d),u.top-g.top>3&&(n(f,g.top,null,g.bottom),f=d,g.bottom<u.top&&n(f,g.bottom,null,u.top)),null==r&&t==h&&(p=c),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),f<d+1&&(f=d),n(f,u.top,p-f,u.bottom)}),{start:s,end:l}}var a=e.display,o=e.doc,s=document.createDocumentFragment(),l=Ae(e.display),d=l.left,c=a.lineSpace.offsetWidth-l.right,u=t.from(),h=t.to();if(u.line==h.line)r(u.line,u.ch,h.ch);else{var f=Dn(o,u.line),p=Dn(o,h.line),g=Qi(f)==Qi(p),m=r(u.line,u.ch,g?f.text.length+1:null).end,v=r(h.line,g?0:null,h.ch).start;g&&(m.top<v.top-2?(n(m.right,m.top,null,m.bottom),n(d,v.top,v.left,v.bottom)):n(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&n(d,m.bottom,null,v.top)}i.appendChild(s)}function we(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ee(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,mr(Te,e))}function Te(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,n=Ha(t.mode,Ce(e,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(t.frontier>=e.display.viewFrom){var o=a.styles,s=fn(e,a,n,!0);a.styles=s.styles;var l=a.styleClasses,d=s.classes;d?a.styleClasses=d:l&&(a.styleClasses=null);for(var c=!o||o.length!=a.styles.length||l!=d&&(!l||!d||l.bgClass!=d.bgClass||l.textClass!=d.textClass),u=0;!c&&u<o.length;++u)c=o[u]!=a.styles[u];c&&r.push(t.frontier),a.stateAfter=Ha(t.mode,n)}else gn(e,a.text,n),a.stateAfter=t.frontier%5==0?Ha(t.mode,n):null;if(++t.frontier,+new Date>i)return Ee(e,e.options.workDelay),!0}),r.length&&lt(e,function(){for(var t=0;t<r.length;t++)gt(e,r[t],"text")})}}function Se(e,t,i){for(var n,r,a=e.doc,o=i?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var l=Dn(a,s-1);if(l.stateAfter&&(!i||s<=a.frontier))return s;var d=yo(l.text,null,e.options.tabSize);(null==r||n>d)&&(r=s-1,n=d)}return r}function Ce(e,t,i){var n=e.doc,r=e.display;if(!n.mode.startState)return!0;var a=Se(e,t,i),o=a>n.first&&Dn(n,a-1).stateAfter;return o=o?Ha(n.mode,o):Ua(n.mode),n.iter(a,t,function(i){gn(e,i.text,o);var s=a==t-1||a%5==0||a>=r.viewFrom&&a<r.viewTo;i.stateAfter=s?Ha(n.mode,o):null,++a}),i&&(n.frontier=a),o}function xe(e){return e.lineSpace.offsetTop}function ke(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ae(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Er(e.measure,_r("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(e.cachedPaddingH=n),n}function Ie(e,t,i){var n=e.options.lineWrapping,r=n&&e.display.scroller.clientWidth;if(!t.measure.heights||n&&t.measure.width!=r){var a=t.measure.heights=[];if(n){t.measure.width=r;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],d=o[s+1];Math.abs(l.bottom-d.bottom)>2&&a.push((l.bottom+d.top)/2-i.top)}}a.push(i.bottom-i.top)}}function De(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(On(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Me(e,t){t=Qi(t);var i=On(t),n=e.display.externalMeasured=new ht(e.doc,t,i);n.lineN=i;var r=n.built=vn(e,n);return n.text=r.pre,Er(e.display.lineMeasure,r.pre),n}function Pe(e,t,i,n){return Ne(e,Oe(e,t),i,n)}function Re(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[vt(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Oe(e,t){var i=On(t),n=Re(e,i);n&&!n.text?n=null:n&&n.changes&&R(e,n,i,M(e)),n||(n=Me(e,t));var r=De(n,t,i);return{line:t,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ne(e,t,i,n,r){t.before&&(i=-1);var a,o=i+(n||"");return t.cache.hasOwnProperty(o)?a=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ie(e,t.view,t.rect),t.hasHeights=!0),a=Le(e,t,i,n),a.bogus||(t.cache[o]=a)),{left:a.left,right:a.right,top:r?a.rtop:a.top,bottom:r?a.rbottom:a.bottom}}function Le(e,t,i,n){for(var r,a,o,s,l=t.map,d=0;d<l.length;d+=3){var c=l[d],u=l[d+1];if(i<c?(a=0,o=1,s="left"):i<u?(a=i-c,o=a+1):(d==l.length-3||i==u&&l[d+3]>i)&&(o=u-c,a=o-1,i>=u&&(s="right")),null!=a){if(r=l[d+2],c==u&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==a)for(;d&&l[d-2]==l[d-3]&&l[d-1].insertLeft;)r=l[(d-=3)+2],s="left";if("right"==n&&a==u-c)for(;d<l.length-3&&l[d+3]==l[d+4]&&!l[d+5].insertLeft;)r=l[(d+=3)+2],s="right";break}}var h;if(3==r.nodeType){for(var d=0;d<4;d++){for(;a&&br(t.line.text.charAt(c+a));)--a;for(;c+o<u&&br(t.line.text.charAt(c+o));)++o;if(Jr&&Zr<9&&0==a&&o==u-c)h=r.parentNode.getBoundingClientRect();else if(Jr&&e.options.lineWrapping){var f=wo(r,a,o).getClientRects();h=f.length?f["right"==n?f.length-1:0]:Ea}else h=wo(r,a,o).getBoundingClientRect()||Ea;if(h.left||h.right||0==a)break;o=a,a-=1,s="right"}Jr&&Zr<11&&(h=Fe(e.display.measure,h))}else{a>0&&(s=n="right");var f;h=e.options.lineWrapping&&(f=r.getClientRects()).length>1?f["right"==n?f.length-1:0]:r.getBoundingClientRect()}if(Jr&&Zr<9&&!a&&(!h||!h.left&&!h.right)){var p=r.parentNode.getClientRects()[0];h=p?{left:p.left,right:p.left+Je(e.display),top:p.top,bottom:p.bottom}:Ea}for(var g=h.top-t.rect.top,m=h.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,d=0;d<y.length-1&&!(v<y[d]);d++);var b=d?y[d-1]:0,_=y[d],w={left:("right"==s?h.right:h.left)-t.rect.left,right:("left"==s?h.left:h.right)-t.rect.left,top:b,bottom:_};return!h.left&&!h.right&&(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=g,w.rbottom=m),w}function Fe(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Nr(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}function je(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Be(e){e.display.externalMeasure=null,wr(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)je(e.display.view[t])}function He(e){Be(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ue(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $e(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ze(e,t,i,n){if(t.widgets)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].above){var a=an(t.widgets[r]);i.top+=a,i.bottom+=a}if("line"==n)return i;n||(n="local");var o=Ln(t);if("local"==n?o+=xe(e.display):o-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==n?0:$e());var l=s.left+("window"==n?0:Ue());i.left+=l,i.right+=l}return i.top+=o,i.bottom+=o,i}function qe(e,t,i){if("div"==i)return t;var n=t.left,r=t.top;if("page"==i)n-=Ue(),r-=$e();else if("local"==i||!i){var a=e.display.sizer.getBoundingClientRect();n+=a.left,r+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:r-o.top}}function We(e,t,i,n,r){return n||(n=Dn(e.doc,t.line)),ze(e,n,Pe(e,n,t.ch,r),i)}function Ye(e,t,i,n,r,a){function o(t,o){var s=Ne(e,r,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,ze(e,n,s,i)}function s(e,t){var i=l[t],n=i.level%2;return e==Fr(i)&&t&&i.level<l[t-1].level?(i=l[--t],e=jr(i)-(i.level%2?0:1),n=!0):e==jr(i)&&t<l.length-1&&i.level<l[t+1].level&&(i=l[++t],e=Fr(i)-i.level%2,n=!1),n&&e==i.to&&e>i.from?o(e-1):o(e,n)}n=n||Dn(e.doc,t.line),r||(r=Oe(e,n));var l=Fn(n),d=t.ch;if(!l)return o(d);var c=Wr(l,d),u=s(d,c);return null!=No&&(u.other=s(d,No)),u}function Ge(e,t){var i=0,t=Z(e.doc,t);e.options.lineWrapping||(i=Je(e.display)*t.ch);var n=Dn(e.doc,t.line),r=Ln(n)+xe(e.display);return{left:i,right:i,top:r,bottom:r+n.height}}function Ve(e,t,i,n){var r=va(e,t);return r.xRel=n,i&&(r.outside=!0),r}function Ke(e,t,i){var n=e.doc;if(i+=e.display.viewOffset,i<0)return Ve(n.first,0,!0,-1);var r=Nn(n,i),a=n.first+n.size-1;if(r>a)return Ve(n.first+n.size-1,Dn(n,a).text.length,!0,1);t<0&&(t=0);for(var o=Dn(n,r);;){var s=Xe(e,o,r,t,i),l=Ki(o),d=l&&l.find(0,!0);if(!l||!(s.ch>d.from.ch||s.ch==d.from.ch&&s.xRel>0))return s;r=On(o=d.to.line)}}function Xe(e,t,i,n,r){function a(n){var r=Ye(e,va(i,n),"line",t,d);return s=!0,o>r.bottom?r.left-l:o<r.top?r.left+l:(s=!1,r.left)}var o=r-Ln(t),s=!1,l=2*e.display.wrapper.clientWidth,d=Oe(e,t),c=Fn(t),u=t.text.length,h=Br(t),f=Hr(t),p=a(h),g=s,m=a(f),v=s;if(n>m)return Ve(i,f,v,1);for(;;){if(c?f==h||f==Gr(t,h,1):f-h<=1){for(var y=n<p||n-p<=m-n?h:f,b=n-(y==h?p:m);br(t.text.charAt(y));)++y;var _=Ve(i,y,y==h?g:v,b<-1?-1:b>1?1:0);return _}var w=Math.ceil(u/2),E=h+w;if(c){E=h;for(var T=0;T<w;++T)E=Gr(t,E,1)}var S=a(E);S>n?(f=E,m=S,(v=s)&&(m+=1e3),u=w):(h=E,p=S,g=s,u-=w)}}function Qe(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ba){ba=_r("pre");for(var t=0;t<49;++t)ba.appendChild(document.createTextNode("x")),ba.appendChild(_r("br"));ba.appendChild(document.createTextNode("x"))}Er(e.measure,ba);var i=ba.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),wr(e.measure),i||1}function Je(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=_r("span","xxxxxxxxxx"),i=_r("pre",[t]);Er(e.measure,i);var n=t.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function Ze(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Sa},Ta?Ta.ops.push(e.curOp):e.curOp.ownsGroup=Ta={ops:[e.curOp],delayedCallbacks:[]}}function et(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i]();for(var n=0;n<e.ops.length;n++){var r=e.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(i<t.length)}function tt(e){var t=e.curOp,i=t.ownsGroup;if(i)try{et(i)}finally{Ta=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;it(i)}}function it(e){for(var t=e.ops,i=0;i<t.length;i++)nt(t[i]);for(var i=0;i<t.length;i++)rt(t[i]);for(var i=0;i<t.length;i++)at(t[i]);for(var i=0;i<t.length;i++)ot(t[i]);for(var i=0;i<t.length;i++)st(t[i])}function nt(e){var t=e.cm,i=t.display;e.updateMaxLine&&f(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new T(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function rt(e){e.updatedDisplay=e.mustUpdate&&S(e.cm,e.update)}function at(e){var t=e.cm,i=t.display;e.updatedDisplay&&I(t),e.barMeasure=m(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pe(t,i.maxLine,i.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo+fo-i.scroller.clientWidth)),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=me(t))}function ot(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Ut(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&ve(t,e.newSelectionNodes),e.updatedDisplay&&k(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&v(t,e.barMeasure),e.selectionChanged&&we(t),t.state.focused&&e.updateInput&&St(t,e.typing)}function st(e){var t=e.cm,i=t.display,n=t.doc;if(null!=e.adjustWidthTo&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&v(t),e.updatedDisplay&&C(t,e.update),null!=i.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&(i.scroller.scrollTop!=e.scrollTop||e.forceScroll)){var r=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop));i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=r}if(null!=e.scrollLeft&&(i.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)){var a=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,e.scrollLeft));i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=a,b(t)}if(e.scrollToPos){var o=pi(t,Z(n,e.scrollToPos.from),Z(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&fi(t,o)}var s=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(s)for(var d=0;d<s.length;++d)s[d].lines.length||uo(s[d],"hide");if(l)for(var d=0;d<l.length;++d)l[d].lines.length&&uo(l[d],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&ea&&(t.options.lineWrapping&&A(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!g(t)&&v(t)),e.changeObjs&&uo(t,"changes",t,e.changeObjs)}function lt(e,t){if(e.curOp)return t();Ze(e);try{return t()}finally{tt(e)}}function dt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ze(e);try{return t.apply(e,arguments)}finally{tt(e)}}}function ct(e){return function(){if(this.curOp)return e.apply(this,arguments);Ze(this);try{return e.apply(this,arguments)}finally{tt(this)}}}function ut(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ze(t);try{return e.apply(this,arguments)}finally{tt(t)}}}function ht(e,t,i){this.line=t,this.rest=Ji(t),this.size=this.rest?On(ur(this.rest))-i+1:1,this.node=this.text=null,this.hidden=tn(e,t)}function ft(e,t,i){for(var n,r=[],a=t;a<i;a=n){var o=new ht(e.doc,Dn(e.doc,a),a);n=a+o.size,r.push(o)}return r}function pt(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var r=e.display;if(n&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)ma&&Zi(e.doc,t)<r.viewTo&&mt(e);else if(i<=r.viewFrom)ma&&en(e.doc,i+n)>r.viewFrom?mt(e):(r.viewFrom+=n,r.viewTo+=n);else if(t<=r.viewFrom&&i>=r.viewTo)mt(e);else if(t<=r.viewFrom){var a=yt(e,i,i+n,1);a?(r.view=r.view.slice(a.index),r.viewFrom=a.lineN,r.viewTo+=n):mt(e)}else if(i>=r.viewTo){var a=yt(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):mt(e)}else{var o=yt(e,t,t,-1),s=yt(e,i,i+n,1);o&&s?(r.view=r.view.slice(0,o.index).concat(ft(e,o.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=n):mt(e)}var l=r.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(r.externalMeasured=null))}function gt(e,t,i){e.curOp.viewChanged=!0;var n=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var a=n.view[vt(e,t)];if(null!=a.node){var o=a.changes||(a.changes=[]);hr(o,i)==-1&&o.push(i)}}}function mt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var i=e.display.view,n=0;n<i.length;n++)if(t-=i[n].size,t<0)return n}function yt(e,t,i,n){var r,a=vt(e,t),o=e.display.view;if(!ma||i==e.doc.first+e.doc.size)return{index:a,lineN:i};for(var s=0,l=e.display.viewFrom;s<a;s++)l+=o[s].size;if(l!=t){if(n>0){if(a==o.length-1)return null;r=l+o[a].size-t,a++}else r=l-t;t+=r,i+=r}for(;Zi(e.doc,i)!=i;){if(a==(n<0?0:o.length-1))return null;i+=n*o[a-(n<0?1:0)].size,a+=n}return{index:a,lineN:i}}function bt(e,t,i){var n=e.display,r=n.view;0==r.length||t>=n.viewTo||i<=n.viewFrom?(n.view=ft(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=ft(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(vt(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(ft(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,vt(e,i)))),n.viewTo=i}function _t(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var r=t[n];!r.hidden&&(!r.node||r.changes)&&++i}return i}function wt(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Tt(e),e.state.focused&&wt(e)})}function Et(e){function t(){var n=Tt(e);n||i?(e.display.pollingFast=!1,wt(e)):(i=!0,e.display.poll.set(60,t))}var i=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Tt(e){var t=e.display.input,i=e.display.prevInput,n=e.doc;if(!e.state.focused||Mo(t)&&!i||kt(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var r=t.value;if(r==i&&!e.somethingSelected())return!1;if(Jr&&Zr>=9&&e.display.inputHasSelection===r||ca&&/[\uf700-\uf7ff]/.test(r))return St(e),!1;var a=!e.curOp;a&&Ze(e),e.display.shift=!1,8203==r.charCodeAt(0)&&n.sel==e.display.selForContextMenu&&!i&&(i="\u200b");for(var o=0,s=Math.min(i.length,r.length);o<s&&i.charCodeAt(o)==r.charCodeAt(o);)++o;var l=r.slice(o),d=Do(l),c=null;e.state.pasteIncoming&&n.sel.ranges.length>1&&(Ca&&Ca.join("\n")==l?c=n.sel.ranges.length%Ca.length==0&&fr(Ca,Do):d.length==n.sel.ranges.length&&(c=fr(d,function(e){return[e]})));for(var u=n.sel.ranges.length-1;u>=0;u--){var h=n.sel.ranges[u],f=h.from(),p=h.to();o<i.length?f=va(f.line,f.ch-(i.length-o)):e.state.overwrite&&h.empty()&&!e.state.pasteIncoming&&(p=va(p.line,Math.min(Dn(n,p.line).text.length,p.ch+ur(d).length)));var g=e.curOp.updateInput,m={from:f,to:p,text:c?c[u%c.length]:d,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(oi(e.doc,m),ir(e,"inputRead",e,m),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&h.head.ch<100&&(!u||n.sel.ranges[u-1].head.line!=h.head.line)){var v=e.getModeAt(h.head),y=Ma(m);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){_i(e,y.line,"smart");break}}else v.electricInput&&v.electricInput.test(Dn(n,y.line).text.slice(0,y.ch))&&_i(e,y.line,"smart")}}return yi(e),e.curOp.updateInput=g,e.curOp.typing=!0,r.length>1e3||r.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=r,a&&tt(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function St(e,t){var i,n,r=e.doc;if(e.somethingSelected()){e.display.prevInput="";var a=r.sel.primary();i=Po&&(a.to().line-a.from().line>100||(n=e.getSelection()).length>1e3);var o=i?"-":n||e.getSelection();e.display.input.value=o,e.state.focused&&_o(e.display.input),Jr&&Zr>=9&&(e.display.inputHasSelection=o)}else t||(e.display.prevInput=e.display.input.value="",Jr&&Zr>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=i}function Ct(e){"nocursor"!=e.options.readOnly&&(!da||Sr()!=e.display.input)&&e.display.input.focus()}function xt(e){e.state.focused||(Ct(e),Qt(e))}function kt(e){return e.options.readOnly||e.doc.cantEdit}function At(e){function t(){e.state.focused&&setTimeout(mr(Ct,e),0)}function i(t){rr(e,t)||so(t)}function n(t){if(e.somethingSelected())Ca=e.getSelections(),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,r.input.value=Ca.join("\n"),_o(r.input));else{for(var i=[],n=[],a=0;a<e.doc.sel.ranges.length;a++){var o=e.doc.sel.ranges[a].head.line,s={anchor:va(o,0),head:va(o+1,0)};n.push(s),i.push(e.getRange(s.anchor,s.head))}"cut"==t.type?e.setSelections(n,null,go):(r.prevInput="",r.input.value=i.join("\n"),_o(r.input)),Ca=i}"cut"==t.type&&(e.state.cutIncoming=!0)}var r=e.display;lo(r.scroller,"mousedown",dt(e,Pt)),Jr&&Zr<11?lo(r.scroller,"dblclick",dt(e,function(t){if(!rr(e,t)){var i=Mt(e,t);if(i&&!Ft(e,t)&&!Dt(e.display,t)){ao(t);var n=e.findWordAt(i);re(e.doc,n.anchor,n.head)}}})):lo(r.scroller,"dblclick",function(t){rr(e,t)||ao(t)}),lo(r.lineSpace,"selectstart",function(e){Dt(r,e)||ao(e)}),pa||lo(r.scroller,"contextmenu",function(t){Zt(e,t)}),lo(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Ht(e,r.scroller.scrollTop),Ut(e,r.scroller.scrollLeft,!0),uo(e,"scroll",e))}),lo(r.scrollbarV,"scroll",function(){r.scroller.clientHeight&&Ht(e,r.scrollbarV.scrollTop)}),lo(r.scrollbarH,"scroll",function(){r.scroller.clientHeight&&Ut(e,r.scrollbarH.scrollLeft)}),lo(r.scroller,"mousewheel",function(t){$t(e,t)}),lo(r.scroller,"DOMMouseScroll",function(t){$t(e,t)}),lo(r.scrollbarH,"mousedown",t),lo(r.scrollbarV,"mousedown",t),lo(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),lo(r.input,"keyup",function(t){Kt.call(e,t)}),lo(r.input,"input",function(){Jr&&Zr>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Et(e)}),lo(r.input,"keydown",dt(e,Gt)),lo(r.input,"keypress",dt(e,Xt)),lo(r.input,"focus",mr(Qt,e)),lo(r.input,"blur",mr(Jt,e)),e.options.dragDrop&&(lo(r.scroller,"dragstart",function(t){Bt(e,t)}),lo(r.scroller,"dragenter",i),lo(r.scroller,"dragover",i),lo(r.scroller,"drop",dt(e,jt))),lo(r.scroller,"paste",function(t){Dt(r,t)||(e.state.pasteIncoming=!0,Ct(e),Et(e))}),lo(r.input,"paste",function(){if(ea&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=r.input.selectionStart,i=r.input.selectionEnd;r.input.value+="$",r.input.selectionEnd=i,r.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Et(e)}),lo(r.input,"cut",n),lo(r.input,"copy",n),aa&&lo(r.sizer,"mouseup",function(){Sr()==r.input&&r.input.blur(),Ct(e)})}function It(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function Dt(e,t){for(var i=er(t);i!=e.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==e.sizer&&i!=e.mover)return!0}function Mt(e,t,i,n){var r=e.display;if(!i){var a=er(t);if(a==r.scrollbarH||a==r.scrollbarV||a==r.scrollbarFiller||a==r.gutterFiller)return null}var o,s,l=r.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,s=t.clientY-l.top}catch(e){return null}var d,c=Ke(e,o,s);if(n&&1==c.xRel&&(d=Dn(e.doc,c.line).text).length==c.ch){var u=yo(d,d.length,e.options.tabSize)-d.length;c=va(c.line,Math.max(0,Math.round((o-Ae(e.display).left)/Je(e.display))-u))}return c}function Pt(e){if(!rr(this,e)){var t=this,i=t.display;if(i.shift=e.shiftKey,Dt(i,e))return void(ea||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Ft(t,e)){var n=Mt(t,e);switch(window.focus(),tr(e)){case 1:n?Rt(t,e,n):er(e)==i.scroller&&ao(e);break;case 2:ea&&(t.state.lastMiddleDown=+new Date),n&&re(t.doc,n),setTimeout(mr(Ct,t),20),ao(e);break;case 3:pa&&Zt(t,e)}}}}function Rt(e,t,i){setTimeout(mr(xt,e),0);var n,r=+new Date;wa&&wa.time>r-400&&0==ya(wa.pos,i)?n="triple":_a&&_a.time>r-400&&0==ya(_a.pos,i)?(n="double",wa={time:r,pos:i}):(n="single",_a={time:r,pos:i});var a=e.doc.sel,o=ca?t.metaKey:t.ctrlKey;e.options.dragDrop&&Io&&!kt(e)&&"single"==n&&a.contains(i)>-1&&a.somethingSelected()?Ot(e,t,i,o):Nt(e,t,i,n,o)}function Ot(e,t,i,n){var r=e.display,a=dt(e,function(o){ea&&(r.scroller.draggable=!1),e.state.draggingText=!1,co(document,"mouseup",a),co(r.scroller,"drop",a),Math.abs(t.clientX-o.clientX)+Math.abs(t.clientY-o.clientY)<10&&(ao(o),n||re(e.doc,i),Ct(e),Jr&&9==Zr&&setTimeout(function(){document.body.focus(),Ct(e)},20))});ea&&(r.scroller.draggable=!0),e.state.draggingText=a,r.scroller.dragDrop&&r.scroller.dragDrop(),lo(document,"mouseup",a),lo(r.scroller,"drop",a)}function Nt(e,t,i,n,r){function a(t){if(0!=ya(g,t))if(g=t,"rect"==n){for(var r=[],a=e.options.tabSize,o=yo(Dn(d,i.line).text,i.ch,a),s=yo(Dn(d,t.line).text,t.ch,a),l=Math.min(o,s),f=Math.max(o,s),p=Math.min(i.line,t.line),m=Math.min(e.lastLine(),Math.max(i.line,t.line));p<=m;p++){var v=Dn(d,p).text,y=dr(v,l,a);l==f?r.push(new K(va(p,y),va(p,y))):v.length>y&&r.push(new K(va(p,y),va(p,dr(v,f,a))))}r.length||r.push(new K(i,i)),ce(d,X(h.ranges.slice(0,u).concat(r),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=c,_=b.anchor,w=t;if("single"!=n){if("double"==n)var E=e.findWordAt(t);else var E=new K(va(t.line,0),Z(d,va(t.line+1,0)));ya(E.anchor,_)>0?(w=E.head,_=G(b.from(),E.anchor)):(w=E.anchor,_=Y(b.to(),E.head))}var r=h.ranges.slice(0);r[u]=new K(Z(d,_),w),ce(d,X(r,u),mo)}}function o(t){var i=++v,r=Mt(e,t,!0,"rect"==n);if(r)if(0!=ya(r,g)){xt(e),a(r);var s=y(l,d);(r.line>=s.to||r.line<s.from)&&setTimeout(dt(e,function(){v==i&&o(t)}),150)}else{var c=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;c&&setTimeout(dt(e,function(){v==i&&(l.scroller.scrollTop+=c,o(t))}),50)}}function s(t){v=1/0,ao(t),Ct(e),co(document,"mousemove",b),co(document,"mouseup",_),d.history.lastSelOrigin=null}var l=e.display,d=e.doc;ao(t);var c,u,h=d.sel;if(r&&!t.shiftKey?(u=d.sel.contains(i),c=u>-1?d.sel.ranges[u]:new K(i,i)):c=d.sel.primary(),t.altKey)n="rect",r||(c=new K(i,i)),i=Mt(e,t,!0,!0),u=-1;else if("double"==n){var f=e.findWordAt(i);c=e.display.shift||d.extend?ne(d,c,f.anchor,f.head):f}else if("triple"==n){var p=new K(va(i.line,0),Z(d,va(i.line+1,0)));c=e.display.shift||d.extend?ne(d,c,p.anchor,p.head):p}else c=ne(d,c,i);r?u>-1?oe(d,u,c,mo):(u=d.sel.ranges.length,ce(d,X(d.sel.ranges.concat([c]),u),{scroll:!1,origin:"*mouse"})):(u=0,ce(d,new V([c],0),mo),h=d.sel);var g=i,m=l.wrapper.getBoundingClientRect(),v=0,b=dt(e,function(e){tr(e)?o(e):s(e)}),_=dt(e,s);lo(document,"mousemove",b),lo(document,"mouseup",_)}function Lt(e,t,i,n,r){try{var a=t.clientX,o=t.clientY}catch(e){return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ao(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(o>l.bottom||!or(e,i))return Zn(t);o-=l.top-s.viewOffset;for(var d=0;d<e.options.gutters.length;++d){var c=s.gutters.childNodes[d];
if(c&&c.getBoundingClientRect().right>=a){var u=Nn(e.doc,o),h=e.options.gutters[d];return r(e,i,e,u,h,t),Zn(t)}}}function Ft(e,t){return Lt(e,t,"gutterClick",!0,ir)}function jt(e){var t=this;if(!rr(t,e)&&!Dt(t.display,e)){ao(e),Jr&&(xa=+new Date);var i=Mt(t,e,!0),n=e.dataTransfer.files;if(i&&!kt(t))if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,a=Array(r),o=0,s=function(e,n){var s=new FileReader;s.onload=dt(t,function(){if(a[n]=s.result,++o==r){i=Z(t.doc,i);var e={from:i,to:i,text:Do(a.join("\n")),origin:"paste"};oi(t.doc,e),de(t.doc,Q(i,Ma(e)))}}),s.readAsText(e)},l=0;l<r;++l)s(n[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(mr(Ct,t),20);try{var a=e.dataTransfer.getData("Text");if(a){if(t.state.draggingText&&(ca?!e.metaKey:!e.ctrlKey))var d=t.listSelections();if(ue(t.doc,Q(i,i)),d)for(var l=0;l<d.length;++l)hi(t.doc,"",d[l].anchor,d[l].head,"drag");t.replaceSelection(a,"around","paste"),Ct(t)}}catch(e){}}}}function Bt(e,t){if(Jr&&(!e.state.draggingText||+new Date-xa<100))return void so(t);if(!rr(e,t)&&!Dt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!ra)){var i=_r("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",na&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),na&&i.parentNode.removeChild(i)}}function Ht(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Kr||x(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Kr&&x(e),Ee(e,100))}function Ut(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,b(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function $t(e,t){var i=t.wheelDeltaX,n=t.wheelDeltaY;null==i&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(i=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var r=e.display,a=r.scroller;if(i&&a.scrollWidth>a.clientWidth||n&&a.scrollHeight>a.clientHeight){if(n&&ca&&ea)e:for(var o=t.target,s=r.view;o!=a;o=o.parentNode)for(var l=0;l<s.length;l++)if(s[l].node==o){e.display.currentWheelTarget=o;break e}if(i&&!Kr&&!na&&null!=Aa)return n&&Ht(e,Math.max(0,Math.min(a.scrollTop+n*Aa,a.scrollHeight-a.clientHeight))),Ut(e,Math.max(0,Math.min(a.scrollLeft+i*Aa,a.scrollWidth-a.clientWidth))),ao(t),r.wheelStartX=null,void 0;if(n&&null!=Aa){var d=n*Aa,c=e.doc.scrollTop,u=c+r.wrapper.clientHeight;d<0?c=Math.max(0,c+d-50):u=Math.min(e.doc.height,u+d+50),x(e,{top:c,bottom:u})}ka<20&&(null==r.wheelStartX?(r.wheelStartX=a.scrollLeft,r.wheelStartY=a.scrollTop,r.wheelDX=i,r.wheelDY=n,setTimeout(function(){if(null!=r.wheelStartX){var e=a.scrollLeft-r.wheelStartX,t=a.scrollTop-r.wheelStartY,i=t&&r.wheelDY&&t/r.wheelDY||e&&r.wheelDX&&e/r.wheelDX;r.wheelStartX=r.wheelStartY=null,i&&(Aa=(Aa*ka+i)/(ka+1),++ka)}},200)):(r.wheelDX+=i,r.wheelDY+=n))}}function zt(e,t,i){if("string"==typeof t&&(t=$a[t],!t))return!1;e.display.pollingFast&&Tt(e)&&(e.display.pollingFast=!1);var n=e.display.shift,r=!1;try{kt(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),r=t(e)!=po}finally{e.display.shift=n,e.state.suppressEdits=!1}return r}function qt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Wt(e,t){var i=xi(e.options.keyMap),n=i.auto;clearTimeout(Ia),n&&!Wa(t)&&(Ia=setTimeout(function(){xi(e.options.keyMap)==i&&(e.options.keyMap=n.call?n.call(null,e):n,s(e))},50));var r=Ya(t,!0),a=!1;if(!r)return!1;var o=qt(e);return a=t.shiftKey?qa("Shift-"+r,o,function(t){return zt(e,t,!0)})||qa(r,o,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return zt(e,t)}):qa(r,o,function(t){return zt(e,t)}),a&&(ao(t),we(e),ir(e,"keyHandled",e,r,t)),a}function Yt(e,t,i){var n=qa("'"+i+"'",qt(e),function(t){return zt(e,t,!0)});return n&&(ao(t),we(e),ir(e,"keyHandled",e,"'"+i+"'",t)),n}function Gt(e){var t=this;if(xt(t),!rr(t,e)){Jr&&Zr<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var n=Wt(t,e);na&&(Da=n?i:null,!n&&88==i&&!Po&&(ca?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18==i&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Vt(t)}}function Vt(e){function t(e){18!=e.keyCode&&e.altKey||(xr(i,"CodeMirror-crosshair"),co(document,"keyup",t),co(document,"mouseover",t))}var i=e.display.lineDiv;kr(i,"CodeMirror-crosshair"),lo(document,"keyup",t),lo(document,"mouseover",t)}function Kt(e){16==e.keyCode&&(this.doc.sel.shift=!1),rr(this,e)}function Xt(e){var t=this;if(!(rr(t,e)||e.ctrlKey&&!e.altKey||ca&&e.metaKey)){var i=e.keyCode,n=e.charCode;if(na&&i==Da)return Da=null,void ao(e);if(!(na&&(!e.which||e.which<10)||aa)||!Wt(t,e)){var r=String.fromCharCode(null==n?i:n);Yt(t,e,r)||(Jr&&Zr>=9&&(t.display.inputHasSelection=null),Et(t))}}}function Qt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(uo(e,"focus",e),e.state.focused=!0,kr(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(St(e),ea&&setTimeout(mr(St,e,!0),0))),wt(e),we(e))}function Jt(e){e.state.focused&&(uo(e,"blur",e),e.state.focused=!1,xr(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Zt(e,t){function i(){if(null!=r.input.selectionStart){var t=e.somethingSelected(),i=r.input.value="\u200b"+(t?r.input.value:"");r.prevInput=t?"":"\u200b",r.input.selectionStart=1,r.input.selectionEnd=i.length,r.selForContextMenu=e.doc.sel}}function n(){if(r.inputDiv.style.position="relative",r.input.style.cssText=l,Jr&&Zr<9&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=o),wt(e),null!=r.input.selectionStart){(!Jr||Jr&&Zr<9)&&i();var t=0,n=function(){r.selForContextMenu==e.doc.sel&&0==r.input.selectionStart?dt(e,$a.selectAll)(e):t++<10?r.detectingSelectAll=setTimeout(n,500):St(e)};r.detectingSelectAll=setTimeout(n,200)}}if(!rr(e,t,"contextmenu")){var r=e.display;if(!Dt(r,t)&&!ei(e,t)){var a=Mt(e,t),o=r.scroller.scrollTop;if(a&&!na){var s=e.options.resetSelectionOnContextMenu;s&&e.doc.sel.contains(a)==-1&&dt(e,ce)(e.doc,Q(a),go);var l=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Jr?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ea)var d=window.scrollY;if(Ct(e),ea&&window.scrollTo(null,d),St(e),e.somethingSelected()||(r.input.value=r.prevInput=" "),r.selForContextMenu=e.doc.sel,clearTimeout(r.detectingSelectAll),Jr&&Zr>=9&&i(),pa){so(t);var c=function(){co(window,"mouseup",c),setTimeout(n,20)};lo(window,"mouseup",c)}else setTimeout(n,50)}}}}function ei(e,t){return!!or(e,"gutterContextMenu")&&Lt(e,t,"gutterContextMenu",!1,uo)}function ti(e,t){if(ya(e,t.from)<0)return e;if(ya(e,t.to)<=0)return Ma(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Ma(t).ch-t.to.ch),va(i,n)}function ii(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var r=e.sel.ranges[n];i.push(new K(ti(r.anchor,t),ti(r.head,t)))}return X(i,e.sel.primIndex)}function ni(e,t,i){return e.line==t.line?va(i.line,e.ch-t.ch+i.ch):va(i.line+(e.line-t.line),e.ch)}function ri(e,t,i){for(var n=[],r=va(e.first,0),a=r,o=0;o<t.length;o++){var s=t[o],l=ni(s.from,r,a),d=ni(Ma(s),r,a);if(r=s.to,a=d,"around"==i){var c=e.sel.ranges[o],u=ya(c.head,c.anchor)<0;n[o]=new K(u?d:l,u?l:d)}else n[o]=new K(l,l)}return new V(n,e.sel.primIndex)}function ai(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,r){t&&(this.from=Z(e,t)),i&&(this.to=Z(e,i)),n&&(this.text=n),void 0!==r&&(this.origin=r)}),uo(e,"beforeChange",e,n),e.cm&&uo(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function oi(e,t,i){if(e.cm){if(!e.cm.curOp)return dt(e.cm,oi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(or(e,"beforeChange")||e.cm&&or(e.cm,"beforeChange"))||(t=ai(e,t,!0))){var n=ga&&!i&&Ui(e,t.from,t.to);if(n)for(var r=n.length-1;r>=0;--r)si(e,{from:n[r].from,to:n[r].to,text:r?[""]:t.text});else si(e,t)}}function si(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ya(t.from,t.to)){var i=ii(e,t);$n(e,t,i,e.cm?e.cm.curOp.id:NaN),ci(e,t,i,ji(e,t));var n=[];An(e,function(e,i){!i&&hr(n,e.history)==-1&&(Jn(e.history,t),n.push(e.history)),ci(e,t,null,ji(e,t))})}}function li(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var n,r=e.history,a=e.sel,o="undo"==t?r.done:r.undone,s="undo"==t?r.undone:r.done,l=0;l<o.length&&(n=o[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=o.length){for(r.lastOrigin=r.lastSelOrigin=null;n=o.pop(),n.ranges;){if(Wn(n,s),i&&!n.equals(e.sel))return void ce(e,n,{clearRedo:!1});a=n}var d=[];Wn(a,s),s.push({changes:d,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;for(var c=or(e,"beforeChange")||e.cm&&or(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var u=n.changes[l];if(u.origin=t,c&&!ai(e,u,!1))return void(o.length=0);d.push(Bn(e,u));var h=l?ii(e,u):ur(o);ci(e,u,h,Hi(e,u)),!l&&e.cm&&e.cm.scrollIntoView({from:u.from,to:Ma(u)});var f=[];An(e,function(e,t){!t&&hr(f,e.history)==-1&&(Jn(e.history,u),f.push(e.history)),ci(e,u,null,Hi(e,u))})}}}}function di(e,t){if(0!=t&&(e.first+=t,e.sel=new V(fr(e.sel.ranges,function(e){return new K(va(e.anchor.line+t,e.anchor.ch),va(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){pt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)gt(e.cm,n,"gutter")}}function ci(e,t,i,n){if(e.cm&&!e.cm.curOp)return dt(e.cm,ci)(e,t,i,n);if(t.to.line<e.first)return void di(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);di(e,r),t={from:va(e.first,0),to:va(t.to.line+r,t.to.ch),text:[ur(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:va(a,Dn(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Mn(e,t.from,t.to),i||(i=ii(e,t)),e.cm?ui(e.cm,t,n):Cn(e,t,n),ue(e,i,go)}}function ui(e,t,i){var n=e.doc,r=e.display,o=t.from,s=t.to,l=!1,d=o.line;e.options.lineWrapping||(d=On(Qi(Dn(n,o.line))),n.iter(d,s.line+1,function(e){if(e==r.maxLine)return l=!0,!0})),n.sel.contains(t.from,t.to)>-1&&ar(e),Cn(n,t,i,a(e)),e.options.lineWrapping||(n.iter(d,o.line+t.text.length,function(e){var t=h(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,o.line),Ee(e,400);var c=t.text.length-(s.line-o.line)-1;o.line!=s.line||1!=t.text.length||Sn(e.doc,t)?pt(e,o.line,s.line+1,c):gt(e,o.line,"text");var u=or(e,"changes"),f=or(e,"change");if(f||u){var p={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};f&&ir(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function hi(e,t,i,n,r){if(n||(n=i),ya(n,i)<0){var a=n;n=i,i=a}"string"==typeof t&&(t=Do(t)),oi(e,{from:i,to:n,text:t,origin:r})}function fi(e,t){var i=e.display,n=i.sizer.getBoundingClientRect(),r=null;if(t.top+n.top<0?r=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!sa){var a=_r("div","\u200b",null,"position: absolute; top: "+(t.top-i.viewOffset-xe(e.display))+"px; height: "+(t.bottom-t.top+fo)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(r),e.display.lineSpace.removeChild(a)}}function pi(e,t,i,n){null==n&&(n=0);for(var r=0;r<5;r++){var a=!1,o=Ye(e,t),s=i&&i!=t?Ye(e,i):o,l=mi(e,Math.min(o.left,s.left),Math.min(o.top,s.top)-n,Math.max(o.left,s.left),Math.max(o.bottom,s.bottom)+n),d=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&(Ht(e,l.scrollTop),Math.abs(e.doc.scrollTop-d)>1&&(a=!0)),null!=l.scrollLeft&&(Ut(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(a=!0)),!a)return o}}function gi(e,t,i,n,r){var a=mi(e,t,i,n,r);null!=a.scrollTop&&Ht(e,a.scrollTop),null!=a.scrollLeft&&Ut(e,a.scrollLeft)}function mi(e,t,i,n,r){var a=e.display,o=Qe(e.display);i<0&&(i=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:a.scroller.scrollTop,l=a.scroller.clientHeight-fo,d={};r-i>l&&(r=i+l);var c=e.doc.height+ke(a),u=i<o,h=r>c-o;if(i<s)d.scrollTop=u?0:i;else if(r>s+l){var f=Math.min(i,(h?c:r)-l);f!=s&&(d.scrollTop=f)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:a.scroller.scrollLeft,g=a.scroller.clientWidth-fo-a.gutters.offsetWidth,m=n-t>g;return m&&(n=t+g),t<10?d.scrollLeft=0:t<p?d.scrollLeft=Math.max(0,t-(m?0:10)):n>g+p-3&&(d.scrollLeft=n+(m?0:10)-g),d}function vi(e,t,i){(null!=t||null!=i)&&bi(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function yi(e){bi(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?va(t.line,t.ch-1):t,n=va(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function bi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=Ge(e,t.from),n=Ge(e,t.to),r=mi(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(r.scrollLeft,r.scrollTop)}}function _i(e,t,i,n){var r,a=e.doc;null==i&&(i="add"),"smart"==i&&(a.mode.indent?r=Ce(e,t):i="prev");var o=e.options.tabSize,s=Dn(a,t),l=yo(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var d,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==i&&(d=a.mode.indent(r,s.text.slice(c.length),s.text),d==po||d>150)){if(!n)return;i="prev"}}else d=0,i="not";"prev"==i?d=t>a.first?yo(Dn(a,t-1).text,null,o):0:"add"==i?d=l+e.options.indentUnit:"subtract"==i?d=l-e.options.indentUnit:"number"==typeof i&&(d=l+i),d=Math.max(0,d);var u="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(d/o);f;--f)h+=o,u+="\t";if(h<d&&(u+=cr(d-h)),u!=c)hi(a,u,va(t,0),va(t,c.length),"+input");else for(var f=0;f<a.sel.ranges.length;f++){var p=a.sel.ranges[f];if(p.head.line==t&&p.head.ch<c.length){var h=va(t,c.length);oe(a,f,new K(h,h));break}}s.stateAfter=null}function wi(e,t,i,n){var r=t,a=t;return"number"==typeof t?a=Dn(e,J(e,t)):r=On(t),null==r?null:(n(a,r)&&e.cm&&gt(e.cm,r,i),a)}function Ei(e,t){for(var i=e.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var a=t(i[r]);n.length&&ya(a.from,ur(n).to)<=0;){var o=n.pop();if(ya(o.from,a.from)<0){a.from=o.from;break}}n.push(a)}lt(e,function(){for(var t=n.length-1;t>=0;t--)hi(e.doc,"",n[t].from,n[t].to,"+delete");yi(e)})}function Ti(e,t,i,n,r){function a(){var t=s+i;return t<e.first||t>=e.first+e.size?u=!1:(s=t,c=Dn(e,t))}function o(e){var t=(r?Gr:Vr)(c,l,i,!0);if(null==t){if(e||!a())return u=!1;l=r?(i<0?Hr:Br)(c):i<0?c.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,d=i,c=Dn(e,s),u=!0;if("char"==n)o();else if("column"==n)o(!0);else if("word"==n||"group"==n)for(var h=null,f="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(i<0)||o(!g);g=!1){var m=c.text.charAt(l)||"\n",v=vr(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(f&&!g&&!v&&(v="s"),h&&h!=v){i<0&&(i=1,o());break}if(v&&(h=v),i>0&&!o(!g))break}var y=ge(e,va(s,l),d,!0);return u||(y.hitSide=!0),y}function Si(e,t,i,n){var r,a=e.doc,o=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=t.top+i*(s-(i<0?1.5:.5)*Qe(e.display))}else"line"==n&&(r=i>0?t.bottom+3:t.top-3);for(;;){var l=Ke(e,o,r);if(!l.outside)break;if(i<0?r<=0:r>=a.height){l.hitSide=!0;break}r+=5*i}return l}function Ci(t,i,n,r){e.defaults[t]=i,n&&(Ra[t]=r?function(e,t,i){i!=Oa&&n(e,t,i)}:n)}function xi(e){return"string"==typeof e?za[e]:e}function ki(e,t,i,n,r){if(n&&n.shared)return Ai(e,t,i,n,r);if(e.cm&&!e.cm.curOp)return dt(e.cm,ki)(e,t,i,n,r);var a=new Va(e,r),o=ya(t,i);if(n&&gr(n,a,!1),o>0||0==o&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=_r("span",[a.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(a.widgetNode.ignoreEvents=!0),n.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Xi(e,t.line,t,i,a)||t.line!=i.line&&Xi(e,i.line,t,i,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");ma=!0}a.addToHistory&&$n(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var s,l=t.line,d=e.cm;if(e.iter(l,i.line+1,function(e){d&&a.collapsed&&!d.options.lineWrapping&&Qi(e)==d.display.maxLine&&(s=!0),a.collapsed&&l!=t.line&&Rn(e,0),Ni(e,new Pi(a,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),a.collapsed&&e.iter(t.line,i.line+1,function(t){tn(e,t)&&Rn(t,0)}),a.clearOnEnter&&lo(a,"beforeCursorEnter",function(){a.clear()}),a.readOnly&&(ga=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++Ka,a.atomic=!0),d){if(s&&(d.curOp.updateMaxLine=!0),a.collapsed)pt(d,t.line,i.line+1);else if(a.className||a.title||a.startStyle||a.endStyle)for(var c=t.line;c<=i.line;c++)gt(d,c,"text");a.atomic&&fe(d.doc),ir(d,"markerAdded",d,a)}return a}function Ai(e,t,i,n,r){n=gr(n),n.shared=!1;var a=[ki(e,t,i,n,r)],o=a[0],s=n.widgetNode;return An(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),a.push(ki(e,Z(e,t),Z(e,i),n,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=ur(a)}),new Xa(a,o)}function Ii(e){return e.findMarks(va(e.first,0),e.clipPos(va(e.lastLine())),function(e){return e.parent})}function Di(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.find(),a=e.clipPos(r.from),o=e.clipPos(r.to);if(ya(a,o)){var s=ki(e,a,o,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function Mi(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];An(i.primary.doc,function(e){n.push(e)});for(var r=0;r<i.markers.length;r++){var a=i.markers[r];hr(n,a.doc)==-1&&(a.parent=null,i.markers.splice(r--,1))}}}function Pi(e,t,i){this.marker=e,this.from=t,this.to=i}function Ri(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Oi(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function Ni(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Li(e,t,i){if(e)for(var n,r=0;r<e.length;++r){var a=e[r],o=a.marker,s=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);if(s||a.from==t&&"bookmark"==o.type&&(!i||!a.marker.insertLeft)){var l=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(n||(n=[])).push(new Pi(o,a.from,l?null:a.to))}}return n}function Fi(e,t,i){if(e)for(var n,r=0;r<e.length;++r){var a=e[r],o=a.marker,s=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);if(s||a.from==t&&"bookmark"==o.type&&(!i||a.marker.insertLeft)){var l=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(n||(n=[])).push(new Pi(o,l?null:a.from-t,null==a.to?null:a.to-t))}}return n}function ji(e,t){var i=te(e,t.from.line)&&Dn(e,t.from.line).markedSpans,n=te(e,t.to.line)&&Dn(e,t.to.line).markedSpans;if(!i&&!n)return null;var r=t.from.ch,a=t.to.ch,o=0==ya(t.from,t.to),s=Li(i,r,o),l=Fi(n,a,o),d=1==t.text.length,c=ur(t.text).length+(d?r:0);if(s)for(var u=0;u<s.length;++u){var h=s[u];if(null==h.to){var f=Ri(l,h.marker);f?d&&(h.to=null==f.to?null:f.to+c):h.to=r}}if(l)for(var u=0;u<l.length;++u){var h=l[u];if(null!=h.to&&(h.to+=c),null==h.from){var f=Ri(s,h.marker);f||(h.from=c,d&&(s||(s=[])).push(h))}else h.from+=c,d&&(s||(s=[])).push(h)}s&&(s=Bi(s)),l&&l!=s&&(l=Bi(l));var p=[s];if(!d){var g,m=t.text.length-2;if(m>0&&s)for(var u=0;u<s.length;++u)null==s[u].to&&(g||(g=[])).push(new Pi(s[u].marker,null,null));for(var u=0;u<m;++u)p.push(g);p.push(l)}return p}function Bi(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Hi(e,t){var i=Vn(e,t),n=ji(e,t);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var a=i[r],o=n[r];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],d=0;d<a.length;++d)if(a[d].marker==l.marker)continue e;a.push(l)}else o&&(i[r]=o)}return i}function Ui(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;i.readOnly&&(!n||hr(n,i)==-1)&&(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:t,to:i}],a=0;a<n.length;++a)for(var o=n[a],s=o.find(0),l=0;l<r.length;++l){var d=r[l];if(!(ya(d.to,s.from)<0||ya(d.from,s.to)>0)){var c=[l,1],u=ya(d.from,s.from),h=ya(d.to,s.to);(u<0||!o.inclusiveLeft&&!u)&&c.push({from:d.from,to:s.from}),(h>0||!o.inclusiveRight&&!h)&&c.push({from:s.to,to:d.to}),r.splice.apply(r,c),l+=c.length-1}}return r}function $i(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function zi(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function qi(e){return e.inclusiveLeft?-1:0}function Wi(e){return e.inclusiveRight?1:0}function Yi(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),r=t.find(),a=ya(n.from,r.from)||qi(e)-qi(t);if(a)return-a;var o=ya(n.to,r.to)||Wi(e)-Wi(t);return o?o:t.id-e.id}function Gi(e,t){var i,n=ma&&e.markedSpans;if(n)for(var r,a=0;a<n.length;++a)r=n[a],r.marker.collapsed&&null==(t?r.from:r.to)&&(!i||Yi(i,r.marker)<0)&&(i=r.marker);return i}function Vi(e){return Gi(e,!0)}function Ki(e){return Gi(e,!1)}function Xi(e,t,i,n,r){var a=Dn(e,t),o=ma&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var d=l.marker.find(0),c=ya(d.from,i)||qi(l.marker)-qi(r),u=ya(d.to,n)||Wi(l.marker)-Wi(r);if(!(c>=0&&u<=0||c<=0&&u>=0)&&(c<=0&&(ya(d.to,i)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||c>=0&&(ya(d.from,n)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function Qi(e){for(var t;t=Vi(e);)e=t.find(-1,!0).line;return e}function Ji(e){for(var t,i;t=Ki(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function Zi(e,t){var i=Dn(e,t),n=Qi(i);return i==n?t:On(n)}function en(e,t){if(t>e.lastLine())return t;var i,n=Dn(e,t);if(!tn(e,n))return t;for(;i=Ki(n);)n=i.find(1,!0).line;return On(n)+1}function tn(e,t){var i=ma&&t.markedSpans;if(i)for(var n,r=0;r<i.length;++r)if(n=i[r],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&nn(e,t,n))return!0}}function nn(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return nn(e,n.line,Ri(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var r,a=0;a<t.markedSpans.length;++a)if(r=t.markedSpans[a],r.marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&nn(e,t,r))return!0}function rn(e,t,i){Ln(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&vi(e,null,i)}function an(e){if(null!=e.height)return e.height;if(!Tr(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),Er(e.cm.display.measure,_r("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function on(e,t,i,n){var r=new Qa(e,i,n);return r.noHScroll&&(e.display.alignWidgets=!0),wi(e.doc,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==r.insertAt?i.push(r):i.splice(Math.min(i.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,!tn(e.doc,t)){var n=Ln(t)<e.doc.scrollTop;Rn(t,t.height+an(r)),n&&vi(e,null,r.height),e.curOp.forceUpdate=!0}return!0}),r}function sn(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),$i(e),zi(e,i);var r=n?n(e):1;r!=e.height&&Rn(e,r)}function ln(e){e.parent=null,$i(e)}function dn(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function cn(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var n=e.innerMode(t,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function un(e,t,i){for(var n=0;n<10;n++){var r=e.token(t,i);if(t.pos>t.start)return r}throw new Error("Mode "+e.name+" failed to advance stream.")}function hn(t,i,n,r,a,o,s){var l=n.flattenSpans;null==l&&(l=t.options.flattenSpans);var d,c=0,u=null,h=new Ga(i,t.options.tabSize);for(""==i&&dn(cn(n,r),o);!h.eol();){if(h.pos>t.options.maxHighlightLength?(l=!1,s&&gn(t,i,r,h.pos),h.pos=i.length,d=null):d=dn(un(n,h,r),o),t.options.addModeClass){var f=e.innerMode(n,r).mode.name;f&&(d="m-"+(d?f+" "+d:f))}l&&u==d||(c<h.start&&a(h.start,u),c=h.start,u=d),h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);a(p,u),c=p}}function fn(e,t,i,n){var r=[e.state.modeGen],a={};hn(e,t.text,e.doc.mode,i,function(e,t){r.push(e,t)},a,n);for(var o=0;o<e.state.overlays.length;++o){var s=e.state.overlays[o],l=1,d=0;hn(e,t.text,s.mode,!0,function(e,t){for(var i=l;d<e;){var n=r[l];n>e&&r.splice(l,1,e,r[l+1],n),l+=2,d=Math.min(e,n)}if(t)if(s.opaque)r.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;i<l;i+=2){var a=r[i+1];r[i+1]=(a?a+" ":"")+"cm-overlay "+t}},a)}return{styles:r,classes:a.bgClass||a.textClass?a:null}}function pn(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=fn(e,t,t.stateAfter=Ce(e,On(t)));t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function gn(e,t,i,n){var r=e.doc.mode,a=new Ga(t,e.options.tabSize);for(a.start=a.pos=n||0,""==t&&cn(r,i);!a.eol()&&a.pos<=e.options.maxHighlightLength;)un(r,a,i),a.start=a.pos}function mn(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?eo:Za;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function vn(e,t){var i=_r("span",null,null,ea?"padding-right: .1px":null),n={pre:_r("pre",[i]),content:i,col:0,pos:0,cm:e};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var a,o=r?t.rest[r-1]:t.line;n.pos=0,n.addToken=bn,(Jr||ea)&&e.getOption("lineWrapping")&&(n.addToken=_n(n.addToken)),Or(e.display.measure)&&(a=Fn(o))&&(n.addToken=wn(n.addToken,a)),n.map=[],Tn(o,n,pn(e,o)),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=Ar(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=Ar(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Rr(e.display.measure))),0==r?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return uo(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Ar(n.pre.className,n.textClass||"")),n}function yn(e){var t=_r("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function bn(e,t,i,n,r,a){if(t){var o=e.cm.options.specialChars,s=!1;if(o.test(t))for(var l=document.createDocumentFragment(),d=0;;){o.lastIndex=d;var c=o.exec(t),u=c?c.index-d:t.length-d;if(u){var h=document.createTextNode(t.slice(d,d+u));Jr&&Zr<9?l.appendChild(_r("span",[h])):l.appendChild(h),e.map.push(e.pos,e.pos+u,h),e.col+=u,e.pos+=u}if(!c)break;if(d+=u+1,"\t"==c[0]){var f=e.cm.options.tabSize,p=f-e.col%f,h=l.appendChild(_r("span",cr(p),"cm-tab"));e.col+=p}else{var h=e.cm.options.specialCharPlaceholder(c[0]);Jr&&Zr<9?l.appendChild(_r("span",[h])):l.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),Jr&&Zr<9&&(s=!0),e.pos+=t.length}if(i||n||r||s){var g=i||"";n&&(g+=n),r&&(g+=r);var m=_r("span",[l],g);return a&&(m.title=a),e.content.appendChild(m)}e.content.appendChild(l)}}function _n(e){function t(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":"\xa0";return t+=" "}return function(i,n,r,a,o,s){e(i,n.replace(/ {3,}/g,t),r,a,o,s)}}function wn(e,t){return function(i,n,r,a,o,s){r=r?r+" cm-force-border":"cm-force-border";for(var l=i.pos,d=l+n.length;;){for(var c=0;c<t.length;c++){var u=t[c];if(u.to>l&&u.from<=l)break}if(u.to>=d)return e(i,n,r,a,o,s);e(i,n.slice(0,u.to-l),r,a,null,s),a=null,n=n.slice(u.to-l),l=u.to}}}function En(e,t,i,n){var r=!n&&i.widgetNode;r&&(e.map.push(e.pos,e.pos+t,r),e.content.appendChild(r)),e.pos+=t}function Tn(e,t,i){var n=e.markedSpans,r=e.text,a=0;if(n)for(var o,s,l,d,c,u,h=r.length,f=0,p=1,g="",m=0;;){if(m==f){s=l=d=c="",u=null,m=1/0;for(var v=[],y=0;y<n.length;++y){var b=n[y],_=b.marker;b.from<=f&&(null==b.to||b.to>f)?(null!=b.to&&m>b.to&&(m=b.to,l=""),_.className&&(s+=" "+_.className),_.startStyle&&b.from==f&&(d+=" "+_.startStyle),_.endStyle&&b.to==m&&(l+=" "+_.endStyle),_.title&&!c&&(c=_.title),_.collapsed&&(!u||Yi(u.marker,_)<0)&&(u=b)):b.from>f&&m>b.from&&(m=b.from),"bookmark"==_.type&&b.from==f&&_.widgetNode&&v.push(_)}if(u&&(u.from||0)==f&&(En(t,(null==u.to?h+1:u.to)-f,u.marker,null==u.from),null==u.to))return;if(!u&&v.length)for(var y=0;y<v.length;++y)En(t,0,v[y])}if(f>=h)break;for(var w=Math.min(h,m);;){if(g){var E=f+g.length;if(!u){var T=E>w?g.slice(0,w-f):g;t.addToken(t,T,o?o+s:s,d,f+T.length==m?l:"",c)}if(E>=w){g=g.slice(w-f),f=w;break}f=E,d=""}g=r.slice(a,a=i[p++]),o=mn(i[p++],t.cm.options)}}else for(var p=1;p<i.length;p+=2)t.addToken(t,r.slice(a,a=i[p]),mn(i[p+1],t.cm.options))}function Sn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ur(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Cn(e,t,i,n){function r(e){return i?i[e]:null}function a(e,i,r){sn(e,i,r,n),ir(e,"change",e,t)}var o=t.from,s=t.to,l=t.text,d=Dn(e,o.line),c=Dn(e,s.line),u=ur(l),h=r(l.length-1),f=s.line-o.line;if(Sn(e,t)){for(var p=0,g=[];p<l.length-1;++p)g.push(new Ja(l[p],r(p),n));a(c,c.text,h),f&&e.remove(o.line,f),g.length&&e.insert(o.line,g)}else if(d==c)if(1==l.length)a(d,d.text.slice(0,o.ch)+u+d.text.slice(s.ch),h);else{for(var g=[],p=1;p<l.length-1;++p)g.push(new Ja(l[p],r(p),n));g.push(new Ja(u+d.text.slice(s.ch),h,n)),a(d,d.text.slice(0,o.ch)+l[0],r(0)),e.insert(o.line+1,g)}else if(1==l.length)a(d,d.text.slice(0,o.ch)+l[0]+c.text.slice(s.ch),r(0)),e.remove(o.line+1,f);else{a(d,d.text.slice(0,o.ch)+l[0],r(0)),a(c,u+c.text.slice(s.ch),h);for(var p=1,g=[];p<l.length-1;++p)g.push(new Ja(l[p],r(p),n));f>1&&e.remove(o.line+1,f-1),e.insert(o.line+1,g)}ir(e,"change",e,t)}function xn(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function kn(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var r=e[n];t+=r.chunkSize(),i+=r.height,r.parent=this}this.size=t,this.height=i,this.parent=null}function An(e,t,i){function n(e,r,a){if(e.linked)for(var o=0;o<e.linked.length;++o){var s=e.linked[o];if(s.doc!=r){var l=a&&s.sharedHist;i&&!l||(t(s.doc,l),n(s.doc,e,l))}}}n(e,null,!0)}function In(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),i(e),e.options.lineWrapping||f(e),e.options.mode=t.modeOption,pt(e)}function Dn(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var r=i.children[n],a=r.chunkSize();if(t<a){i=r;break}t-=a}return i.lines[t]}function Mn(e,t,i){var n=[],r=t.line;return e.iter(t.line,i.line+1,function(e){var a=e.text;r==i.line&&(a=a.slice(0,i.ch)),r==t.line&&(a=a.slice(t.ch)),n.push(a),++r}),n}function Pn(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function Rn(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function On(e){if(null==e.parent)return null;for(var t=e.parent,i=hr(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var r=0;n.children[r]!=t;++r)i+=n.children[r].chunkSize();return i+t.first}function Nn(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var r=e.children[n],a=r.height;if(t<a){e=r;continue e}t-=a,i+=r.chunkSize()}return i}while(!e.lines);for(var n=0;n<e.lines.length;++n){var o=e.lines[n],s=o.height;if(t<s)break;t-=s}return i+n}function Ln(e){e=Qi(e);for(var t=0,i=e.parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==e)break;t+=r.height}for(var a=i.parent;a;i=a,a=i.parent)for(var n=0;n<a.children.length;++n){var o=a.children[n];if(o==i)break;t+=o.height}return t}function Fn(e){var t=e.order;return null==t&&(t=e.order=Lo(e.text)),t}function jn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Bn(e,t){var i={from:W(t.from),to:Ma(t),text:Mn(e,t.from,t.to)};return Yn(e,i,t.from.line,t.to.line+1),
An(e,function(e){Yn(e,i,t.from.line,t.to.line+1)},!0),i}function Hn(e){for(;e.length;){var t=ur(e);if(!t.ranges)break;e.pop()}}function Un(e,t){return t?(Hn(e.done),ur(e.done)):e.done.length&&!ur(e.done).ranges?ur(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ur(e.done)):void 0}function $n(e,t,i,n){var r=e.history;r.undone.length=0;var a,o=+new Date;if((r.lastOp==n||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(a=Un(r,r.lastOp==n))){var s=ur(a.changes);0==ya(t.from,t.to)&&0==ya(t.from,s.to)?s.to=Ma(t):a.changes.push(Bn(e,t))}else{var l=ur(r.done);for((!l||!l.ranges)&&Wn(e.sel,r.done),a={changes:[Bn(e,t)],generation:r.generation},r.done.push(a);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=o,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=t.origin,s||uo(e,"historyAdded")}function zn(e,t,i,n){var r=t.charAt(0);return"*"==r||"+"==r&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function qn(e,t,i,n){var r=e.history,a=n&&n.origin;i==r.lastSelOp||a&&r.lastSelOrigin==a&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==a||zn(e,a,ur(r.done),t))?r.done[r.done.length-1]=t:Wn(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=a,r.lastSelOp=i,n&&n.clearRedo!==!1&&Hn(r.undone)}function Wn(e,t){var i=ur(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Yn(e,t,i,n){var r=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((r||(r=t["spans_"+e.id]={}))[a]=i.markedSpans),++a})}function Gn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Vn(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,r=[];n<t.text.length;++n)r.push(Gn(i[n]));return r}function Kn(e,t,i){for(var n=0,r=[];n<e.length;++n){var a=e[n];if(a.ranges)r.push(i?V.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];r.push({changes:s});for(var l=0;l<o.length;++l){var d,c=o[l];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var u in c)(d=u.match(/^spans_(\d+)$/))&&hr(t,Number(d[1]))>-1&&(ur(s)[u]=c[u],delete c[u])}}}return r}function Xn(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Qn(e,t,i,n){for(var r=0;r<e.length;++r){var a=e[r],o=!0;if(a.ranges){a.copied||(a=e[r]=a.deepCopy(),a.copied=!0);for(var s=0;s<a.ranges.length;s++)Xn(a.ranges[s].anchor,t,i,n),Xn(a.ranges[s].head,t,i,n)}else{for(var s=0;s<a.changes.length;++s){var l=a.changes[s];if(i<l.from.line)l.from=va(l.from.line+n,l.from.ch),l.to=va(l.to.line+n,l.to.ch);else if(t<=l.to.line){o=!1;break}}o||(e.splice(0,r+1),r=0)}}}function Jn(e,t){var i=t.from.line,n=t.to.line,r=t.text.length-(n-i)-1;Qn(e.done,i,n,r),Qn(e.undone,i,n,r)}function Zn(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function er(e){return e.target||e.srcElement}function tr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),ca&&e.ctrlKey&&1==t&&(t=3),t}function ir(e,t){function i(e){return function(){e.apply(null,a)}}var n=e._handlers&&e._handlers[t];if(n){var r,a=Array.prototype.slice.call(arguments,2);Ta?r=Ta.delayedCallbacks:ho?r=ho:(r=ho=[],setTimeout(nr,0));for(var o=0;o<n.length;++o)r.push(i(n[o]))}}function nr(){var e=ho;ho=null;for(var t=0;t<e.length;++t)e[t]()}function rr(e,t,i){return uo(e,i||t.type,e,t),Zn(t)||t.codemirrorIgnore}function ar(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)hr(i,t[n])==-1&&i.push(t[n])}function or(e,t){var i=e._handlers&&e._handlers[t];return i&&i.length>0}function sr(e){e.prototype.on=function(e,t){lo(this,e,t)},e.prototype.off=function(e,t){co(this,e,t)}}function lr(){this.id=null}function dr(e,t,i){for(var n=0,r=0;;){var a=e.indexOf("\t",n);a==-1&&(a=e.length);var o=a-n;if(a==e.length||r+o>=t)return n+Math.min(o,t-r);if(r+=a-n,r+=i-r%i,n=a+1,r>=t)return n}}function cr(e){for(;bo.length<=e;)bo.push(ur(bo)+" ");return bo[e]}function ur(e){return e[e.length-1]}function hr(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function fr(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function pr(e,t){var i;if(Object.create)i=Object.create(e);else{var n=function(){};n.prototype=e,i=new n}return t&&gr(t,i),i}function gr(e,t,i){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(i!==!1||!t.hasOwnProperty(n))&&(t[n]=e[n]);return t}function mr(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function vr(e,t){return t?!!(t.source.indexOf("\\w")>-1&&To(e))||t.test(e):To(e)}function yr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function br(e){return e.charCodeAt(0)>=768&&So.test(e)}function _r(e,t,i,n){var r=document.createElement(e);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)r.appendChild(t[a]);return r}function wr(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Er(e,t){return wr(e).appendChild(t)}function Tr(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function Sr(){return document.activeElement}function Cr(e){return new RegExp("\\b"+e+"\\b\\s*")}function xr(e,t){var i=Cr(t);i.test(e.className)&&(e.className=e.className.replace(i,""))}function kr(e,t){Cr(t).test(e.className)||(e.className+=" "+t)}function Ar(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!Cr(i[n]).test(t)&&(t+=" "+i[n]);return t}function Ir(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}function Dr(){Ao||(Mr(),Ao=!0)}function Mr(){var e;lo(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Co=null,Ir(It)},100))}),lo(window,"blur",function(){Ir(Jt)})}function Pr(e){if(null!=Co)return Co;var t=_r("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Er(e,t),t.offsetWidth&&(Co=t.offsetHeight-t.clientHeight),Co||0}function Rr(e){if(null==xo){var t=_r("span","\u200b");Er(e,_r("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(xo=t.offsetWidth<=1&&t.offsetHeight>2&&!(Jr&&Zr<8))}return xo?_r("span","\u200b"):_r("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Or(e){if(null!=ko)return ko;var t=Er(e,document.createTextNode("A\u062eA")),i=wo(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=wo(t,1,2).getBoundingClientRect();return ko=n.right-i.right<3}function Nr(e){if(null!=Ro)return Ro;var t=Er(e,_r("span","x")),i=t.getBoundingClientRect(),n=wo(t,0,1).getBoundingClientRect();return Ro=Math.abs(i.left-n.left)>1}function Lr(e,t,i,n){if(!e)return n(t,i,"ltr");for(var r=!1,a=0;a<e.length;++a){var o=e[a];(o.from<i&&o.to>t||t==i&&o.to==t)&&(n(Math.max(o.from,t),Math.min(o.to,i),1==o.level?"rtl":"ltr"),r=!0)}r||n(t,i,"ltr")}function Fr(e){return e.level%2?e.to:e.from}function jr(e){return e.level%2?e.from:e.to}function Br(e){var t=Fn(e);return t?Fr(t[0]):0}function Hr(e){var t=Fn(e);return t?jr(ur(t)):e.text.length}function Ur(e,t){var i=Dn(e.doc,t),n=Qi(i);n!=i&&(t=On(n));var r=Fn(n),a=r?r[0].level%2?Hr(n):Br(n):0;return va(t,a)}function $r(e,t){for(var i,n=Dn(e.doc,t);i=Ki(n);)n=i.find(1,!0).line,t=null;var r=Fn(n),a=r?r[0].level%2?Br(n):Hr(n):n.text.length;return va(null==t?On(n):t,a)}function zr(e,t){var i=Ur(e,t.line),n=Dn(e.doc,i.line),r=Fn(n);if(!r||0==r[0].level){var a=Math.max(0,n.text.search(/\S/)),o=t.line==i.line&&t.ch<=a&&t.ch;return va(i.line,o?0:a)}return i}function qr(e,t,i){var n=e[0].level;return t==n||i!=n&&t<i}function Wr(e,t){No=null;for(var i,n=0;n<e.length;++n){var r=e[n];if(r.from<t&&r.to>t)return n;if(r.from==t||r.to==t){if(null!=i)return qr(e,r.level,e[i].level)?(r.from!=r.to&&(No=i),n):(r.from!=r.to&&(No=n),i);i=n}}return i}function Yr(e,t,i,n){if(!n)return t+i;do t+=i;while(t>0&&br(e.text.charAt(t)));return t}function Gr(e,t,i,n){var r=Fn(e);if(!r)return Vr(e,t,i,n);for(var a=Wr(r,t),o=r[a],s=Yr(e,t,o.level%2?-i:i,n);;){if(s>o.from&&s<o.to)return s;if(s==o.from||s==o.to)return Wr(r,s)==a?s:(o=r[a+=i],i>0==o.level%2?o.to:o.from);if(o=r[a+=i],!o)return null;s=i>0==o.level%2?Yr(e,o.to,-1,n):Yr(e,o.from,1,n)}}function Vr(e,t,i,n){var r=t+i;if(n)for(;r>0&&br(e.text.charAt(r));)r+=i;return r<0||r>e.text.length?null:r}var Kr=/gecko\/\d/i.test(navigator.userAgent),Xr=/MSIE \d/.test(navigator.userAgent),Qr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Jr=Xr||Qr,Zr=Jr&&(Xr?document.documentMode||6:Qr[1]),ea=/WebKit\//.test(navigator.userAgent),ta=ea&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ia=/Chrome\//.test(navigator.userAgent),na=/Opera\//.test(navigator.userAgent),ra=/Apple Computer/.test(navigator.vendor),aa=/KHTML\//.test(navigator.userAgent),oa=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),sa=/PhantomJS/.test(navigator.userAgent),la=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),da=la||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),ca=la||/Mac/.test(navigator.platform),ua=/win/i.test(navigator.platform),ha=na&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ha&&(ha=Number(ha[1])),ha&&ha>=15&&(na=!1,ea=!0);var fa=ca&&(ta||na&&(null==ha||ha<12.11)),pa=Kr||Jr&&Zr>=9,ga=!1,ma=!1,va=e.Pos=function(e,t){return this instanceof va?(this.line=e,void(this.ch=t)):new va(e,t)},ya=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};V.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=ya(i.anchor,n.anchor)||0!=ya(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new K(W(this.ranges[t].anchor),W(this.ranges[t].head));return new V(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(ya(t,n.from())>=0&&ya(e,n.to())<=0)return i}return-1}},K.prototype={from:function(){return G(this.anchor,this.head)},to:function(){return Y(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var ba,_a,wa,Ea={left:0,right:0,top:0,bottom:0},Ta=null,Sa=0,Ca=null,xa=0,ka=0,Aa=null;Jr?Aa=-.53:Kr?Aa=15:ia?Aa=-.7:ra&&(Aa=-1/3);var Ia,Da=null,Ma=e.changeEnd=function(e){return e.text?va(e.from.line+e.text.length-1,ur(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),Ct(this),Et(this)},setOption:function(e,t){var i=this.options,n=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Ra.hasOwnProperty(e)&&dt(this,Ra[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||"string"!=typeof t[i]&&t[i].name==e)return t.splice(i,1),!0},addOverlay:ct(function(t,i){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,pt(this)}),removeOverlay:ct(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,pt(this),void 0}}),indentLine:ct(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),te(this.doc,e)&&_i(this,e,t,i)}),indentSelection:ct(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var r=t[n];if(r.empty())r.head.line>i&&(_i(this,r.head.line,e,!0),i=r.head.line,n==this.doc.sel.primIndex&&yi(this));else{var a=r.from(),o=r.to(),s=Math.max(i,a.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=s;l<i;++l)_i(this,l,e);var d=this.doc.sel.ranges;0==a.ch&&t.length==d.length&&d[n].from().ch>0&&oe(this.doc,n,new K(a,d[n].to()),go)}}}),getTokenAt:function(e,t){var i=this.doc;e=Z(i,e);for(var n=Ce(this,e.line,t),r=this.doc.mode,a=Dn(i,e.line),o=new Ga(a.text,this.options.tabSize);o.pos<e.ch&&!o.eol();){o.start=o.pos;var s=un(r,o,n)}return{start:o.start,end:o.pos,string:o.current(),type:s||null,state:n}},getTokenTypeAt:function(e){e=Z(this.doc,e);var t,i=pn(this,Dn(this.doc,e.line)),n=0,r=(i.length-1)/2,a=e.ch;if(0==a)t=i[2];else for(;;){var o=n+r>>1;if((o?i[2*o-1]:0)>=a)r=o;else{if(!(i[2*o+1]<a)){t=i[2*o+2];break}n=o+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Ba.hasOwnProperty(t))return Ba;var n=Ba[t],r=this.getModeAt(e);if("string"==typeof r[t])n[r[t]]&&i.push(n[r[t]]);else if(r[t])for(var a=0;a<r[t].length;a++){var o=n[r[t][a]];o&&i.push(o)}else r.helperType&&n[r.helperType]?i.push(n[r.helperType]):n[r.name]&&i.push(n[r.name]);for(var a=0;a<n._global.length;a++){var s=n._global[a];s.pred(r,this)&&hr(i,s.val)==-1&&i.push(s.val)}return i},getStateAfter:function(e,t){var i=this.doc;return e=J(i,null==e?i.first+i.size-1:e),Ce(this,e+1,t)},cursorCoords:function(e,t){var i,n=this.doc.sel.primary();return i=null==e?n.head:"object"==typeof e?Z(this.doc,e):e?n.from():n.to(),Ye(this,i,t||"page")},charCoords:function(e,t){return We(this,Z(this.doc,e),t||"page")},coordsChar:function(e,t){return e=qe(this,e,t||"page"),Ke(this,e.left,e.top)},lineAtHeight:function(e,t){return e=qe(this,{top:e,left:0},t||"page").top,Nn(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,i=!0);var r=Dn(this.doc,e);return ze(this,r,{top:0,left:0},t||"page").top+(i?this.doc.height-Ln(r):0)},defaultTextHeight:function(){return Qe(this.display)},defaultCharWidth:function(){return Je(this.display)},setGutterMarker:ct(function(e,t,i){return wi(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&yr(n)&&(e.gutterMarkers=null),!0})}),clearGutter:ct(function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,gt(t,n,"gutter"),yr(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineWidget:ct(function(e,t,i){return on(this,e,t,i)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!te(this.doc,e))return null;var t=e;if(e=Dn(this.doc,e),!e)return null}else{var t=On(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,r){var a=this.display;e=Ye(this,Z(this.doc,e));var o=e.bottom,s=e.left;if(t.style.position="absolute",a.sizer.appendChild(t),"over"==n)o=e.top;else if("above"==n||"near"==n){var l=Math.max(a.wrapper.clientHeight,this.doc.height),d=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),s+t.offsetWidth>d&&(s=d-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==r?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),i&&gi(this,s,o,s+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:ct(Gt),triggerOnKeyPress:ct(Xt),triggerOnKeyUp:Kt,execCommand:function(e){if($a.hasOwnProperty(e))return $a[e](this)},findPosH:function(e,t,i,n){var r=1;t<0&&(r=-1,t=-t);for(var a=0,o=Z(this.doc,e);a<t&&(o=Ti(this.doc,o,r,i,n),!o.hitSide);++a);return o},moveH:ct(function(e,t){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?Ti(i.doc,n.head,e,t,i.options.rtlMoveVisually):e<0?n.from():n.to()},vo)}),deleteH:ct(function(e,t){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Ei(this,function(i){var r=Ti(n,i.head,e,t,!1);return e<0?{from:r,to:i.head}:{from:i.head,to:r}})}),findPosV:function(e,t,i,n){var r=1,a=n;t<0&&(r=-1,t=-t);for(var o=0,s=Z(this.doc,e);o<t;++o){var l=Ye(this,s,"div");if(null==a?a=l.left:l.left=a,s=Si(this,l,r,i),s.hitSide)break}return s},moveV:ct(function(e,t){var i=this,n=this.doc,r=[],a=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(o){if(a)return e<0?o.from():o.to();var s=Ye(i,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),r.push(s.left);var l=Si(i,s,e,t);return"page"==t&&o==n.sel.primary()&&vi(i,null,We(i,l,"div").top-s.top),l},vo),r.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=r[o]}),findWordAt:function(e){var t=this.doc,i=Dn(t,e.line).text,n=e.ch,r=e.ch;if(i){var a=this.getHelper(e,"wordChars");(e.xRel<0||r==i.length)&&n?--n:++r;for(var o=i.charAt(n),s=vr(o,a)?function(e){return vr(e,a)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!vr(e)};n>0&&s(i.charAt(n-1));)--n;for(;r<i.length&&s(i.charAt(r));)++r}return new K(va(e.line,n),va(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?kr(this.display.cursorDiv,"CodeMirror-overwrite"):xr(this.display.cursorDiv,"CodeMirror-overwrite"),uo(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Sr()==this.display.input},scrollTo:ct(function(e,t){(null!=e||null!=t)&&bi(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=fo;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:ct(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:va(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)bi(this),this.curOp.scrollToPos=e;else{var i=mi(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:ct(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=i(e)),null!=t&&(n.display.wrapper.style.height=i(t)),n.options.lineWrapping&&Be(this);var r=n.display.viewFrom;n.doc.iter(r,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){gt(n,r,"widget");break}++r}),n.curOp.forceUpdate=!0,uo(n,"refresh",this)}),operation:function(e){return lt(this,e)},refresh:ct(function(){var e=this.display.cachedTextHeight;pt(this),this.curOp.forceUpdate=!0,He(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-Qe(this.display))>.5)&&o(this),uo(this,"refresh",this)}),swapDoc:ct(function(e){var t=this.doc;return t.cm=null,In(this,e),He(this),St(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ir(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},sr(e);var Pa=e.defaults={},Ra=e.optionHandlers={},Oa=e.Init={toString:function(){return"CodeMirror.Init"}};Ci("value","",function(e,t){e.setValue(t)},!0),Ci("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),Ci("indentUnit",2,i,!0),Ci("indentWithTabs",!1),Ci("smartIndent",!0),Ci("tabSize",4,function(e){n(e),He(e),pt(e)},!0),Ci("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),e.refresh()},!0),Ci("specialCharPlaceholder",yn,function(e){e.refresh()},!0),Ci("electricChars",!0),Ci("rtlMoveVisually",!ua),Ci("wholeLineUpdateBefore",!0),Ci("theme","default",function(e){l(e),d(e)},!0),Ci("keyMap","default",s),Ci("extraKeys",null),Ci("lineWrapping",!1,r,!0),Ci("gutters",[],function(e){p(e.options),d(e)},!0),Ci("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?E(e.display)+"px":"0",e.refresh()},!0),Ci("coverGutterNextToScrollbar",!1,v,!0),Ci("lineNumbers",!1,function(e){p(e.options),d(e)},!0),Ci("firstLineNumber",1,d,!0),Ci("lineNumberFormatter",function(e){return e},d,!0),Ci("showCursorWhenSelecting",!1,ye,!0),Ci("resetSelectionOnContextMenu",!0),Ci("readOnly",!1,function(e,t){"nocursor"==t?(Jt(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||St(e))}),Ci("disableInput",!1,function(e,t){t||St(e)},!0),Ci("dragDrop",!0),Ci("cursorBlinkRate",530),Ci("cursorScrollMargin",0),Ci("cursorHeight",1,ye,!0),Ci("singleCursorHeightPerLine",!0,ye,!0),Ci("workTime",100),Ci("workDelay",100),Ci("flattenSpans",!0,n,!0),Ci("addModeClass",!1,n,!0),Ci("pollInterval",100),Ci("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Ci("historyEventDelay",1250),Ci("viewportMargin",10,function(e){e.refresh()},!0),Ci("maxHighlightLength",1e4,n,!0),Ci("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Ci("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Ci("autofocus",null);var Na=e.modes={},La=e.mimeModes={};e.defineMode=function(t,i){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Na[t]=i},e.defineMIME=function(e,t){La[e]=t},e.resolveMode=function(t){if("string"==typeof t&&La.hasOwnProperty(t))t=La[t];else if(t&&"string"==typeof t.name&&La.hasOwnProperty(t.name)){var i=La[t.name];"string"==typeof i&&(i={name:i}),t=pr(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){var i=e.resolveMode(i),n=Na[i.name];if(!n)return e.getMode(t,"text/plain");var r=n(t,i);if(Fa.hasOwnProperty(i.name)){var a=Fa[i.name];for(var o in a)a.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=a[o])}if(r.name=i.name,i.helperType&&(r.helperType=i.helperType),i.modeProps)for(var o in i.modeProps)r[o]=i.modeProps[o];return r},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Fa=e.modeExtensions={};e.extendMode=function(e,t){var i=Fa.hasOwnProperty(e)?Fa[e]:Fa[e]={};gr(t,i)},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){io.prototype[e]=t},e.defineOption=Ci;var ja=[];e.defineInitHook=function(e){ja.push(e)};var Ba=e.helpers={};e.registerHelper=function(t,i,n){Ba.hasOwnProperty(t)||(Ba[t]=e[t]={_global:[]}),Ba[t][i]=n},e.registerGlobalHelper=function(t,i,n,r){e.registerHelper(t,i,r),Ba[t]._global.push({pred:n,val:r})};var Ha=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var r=t[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i},Ua=e.startState=function(e,t,i){return!e.startState||e.startState(t,i)};e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var $a=e.commands={selectAll:function(e){e.setSelection(va(e.firstLine(),0),va(e.lastLine()),go)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),go)},killLine:function(e){Ei(e,function(t){if(t.empty()){var i=Dn(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:va(t.head.line+1,0)}:{from:t.head,to:va(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Ei(e,function(t){return{from:va(t.from().line,0),to:Z(e.doc,va(t.to().line+1,0))}})},delLineLeft:function(e){Ei(e,function(e){return{from:va(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Ei(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){Ei(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(va(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(va(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Ur(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return zr(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return $r(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},vo)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},vo)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return n.ch<e.getLine(n.line).search(/\S/)?zr(e,t.head):n},vo)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,r=0;r<i.length;r++){var a=i[r].from(),o=yo(e.getLine(a.line),a.ch,n);t.push(new Array(n-o%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){lt(e,function(){for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var r=t[n].head,a=Dn(e.doc,r.line).text;if(a)if(r.ch==a.length&&(r=new va(r.line,r.ch-1)),r.ch>0)r=new va(r.line,r.ch+1),e.replaceRange(a.charAt(r.ch-1)+a.charAt(r.ch-2),va(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var o=Dn(e.doc,r.line-1).text;o&&e.replaceRange(a.charAt(0)+"\n"+o.charAt(o.length-1),va(r.line-1,o.length-1),va(r.line,1),"+transpose")}i.push(new K(r,r))}e.setSelections(i)})},newlineAndIndent:function(e){lt(e,function(){for(var t=e.listSelections().length,i=0;i<t;i++){var n=e.listSelections()[i];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),yi(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},za=e.keyMap={};za.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},za.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},za.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},za.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},za["default"]=ca?za.macDefault:za.pcDefault;var qa=e.lookupKey=function(e,t,i){function n(t){t=xi(t);var r=t[e];if(r===!1)return"stop";if(null!=r&&i(r))return!0;if(t.nofallthrough)return"stop";var a=t.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return n(a);for(var o=0;o<a.length;++o){var s=n(a[o]);if(s)return s}return!1}for(var r=0;r<t.length;++r){var a=n(t[r]);if(a)return"stop"!=a}},Wa=e.isModifierKey=function(e){var t=Oo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Ya=e.keyName=function(e,t){if(na&&34==e.keyCode&&e["char"])return!1;var i=Oo[e.keyCode];return null!=i&&!e.altGraphKey&&(e.altKey&&(i="Alt-"+i),(fa?e.metaKey:e.ctrlKey)&&(i="Ctrl-"+i),(fa?e.ctrlKey:e.metaKey)&&(i="Cmd-"+i),!t&&e.shiftKey&&(i="Shift-"+i),i)};e.fromTextArea=function(t,i){function n(){t.value=l.getValue()}if(i||(i={}),i.value=t.value,!i.tabindex&&t.tabindex&&(i.tabindex=t.tabindex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var r=Sr();i.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(lo(t.form,"submit",n),!i.leaveSubmitMethodAlone)){var a=t.form,o=a.submit;try{var s=a.submit=function(){n(),a.submit=o,a.submit(),a.submit=s}}catch(e){}}t.style.display="none";var l=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return l.save=n,l.getTextArea=function(){return t},l.toTextArea=function(){l.toTextArea=isNaN,n(),t.parentNode.removeChild(l.getWrapperElement()),t.style.display="",t.form&&(co(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))},l};var Ga=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Ga.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));if(i)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?yo(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return yo(this.string,null,this.tabSize)-(this.lineStart?yo(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var r=function(e){return i?e.toLowerCase():e},a=this.string.substr(this.pos,e.length);if(r(a)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Va=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};sr(Va),Va.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ze(e),or(this,"clear")){var i=this.find();i&&ir(this,"clear",i.from,i.to)}for(var n=null,r=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Ri(o.markedSpans,this);e&&!this.collapsed?gt(e,On(o),"text"):e&&(null!=s.to&&(r=On(o)),null!=s.from&&(n=On(o))),o.markedSpans=Oi(o.markedSpans,s),null==s.from&&this.collapsed&&!tn(this.doc,o)&&e&&Rn(o,Qe(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var l=Qi(this.lines[a]),d=h(l);d>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=d,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&pt(e,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&fe(e.doc)),e&&ir(e,"markerCleared",e,this),t&&tt(e),this.parent&&this.parent.clear()}},Va.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,n,r=0;r<this.lines.length;++r){var a=this.lines[r],o=Ri(a.markedSpans,this);if(null!=o.from&&(i=va(t?a:On(a),o.from),e==-1))return i;if(null!=o.to&&(n=va(t?a:On(a),o.to),1==e))return n}return i&&{from:i,to:n}},Va.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&lt(i,function(){var n=e.line,r=On(e.line),a=Re(i,r);if(a&&(je(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!tn(t.doc,n)&&null!=t.height){var o=t.height;t.height=null;var s=an(t)-o;s&&Rn(n,n.height+s)}})},Va.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||hr(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Va.prototype.detachLine=function(e){if(this.lines.splice(hr(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Ka=0,Xa=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};sr(Xa),Xa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ir(this,"clear")}},Xa.prototype.find=function(e,t){return this.primary.find(e,t)};var Qa=e.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=e,this.node=t};sr(Qa),Qa.prototype.clear=function(){var e=this.cm,t=this.line.widgets,i=this.line,n=On(i);if(null!=n&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(i.widgets=null);var a=an(this);lt(e,function(){rn(e,i,-a),gt(e,n,"widget"),Rn(i,Math.max(0,i.height-a))})}},Qa.prototype.changed=function(){var e=this.height,t=this.cm,i=this.line;this.height=null;var n=an(this)-e;n&&lt(t,function(){t.curOp.forceUpdate=!0,rn(t,i,n),Rn(i,i.height+n)})};var Ja=e.Line=function(e,t,i){this.text=e,zi(this,t),this.height=i?i(this):1};sr(Ja),Ja.prototype.lineNo=function(){return On(this)};var Za={},eo={};xn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;i<n;++i){var r=this.lines[i];this.height-=r.height,ln(r),ir(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;e<n;++e)if(i(this.lines[e]))return!0}},kn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],r=n.chunkSize();if(e<r){var a=Math.min(t,r-e),o=n.height;if(n.removeInner(e,a),this.height-=o-n.height,r==a&&(this.children.splice(i--,1),n.parent=null),0==(t-=a))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof xn))){var s=[];this.collapse(s),this.children=[new xn(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],a=r.chunkSize();if(e<=a){if(r.insertInner(e,t,i),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var o=r.lines.splice(r.lines.length-25,25),s=new xn(o);r.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new kn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=hr(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var r=new kn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],a=r.chunkSize();if(e<a){var o=Math.min(t,a-e);if(r.iterN(e,o,i))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var to=0,io=e.Doc=function(e,t,i){if(!(this instanceof io))return new io(e,t,i);null==i&&(i=0),kn.call(this,[new xn([new Ja("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=va(i,0);this.sel=Q(n),this.history=new jn(null),this.id=++to,this.modeOption=t,"string"==typeof e&&(e=Do(e)),Cn(this,{from:n,to:n,text:e}),ce(this,Q(n),go)};io.prototype=pr(kn.prototype,{constructor:io,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Pn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:ut(function(e){var t=va(this.first,0),i=this.first+this.size-1;oi(this,{from:t,to:va(i,Dn(this,i).text.length),text:Do(e),origin:"setValue"},!0),ce(this,Q(t))}),replaceRange:function(e,t,i,n){t=Z(this,t),i=i?Z(this,i):t,hi(this,e,t,i,n)},getRange:function(e,t,i){var n=Mn(this,Z(this,e),Z(this,t));return i===!1?n:n.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(te(this,e))return Dn(this,e)},getLineNumber:function(e){return On(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Dn(this,e)),Qi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Z(this,e)},getCursor:function(e){var t,i=this.sel.primary();return t=null==e||"head"==e?i.head:"anchor"==e?i.anchor:"end"==e||"to"==e||e===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ut(function(e,t,i){se(this,Z(this,"number"==typeof e?va(e,t||0):e),null,i)}),setSelection:ut(function(e,t,i){se(this,Z(this,e),Z(this,t||e),i)}),extendSelection:ut(function(e,t,i){re(this,Z(this,e),t&&Z(this,t),i)}),extendSelections:ut(function(e,t){ae(this,ie(this,e,t))}),extendSelectionsBy:ut(function(e,t){ae(this,fr(this.sel.ranges,e),t)}),setSelections:ut(function(e,t,i){if(e.length){for(var n=0,r=[];n<e.length;n++)r[n]=new K(Z(this,e[n].anchor),Z(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ce(this,X(r,t),i)}}),addSelection:ut(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new K(Z(this,e),Z(this,t||e))),ce(this,X(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var r=Mn(this,i[n].from(),i[n].to());t=t?t.concat(r):r}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=Mn(this,i[n].from(),i[n].to());e!==!1&&(r=r.join(e||"\n")),t[n]=r}return t},replaceSelection:function(e,t,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:ut(function(e,t,i){for(var n=[],r=this.sel,a=0;a<r.ranges.length;a++){var o=r.ranges[a];n[a]={from:o.from(),to:o.to(),text:Do(e[a]),origin:i}}for(var s=t&&"end"!=t&&ri(this,n,t),a=n.length-1;a>=0;a--)oi(this,n[a]);s?de(this,s):this.cm&&yi(this.cm)}),undo:ut(function(){li(this,"undo")}),redo:ut(function(){li(this,"redo")}),undoSelection:ut(function(){li(this,"undo",!0)}),redoSelection:ut(function(){li(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new jn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Kn(this.history.done),undone:Kn(this.history.undone)}},setHistory:function(e){var t=this.history=new jn(this.history.maxGeneration);t.done=Kn(e.done.slice(0),null,!0),t.undone=Kn(e.undone.slice(0),null,!0)},addLineClass:ut(function(e,t,i){return wi(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:ut(function(e,t,i){return wi(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",r=e[n];if(!r)return!1;if(null==i)e[n]=null;else{var a=r.match(new RegExp("(?:^|\\s+)"+i+"(?:$|\\s+)"));if(!a)return!1;var o=a.index+a[0].length;e[n]=r.slice(0,a.index)+(a.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0})}),markText:function(e,t,i){return ki(this,Z(this,e),Z(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Z(this,e),ki(this,e,e,i,"bookmark")},findMarksAt:function(e){e=Z(this,e);var t=[],i=Dn(this,e.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,i){e=Z(this,e),t=Z(this,t);var n=[],r=e.line;return this.iter(e.line,t.line+1,function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];!(r==e.line&&e.ch>l.to||null==l.from&&r!=e.line||r==t.line&&l.from>t.ch)&&(!i||i(l.marker))&&n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(n){var r=n.text.length+1;return r>e?(t=e,!0):(e-=r,void++i)}),Z(this,va(i,t))},indexFromPos:function(e){e=Z(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new io(Pn(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new io(Pn(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Di(n,Ii(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==t){this.linked.splice(i,1),t.unlinkDoc(this),Mi(Ii(this));break}}if(t.history==this.history){var r=[t.id];An(t,function(e){r.push(e.id)},!0),t.history=new jn(null),t.history.done=Kn(this.history.done,r),t.history.undone=Kn(this.history.undone,r)}},iterLinkedDocs:function(e){An(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),io.prototype.eachLine=io.prototype.iter;var no="iter insert remove copy getEditor".split(" ");for(var ro in io.prototype)io.prototype.hasOwnProperty(ro)&&hr(no,ro)<0&&(e.prototype[ro]=function(e){return function(){return e.apply(this.doc,arguments)}}(io.prototype[ro]));sr(io);var ao=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},oo=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},so=e.e_stop=function(e){ao(e),oo(e)},lo=e.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={}),r=n[t]||(n[t]=[]);r.push(i)}},co=e.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var r=0;r<n.length;++r)if(n[r]==i){n.splice(r,1);break}}},uo=e.signal=function(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)},ho=null,fo=30,po=e.Pass={toString:function(){return"CodeMirror.Pass"}},go={scroll:!1},mo={origin:"*mouse"},vo={origin:"+move"};lr.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var yo=e.countColumn=function(e,t,i,n,r){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var a=n||0,o=r||0;;){var s=e.indexOf("\t",a);if(s<0||s>=t)return o+(t-a);o+=s-a,o+=i-o%i,a=s+1}},bo=[""],_o=function(e){e.select()};la?_o=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Jr&&(_o=function(e){try{e.select()}catch(e){}}),[].indexOf&&(hr=function(e,t){return e.indexOf(t)}),[].map&&(fr=function(e,t){return e.map(t)});var wo,Eo=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,To=e.isWordChar=function(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Eo.test(e))},So=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;wo=document.createRange?function(e,t,i){var n=document.createRange();return n.setEnd(e,i),n.setStart(e,t),n}:function(e,t,i){var n=document.body.createTextRange();return n.moveToElementText(e.parentNode),n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n},Jr&&Zr<11&&(Sr=function(){try{return document.activeElement}catch(e){return document.body}});var Co,xo,ko,Ao=!1,Io=function(){if(Jr&&Zr<9)return!1;var e=_r("div");return"draggable"in e||"dragDrop"in e}(),Do=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;t<=n;){var r=e.indexOf("\n",t);r==-1&&(r=e.length);var a=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),o=a.indexOf("\r");o!=-1?(i.push(a.slice(0,o)),t+=o+1):(i.push(a),t=r+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Mo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Po=function(){var e=_r("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ro=null,Oo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Oo,function(){for(var e=0;e<10;e++)Oo[e+48]=Oo[e+96]=String(e);for(var e=65;e<=90;e++)Oo[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Oo[e+111]=Oo[e+63235]="F"+e}();var No,Lo=function(){function e(e){return e<=247?i.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1773?n.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,i){this.level=e,this.from=t,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,d="L";return function(i){if(!r.test(i))return!1;for(var n,c=i.length,u=[],h=0;h<c;++h)u.push(n=e(i.charCodeAt(h)));for(var h=0,f=d;h<c;++h){var n=u[h];"m"==n?u[h]=f:f=n}for(var h=0,p=d;h<c;++h){var n=u[h];"1"==n&&"r"==p?u[h]="n":o.test(n)&&(p=n,"r"==n&&(u[h]="R"))}for(var h=1,f=u[0];h<c-1;++h){var n=u[h];"+"==n&&"1"==f&&"1"==u[h+1]?u[h]="1":","==n&&f==u[h+1]&&("1"==f||"n"==f)&&(u[h]=f),f=n}for(var h=0;h<c;++h){var n=u[h];if(","==n)u[h]="N";else if("%"==n){for(var g=h+1;g<c&&"%"==u[g];++g);for(var m=h&&"!"==u[h-1]||g<c&&"1"==u[g]?"1":"N",v=h;v<g;++v)u[v]=m;h=g-1}}for(var h=0,p=d;h<c;++h){var n=u[h];"L"==p&&"1"==n?u[h]="L":o.test(n)&&(p=n)}for(var h=0;h<c;++h)if(a.test(u[h])){for(var g=h+1;g<c&&a.test(u[g]);++g);for(var y="L"==(h?u[h-1]:d),b="L"==(g<c?u[g]:d),m=y||b?"L":"R",v=h;v<g;++v)u[v]=m;h=g-1}for(var _,w=[],h=0;h<c;)if(s.test(u[h])){var E=h;for(++h;h<c&&s.test(u[h]);++h);w.push(new t(0,E,h))}else{var T=h,S=w.length;for(++h;h<c&&"L"!=u[h];++h);for(var v=T;v<h;)if(l.test(u[v])){T<v&&w.splice(S,0,new t(1,T,v));var C=v;for(++v;v<h&&l.test(u[v]);++v);w.splice(S,0,new t(2,C,v)),T=v}else++v;T<h&&w.splice(S,0,new t(1,T,h))}return 1==w[0].level&&(_=i.match(/^\s+/))&&(w[0].from=_[0].length,w.unshift(new t(0,0,_[0].length))),1==ur(w).level&&(_=i.match(/\s+$/))&&(ur(w).to-=_[0].length,w.push(new t(0,c-_[0].length,c))),w[0].level!=ur(w).level&&w.push(new t(w[0].level,c,c)),w}}();return e.version="4.7.0",e}),i("codemirror",["codemirror/lib/codemirror"],function(e){return e}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/xml/xml",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("xml",function(t,i){function n(e,t){function i(i){return t.tokenize=i,i(e,t)}var n=e.next();if("<"==n)return e.eat("!")?e.eat("[")?e.match("CDATA[")?i(o("atom","]]>")):null:e.match("--")?i(o("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=o("meta","?>"),"meta"):(T=e.eat("/")?"closeTag":"openTag",t.tokenize=r,"tag bracket");if("&"==n){var a;return a=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),a?"atom":"error"}return e.eatWhile(/[^&<]/),null}function r(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=n,T=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return T="equals",null;if("<"==i){t.tokenize=n,t.state=u,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=a(i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(e){var t=function(t,i){for(;!t.eol();)if(t.next()==e){i.tokenize=r;break}return"string"};return t.isInAttribute=!0,t}function o(e,t){return function(i,r){for(;!i.eol();){if(i.match(t)){r.tokenize=n;break}i.next()}return e}}function s(e){return function(t,i){for(var r;null!=(r=t.next());){if("<"==r)return i.tokenize=s(e+1),i.tokenize(t,i);if(">"==r){if(1==e){i.tokenize=n;break}return i.tokenize=s(e-1),i.tokenize(t,i)}}return"meta"}}function l(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(C.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function d(e){e.context&&(e.context=e.context.prev)}function c(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!C.contextGrabbers.hasOwnProperty(i)||!C.contextGrabbers[i].hasOwnProperty(t))return;d(e)}}function u(e,t,i){return"openTag"==e?(i.tagStart=t.column(),h):"closeTag"==e?f:u}function h(e,t,i){return"word"==e?(i.tagName=t.current(),S="tag",m):(S="error",h)}function f(e,t,i){if("word"==e){var n=t.current();return i.context&&i.context.tagName!=n&&C.implicitlyClosed.hasOwnProperty(i.context.tagName)&&d(i),i.context&&i.context.tagName==n?(S="tag",p):(S="tag error",g)}return S="error",g}function p(e,t,i){return"endTag"!=e?(S="error",p):(d(i),u)}function g(e,t,i){return S="error",p(e,t,i)}function m(e,t,i){if("word"==e)return S="attribute",v;if("endTag"==e||"selfcloseTag"==e){var n=i.tagName,r=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||C.autoSelfClosers.hasOwnProperty(n)?c(i,n):(c(i,n),i.context=new l(i,n,r==i.indented)),u}return S="error",m}function v(e,t,i){return"equals"==e?y:(C.allowMissing||(S="error"),m(e,t,i))}function y(e,t,i){return"string"==e?b:"word"==e&&C.allowUnquoted?(S="string",m):(S="error",m(e,t,i))}function b(e,t,i){return"string"==e?b:m(e,t,i)}var _=t.indentUnit,w=i.multilineTagIndentFactor||1,E=i.multilineTagIndentPastTag;null==E&&(E=!0);var T,S,C=i.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},x=i.alignCDATA;return{startState:function(){return{tokenize:n,state:u,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;T=null;var i=t.tokenize(e,t);return(i||T)&&"comment"!=i&&(S=null,t.state=t.state(T||i,e,t),S&&(i="error"==S?i+" error":S)),i},indent:function(t,i,a){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+_;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=r&&t.tokenize!=n)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return E?t.tagStart+t.tagName.length+2:t.tagStart+_*w;if(x&&/<!\[CDATA\[/.test(i))return 0;var s=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(s&&s[1])for(;o;){if(o.tagName==s[2]){o=o.prev;break}if(!C.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(s)for(;o;){var l=C.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(s[2]))break;o=o.prev}for(;o&&!o.startOfLine;)o=o.prev;return o?o.indent+_:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("javascript",function(t,i){function n(e){for(var t,i=!1,n=!1;null!=(t=e.next());){if(!i){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}i=!i&&"\\"==t}}function r(e,t,i){return pe=e,ge=i,t}function a(e,t){var i=e.next();if('"'==i||"'"==i)return t.tokenize=o(i),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==i&&e.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return r(i);if("="==i&&e.eat(">"))return r("=>","operator");if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==i)return e.eat("*")?(t.tokenize=s,s(e,t)):e.eat("/")?(e.skipToEnd(),r("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e),e.eatWhile(/[gimy]/),r("regexp","string-2")):(e.eatWhile(Te),r("operator","operator",e.current()));if("`"==i)return t.tokenize=l,l(e,t);if("#"==i)return e.skipToEnd(),r("error","error");if(Te.test(i))return e.eatWhile(Te),r("operator","operator",e.current());if(we.test(i)){e.eatWhile(we);var a=e.current(),d=Ee.propertyIsEnumerable(a)&&Ee[a];return d&&"."!=t.lastType?r(d.type,d.style,a):r("variable","variable",a)}}function o(e){return function(t,i){var n,o=!1;if(ye&&"@"==t.peek()&&t.match(Se))return i.tokenize=a,r("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||o);)o=!o&&"\\"==n;return o||(i.tokenize=a),r("string","string")}}function s(e,t){for(var i,n=!1;i=e.next();){if("/"==i&&n){t.tokenize=a;break}n="*"==i}return r("comment","comment")}function l(e,t){for(var i,n=!1;null!=(i=e.next());){if(!n&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=a;break}n=!n&&"\\"==i}return r("quasi","string-2",e.current())}function d(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(i<0)){for(var n=0,r=!1,a=i-1;a>=0;--a){var o=e.string.charAt(a),s=Ce.indexOf(o);if(s>=0&&s<3){if(!n){++a;break}if(0==--n)break}else if(s>=3&&s<6)++n;else if(we.test(o))r=!0;else if(r&&!n){++a;break}}r&&!n&&(t.fatArrowAt=a)}}function c(e,t,i,n,r,a){this.indented=e,this.column=t,this.type=i,this.prev=r,this.info=a,null!=n&&(this.align=n)}function u(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var i=n.vars;i;i=i.next)if(i.name==t)return!0}function h(e,t,i,n,r){var a=e.cc;for(ke.state=e,ke.stream=r,ke.marked=null,ke.cc=a,ke.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():be?E:w;if(o(i,n)){for(;a.length&&a[a.length-1].lex;)a.pop()();return ke.marked?ke.marked:"variable"==i&&u(e,n)?"variable-2":t}}}function f(){for(var e=arguments.length-1;e>=0;e--)ke.cc.push(arguments[e])}function p(){return f.apply(null,arguments),!0}function g(e){function t(t){for(var i=t;i;i=i.next)if(i.name==e)return!0;return!1}var n=ke.state;if(n.context){if(ke.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;i.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function m(){ke.state.context={prev:ke.state.context,vars:ke.state.localVars},ke.state.localVars=Ae}function v(){ke.state.localVars=ke.state.context.vars,ke.state.context=ke.state.context.prev}function y(e,t){var i=function(){var i=ke.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var r=i.lexical;r&&")"==r.type&&r.align;r=r.prev)n=r.indented;i.lexical=new c(n,ke.stream.column(),e,null,i.lexical,t)};return i.lex=!0,i}function b(){var e=ke.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function _(e){function t(i){return i==e?p():";"==e?f():p(t)}return t}function w(e,t){return"var"==e?p(y("vardef",t.length),z,_(";"),b):"keyword a"==e?p(y("form"),E,w,b):"keyword b"==e?p(y("form"),w,b):"{"==e?p(y("}"),H,b):";"==e?p():"if"==e?("else"==ke.state.lexical.info&&ke.state.cc[ke.state.cc.length-1]==b&&ke.state.cc.pop()(),p(y("form"),E,w,b,V)):"function"==e?p(ee):"for"==e?p(y("form"),K,w,b):"variable"==e?p(y("stat"),R):"switch"==e?p(y("form"),E,y("}","switch"),_("{"),H,b,b):"case"==e?p(E,_(":")):"default"==e?p(_(":")):"catch"==e?p(y("form"),m,_("("),te,_(")"),w,b,v):"module"==e?p(y("form"),m,oe,v,b):"class"==e?p(y("form"),ie,b):"export"==e?p(y("form"),se,b):"import"==e?p(y("form"),le,b):f(y("stat"),E,_(";"),b)}function E(e){return S(e,!1)}function T(e){return S(e,!0)}function S(e,t){if(ke.state.fatArrowAt==ke.stream.start){var i=t?P:M;if("("==e)return p(m,y(")"),j(q,")"),b,_("=>"),i,v);if("variable"==e)return f(m,q,_("=>"),i,v)}var n=t?A:k;return xe.hasOwnProperty(e)?p(n):"function"==e?p(ee,n):"keyword c"==e?p(t?x:C):"("==e?p(y(")"),C,fe,_(")"),b,n):"operator"==e||"spread"==e?p(t?T:E):"["==e?p(y("]"),ue,b,n):"{"==e?B(N,"}",null,n):"quasi"==e?f(I,n):p()}function C(e){return e.match(/[;\}\)\],]/)?f():f(E)}function x(e){return e.match(/[;\}\)\],]/)?f():f(T)}function k(e,t){return","==e?p(E):A(e,t,!1)}function A(e,t,i){var n=0==i?k:A,r=0==i?E:T;if("=>"==e)return p(m,i?P:M,v);if("operator"==e)return/\+\+|--/.test(t)?p(n):"?"==t?p(E,_(":"),r):p(r);if("quasi"==e)return f(I,n);if(";"!=e)return"("==e?B(T,")","call",n):"."==e?p(O,n):"["==e?p(y("]"),C,_("]"),b,n):void 0}function I(e,t){return"quasi"!=e?f():"${"!=t.slice(t.length-2)?p(I):p(E,D)}function D(e){if("}"==e)return ke.marked="string-2",ke.state.tokenize=l,p(I)}function M(e){return d(ke.stream,ke.state),f("{"==e?w:E)}function P(e){return d(ke.stream,ke.state),f("{"==e?w:T)}function R(e){return":"==e?p(b,w):f(k,_(";"),b)}function O(e){if("variable"==e)return ke.marked="property",
p()}function N(e,t){return"variable"==e||"keyword"==ke.style?(ke.marked="property",p("get"==t||"set"==t?L:F)):"number"==e||"string"==e?(ke.marked=ye?"property":ke.style+" property",p(F)):"jsonld-keyword"==e?p(F):"["==e?p(E,_("]"),F):void 0}function L(e){return"variable"!=e?f(F):(ke.marked="property",p(ee))}function F(e){return":"==e?p(T):"("==e?f(ee):void 0}function j(e,t){function i(n){if(","==n){var r=ke.state.lexical;return"call"==r.info&&(r.pos=(r.pos||0)+1),p(e,i)}return n==t?p():p(_(t))}return function(n){return n==t?p():f(e,i)}}function B(e,t,i){for(var n=3;n<arguments.length;n++)ke.cc.push(arguments[n]);return p(y(t,i),j(e,t),b)}function H(e){return"}"==e?p():f(w,H)}function U(e){if(_e&&":"==e)return p($)}function $(e){if("variable"==e)return ke.marked="variable-3",p()}function z(){return f(q,U,Y,G)}function q(e,t){return"variable"==e?(g(t),p()):"["==e?B(q,"]"):"{"==e?B(W,"}"):void 0}function W(e,t){return"variable"!=e||ke.stream.match(/^\s*:/,!1)?("variable"==e&&(ke.marked="property"),p(_(":"),q,Y)):(g(t),p(Y))}function Y(e,t){if("="==t)return p(T)}function G(e){if(","==e)return p(z)}function V(e,t){if("keyword b"==e&&"else"==t)return p(y("form","else"),w,b)}function K(e){if("("==e)return p(y(")"),X,_(")"),b)}function X(e){return"var"==e?p(z,_(";"),J):";"==e?p(J):"variable"==e?p(Q):f(E,_(";"),J)}function Q(e,t){return"in"==t||"of"==t?(ke.marked="keyword",p(E)):p(k,J)}function J(e,t){return";"==e?p(Z):"in"==t||"of"==t?(ke.marked="keyword",p(E)):f(E,_(";"),Z)}function Z(e){")"!=e&&p(E)}function ee(e,t){return"*"==t?(ke.marked="keyword",p(ee)):"variable"==e?(g(t),p(ee)):"("==e?p(m,y(")"),j(te,")"),b,w,v):void 0}function te(e){return"spread"==e?p(te):f(q,U)}function ie(e,t){if("variable"==e)return g(t),p(ne)}function ne(e,t){return"extends"==t?p(E,ne):"{"==e?p(y("}"),re,b):void 0}function re(e,t){return"variable"==e||"keyword"==ke.style?(ke.marked="property","get"==t||"set"==t?p(ae,ee,re):p(ee,re)):"*"==t?(ke.marked="keyword",p(re)):";"==e?p(re):"}"==e?p():void 0}function ae(e){return"variable"!=e?f():(ke.marked="property",p())}function oe(e,t){return"string"==e?p(w):"variable"==e?(g(t),p(ce)):void 0}function se(e,t){return"*"==t?(ke.marked="keyword",p(ce,_(";"))):"default"==t?(ke.marked="keyword",p(E,_(";"))):f(w)}function le(e){return"string"==e?p():f(de,ce)}function de(e,t){return"{"==e?B(de,"}"):("variable"==e&&g(t),p())}function ce(e,t){if("from"==t)return ke.marked="keyword",p(E)}function ue(e){return"]"==e?p():f(T,he)}function he(e){return"for"==e?f(fe,_("]")):","==e?p(j(x,"]")):f(j(T,"]"))}function fe(e){return"for"==e?p(K,fe):"if"==e?p(E,fe):void 0}var pe,ge,me=t.indentUnit,ve=i.statementIndent,ye=i.jsonld,be=i.json||ye,_e=i.typescript,we=i.wordCharacters||/[\w$\xa1-\uffff]/,Ee=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),n=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":i,"do":i,"try":i,"finally":i,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),"let":e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":n,"export":e("export"),"import":e("import"),"extends":n};if(_e){var s={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:s,number:s,bool:s,any:s};for(var d in l)o[d]=l[d]}return o}(),Te=/[+\-*&%=<>!?|~^]/,Se=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ce="([{}])",xe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},ke={state:null,column:null,marked:null,cc:null},Ae={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new c((e||0)-me,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:0};return i.globalVars&&"object"==typeof i.globalVars&&(t.globalVars=i.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),d(e,t)),t.tokenize!=s&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==pe?i:(t.lastType="operator"!=pe||"++"!=ge&&"--"!=ge?pe:"incdec",h(t,i,pe,ge,e))},indent:function(t,n){if(t.tokenize==s)return e.Pass;if(t.tokenize!=a)return 0;var r=n&&n.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var d=t.cc[l];if(d==b)o=o.prev;else if(d!=V)break}"stat"==o.type&&"}"==r&&(o=o.prev),ve&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var c=o.type,u=r==c;return"vardef"==c?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==c&&"{"==r?o.indented:"form"==c?o.indented+me:"stat"==c?o.indented+("operator"==t.lastType||","==t.lastType?ve||me:0):"switch"!=o.info||u||0==i.doubleIndentSwitch?o.align?o.column+(u?0:1):o.indented+(u?0:me):o.indented+(/^(?:case|default)\b/.test(n)?me:2*me)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:be?null:"/*",blockCommentEnd:be?null:"*/",lineComment:be?null:"//",fold:"brace",helperType:be?"json":"javascript",jsonldMode:ye,jsonMode:be}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}function i(e,t){for(var i,n=!1;null!=(i=e.next());){if(n&&"/"==i){t.tokenize=null;break}n="*"==i}return["comment","comment"]}function n(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,i){function n(e,t){return f=t,e}function r(e,t){var i=e.next();if(m[i]){var r=m[i](e,t);if(r!==!1)return r}return"@"==i?(e.eatWhile(/[\w\\\-]/),n("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?n(null,"compare"):'"'==i||"'"==i?(t.tokenize=a(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),n("atom","hash")):"!"==i?(e.match(/^\s*\w*/),n("keyword","important")):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),n("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?n(null,"select-op"):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?n("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?n(null,i):"u"==i&&e.match("rl(")?(e.backUp(1),t.tokenize=o,n("property","word")):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),n("property","word")):n(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),n("number","unit")):e.match(/^\w+-/)?n("meta","meta"):void 0}function a(e){return function(t,i){for(var r,a=!1;null!=(r=t.next());){if(r==e&&!a){")"==e&&t.backUp(1);break}a=!a&&"\\"==r}return(r==e||!a&&")"!=e)&&(i.tokenize=null),n("string","string")}}function o(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=a(")"),n(null,"(")}function s(e,t,i){this.type=e,this.indent=t,this.prev=i}function l(e,t,i){return e.context=new s(i,t.indentation()+g,e.context),i}function d(e){return e.context=e.context.prev,e.context.type}function c(e,t,i){return C[i.context.type](e,t,i)}function u(e,t,i,n){for(var r=n||1;r>0;r--)i.context=i.context.prev;return c(e,t,i)}function h(e){var t=e.current().toLowerCase();p=E.hasOwnProperty(t)?"atom":w.hasOwnProperty(t)?"keyword":"variable"}i.propertyKeywords||(i=e.resolveMode("text/css"));var f,p,g=t.indentUnit,m=i.tokenHooks,v=i.mediaTypes||{},y=i.mediaFeatures||{},b=i.propertyKeywords||{},_=i.nonStandardPropertyKeywords||{},w=i.colorKeywords||{},E=i.valueKeywords||{},T=i.fontProperties||{},S=i.allowNested,C={};return C.top=function(e,t,i){if("{"==e)return l(i,t,"block");if("}"==e&&i.context.prev)return d(i);if("@media"==e)return l(i,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(i,t,"at");if("hash"==e)p="builtin";else if("word"==e)p="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(i,t,"interpolation");if(":"==e)return"pseudo";if(S&&"("==e)return l(i,t,"parens")}return i.context.type},C.block=function(e,t,i){if("word"==e){var n=t.current().toLowerCase();return b.hasOwnProperty(n)?(p="property","maybeprop"):_.hasOwnProperty(n)?(p="string-2","maybeprop"):S?(p=t.match(/^\s*:/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==e?"block":S||"hash"!=e&&"qualifier"!=e?C.top(e,t,i):(p="error","block")},C.maybeprop=function(e,t,i){return":"==e?l(i,t,"prop"):c(e,t,i)},C.prop=function(e,t,i){if(";"==e)return d(i);if("{"==e&&S)return l(i,t,"propBlock");if("}"==e||"{"==e)return u(e,t,i);if("("==e)return l(i,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)h(t);else if("interpolation"==e)return l(i,t,"interpolation")}else p+=" error";return"prop"},C.propBlock=function(e,t,i){return"}"==e?d(i):"word"==e?(p="property","maybeprop"):i.context.type},C.parens=function(e,t,i){return"{"==e||"}"==e?u(e,t,i):")"==e?d(i):"("==e?l(i,t,"parens"):("word"==e&&h(t),"parens")},C.pseudo=function(e,t,i){return"word"==e?(p="variable-3",i.context.type):c(e,t,i)},C.media=function(e,t,i){if("("==e)return l(i,t,"media_parens");if("}"==e)return u(e,t,i);if("{"==e)return d(i)&&l(i,t,S?"block":"top");if("word"==e){var n=t.current().toLowerCase();p="only"==n||"not"==n||"and"==n?"keyword":v.hasOwnProperty(n)?"attribute":y.hasOwnProperty(n)?"property":"error"}return i.context.type},C.media_parens=function(e,t,i){return")"==e?d(i):"{"==e||"}"==e?u(e,t,i,2):C.media(e,t,i)},C.font_face_before=function(e,t,i){return"{"==e?l(i,t,"font_face"):c(e,t,i)},C.font_face=function(e,t,i){return"}"==e?d(i):"word"==e?(p=T.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},C.keyframes=function(e,t,i){return"word"==e?(p="variable","keyframes"):"{"==e?l(i,t,"top"):c(e,t,i)},C.at=function(e,t,i){return";"==e?d(i):"{"==e||"}"==e?u(e,t,i):("word"==e?p="tag":"hash"==e&&(p="builtin"),"at")},C.interpolation=function(e,t,i){return"}"==e?d(i):"{"==e||";"==e?u(e,t,i):("variable"!=e&&(p="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new s("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var i=(t.tokenize||r)(e,t);return i&&"object"==typeof i&&(f=i[1],i=i[0]),p=i,t.state=C[t.state](f,e,t),p},indent:function(e,t){var i=e.context,n=t&&t.charAt(0),r=i.indent;return"prop"==i.type&&("}"==n||")"==n)&&(i=i.prev),i.prev&&("}"==n&&("block"==i.type||"top"==i.type||"interpolation"==i.type||"font_face"==i.type)||")"==n&&("parens"==i.type||"media_parens"==i.type)||"{"==n&&("at"==i.type||"media"==i.type))&&(r=i.indent-g,i=i.prev),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var r=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=t(r),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=t(o),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(l),c=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=t(c),h=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],f=t(h),p=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],g=t(p),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=t(m),y=r.concat(o).concat(l).concat(c).concat(h).concat(p);e.registerHelper("hintWords","css",y),e.defineMIME("text/css",{mediaTypes:a,mediaFeatures:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:g,fontProperties:v,tokenHooks:{"<":function(e,t){return!!e.match("!--")&&(t.tokenize=n,n(e,t))},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=i,i(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:g,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:g,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},"@":function(e){return!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror"),t("../xml/xml"),t("../javascript/javascript"),t("../css/css")):"function"==typeof i&&i.amd?i("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){e.defineMode("htmlmixed",function(t,i){function n(e,t){var i=t.htmlState.tagName;i&&(i=i.toLowerCase());var n=s.token(e,t.htmlState);if("script"==i&&/\btag\b/.test(n)&&">"==e.current()){var r=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);r=r?r[1]:"",r&&/[\"\']/.test(r.charAt(0))&&(r=r.slice(1,r.length-1));for(var c=0;c<d.length;++c){var u=d[c];if("string"==typeof u.matches?r==u.matches:u.matches.test(r)){u.mode&&(t.token=a,t.localMode=u.mode,t.localState=u.mode.startState&&u.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==i&&/\btag\b/.test(n)&&">"==e.current()&&(t.token=o,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return n}function r(e,t,i){var n,r=e.current(),a=r.search(t);return a>-1?e.backUp(r.length-a):(n=r.match(/<\/?$/))&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),i}function a(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,n(e,t)):r(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function o(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,n(e,t)):r(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var s=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag}),l=e.getMode(t,"css"),d=[],c=i&&i.scriptTypes;if(d.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),c)for(var u=0;u<c.length;++u){var h=c[u];d.push({matches:h.matches,mode:h.mode&&e.getMode(t,h.mode)})}return d.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=s.startState();return{token:n,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var i=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:i,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,i){return!t.localMode||/^\s*<\//.test(i)?s.indent(t.htmlState,i):t.localMode.indent?t.localMode.indent(t.localState,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/fold/xml-fold",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function i(e,t,i,n){this.line=t,this.ch=i,this.cm=e,this.text=e.getLine(t),this.min=n?n.from:e.firstLine(),this.max=n?n.to-1:e.lastLine()}function n(e,t){var i=e.cm.getTokenTypeAt(h(e.line,t));return i&&/\btag\b/.test(i)}function r(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function a(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function o(e){for(;;){var t=e.text.indexOf(">",e.ch);if(t==-1){if(r(e))continue;return}{if(n(e,t+1)){var i=e.text.lastIndexOf("/",t),a=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,a?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(t==-1){if(a(e))continue;return}if(n(e,t+1)){g.lastIndex=t,e.ch=t;var i=g.exec(e.text);if(i&&i.index==t)return i}else e.ch=t}}function l(e){for(;;){g.lastIndex=e.ch;var t=g.exec(e.text);if(!t){if(r(e))continue;return}{if(n(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function d(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(t==-1){if(a(e))continue;return}{if(n(e,t+1)){var i=e.text.lastIndexOf("/",t),r=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}}function c(e,t){for(var i=[];;){var n,r=l(e),a=e.line,s=e.ch-(r?r[0].length:0);if(!r||!(n=o(e)))return;if("selfClose"!=n)if(r[1]){for(var d=i.length-1;d>=0;--d)if(i[d]==r[2]){i.length=d;break}if(d<0&&(!t||t==r[2]))return{tag:r[2],from:h(a,s),to:h(e.line,e.ch)}}else i.push(r[2])}}function u(e,t){for(var i=[];;){var n=d(e);if(!n)return;if("selfClose"!=n){var r=e.line,a=e.ch,o=s(e);if(!o)return;if(o[1])i.push(o[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==o[2]){i.length=l;break}if(l<0&&(!t||t==o[2]))return{tag:o[2],from:h(e.line,e.ch),to:h(r,a)}}}else s(e)}}var h=e.Pos,f="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=f+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+f+"]["+p+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var n=new i(e,t.line,0);;){var r,a=l(n);if(!a||n.line!=t.line||!(r=o(n)))return;if(!a[1]&&"selfClose"!=r){var t=h(n.line,n.ch),s=c(n,a[2]);return s&&{from:t,to:s.from}}}}),e.findMatchingTag=function(e,n,r){var a=new i(e,n.line,n.ch,r);if(a.text.indexOf(">")!=-1||a.text.indexOf("<")!=-1){var l=o(a),d=l&&h(a.line,a.ch),f=l&&s(a);if(l&&f&&!(t(a,n)>0)){var p={from:h(a.line,a.ch),to:d,tag:f[2]};return"selfClose"==l?{open:p,close:null,at:"open"}:f[1]?{open:u(a,f[2]),close:p,at:"close"}:(a=new i(e,d.line,d.ch,r),{open:p,close:c(a,f[2]),
at:"open"})}}},e.findEnclosingTag=function(e,t,n){for(var r=new i(e,t.line,t.ch,n);;){var a=u(r);if(!a)break;var o=new i(e,t.line,t.ch,n),s=c(o,a.tag);if(s)return{open:a,close:s}}},e.scanForClosingTag=function(e,t,n,r){var a=new i(e,t.line,t.ch,r?{from:0,to:r}:null);return c(a,n)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror"),t("../fold/xml-fold")):"function"==typeof i&&i.amd?i("codemirror/addon/edit/closetag",["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),s=[],l=0;l<i.length;l++){if(!i[l].empty())return e.Pass;var d=i[l].head,c=t.getTokenAt(d),u=e.innerMode(t.getMode(),c.state),h=u.state;if("xml"!=u.mode.name||!h.tagName)return e.Pass;var f=t.getOption("autoCloseTags"),p="html"==u.mode.configuration,g="object"==typeof f&&f.dontCloseTags||p&&a,m="object"==typeof f&&f.indentTags||p&&o,v=h.tagName;c.end>d.ch&&(v=v.slice(0,v.length-c.end+d.ch));var y=v.toLowerCase();if(!v||"string"==c.type&&(c.end!=d.ch||!/[\"\']/.test(c.string.charAt(c.string.length-1))||1==c.string.length)||"tag"==c.type&&"closeTag"==h.type||c.string.indexOf("/")==c.string.length-1||g&&n(g,y)>-1||r(t,v,d,h,!0))return e.Pass;var b=m&&n(m,y)>-1;s[l]={indent:b,text:">"+(b?"\n\n":"")+"</"+v+">",newPos:b?e.Pos(d.line+1,0):e.Pos(d.line,d.ch+1)}}for(var l=i.length-1;l>=0;l--){var _=s[l];t.replaceRange(_.text,i[l].head,i[l].anchor,"+insert");var w=t.listSelections().slice(0);w[l]={head:_.newPos,anchor:_.newPos},t.setSelections(w),_.indent&&(t.indentLine(_.newPos.line,null,!0),t.indentLine(_.newPos.line+1,null,!0))}}function i(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),n=[],a=0;a<i.length;a++){if(!i[a].empty())return e.Pass;var o=i[a].head,s=t.getTokenAt(o),l=e.innerMode(t.getMode(),s.state),d=l.state;if("string"==s.type||"<"!=s.string.charAt(0)||s.start!=o.ch-1)return e.Pass;if("xml"!=l.mode.name)if("htmlmixed"==t.getMode().name&&"javascript"==l.mode.name)n[a]="/script>";else{if("htmlmixed"!=t.getMode().name||"css"!=l.mode.name)return e.Pass;n[a]="/style>"}else{if(!d.context||!d.context.tagName||r(t,d.context.tagName,o,d))return e.Pass;n[a]="/"+d.context.tagName+">"}}t.replaceSelections(n),i=t.listSelections();for(var a=0;a<i.length;a++)(a==i.length-1||i[a].head.line<i[a+1].head.line)&&t.indentLine(i[a].head.line)}function n(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;i<n;++i)if(e[i]==t)return i;return-1}function r(t,i,n,r,a){if(!e.scanForClosingTag)return!1;var o=Math.min(t.lastLine()+1,n.line+500),s=e.scanForClosingTag(t,n,null,o);if(!s||s.tag!=i)return!1;for(var l=r.context,d=a?1:0;l&&l.tagName==i;l=l.prev)++d;n=s.to;for(var c=1;c<d;c++){var u=e.scanForClosingTag(t,n,null,o);if(!u||u.tag!=i)return!1;n=u.to}return!0}e.defineOption("autoCloseTags",!1,function(n,r,a){if(a!=e.Init&&a&&n.removeKeyMap("autoCloseTags"),r){var o={name:"autoCloseTags"};("object"!=typeof r||r.whenClosing)&&(o["'/'"]=function(e){return i(e)}),("object"!=typeof r||r.whenOpening)&&(o["'>'"]=function(e){return t(e)}),n.addKeyMap(o)}});var a=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],o=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror"),t("../fold/xml-fold")):"function"==typeof i&&i.amd?i("codemirror/addon/edit/matchtags",["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function i(i){i.state.failedTagMatch=!1,i.operation(function(){if(t(i),!i.somethingSelected()){var n=i.getCursor(),r=i.getViewport();r.from=Math.min(r.from,n.line),r.to=Math.max(n.line+1,r.to);var a=e.findMatchingTag(i,n,r);if(a){if(i.state.matchBothTags){var o="open"==a.at?a.open:a.close;o&&(i.state.tagHit=i.markText(o.from,o.to,{className:"CodeMirror-matchingtag"}))}var s="close"==a.at?a.open:a.close;s?i.state.tagOther=i.markText(s.from,s.to,{className:"CodeMirror-matchingtag"}):i.state.failedTagMatch=!0}}})}function n(e){e.state.failedTagMatch&&i(e)}e.defineOption("matchTags",!1,function(r,a,o){o&&o!=e.Init&&(r.off("cursorActivity",i),r.off("viewportChange",n),t(r)),a&&(r.state.matchBothTags="object"==typeof a&&a.bothTags,r.on("cursorActivity",i),r.on("viewportChange",n),i(r))}),e.commands.toMatchingTag=function(t){var i=e.findMatchingTag(t,t.getCursor());if(i){var n="close"==i.at?i.open:i.close;n&&t.extendSelection(n.to,n.from)}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/xml-hint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n){var r=n&&n.schemaInfo,a=n&&n.quoteChar||'"';if(r){var o=t.getCursor(),s=t.getTokenAt(o),l=e.innerMode(t.getMode(),s.state);if("xml"==l.mode.name){var d,c,u=[],h=!1,f=/\btag\b/.test(s.type),p=f&&/^\w/.test(s.string);if(p){var g=t.getLine(o.line).slice(Math.max(0,s.start-2),s.start),m=/<\/$/.test(g)?"close":/<$/.test(g)?"open":null;m&&(c=s.start-("close"==m?2:1))}else f&&"<"==s.string?m="open":f&&"</"==s.string&&(m="close");if(!f&&!l.state.tagName||m){p&&(d=s.string),h=m;var v=l.state.context,y=v&&r[v.tagName],b=v?y&&y.children:r["!top"];if(b&&"close"!=m)for(var _=0;_<b.length;++_)(!d||0==b[_].lastIndexOf(d,0))&&u.push("<"+b[_]);else if("close"!=m)for(var w in r)r.hasOwnProperty(w)&&"!top"!=w&&"!attrs"!=w&&(!d||0==w.lastIndexOf(d,0))&&u.push("<"+w);v&&(!d||"close"==m&&0==v.tagName.lastIndexOf(d,0))&&u.push("</"+v.tagName+">")}else{var y=r[l.state.tagName],E=y&&y.attrs,T=r["!attrs"];if(!E&&!T)return;if(E){if(T){var S={};for(var C in T)T.hasOwnProperty(C)&&(S[C]=T[C]);for(var C in E)E.hasOwnProperty(C)&&(S[C]=E[C]);E=S}}else E=T;if("string"==s.type||"="==s.string){var x,g=t.getRange(i(o.line,Math.max(0,o.ch-60)),i(o.line,"string"==s.type?s.start:s.end)),k=g.match(/([^\s\u00a0=<>\"\']+)=$/);if(!k||!E.hasOwnProperty(k[1])||!(x=E[k[1]]))return;if("function"==typeof x&&(x=x.call(this,t)),"string"==s.type){d=s.string;var A=0;/['"]/.test(s.string.charAt(0))&&(a=s.string.charAt(0),d=s.string.slice(1),A++);var I=s.string.length;/['"]/.test(s.string.charAt(I-1))&&(a=s.string.charAt(I-1),d=s.string.substr(A,I-2)),h=!0}for(var _=0;_<x.length;++_)(!d||0==x[_].lastIndexOf(d,0))&&u.push(a+x[_]+a)}else{"attribute"==s.type&&(d=s.string,h=!0);for(var D in E)E.hasOwnProperty(D)&&(!d||0==D.lastIndexOf(d,0))&&u.push(D)}}return{list:u,from:h?i(o.line,null==c?s.start:c):o,to:h?i(o.line,s.end):o}}}}var i=e.Pos;e.registerHelper("hint","xml",t)}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror","./xml-hint")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/html-hint",["../../lib/codemirror","./xml-hint"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t in u)u.hasOwnProperty(t)&&(e.attrs[t]=u[t])}function i(t,i){var n={schemaInfo:c};if(i)for(var r in i)n[r]=i[r];return e.hint.xml(t,n)}var n="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),r=["_blank","_self","_top","_parent"],a=["ascii","utf-8","utf-16","latin1","latin1"],o=["get","post","put","delete"],s=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],l=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],d={attrs:{}},c={a:{attrs:{href:null,ping:null,type:null,media:l,target:r,hreflang:n}},abbr:d,acronym:d,address:d,applet:d,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:l,hreflang:n,type:null,shape:["default","rect","circle","poly"]}},article:d,aside:d,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:d,base:{attrs:{href:null,target:r}},basefont:d,bdi:d,bdo:d,big:d,blockquote:{attrs:{cite:null}},body:d,br:d,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:s,formmethod:o,formnovalidate:["","novalidate"],formtarget:r,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:d,center:d,cite:d,code:d,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:d,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:d,dir:d,div:d,dl:d,dt:d,em:d,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:d,figure:d,font:d,footer:d,form:{attrs:{action:null,name:null,"accept-charset":a,autocomplete:["on","off"],enctype:s,method:o,novalidate:["","novalidate"],target:r}},frame:d,frameset:d,h1:d,h2:d,h3:d,h4:d,h5:d,h6:d,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:d,hgroup:d,hr:d,html:{attrs:{manifest:null},children:["head","body"]},i:d,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:s,formmethod:o,formnovalidate:["","novalidate"],formtarget:r,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:d,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{"for":null,form:null}},legend:d,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:n,media:l,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:d,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:a,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:d,noframes:d,noscript:d,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{"for":null,form:null,name:null}},p:d,param:{attrs:{name:null,value:null}},pre:d,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:d,rt:d,ruby:d,s:d,samp:d,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:a}},section:d,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:d,source:{attrs:{src:null,type:null,media:null}},span:d,strike:d,strong:d,style:{attrs:{type:["text/css"],media:l,scoped:null}},sub:d,summary:d,sup:d,table:d,tbody:d,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:d,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:d,time:{attrs:{datetime:null}},title:d,tr:d,track:{attrs:{src:null,label:null,"default":null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:n}},tt:d,u:d,ul:d,"var":d,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:d},u={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],"class":null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};t(d);for(var h in c)c.hasOwnProperty(h)&&c[h]!=d&&t(c[h]);e.htmlSchema=c,e.registerHelper("hint","html",i)}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/show-hint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){this.cm=e,this.options=this.buildOptions(t),this.widget=this.onClose=null}function i(e){return"string"==typeof e?e:e.text}function n(e,t){function i(e,i){var r;r="string"!=typeof i?function(e){return i(e,t)}:n.hasOwnProperty(i)?n[i]:i,a[e]=r}var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(-t.menuSize()+1,!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},r=e.options.customKeys,a=r?{}:n;if(r)for(var o in r)r.hasOwnProperty(o)&&i(o,r[o]);var s=e.options.extraKeys;if(s)for(var o in s)s.hasOwnProperty(o)&&i(o,s[o]);return a}function r(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function a(t,a){this.completion=t,this.data=a;var l=this,d=t.cm,c=this.hints=document.createElement("ul");c.className="CodeMirror-hints",this.selectedHint=a.selectedHint||0;for(var u=a.list,h=0;h<u.length;++h){var f=c.appendChild(document.createElement("li")),p=u[h],g=o+(h!=this.selectedHint?"":" "+s);null!=p.className&&(g=p.className+" "+g),f.className=g,p.render?p.render(f,a,p):f.appendChild(document.createTextNode(p.displayText||i(p))),f.hintId=h}var m=d.cursorCoords(t.options.alignWithWord?a.from:null),v=m.left,y=m.bottom,b=!0;c.style.left=v+"px",c.style.top=y+"px";var _=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),w=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.options.container||document.body).appendChild(c);var E=c.getBoundingClientRect(),T=E.bottom-w;if(T>0){var S=E.bottom-E.top,C=m.top-(m.bottom-E.top);if(C-S>0)c.style.top=(y=m.top-S)+"px",b=!1;else if(S>w){c.style.height=w-5+"px",c.style.top=(y=m.bottom-E.top)+"px";var x=d.getCursor();a.from.ch!=x.ch&&(m=d.cursorCoords(x),c.style.left=(v=m.left)+"px",E=c.getBoundingClientRect())}}var k=E.left-_;if(k>0&&(E.right-E.left>_&&(c.style.width=_-5+"px",k-=E.right-E.left-_),c.style.left=(v=m.left-k)+"px"),d.addKeyMap(this.keyMap=n(t,{moveFocus:function(e,t){l.changeActive(l.selectedHint+e,t)},setFocus:function(e){l.changeActive(e)},menuSize:function(){return l.screenAmount()},length:u.length,close:function(){t.close()},pick:function(){l.pick()},data:a})),t.options.closeOnUnfocus){var A;d.on("blur",this.onBlur=function(){A=setTimeout(function(){t.close()},100)}),d.on("focus",this.onFocus=function(){clearTimeout(A)})}var I=d.getScrollInfo();return d.on("scroll",this.onScroll=function(){var e=d.getScrollInfo(),i=d.getWrapperElement().getBoundingClientRect(),n=y+I.top-e.top,r=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return b||(r+=c.offsetHeight),r<=i.top||r>=i.bottom?t.close():(c.style.top=n+"px",void(c.style.left=v+I.left-e.left+"px"))}),e.on(c,"dblclick",function(e){var t=r(c,e.target||e.srcElement);t&&null!=t.hintId&&(l.changeActive(t.hintId),l.pick())}),e.on(c,"click",function(e){var i=r(c,e.target||e.srcElement);i&&null!=i.hintId&&(l.changeActive(i.hintId),t.options.completeOnSingleClick&&l.pick())}),e.on(c,"mousedown",function(){setTimeout(function(){d.focus()},20)}),e.signal(a,"select",u[0],c.firstChild),!0}var o="CodeMirror-hint",s="CodeMirror-hint-active";e.showHint=function(e,t,i){if(!t)return e.showHint(i);i&&i.async&&(t.async=!0);var n={hint:t};if(i)for(var r in i)n[r]=i[r];return e.showHint(n)},e.defineExtension("showHint",function(i){if(!(this.listSelections().length>1||this.somethingSelected())){this.state.completionActive&&this.state.completionActive.close();var n=this.state.completionActive=new t(this,i),r=n.options.hint;if(r)return e.signal(this,"startCompletion",this),r.async?void r(this,function(e){n.showHints(e)},n.options):n.showHints(r(this,n.options))}}),t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var r=t.list[n];r.hint?r.hint(this.cm,t,r):this.cm.replaceRange(i(r),r.from||t.from,r.to||t.to,"complete"),e.signal(t,"pick",r),this.close()},showHints:function(e){return e&&e.list.length&&this.active()?void(this.options.completeSingle&&1==e.list.length?this.pick(e,0):this.showWidget(e)):this.close()},showWidget:function(t){function i(){l||(l=!0,c.close(),c.cm.off("cursorActivity",s),t&&e.signal(t,"close"))}function n(){if(!l){e.signal(t,"update");var i=c.options.hint;i.async?i(c.cm,r,c.options):r(i(c.cm,c.options))}}function r(e){if(t=e,!l)return t&&t.list.length?(c.widget&&c.widget.close(),void(c.widget=new a(c,t))):i()}function o(){d&&(g(d),d=0)}function s(){o();var e=c.cm.getCursor(),t=c.cm.getLine(e.line);e.line!=h.line||t.length-e.ch!=f-h.ch||e.ch<h.ch||c.cm.somethingSelected()||e.ch&&u.test(t.charAt(e.ch-1))?c.close():(d=p(n),c.widget&&c.widget.close())}this.widget=new a(this,t),e.signal(t,"shown");var l,d=0,c=this,u=this.options.closeCharacters,h=this.cm.getCursor(),f=this.cm.getLine(h.line).length,p=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},g=window.cancelAnimationFrame||clearTimeout;this.cm.on("cursorActivity",s),this.onClose=i},buildOptions:function(e){var t=this.cm.options.hintOptions,i={};for(var n in l)i[n]=l[n];if(t)for(var n in t)void 0!==t[n]&&(i[n]=t[n]);if(e)for(var n in e)void 0!==e[n]&&(i[n]=e[n]);return i}},a.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,i){if(t>=this.data.list.length?t=i?this.data.list.length-1:0:t<0&&(t=i?0:this.data.list.length-1),this.selectedHint!=t){var n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+s,""),n=this.hints.childNodes[this.selectedHint=t],n.className+=" "+s,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],n)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",function(t,i){var n,r=t.getHelpers(t.getCursor(),"hint");if(r.length)for(var a=0;a<r.length;a++){var o=r[a](t,i);if(o&&o.list.length)return o}else if(n=t.getHelper(t.getCursor(),"hintWords")){if(n)return e.hint.fromList(t,{words:n})}else if(e.hint.anyword)return e.hint.anyword(t,i)}),e.registerHelper("hint","fromList",function(t,i){for(var n=t.getCursor(),r=t.getTokenAt(n),a=[],o=0;o<i.words.length;o++){var s=i.words[o];s.slice(0,r.string.length)==r.string&&a.push(s)}if(a.length)return{list:a,from:e.Pos(n.line,r.start),to:e.Pos(n.line,r.end)}}),e.commands.autocomplete=e.showHint;var l={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/lint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,i){function n(t){return r.parentNode?(r.style.top=Math.max(0,t.clientY-r.offsetHeight-5)+"px",void(r.style.left=t.clientX+5+"px")):e.off(document,"mousemove",n)}var r=document.createElement("div");return r.className="CodeMirror-lint-tooltip",r.appendChild(i.cloneNode(!0)),document.body.appendChild(r),e.on(document,"mousemove",n),n(t),null!=r.style.opacity&&(r.style.opacity=1),r}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function n(e){e.parentNode&&(null==e.style.opacity&&i(e),e.style.opacity=0,setTimeout(function(){i(e)},600))}function r(i,r,a){function o(){e.off(a,"mouseout",o),s&&(n(s),s=null)}var s=t(i,r),l=setInterval(function(){if(s)for(var e=a;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){o();break}}if(!s)return clearInterval(l)},400);e.on(a,"mouseout",o)}function a(e,t,i){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=i,this.onMouseOver=function(t){m(e,t)}}function o(t,i){if(i instanceof Function)return{getAnnotations:i};if(i&&i!==!0||(i={}),i.getAnnotations||(i.getAnnotations=t.getHelper(e.Pos(0,0),"lint")),!i.getAnnotations)throw new Error("Required option 'getAnnotations' missing (lint addon)");return i}function s(e){var t=e.state.lint;t.hasGutter&&e.clearGutter(v);for(var i=0;i<t.marked.length;++i)t.marked[i].clear();t.marked.length=0}function l(t,i,n,a){var o=document.createElement("div"),s=o;return o.className="CodeMirror-lint-marker-"+i,n&&(s=o.appendChild(document.createElement("div")),s.className="CodeMirror-lint-marker-multiple"),0!=a&&e.on(s,"mouseover",function(e){r(e,t,s)}),o}function d(e,t){return"error"==e?e:t}function c(e){for(var t=[],i=0;i<e.length;++i){var n=e[i],r=n.from.line;(t[r]||(t[r]=[])).push(n)}return t}function u(e){var t=e.severity;t||(t="error");var i=document.createElement("div");return i.className="CodeMirror-lint-message-"+t,i.appendChild(document.createTextNode(e.message)),i}function h(e){var t=e.state.lint,i=t.options,n=i.options||i;i.async||i.getAnnotations.async?i.getAnnotations(e.getValue(),f,n,e):f(e,i.getAnnotations(e.getValue(),n,e))}function f(e,t){s(e);for(var i=e.state.lint,n=i.options,r=c(t),a=0;a<r.length;++a){var o=r[a];if(o){for(var h=null,f=i.hasGutter&&document.createDocumentFragment(),p=0;p<o.length;++p){var g=o[p],m=g.severity;m||(m="error"),h=d(h,m),n.formatAnnotation&&(g=n.formatAnnotation(g)),i.hasGutter&&f.appendChild(u(g)),g.to&&i.marked.push(e.markText(g.from,g.to,{className:"CodeMirror-lint-mark-"+m,__annotation:g}))}i.hasGutter&&e.setGutterMarker(a,v,l(f,h,o.length>1,i.options.tooltips))}}n.onUpdateLinting&&n.onUpdateLinting(t,r,e)}function p(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){h(e)},t.options.delay||500))}function g(e,t){var i=t.target||t.srcElement;r(t,u(e),i)}function m(e,t){var i=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(i.className))for(var n=i.getBoundingClientRect(),r=(n.left+n.right)/2,a=(n.top+n.bottom)/2,o=e.findMarksAt(e.coordsChar({left:r,top:a},"client")),s=0;s<o.length;++s){var l=o[s].__annotation;if(l)return g(l,t)}}var v="CodeMirror-lint-markers";e.defineOption("lint",!1,function(t,i,n){if(n&&n!=e.Init&&(s(t),t.off("change",p),e.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver),clearTimeout(t.state.lint.timeout),delete t.state.lint),i){for(var r=t.getOption("gutters"),l=!1,d=0;d<r.length;++d)r[d]==v&&(l=!0);var c=t.state.lint=new a(t,o(t,i),l);t.on("change",p),0!=c.options.tooltips&&e.on(t.getWrapperElement(),"mouseover",c.onMouseOver),h(t)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/html-lint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var i=function(e){function t(e,t){return Array(e+1).join(t||" ")}var i={};return i.version="0.9.13",i.release="20160501",i.rules={},i.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},i.addRule=function(e){i.rules[e.id]=e},i.verify=function(t,r){(r===e||0===Object.keys(r).length)&&(r=i.defaultRuleset),t=t.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(t,i){return r===e&&(r={}),i.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(t,i,n){"false"===n?n=!1:"true"===n&&(n=!0),r[i]=n===e||n}),""});var a,o=new n,s=new i.Reporter(t,r),l=i.rules;for(var d in r)a=l[d],a!==e&&r[d]!==!1&&a.init(o,s,r[d]);return o.parse(t),s.messages},i.format=function(e,i){i=i||{};var n=[],r={white:"",grey:"",red:"",reset:""};i.colors&&(r.white="\x1b[37m",r.grey="\x1b[90m",r.red="\x1b[31m",r.reset="\x1b[39m");var a=i.indent||0;return e.forEach(function(e){var i=40,o=i+20,s=e.evidence,l=e.line,d=e.col,c=s.length,u=d>i+1?d-i:1,h=s.length>d+o?d+o:c;i+1>d&&(h+=i-d+1),s=s.replace(/\t/g," ").substring(u-1,h),u>1&&(s="..."+s,u-=3),c>h&&(s+="..."),n.push(r.white+t(a)+"L"+l+" |"+r.grey+s+r.reset);var f=d-u,p=s.substring(0,f).match(/[^\u0000-\u00ff]/g);null!==p&&(f+=p.length),n.push(r.white+t(a)+t((l+"").length+3+f)+"^ "+r.red+e.message+" ("+e.rule.id+")"+r.reset)}),n},i}();"object"==typeof exports&&exports&&(exports.HTMLHint=i),function(e){var t=function(){var e=this;e._init.apply(e,arguments)};t.prototype={_init:function(e,t){var i=this;i.html=e,i.lines=e.split(/\r?\n/);var n=e.match(/\r?\n/);i.brLen=null!==n?n[0].length:0,i.ruleset=t,i.messages=[]},error:function(e,t,i,n,r){this.report("error",e,t,i,n,r)},warn:function(e,t,i,n,r){this.report("warning",e,t,i,n,r)},info:function(e,t,i,n,r){this.report("info",e,t,i,n,r)},report:function(e,t,i,n,r,a){for(var o,s,l=this,d=l.lines,c=l.brLen,u=i-1,h=d.length;h>u&&(o=d[u],s=o.length,n>s&&h>i);u++)i++,n-=s,1!==n&&(n-=c);l.messages.push({type:e,message:t,raw:a,evidence:o,line:i,col:n,rule:{id:r.id,description:r.description,link:"https://github.com/yaniswang/HTMLHint/wiki/"+r.id}})}},e.Reporter=t}(i);var n=function(e){var t=function(){var e=this;e._init.apply(e,arguments)};return t.prototype={_init:function(){var e=this;e._listeners={},e._mapCdataTags=e.makeMap("script,style"),e._arrBlocks=[],e.lastEvent=null},makeMap:function(e){for(var t={},i=e.split(","),n=0;i.length>n;n++)t[i[n]]=!0;return t},parse:function(t){function i(t,i,n,r){var a=n-y+1;r===e&&(r={}),r.raw=i,r.pos=n,r.line=b,r.col=a,_.push(r),u.fire(t,r);for(var o;o=g.exec(i);)b++,y=n+g.lastIndex}var n,r,a,o,s,l,d,c,u=this,h=u._mapCdataTags,f=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,p=/\s*([^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,g=/\r?\n/g,m=0,v=0,y=0,b=1,_=u._arrBlocks;for(u.fire("start",{pos:0,line:1,col:1});n=f.exec(t);)if(r=n.index,r>m&&(c=t.substring(m,r),s?d.push(c):i("text",c,m)),m=f.lastIndex,!(a=n[1])||(s&&a===s&&(c=d.join(""),i("cdata",c,v,{tagName:s,attrs:l}),s=null,l=null,d=null),s))if(s)d.push(n[0]);else if(a=n[4]){o=[];for(var w,E=n[5],T=0;w=p.exec(E);){var S=w[1],C=w[2]?w[2]:w[4]?w[4]:"",x=w[3]?w[3]:w[5]?w[5]:w[6]?w[6]:"";o.push({name:S,value:x,quote:C,index:w.index,raw:w[0]}),T+=w[0].length}T===E.length?(i("tagstart",n[0],r,{tagName:a,attrs:o,close:n[6]}),h[a]&&(s=a,l=o.concat(),d=[],v=m)):i("text",n[0],r)}else(n[2]||n[3])&&i("comment",n[0],r,{content:n[2]||n[3],"long":!!n[2]});else i("tagend",n[0],r,{tagName:a});t.length>m&&(c=t.substring(m,t.length),i("text",c,m)),u.fire("end",{pos:m,line:b,col:t.length-y+1})},addListener:function(t,i){for(var n,r=this._listeners,a=t.split(/[,\s]/),o=0,s=a.length;s>o;o++)n=a[o],r[n]===e&&(r[n]=[]),r[n].push(i)},fire:function(t,i){i===e&&(i={}),i.type=t;var n=this,r=[],a=n._listeners[t],o=n._listeners.all;a!==e&&(r=r.concat(a)),o!==e&&(r=r.concat(o));var s=n.lastEvent;null!==s&&(delete s.lastEvent,i.lastEvent=s),n.lastEvent=i;for(var l=0,d=r.length;d>l;l++)r[l].call(n,i)},removeListener:function(t,i){var n=this._listeners[t];if(n!==e)for(var r=0,a=n.length;a>r;r++)if(n[r]===i){n.splice(r,1);break}},fixPos:function(e,t){var i,n=e.raw.substr(0,t),r=n.split(/\r?\n/),a=r.length-1,o=e.line;return a>0?(o+=a,i=r[a].length+1):i=e.col+t,{line:o,col:i}},getMapAttrs:function(e){for(var t,i={},n=0,r=e.length;r>n;n++)t=e[n],i[t.name]=t.value;return i}},t}();"object"==typeof exports&&exports&&(exports.HTMLParser=n),i.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(e,t){var i=this;e.addListener("tagstart",function(n){var r,a=n.tagName.toLowerCase(),o=e.getMapAttrs(n.attrs),s=n.col+a.length+1;"img"!==a||"alt"in o?("area"===a&&"href"in o||"input"===a&&"image"===o.type)&&("alt"in o&&""!==o.alt||(r="area"===a?"area[href]":"input[type=image]",t.warn("The alt attribute of "+r+" must have a value.",n.line,s,i,n.raw))):t.warn("An alt attribute must be present on <img> elements.",n.line,s,i,n.raw)})}}),i.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(e,t,i){var n=this,r=Array.isArray(i)?i:[];e.addListener("tagstart",function(e){for(var i,a=e.attrs,o=e.col+e.tagName.length+1,s=0,l=a.length;l>s;s++){i=a[s];var d=i.name;-1===r.indexOf(d)&&d!==d.toLowerCase()&&t.error("The attribute name of [ "+d+" ] must be in lowercase.",e.line,o+i.index,n,i.raw)}})}}),i.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r,a=e.attrs,o=e.col+e.tagName.length+1,s={},l=0,d=a.length;d>l;l++)n=a[l],r=n.name,s[r]===!0&&t.error("Duplicate of attribute name [ "+n.name+" ] was found.",e.line,o+n.index,i,n.raw),s[r]=!0})}}),i.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r,a=e.attrs,o=e.col+e.tagName.length+1,s=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,l=0,d=a.length;d>l;l++)if(n=a[l],r=n.value.match(s),null!==r){var c=escape(r[0]).replace(/%u/,"\\u").replace(/%/,"\\x");t.warn("The value of attribute [ "+n.name+" ] cannot contain an unsafe char [ "+c+" ].",e.line,o+n.index,i,n.raw);
}})}}),i.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r=e.attrs,a=e.col+e.tagName.length+1,o=0,s=r.length;s>o;o++)n=r[o],(""!==n.value&&'"'!==n.quote||""===n.value&&"'"===n.quote)&&t.error("The value of attribute [ "+n.name+" ] must be in double quotes.",e.line,a+n.index,i,n.raw)})}}),i.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r=e.attrs,a=e.col+e.tagName.length+1,o=0,s=r.length;s>o;o++)n=r[o],""===n.quote&&""===n.value&&t.warn("The attribute [ "+n.name+" ] must have a value.",e.line,a+n.index,i,n.raw)})}}),i.addRule({id:"csslint",description:"Scan css with csslint.",init:function(e,i,n){var r=this;e.addListener("cdata",function(e){if("style"===e.tagName.toLowerCase()){var a;if(a="object"==typeof exports&&t?t("csslint").CSSLint.verify:CSSLint.verify,void 0!==n){var o=e.line-1,s=e.col-1;try{var l=a(e.raw,n).messages;l.forEach(function(e){var t=e.line;i["warning"===e.type?"warn":"error"]("["+e.rule.id+"] "+e.message,o+t,(1===t?s:0)+e.col,r,e.evidence)})}catch(e){}}}})}}),i.addRule({id:"doctype-first",description:"Doctype must be declared first.",init:function(e,t){var i=this,n=function(r){"start"===r.type||"text"===r.type&&/^\s*$/.test(r.raw)||(("comment"!==r.type&&r["long"]===!1||/^DOCTYPE\s+/i.test(r.content)===!1)&&t.error("Doctype must be declared first.",r.line,r.col,i,r.raw),e.removeListener("all",n))};e.addListener("all",n)}}),i.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(e,t){function i(e){e["long"]===!1&&"doctype html"!==e.content.toLowerCase()&&t.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,r,e.raw)}function n(){e.removeListener("comment",i),e.removeListener("tagstart",n)}var r=this;e.addListener("all",i),e.addListener("tagstart",n)}}),i.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(e,t){function i(i){var n=e.getMapAttrs(i.attrs),s=n.type,l=i.tagName.toLowerCase();"head"===l&&(o=!0),o!==!0||"script"!==l||s&&a.test(s)!==!0||t.warn("The <script> tag cannot be used in a <head> tag.",i.line,i.col,r,i.raw)}function n(t){"head"===t.tagName.toLowerCase()&&(e.removeListener("tagstart",i),e.removeListener("tagend",n))}var r=this,a=/^(text\/javascript|application\/javascript)$/i,o=!1;e.addListener("tagstart",i),e.addListener("tagend",n)}}),i.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(e,t,i){var n=this,r="abs"===i?"absolute":"relative";e.addListener("tagstart",function(e){for(var i,a=e.attrs,o=e.col+e.tagName.length+1,s=0,l=a.length;l>s;s++)if(i=a[s],"href"===i.name){("absolute"===r&&/^\w+?:/.test(i.value)===!1||"relative"===r&&/^https?:\/\//.test(i.value)===!0)&&t.warn("The value of the href attribute [ "+i.value+" ] must be "+r+".",e.line,o+i.index,n,i.raw);break}})}}),i.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r,a=e.attrs,o=e.col+e.tagName.length+1,s=0,l=a.length;l>s;s++)n=a[s],r=n.name,/^(id|class)$/i.test(r)&&/(^|[-\_])ad([-\_]|$)/i.test(n.value)&&t.warn("The value of attribute "+r+" cannot use the ad keyword.",e.line,o+n.index,i,n.raw)})}}),i.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(e,t,i){var n,r=this,a={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};if(n="string"==typeof i?a[i]:i,n&&n.regId){var o=n.regId,s=n.message;e.addListener("tagstart",function(e){for(var i,n=e.attrs,a=e.col+e.tagName.length+1,l=0,d=n.length;d>l;l++)if(i=n[l],"id"===i.name.toLowerCase()&&o.test(i.value)===!1&&t.warn(s,e.line,a+i.index,r,i.raw),"class"===i.name.toLowerCase())for(var c,u=i.value.split(/\s+/g),h=0,f=u.length;f>h;h++)c=u[h],c&&o.test(c)===!1&&t.warn(s,e.line,a+i.index,r,c)})}}}),i.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(e,t){var i=this,n={};e.addListener("tagstart",function(e){for(var r,a,o=e.attrs,s=e.col+e.tagName.length+1,l=0,d=o.length;d>l;l++)if(r=o[l],"id"===r.name.toLowerCase()){a=r.value,a&&(void 0===n[a]?n[a]=1:n[a]++,n[a]>1&&t.error("The id value [ "+a+" ] must be unique.",e.line,s+r.index,i,r.raw));break}})}}),i.addRule({id:"inline-script-disabled",description:"Inline script cannot be use.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r,a=e.attrs,o=e.col+e.tagName.length+1,s=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,l=0,d=a.length;d>l;l++)n=a[l],r=n.name.toLowerCase(),s.test(r)===!0?t.warn("Inline script [ "+n.raw+" ] cannot be use.",e.line,o+n.index,i,n.raw):("src"===r||"href"===r)&&/^\s*javascript:/i.test(n.value)&&t.warn("Inline script [ "+n.raw+" ] cannot be use.",e.line,o+n.index,i,n.raw)})}}),i.addRule({id:"inline-style-disabled",description:"Inline style cannot be use.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r=e.attrs,a=e.col+e.tagName.length+1,o=0,s=r.length;s>o;o++)n=r[o],"style"===n.name.toLowerCase()&&t.warn("Inline style [ "+n.raw+" ] cannot be use.",e.line,a+n.index,i,n.raw)})}}),i.addRule({id:"jshint",description:"Scan script with jshint.",init:function(e,i,n){var r=this;e.addListener("cdata",function(a){if("script"===a.tagName.toLowerCase()){var o=e.getMapAttrs(a.attrs),s=o.type;if(void 0!==o.src||s&&/^(text\/javascript)$/i.test(s)===!1)return;var l;if(l="object"==typeof exports&&t?t("jshint").JSHINT:JSHINT,void 0!==n){var d=a.line-1,c=a.col-1,u=a.raw.replace(/\t/g," ");try{var h=l(u,n);h===!1&&l.errors.forEach(function(e){var t=e.line;i.warn(e.reason,d+t,(1===t?c:0)+e.character,r,e.evidence)})}catch(e){}}}})}}),i.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(e,t,i){var n=this,r="nomix",a=null;if("string"==typeof i){var o=i.match(/^([a-z]+)(\d+)?/);r=o[1],a=o[2]&&parseInt(o[2],10)}e.addListener("text",function(i){for(var o,s=i.raw,l=/(^|\r?\n)([ \t]+)/g;o=l.exec(s);){var d=e.fixPos(i,o.index+o[1].length);if(1===d.col){var c=o[2];"space"===r?a?(/^ +$/.test(c)===!1||0!==c.length%a)&&t.warn("Please use space for indentation and keep "+a+" length.",d.line,1,n,i.raw):/^ +$/.test(c)===!1&&t.warn("Please use space for indentation.",d.line,1,n,i.raw):"tab"===r&&/^\t+$/.test(c)===!1?t.warn("Please use tab for indentation.",d.line,1,n,i.raw):/ +\t|\t+ /.test(c)===!0&&t.warn("Do not mix tabs and spaces for indentation.",d.line,1,n,i.raw)}}})}}),i.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(e,t){var i=this;e.addListener("text",function(n){for(var r,a=n.raw,o=/[<>]/g;r=o.exec(a);){var s=e.fixPos(n,r.index);t.error("Special characters must be escaped : [ "+r[0]+" ].",s.line,s.col,i,n.raw)}})}}),i.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,r=e.tagName,a=e.attrs,o=e.col+r.length+1,s=0,l=a.length;l>s;s++)n=a[s],(/^(img|script|embed|bgsound|iframe)$/.test(r)===!0&&"src"===n.name||"link"===r&&"href"===n.name||"object"===r&&"data"===n.name)&&""===n.value&&t.error("The attribute [ "+n.name+" ] of the tag [ "+r+" ] must have a value.",e.line,o+n.index,i,n.raw)})}}),i.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){"style"===e.tagName.toLowerCase()&&t.warn("The <style> tag cannot be used.",e.line,e.col,i,e.raw)})}}),i.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(e,t){var i=this,n=[],r=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==r[t]||e.close||n.push({tagName:t,line:e.line,raw:e.raw})}),e.addListener("tagend",function(e){for(var r=e.tagName.toLowerCase(),a=n.length-1;a>=0&&n[a].tagName!==r;a--);if(a>=0){for(var o=[],s=n.length-1;s>a;s--)o.push("</"+n[s].tagName+">");if(o.length>0){var l=n[n.length-1];t.error("Tag must be paired, missing: [ "+o.join("")+" ], start tag match failed [ "+l.raw+" ] on line "+l.line+".",e.line,e.col,i,e.raw)}n.length=a}else t.error("Tag must be paired, no start tag: [ "+e.raw+" ]",e.line,e.col,i,e.raw)}),e.addListener("end",function(e){for(var r=[],a=n.length-1;a>=0;a--)r.push("</"+n[a].tagName+">");if(r.length>0){var o=n[n.length-1];t.error("Tag must be paired, missing: [ "+r.join("")+" ], open tag match failed [ "+o.raw+" ] on line "+o.line+".",e.line,e.col,i,"")}})}}),i.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(e,t){var i=this,n=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var r=e.tagName.toLowerCase();void 0!==n[r]&&(e.close||t.warn("The empty tag : [ "+r+" ] must be self closed.",e.line,e.col,i,e.raw))})}}),i.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(e,t){var i=this;e.addListener("tagstart,tagend",function(e){var n=e.tagName;n!==n.toLowerCase()&&t.error("The html element name of [ "+n+" ] must be in lowercase.",e.line,e.col,i,e.raw)})}}),i.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(e,t){function i(e){var t=e.tagName.toLowerCase();"head"===t?a=!0:"title"===t&&a&&(o=!0)}function n(a){var s=a.tagName.toLowerCase();if(o&&"title"===s){var l=a.lastEvent;("text"!==l.type||"text"===l.type&&/^\s*$/.test(l.raw)===!0)&&t.error("<title></title> must not be empty.",a.line,a.col,r,a.raw)}else"head"===s&&(o===!1&&t.error("<title> must be present in <head> tag.",a.line,a.col,r,a.raw),e.removeListener("tagstart",i),e.removeListener("tagend",n))}var r=this,a=!1,o=!1;e.addListener("tagstart",i),e.addListener("tagend",n)}});var r={"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0};e.registerHelper("lint","html",function(t){for(var n=[],a=i.verify(t,r),o=0;o<a.length;o++){var s=a[o],l=s.line-1,d=s.line-1,c=s.col-1,u=s.col;n.push({from:e.Pos(l,c),to:e.Pos(d,u),message:s.message,severity:s.type})}return n})}),i("modules/codeMirror",["jquery","codemirror","codemirror/mode/htmlmixed/htmlmixed","codemirror/addon/edit/closetag","codemirror/addon/edit/matchtags","codemirror/addon/hint/html-hint","codemirror/addon/hint/show-hint","codemirror/addon/hint/lint","codemirror/addon/hint/html-lint"],function(e,t){"use strict";function i(){}return window.CodeMirror=t,i.prototype={initialize:function(){this.opts.codeMirror=jQuery.extend({autoCloseTags:!1,extraKeys:{"Ctrl-J":"toMatchingTag","Ctrl-Space":"autocomplete"},gutters:["CodeMirror-lint-markers"],matchTags:{bothTags:!0},mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,lint:t.lint.html},this.opts.codeMirror),this.$toolbar.find("a.re-html,a.re-fullscreen").addClass("redactor-codemirror-button"),this.codeMirror.showCode_super=this.code.showCode,this.code.showCode=this.codeMirror.showCode,this.codeMirror.showVisual_super=this.code.showVisual,this.code.showVisual=this.codeMirror.showVisual,this.button.addCallback(this.button.addAfter("html","htmltidy","Beautify"),this.codeMirror.htmlTidy),this.button.addCallback(this.button.addAfter("html","code-undo","Undo"),e.proxy(function(){this.codeMirror.instance.undo()},this)),this.button.addCallback(this.button.addAfter("code-undo","code-redo","Redo"),e.proxy(function(){this.codeMirror.instance.redo()},this));var i=this.button.add("diff","Diff");this.$toolbar.find("a.re-diff").addClass("re-has-dropdown"),i.click(this.codeMirror.toggleDiff),this.$toolbar.find("a.re-htmltidy, a.re-code-undo, a.re-code-redo, a.re-diff").addClass("redactor-button-hidden redactor-codemirror-button")},destroy:function(){this.code.get=this.codeMirror.get_super,this.code.showCode=this.codeMirror.showCode_super,this.code.showVisual=this.codeMirror.showVisual_super},htmlTidy:function(){this.codeMirror.instance.setValue(this.tabifier.get(this.codeMirror.instance.getValue()))},toggleDiff:function(t){t.preventDefault(),e(".redactor-dropdown-box-diff").remove(),this.dropdown.hideAll(),this.button.addDropdown(e(t.currentTarget),this.codeMirror.getDiffDropdown()),this.dropdown.show(t,"diff"),window.diff_match_patch||(e(document.head).append('<link rel="stylesheet" rel="nofollow" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.7.0/addon/merge/merge.min.css" type="text/css" />'),e.getScript("//cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js").done(function(){e.getScript("//cdnjs.cloudflare.com/ajax/libs/codemirror/4.7.0/addon/merge/merge.js")}).fail(function(){window.alert("Sorry, an error occurred trying to load the difference engine.")}))},validate:function(){return this.codeMirror.instance?this.codeMirror.instance.state.lint.marked:[]},getDiffDropdown:function(){var t={},i=this;t[0]={title:"Initial State",func:this.codeMirror.showDiff},t[this.opts.buffer.length-1]={title:"Last Change",func:this.codeMirror.showDiff},this.codeMirror.compareOptions={};var n=this.$element.data("compareoptions");return n&&e.each(n,function(e,n){n.url?i.codeMirror.compareOptions[n.name]={bURL:!0,url:n.url}:i.codeMirror.compareOptions[n.name]=n.source,t[n.name]={title:n.title,func:i.codeMirror.showDiff}}),t},showDiff:function(i){var n=this,r=e.Deferred();if(this.codeMirror.diffInstance){if(!window.confirm("Any unsaved changes will be lost are you sure?"))return!1;this.codeMirror.hideDiff()}this.$box.append('<div id="redactor-code-diff"></div>');var a=e("#redactor-code-diff");this.$toolbar.append('<li class="redactor-diff-control"><a class="redactor-diff-save">Save</a></li><li class="redactor-diff-control"><a class="redactor-diff-cancel">Cancel</a></li>'),e(".redactor-diff-save").on("click",function(){n.codeMirror.saveDiff(),n.codeMirror.hideDiff()}),e(".redactor-diff-cancel").on("click",function(){n.codeMirror.hideDiff()}),this.$toolbar.find(".redactor-codemirror-button").not(".re-diff").addClass("redactor-button-disabled"),i=this.codeMirror.compareOptions[i]||this.codeMirror.cleanBuffer(this.opts.buffer[i])||i,i.bURL?e.get(i.url).done(function(e){i=e,r.resolve()}):r.resolve(),r.done(function(){a.css("top",n.$toolbar.height()+"px"),n.codeMirror.diffInstance=t.MergeView(a[0],{lineNumbers:!0,mode:"text/html",highlightDifferences:!0,value:n.codeMirror.instance.getValue(),orig:i,lineWrapping:!0}),n.$box.bind("resize.codeMirror",function(){var e=n.$box.height()-n.$toolbar.height();n.codeMirror.diffInstance.leftOriginal()&&n.codeMirror.diffInstance.leftOriginal().setSize(null,e),n.codeMirror.diffInstance.editor().setSize(null,e),n.codeMirror.diffInstance.rightOriginal()&&n.codeMirror.diffInstance.rightOriginal().setSize(null,e),n.codeMirror.diffInstance.wrap.style.height=e+"px"}).trigger("resize.codeMirror")})},saveDiff:function(){this.codeMirror.instance.setValue(this.codeMirror.diffInstance.editor().getValue())},hideDiff:function(){this.$box.find("#redactor-code-diff").remove(),this.$toolbar.find(".redactor-diff-control").remove(),this.$toolbar.find(".redactor-codemirror-button").not(".re-diff").removeClass("redactor-button-disabled"),this.codeMirror.diffInstance=null},getSandboxedHTML:function(){var e=document.createElement("div");return e.innerHTML=this.codeMirror.instance.getValue(),e.innerHTML},showVisual:function(){var e=this.codeMirror.getSandboxedHTML(),t=this.codeMirror.validate();t.length&&!confirm("HTML errors exist that can cause unexpected results. Are you sure you want to continue?")||(this.codeMirror.instance.toTextArea(),this.$textarea.val(e),this.$box.unbind("resize.codeMirror"),this.codeMirror.buttonActiveVisual(),this.codeMirror.showVisual_super.apply(this,arguments))},showCode:function(){var e=this;e.codeMirror.showCode_super.apply(e,arguments),e.codeMirror.buttonInactiveVisual(),e.codeMirror.instance=t.fromTextArea(e.$textarea[0],e.opts.codeMirror);for(var i=0;i<e.opts.buffer.length;i++)e.opts.buffer[i].length&&e.codeMirror.instance.setValue(e.codeMirror.cleanBuffer(e.opts.buffer[i]));e.codeMirror.instance.setValue(e.$textarea.val()),e.$box.bind("resize.codeMirror",function(){e.codeMirror.instance.getWrapperElement().style.height=e.$box.height()-e.$toolbar.height()+"px",e.codeMirror.instance.refresh()}),e.$box.trigger("resize.codeMirror"),e.codeMirror.instance.on("change",function(){e.$textarea.val(e.codeMirror.getSandboxedHTML())})},cleanBuffer:function(e){return!!e&&(e=this.clean.onSync(e),e=e.replace(/<span(.*?)class="redactor-selection-marker"([^>])*>(.*?)<\/span>/gi,""))},buttonActiveVisual:function(){this.$toolbar.find("a.redactor-codemirror-button:not(.re-html,.re-fullscreen)").addClass("redactor-button-hidden"),this.codeMirror.$previousButtons.removeClass("redactor-button-hidden")},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor-codemirror-button").removeClass("redactor-button-hidden redactor-button-disabled"),this.codeMirror.$previousButtons=this.$toolbar.find("a:not(.redactor-codemirror-button, .redactor-button-hidden)").addClass("redactor-button-hidden")}},i}),i("modules/core",["jquery"],function(e){"use strict";function t(){}return t.prototype={getObject:function(){return e.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return!!this.$toolbar&&this.$toolbar},addEvent:function(e){this.core.event=e},getEvent:function(){return this.core.event},setCallback:function(t,i,n){var r=this.opts[t+"Callback"];return this.$element.trigger(t+".redactor-api",i,n),e.isFunction(r)?"undefined"==typeof n?r.call(this,i):r.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.core.setCallback("destroy"),this.$element.off(".redactor").off(".redactor-api").removeData("redactor"),e(document).off(".redactor").off(".redactor-image-resize-hide").off(".redactor-image-delete").off(".redactor-media-resize-hide"),this.$editor.off(".redactor").off(".redactor-image-resize-hide").off(".redactor-image-delete").off(".redactor-media-resize-hide"),e(document).off("click.redactor-image-delete."+this.uuid),e(document).off("click.redactor-image-resize-hide."+this.uuid),e(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),e("body").off("scroll.redactor."+this.uuid),e(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var t=this.code.get();this.$toolbar.find("a").each(function(){var t=e(this);t.data("dropdown")&&(t.data("dropdown").remove(),t.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(t).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(t).show(),this.$sourceTextarea.val(t).appendTo(this.$element)),this.$pasteBox&&this.$pasteBox.remove(),this.modal.close(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),this.dropdown.hideAll(),e(".redactor-dropdown").remove(),e(".redactor-toolbar-tooltip").remove()}},t}),i("modules/dropdown",["jquery"],function(e){"use strict";function t(){}return t.prototype={build:function(t,i,n){"formatting"===t&&this.opts.formattingAdd&&e.each(this.opts.formattingAdd,e.proxy(function(e,t){var i,r=t.tag;"undefined"!=typeof t["class"]&&(r=r+"-"+t["class"]),t.type=this.utils.isBlockTag(t.tag)?"block":"inline",i="undefined"!=typeof t.func?t.func:"inline"===t.type?"inline.formatting":"block.formatting",this.opts.linebreaks&&"block"===t.type&&"p"===t.tag||(this.formatting[r]={tag:t.tag,style:t.style,"class":t["class"],attr:t.attr,data:t.data,clear:t.clear},n[r]={func:i,title:t.title})},this)),e.each(n,e.proxy(function(n,r){var a=e('<a href="#" class="redactor-dropdown-'+n+'">'+r.title+"</a>");"formatting"===t&&a.addClass("redactor-formatting-"+n),a.on("click",e.proxy(function(e){e.preventDefault();var t="func",i=r.func;r.command?(t="command",i=r.command):r.dropdown&&(t="dropdown",i=r.dropdown),this.button.onClick(e,n,t,i),this.dropdown.hideAll()},this)),i.append(a)},this))},show:function(t,i){function n(){var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),i=e("<div>").css({width:"100%"}).appendTo(t).outerWidth();return t.remove(),100-i}var r,a=this.button.get(i),o=a.data("dropdown").appendTo(document.body);if(this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),a.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.core.setCallback("dropdownShow",{dropdown:o,key:i,button:a}),this.button.setActive(i),a.addClass("dropact");var s=a.offset(),l=o.width();s.left+l>e(document).width()&&(s.left=Math.max(0,s.left-l));var d=s.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){r=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset;var c="fixed";this.opts.toolbarFixedTarget!==document&&(r=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,c="absolute"),o.css({position:c,left:d,top:r+"px"}).show()}else r=a.innerHeight()+s.top+"px",o.css({position:"absolute",left:d,top:r}).show();this.core.setCallback("dropdownShown",{dropdown:o,key:i,button:a})}e(document).one("click.redactor",e.proxy(this.dropdown.hide,this)),this.$editor.one("click",e.proxy(this.dropdown.hide,this));var u=e(document.body),h=n();o.on("mouseover",function(){u.addClass("body-redactor-hidden"),u.css("margin-right",h+"px")}),o.on("mouseout",function(){u.removeClass("body-redactor-hidden").css("margin-right",0)}),t.stopPropagation()},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),e(document.body).removeClass("body-redactor-hidden").css("margin-right",0),e(".redactor-dropdown-"+this.uuid).hide(),this.core.setCallback("dropdownHide")},hide:function(t){var i=e(t.target);i.hasClass("dropact")||(i.removeClass("dropact"),this.dropdown.hideAll())}},t}),i("modules/embed",["jquery"],function(e){"use strict";function t(){}return t.prototype={reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,getTemplate:function(){return String()+'<section id="redactor-modal-embed-insert"><label>'+this.lang.get("embed_html_code")+'</label><textarea id="redactor-insert-embed-area" style="height: 160px; width: 100%"></textarea></section>'},show:function(){this.modal.addTemplate("embed",this.embed.getTemplate()),this.modal.load("embed",this.lang.get("embed"),700),this.modal.createCancelButton();var t=this.modal.createActionButton(this.lang.get("insert"));t.on("click",this.embed.insert),this.selection.save(),this.modal.show(),e("#redactor-insert-embed-area")[0].focus()},insert:function(){var t=e("#redactor-insert-embed-area").val();if(!t.match(/<iframe|<video|<object|<embed/gi)){t=this.clean.stripTags(t);var i='<iframe style="width: 500px; height: 281px;" src="',n='" frameborder="0" allowfullscreen></iframe>';t.match(this.embed.reUrlYoutube)?t=t.replace(this.embed.reUrlYoutube,i+"//www.youtube.com/embed/$1"+n):t.match(this.embed.reUrlVimeo)&&(t=t.replace(this.embed.reUrlVimeo,i+"//player.vimeo.com/video/$2"+n))}this.selection.restore(),this.modal.close();var r=this.selection.getBlock()||this.selection.getCurrent();r?e(r).after(t):this.insert.html(t),this.code.sync()}},t}),i("modules/file",["jquery"],function(e){"use strict";function t(){}return t.prototype={show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var t=this.sel.toString();e("#redactor-filename").val(t),this.modal.show()},insert:function(t,i,n){if("undefined"!=typeof t.error)return this.modal.close(),this.selection.restore(),this.core.setCallback("fileUploadError",t),void 0;var r;if("string"==typeof t)r=t;else{var a=e("#redactor-filename").val();"undefined"!=typeof a&&""!==a||(a=t.filename),r='<a href="'+t.filelink+'" id="filelink-marker">'+a+"</a>"}if(i){this.selection.removeMarkers();var o=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,o)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(r),"string"!=typeof t){var s=e(this.$editor.find("a#filelink-marker"));0!==s.length?s.removeAttr("id").removeAttr("style"):s=!1,this.core.setCallback("fileUpload",s,t)}}},t}),i("modules/focus",["jquery"],function(e){"use strict";function t(){}return t.prototype={setStart:function(){this.$editor[0].focus();var e=this.$editor.children().first();if(0!==e.length&&0!==e[0].length&&"BR"!==e[0].tagName&&3!==e[0].nodeType){if("UL"===e[0].tagName||"OL"===e[0].tagName){var t=e.find("li").first();if(!this.utils.isBlock(t)&&""===t.text())return void this.caret.setStart(t)}return this.opts.linebreaks&&!this.utils.isBlockTag(e[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),this.selection.addRange(),void 0):void this.caret.setStart(e)}},setEnd:function(){if(this.utils.browser("mozilla")||this.utils.browser("msie")){var e=this.$editor.children().last();this.$editor[0].focus(),this.caret.setEnd(e)}else{this.selection.get();try{this.range.selectNodeContents(this.$editor[0]),this.range.collapse(!1),this.selection.addRange()}catch(e){}}},isFocused:function(){var t=document.getSelection().focusNode;return null!==t&&(!(!this.opts.linebreaks||!e(t.parentNode).hasClass("redactor-linebreaks"))||!!this.utils.isRedactorParent(t.parentNode)&&this.$editor.is(":focus"))}},t}),i("modules/fontcolor",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){for(var e=["fontcolor","backcolor"],t=0;t<2;t++){var i=e[t],n=this.button.get(i);if(n.length){var r=this.button.addDropdown(n);r.width(242),this.fs.buildPicker(r,i,this.fs.colors,this.fontcolor.set,this.fontcolor.remove)}}},set:function(t,i){this.fs.setInlineStyle(function(n){e(n).css(t,i)})},remove:function(t){e.each(this.selection.getNodes(),function(i,n){e(n).css(t,"")}),this.code.sync()}},t}),i("modules/fontfamily",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){var t=["Arial","Arial Narrow","Arial Black","Helvetica","Georgia","Lucida","Monospace","Palatino","Tahoma","Times New Roman","Trebuchet","Verdana"],i=this,n={};e.each(t,function(e,t){n["s"+e]={title:t,func:function(){i.fontfamily.set(t)}}}),n.remove={title:"Remove Font Family",func:i.fontfamily.reset};var r=this.button.get("fontfamily");this.button.addDropdown(r,n)},set:function(e){this.inline.format("span","style","font-family:"+e+";")},reset:function(){this.inline.removeStyleRule("font-family")}},t}),i("modules/fontsize",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){var t=[10,11,12,14,16,18,20,24,28,30],i=this,n={};e.each(t,function(e,t){n["s"+e]={title:t+"px",func:function(){i.fontsize.set(t)}}}),n.remove={title:"Remove Font Size",func:i.fontsize.reset};var r=this.button.get("fontsize");r.length&&this.button.addDropdown(r,n)},set:function(e){this.inline.format("span","style","font-size: "+e+"px;")},reset:function(){this.inline.removeStyleRule("font-size")}},t}),i("modules/fs",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(){this.opts.codeOnly&&this.button.remove("html"),this.buffer.clearRebuffer(),this.buffer.clearBuffer()},hidePluginButtons:function(){0!==this.opts.buttonsHide.length&&e.each(this.opts.buttonsHide,e.proxy(function(e,t){this.button.remove(t)},this))},setInlineStyle:function(t){if(this.utils.browser("mozilla")&&this.focus.isFocused()&&this.$editor[0].focus(),this.buffer.set(),this.selection.get(),e("#redactor-overlay-box:not(.redactor-overlay-type-table)",this.$editor).length)return t(this.fs.$editTarget),void this.code.sync();var i=this.sel.getRangeAt(0);if(this.sel.isCollapsed){var n=i.commonAncestorContainer;n.nodeType===Node.TEXT_NODE&&(n=n.parentElement),this.range.selectNodeContents(n),this.selection.addRange()}var r=[];if(i.startContainer===i.endContainer){var a=document.createElement("span");i.surroundContents(a),r=e(a)}else{this.fs.setImageFloatFix(),document.execCommand("createLink",!1,"redactor-temporary"),this.fs.unsetImageFloatFix();var o=this.$editor.find('a[href="redactor-temporary"]');o.each(function(){var t=e(this),i=t.text().replace("redactor-temporary"," ");if(i!==t.parent().text()||t.parent().hasClass("redactor-editor"))if(i===t.children(":first").text())r.push(t.children(":first")[0]),t.replaceWith(this.childNodes);else{var n=e("<span/>").append(i);t.replaceWith(n),r.push(n[0])}else r.push(t.parent()[0]),t.replaceWith(this.childNodes)})}t(r),this.caret.set(r[0],0,r[r.length-1],1),this.code.sync()},sync:function(){var e=this.$textarea.val();e=e.replace(/<span([^>]*)id="redactor-overlay-box"([^>]*)>(.*?)<\/span>/gi,""),this.$textarea.val(e)},buildPicker:function(t,i,n,r,a){for(var o="backcolor"===i?"background-color":"color",s=n.length,l=function(t){t.preventDefault(),t.stopPropagation(),r(e(this).data("rule"),e(this).attr("rel"))},d=0;d<s;d++){var c=n[d],u=e('<a rel="'+c+'" data-rule="'+o+'" href="#" style="float: left; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 22px; height: 22px;"></a>');u.css("background-color",c),u.on("click",l),t.append(u)}var h=e('<a href="#" style="display: block; clear: both; padding: 5px; font-size: 12px; line-height: 1;"></a>').html(this.lang.get("none"));h.on("click",function(e){e.preventDefault(),e.stopPropagation(),a(o)}),t.append(h)},cleanID:function(e){return e.replace(/[\s"']/g,"")},colors:["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],dropdownShow:function(t,i){if("formatting"===i.key){var n=e(".redactor-dropdown");n.find(".highlight").removeClass("highlight"),this.selection.getBlock()&&n.find(".redactor-dropdown-"+this.selection.getBlock().tagName.toLowerCase()).addClass("highlight")}this.$element.trigger("dropdownShow.redactor")},modalIframeBrowseInit:function(){this.$redactorModalBrowser=e("#redactor-modal-iframe-browser"),this.$redactorModalBrowser.length||(this.$modalBox.append('<div id="redactor-modal-iframe-browser"><iframe frameborder="0" height="100%" width="100%" /><footer><div style="width:100%;"><button type="button" class="redactor-button-modal-close">Cancel</button></div></footer></div>'),this.$redactorModalBrowser=e("#redactor-modal-iframe-browser",this.$modalBox)),e("#redactor-modal",this.$modal).css("left",0),this.$redactorModalBrowser.hide().css("left",this.$modal.outerWidth())},modalIframeBrowse:function(t,i,n){var r=e.proxy(function(){window.removeEventListener("message",a,!1),this.$redactorModalBrowser.off("click"),this.$editor.off("redactor.modalClose.iframeBrowser"),this.$redactorModalBrowser.css({opacity:0,"z-index":this.$modal.css("z-index")-1}),this.$modal.css("opacity",1);var e=this;setTimeout(function(){e.$redactorModalBrowser.find("iframe").removeAttr("src")},500)},this),a=e.proxy(function(e){var t=e.data;if("string"==typeof e.data)try{
t=JSON.parse(e.data)}catch(e){return}(t.path&&t.name||t.id)&&(i.call(this,t),r())},this);n=n||this.$modal.outerWidth(),window.addEventListener("message",a,!1),this.$redactorModalBrowser.on("click",".redactor-button-modal-close",e.proxy(r,this)),this.$editor.on("redactor.modalClose.iframeBrowser",e.proxy(r,this)),this.$redactorModalBrowser.find("iframe").attr("src",t),this.$modal.css("opacity",0),this.$redactorModalBrowser.show().css({width:n,height:this.$modal.outerHeight(),left:parseInt(e(window).width()/2)-parseInt(n/2),opacity:1,top:this.$modal.css("marginTop"),"z-index":this.$modal.css("z-index")+1})},loadEditableControls:function(t){var i=this,n=t.element,r=e.extend({top:0,left:0},t.offset);this.fs.hideEditableControls(!1),t.bCancelSelection||(this.selection.get(),this.range.selectNode(n[0]),this.selection.addRange()),this.fs.$editBox=e('<span id="redactor-overlay-box" data-verified="redactor">'),this.fs.$editBox.attr("contenteditable","false"),this.fs.$editBox.attr("unselectable","on"),this.fs.$editControls=e("<ul></ul>"),this.fs.$editTarget=n,this.fs.$editTarget.data("offset",r),this.fs.$editBox.addClass("redactor-overlay-type-"+n[0].tagName.toLowerCase()),this.fs.editBoxOnHide=t.onHide,this.$editor.append(this.fs.$editBox),this.fs.$editBox.append(this.fs.$editControls),this.$editor.on("click.redactor.hideEditableControls",this.fs.hideEditableControls),e(document).on("click.redactor.hideEditableControls",this.fs.hideEditableControls),e(this.opts.toolbarFixedTarget).on("scroll.redactor.scrollEditableControls",this.fs.scrollEditableControls),e(document).on("mouseup.redactor.checkOverlay keyup.redactor.checkOverlay",this.fs.checkOverlay),this.$element.on("sync.redactor-api change.redactor-api",this.fs.checkOverlay),this.fs.positionControls(),e.each(t.buttons,function(e,t){i.fs.addEditableButton(t)})},positionControls:function(){var e=this.fs.$editTarget.data("offset");this.fs.$editBox.css({top:this.fs.$editTarget.position().top+parseInt(this.fs.$editTarget.css("marginTop"))+this.$editor[0].scrollTop+e.top,left:this.fs.$editTarget.position().left+parseInt(this.fs.$editTarget.css("marginLeft"))+e.left,width:this.fs.$editTarget.outerWidth(),height:this.fs.$editTarget.outerHeight()}),this.fs.$editControls.data("original-offset")||this.fs.$editControls.data("original-offset",this.fs.$editControls.offset()),this.fs.scrollEditableControls()},hideEditableControls:function(t){return(!t||t.target!==this.fs.$editTarget[0])&&((!t||!e(t.target).closest(".redactor-dropdown").length)&&(!(this.fs.editBoxOnHide&&!this.fs.editBoxOnHide(t))&&(this.$editor.off(".hideEditableControls"),e(document).off(".checkOverlay"),e(document).off(".hideEditableControls"),e(this.opts.toolbarFixedTarget).off(".scrollEditableControls"),this.fs.editBoxOnHide=!1,e("#redactor-overlay-box").remove(),void 0)))},checkOverlay:function(){return this.fs.$editTarget.parent().length?(this.observe.images(),void this.fs.positionControls()):void this.fs.hideEditableControls()},scrollEditableControls:function(){var e=this.$toolbar.offset().top+this.$toolbar.height(),t=e-this.fs.$editControls.data("original-offset").top;t>0&&t<this.fs.$editBox.height()?this.fs.$editControls.css({top:t}):this.fs.$editControls.css({top:""})},addEditableButton:function(t){var i=this,n=e('<li><button type="button" class="re-icon '+t["class"]+'" title="'+t.title+'"/></li>');n.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.onClick(),i.fs.$editTarget.parent().length||i.fs.hideEditableControls(!1)}),this.fs.$editControls.append(n)},rgb2hex:function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return e?(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+t(e[1])+t(e[2])+t(e[3])):""},setAttr:function(t,i,n){e.trim(n).length?t.attr(i,n):t.removeAttr(i)},setImageFloatFix:function(){e.each(this.selection.getNodes(),function(t,i){if("IMG"===i.tagName){var n=e(i);"none"!==n.css("float")&&(n.attr("data-redactor-save-float",n.css("float")),n.css("float","none"))}})},unsetImageFloatFix:function(){e.each(this.selection.getNodes(),function(t,i){if("IMG"===i.tagName){var n=e(i);!n.attr("data-redactor-save-float")||(n.css("float",n.attr("data-redactor-save-float")),n.removeAttr("data-redactor-save-float"))}})},snapSelectionToWord:function(){var e;if(window.getSelection&&(e=window.getSelection()).modify){if(e=window.getSelection(),!e.isCollapsed){var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var i=t.collapsed;t.detach();var n=e.focusNode,r=e.focusOffset;e.collapse(e.anchorNode,e.anchorOffset),i?(e.modify("move","forward","word"),e.extend(n,r),e.modify("extend","backward","word")):(e.modify("move","backward","word"),e.extend(n,r),e.modify("extend","forward","word"))}}else if((e=document.selection)&&"Control"!==e.type){var a=e.createRange();if(a.text){for(a.expand("word");/\s$/.test(a.text);)a.moveEnd("character",-1);a.select()}}}},t}),i("modules/fullscreen",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){this.fullscreen.isOpen=!1;var e=this.button.get("fullscreen");e.parent().css("float","right"),this.opts.fullscreen&&this.fullscreen.toggle()},enable:function(){var t=this;this.button.changeIcon("fullscreen","normalscreen"),this.button.setActive("fullscreen"),this.fullscreen.isOpen=!0,this.opts.toolbarExternal&&(this.fullscreen.toolcss={},this.fullscreen.boxcss={},this.fullscreen.toolcss.width=this.$toolbar.css("width"),this.fullscreen.toolcss.top=this.$toolbar.css("top"),this.fullscreen.toolcss.position=this.$toolbar.css("position"),this.fullscreen.boxcss.top=this.$box.css("top")),this.fullscreen.height=this.$editor.height(),this.opts.maxHeight&&this.$editor.css("max-height",""),this.opts.minHeight&&this.$editor.css("min-height",""),this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=e("<div/>")),this.$fullscreenPlaceholder.insertAfter(this.$box),"transparent"===this.$box.css("backgroundColor")&&e.each(this.$box.parents(),function(){var i=e(this).css("backgroundColor");if("transparent"!==i&&"inherit"!==i)return t.$box.css("backgroundColor",i),!1}),this.$box.appendTo(document.body),this.$box.addClass("redactor-box-fullscreen"),e("body, html").css("overflow","hidden"),this.fullscreen.resize(),e(window).on("resize.redactor.fullscreen",e.proxy(this.fullscreen.resize,this)),e(document).scrollTop(0,0),this.$editor[0].focus(),this.observe.load()},disable:function(){this.button.removeIcon("fullscreen","normalscreen"),this.button.setInactive("fullscreen"),this.fullscreen.isOpen=!1,e(window).off("resize.redactor.fullscreen"),e("body, html").css("overflow",""),this.$box.css("backgroundColor",""),this.$box.insertBefore(this.$fullscreenPlaceholder),this.$fullscreenPlaceholder.remove(),this.$box.removeClass("redactor-box-fullscreen").css({width:"auto",height:"auto"}),this.code.sync(),this.opts.toolbarExternal&&(this.$box.css("top",this.fullscreen.boxcss.top),this.$toolbar.css({width:this.fullscreen.toolcss.width,top:this.fullscreen.toolcss.top,position:this.fullscreen.toolcss.position})),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight),this.$editor.css("height","auto"),this.$editor[0].focus(),this.observe.load()},toggle:function(){this.fullscreen.isOpen?this.fullscreen.disable():this.fullscreen.enable(),this.$box.trigger("resize")},resize:function(){if(this.fullscreen.isOpen){var t=this.$toolbar.height(),i=window.innerHeight-t;this.$box.width(e(window).width()-2).height(i+t),this.opts.toolbarExternal&&(this.$toolbar.css({top:"0px",position:"absolute",width:"100%"}),this.$box.css("top",t+"px")),this.$editor.height(i-14)}}},t}),i("modules/image",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){this.opts.image=e.extend({onFileBrowseReturn:function(e){return e}},this.opts.image),this.$element.on("observed.redactor.img",this.image.setEditable),this.opts.modal_image_edit='<section>\t\t\t\t<div class="redactor-image-modalleftcol">\t\t\t\t\t<div class="redactor-image-preview">\t\t\t\t\t\t<img src="" style="max-width:100%; max-height:40%"/>\t\t\t\t\t</div>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Size (px)</legend>\t\t\t\t\t\t<label><input id="redactor-image-width" type="text" class="smallinput" /> Width</label>\t\t\t\t\t\t<label><input id="redactor-image-height" type="text" class="smallinput" /> Height</label>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label><input id="redactor-image-border" type="number" min="0" class="smallinput" /> Border</label>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Margin</legend>\t\t\t\t\t\t<input id="redactor-image-marginTop" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginTop-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tTop\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-image-marginRight" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginRight-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tRight\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-image-marginBottom" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginBottom-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tBottom\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-image-marginLeft" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginLeft-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tLeft\t\t\t\t\t\t</label>\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div class="redactor-image-modalrightcol">\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-image-url">File/URL</label>\t\t\t\t\t\t<input id="redactor-image-url" type="text" name="redactor-image-url" />\t\t\t\t\t\t<button type="button" class="redactor-modal-btn" id="redactor-image-browse">Browse</button>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor_image-align">Alignment</label>\t\t\t\t\t\t<ul id="redactor-image-align">\t\t\t\t\t\t\t<li><input id="redactor-image-align-none" name="redactor-image-align" type="radio" value="none"><label for="redactor-image-align-none">None</label></li>\t\t\t\t\t\t\t<li><input id="redactor-image-align-left" name="redactor-image-align" type="radio" value="left"><label for="redactor-image-align-left">Left</label></li>\t\t\t\t\t\t\t<li><input id="redactor-image-align-right" name="redactor-image-align" type="radio" value="right"><label for="redactor-image-align-right">Right</label></li>\t\t\t\t\t\t</ul>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-image-alt">Alt text</label><input type="text" id="redactor-image-alt" />\t\t\t\t\t\t<label for="redactor-image-title">Title text</label><input type="text" id="redactor-image-title" />\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-image-class">Class</label>\t\t\t\t\t\t<input type="text" placeholder="Choose Style..." id="redactor-image-class">\t\t\t\t\t\t<label for="redactor-image-id">ID</label><input type="text" id="redactor-image-id" />\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div style="clear:both"></div>\t\t\t\t</section>'},setEditable:function(t,i){var n=this,r=e(i),a=[];if(a.push({name:"Settings","class":"re-cog",title:"Edit Image Properties",onClick:function(){return n.image.show(r),!1}}),window.Aviary){var o=e.extend(n.opts.aviary,{onSave:function(e,t){r.get(0).src=t}});n.featherEditor=n.featherEditor||new Aviary.Feather(o)}(!!this.opts.aviaryPopupURL||!!window.Aviary)&&a.push({name:"Edit","class":"re-pencil",title:"Edit",onClick:function(){if(n.opts.aviaryPopupURL){var e=n.opts.aviaryPopupURL.replace("{file}",r.attr("src")),t=r[0].naturalWidth;window.open(e,"_blank","width=960, height=700, scrollbars=1"),"undefined"==typeof window.FS&&(window.FS={}),"undefined"==typeof window.FS.editor&&(window.FS.editor={}),"undefined"==typeof window.FS.editor.fileEditingComplete&&(window.FS.editor.fileEditingComplete=function(e){r.one("load",function(){r[0].naturalWidth!==t&&r.attr("width",r[0].naturalWidth)}),r.attr("src",e.url.replace(/ /g,"%20"))})}else n.featherEditor.launch({image:r.get(0)});return!1}}),a.push({name:"Delete",title:"Delete","class":"re-trash",onClick:function(){return!!window.confirm("Are you sure you want to delete this image?")&&(r.remove(),void n.code.sync())}}),r.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(e){e.stopPropagation(),n.fs.loadEditableControls({element:r,buttons:a})})},show:function(t){this.modal.addTemplate("image",this.opts.modal_image_edit),this.modal.load("image",this.opts.curLang.image+" Settings",600),this.modal.createCancelButton();var i=this.modal.createDeleteButton("Delete"),n=this.modal.createActionButton("Save");e("#redactor-overlay-box.redactor-overlay-type-img").length&&(t=this.fs.$editTarget),"string"==typeof t&&(this.selection.save(),t=e('<img data-new="true"/>')),t.data("save-src",t.attr("src")),t.removeAttr("height");var r=this,a=e(".redactor-image-preview > img",this.$modal),o=t[0].style,s=t[0].naturalWidth/t[0].naturalHeight,l=/\d+/,d=/\D+$/;if(this.opts.browseFileURL.length?e("#redactor-image-browse",this.$modal).on("click",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,e.proxy(function(t){t=this.opts.image.onFileBrowseReturn(t),e("#redactor-image-url",this.$modal).val(t.path).change()},this)),!1},this)):e("#redactor-image-browse",this.$modal).hide(),e("input[type=number],#redactor-image-width,#redactor-image-height",r.$modal).on("keydown",function(e){(e.keyCode>57||e.keyCode<48)&&8!==e.keyCode&&9!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&46!==e.keyCode&&13!==e.keyCode&&e.preventDefault()}),e("#redactor-image-width",this.$modal).val(t.width()).on("change keyup",function(){e("#redactor-image-height",this.$modal).val(parseInt(this.value/s))}),e("#redactor-image-height",this.$modal).val(t.height()).on("change keyup",function(){e("#redactor-image-width",this.$modal).val(parseInt(this.value*s))}),e("#redactor-image-border",this.$modal).val(o.borderWidth.match(l)).on("change",function(){a.css("border",e(this).val()+"px solid #000")}).change(),e("#redactor-image-marginTop",this.$modal).val(o.marginTop.match(l)||0),e("#redactor-image-marginRight",this.$modal).val(o.marginRight.match(l)||0),e("#redactor-image-marginBottom",this.$modal).val(o.marginBottom.match(l)||0),e("#redactor-image-marginLeft",this.$modal).val(o.marginLeft.match(l)||0),e("#redactor-image-marginTop-unit",this.$modal).val(o.marginTop.match(d)||"px"),e("#redactor-image-marginRight-unit",this.$modal).val(o.marginRight.match(d)||"px"),e("#redactor-image-marginBottom-unit",this.$modal).val(o.marginBottom.match(d)||"px"),e("#redactor-image-marginLeft-unit",this.$modal).val(o.marginLeft.match(d)||"px"),e('input[name="redactor-image-align"][value="'+t.css("float")+'"]',this.$modal).prop("checked",!0),e("#redactor-image-alt",this.$modal).val(t.attr("alt")),e("#redactor-image-title",this.$modal).val(t.attr("title")),e("#redactor-image-id",this.$modal).val(t.attr("id")),e("#redactor-image-class",this.$modal).val(t.attr("class")),e.fn.selectize){var c=this.opts.classes?e.map(this.opts.classes,function(e){return{value:e["class"],text:e.name}}):[],u=e("#redactor-image-class").selectize({delimiter:" ",persist:!1,create:!0});u[0].selectize.addOption(c),u[0].selectize.$control.on("keyup",function(e){e.stopPropagation()})}e("#redactor-image-url",this.$modal).val(t.attr("src")).on("change",function(){var i=e("#redactor-image-url",r.$modal).val();a.attr("src",i||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),i!==t.data("save-src")&&t.removeAttr("width")}).change(),a.load(function(){s=a[0].naturalWidth/a[0].naturalHeight,t.attr("width")||(e("#redactor-image-width",this.$modal).val(a[0].naturalWidth),e("#redactor-image-height",this.$modal).val(a[0].naturalHeight))}),n.on("click",function(){r.image.save(t)}),i.on("click",function(){t.remove(),r.code.sync(),r.modal.close()}),this.modal.show()},save:function(t){this.selection.restore();var i=e("#redactor-image-alt").val(),n=e("#redactor-image-title").val(),r=e("#redactor-image-id").val(),a=e("#redactor-image-class").val(),o=e("#redactor-image-width").val(),s=e("#redactor-image-marginTop").val()||0,l=e("#redactor-image-marginRight").val()||0,d=e("#redactor-image-marginBottom").val()||0,c=e("#redactor-image-marginLeft").val()||0,u=e("#redactor-image-marginTop-unit").val(),h=e("#redactor-image-marginRight-unit").val(),f=e("#redactor-image-marginBottom-unit").val(),p=e("#redactor-image-marginLeft-unit").val(),g=e('input[name="redactor-image-align"]:checked').val(),m=e("#redactor-image-border").val();this.fs.setAttr(t,"alt",i),this.fs.setAttr(t,"title",n),this.fs.setAttr(t,"id",r),this.fs.setAttr(t,"class",a),!isNaN(o)&&o>0?t.attr("width",o):t.removeAttr("width"),t.removeAttr("height"),t.css("border",m>0?m+"px solid #000":""),t.attr("src",e("#redactor-image-url").val()),t.css("margin",s+l+d+c>0?s+u+" "+l+h+" "+d+f+" "+c+p:""),"left"===g?t.css("float","left"):"right"===g?t.css("float","right"):t.css("float",""),!t.data("new")||(t.removeData("new").removeAttr("data-new"),this.insert.html(t[0].outerHTML,!1)),this.modal.close(),this.observe.images(),this.code.sync()}},t}),i("modules/indent",["jquery"],function(e){"use strict";function t(){}return t.prototype={increase:function(){this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save();var e=this.selection.getBlock();e&&"LI"===e.tagName?this.indent.increaseLists():e===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){e.each(this.selection.getBlocks(),e.proxy(function(e,t){if("TD"!==t.tagName&&"TH"!==t.tagName){var i=this.utils.getAlignmentElement(t),n=parseFloat(i.css("font-size")),r=(this.utils.normalize(i.css("margin-left"))+n)/n;i.css("margin-left",r+"em")}},this))},increaseText:function(){var t=this.selection.wrap("div");e(t).attr("data-tagblock","redactor"),e(t).css("margin-left",this.opts.indentValue/parseFloat(e(document.body).css("font-size")+"em"))},decrease:function(){this.buffer.set(),this.selection.save();var e=this.selection.getBlock();e&&"LI"===e.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var t=this.selection.getCurrent(),i=e(t).closest("li",this.$editor[0]),n=i.parent();0!==i.length&&0!==n.length&&"LI"===n[0].tagName&&n.after(i),this.indent.fixEmptyIndent(),!this.opts.linebreaks&&0===i.length&&(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(e.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){e.each(this.selection.getBlocks(),e.proxy(function(e,t){var i=this.utils.getAlignmentElement(t),n=parseFloat(i.css("font-size")),r=(this.utils.normalize(i.css("margin-left"))-n)/n;r<=0?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",r+"em")},this))},fixEmptyIndent:function(){var t=this.selection.getBlock();if(this.range.collapsed&&t&&"LI"===t.tagName&&this.utils.isEmpty(e(t).text())){var i=e(t);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}},t}),i("modules/inline",["jquery"],function(e){"use strict";function t(){}return t.prototype={formatting:function(e){var t,i;"undefined"!=typeof this.formatting[e].style?t="style":"undefined"!=typeof this.formatting[e]["class"]&&(t="class"),t&&(i=this.formatting[e][t]),this.inline.format(this.formatting[e].tag,t,i)},format:function(t,i,n){if(!this.utils.isCurrentOrParent("PRE")){for(var r=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],a=["strong","strong","em","em","u","del","del","sup","sub"],o=0;o<r.length;o++)t===r[o]&&(t=a[o]);if(this.opts.allowedTags){if(e.inArray(t,this.opts.allowedTags)===-1)return}else if(e.inArray(t,this.opts.deniedTags)!==-1)return;this.inline.type=i||!1,this.inline.value=n||!1,this.buffer.set(),this.utils.browser("msie")||this.$editor[0].focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(t):this.inline.formatMultiple(t)}},formatCollapsed:function(t){var i=this.selection.getCurrent(),n=e(i).closest(t+"[data-redactor-tag="+t+"]",this.$editor[0]);if(0!==n.length&&"style"!==this.inline.type&&"SPAN"!==n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var r=e("<"+t+">").attr("data-verified","redactor").attr("data-redactor-tag",t);r.html(this.opts.invisibleSpace),r=this.inline.setFormat(r),r=this.insert.node(r),this.caret.setEnd(r),this.code.sync()},formatMultiple:function(t){if(this.inline.formatConvert(t),document.execCommand("strikethrough"),this.selection.save(),this.$editor.find("strike").each(e.proxy(function(i,n){var r=e(n);this.inline.formatRemoveSameChildren(r,t);var a;if(this.inline.type?(a=e("<span>").attr("data-redactor-tag",t).attr("data-verified","redactor"),a=this.inline.setFormat(a)):a=e("<"+t+">").attr("data-redactor-tag",t).attr("data-verified","redactor"),r.replaceWith(a.html(r.contents())),"span"===t){var o=a.parent();if(o&&"SPAN"===o[0].tagName&&"style"===this.inline.type)for(var s=this.inline.value.split(";"),l=0;l<s.length;l++){if(""===s[l])return;var d=s[l].split(":");o.css(d[0],""),this.utils.removeEmptyAttr(o,"style")&&o.replaceWith(o.contents())}}},this)),"span"!==t&&this.$editor.find(this.opts.inlineTags.join(", ")).each(e.proxy(function(t,i){var n=e(i),r=n.css("text-decoration");"line-through"===r&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!==t){var i=this;this.$editor.find("inline").each(function(e,t){i.utils.replaceToTag(t,"del")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(t,i){var n=this;t.children(i).each(function(){var t=e(this);if(!t.hasClass("redactor-selection-marker"))if("style"===n.inline.type)for(var i=n.inline.value.split(";"),r=0;r<i.length;r++){if(""===i[r])return;var a=i[r].split(":");t.css(a[0],""),n.utils.removeEmptyAttr(t,"style")&&t.replaceWith(t.contents())}else t.contents().unwrap()})},formatConvert:function(t){this.selection.save();var i="";"class"===this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"===this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!==t&&this.$editor.find("del").each(function(e,t){n.utils.replaceToTag(t,"inline")}),"span"!==t&&this.$editor.find(t).each(function(){var t=e(this);t.replaceWith(e("<strike />").html(t.contents()))}),this.$editor.find('[data-redactor-tag="'+t+'"]'+i).each(function(){if(""!==i||"span"!==t||this.tagName.toLowerCase()!==t){var n=e(this);n.replaceWith(e("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(e){switch(this.inline.type){case"class":e.hasClass(this.inline.value)?(e.removeClass(this.inline.value),e.removeAttr("data-redactor-class")):(e.addClass(this.inline.value),e.attr("data-redactor-class",this.inline.value));break;case"style":e[0].style.cssText=this.inline.value,e.attr("data-redactor-style",this.inline.value)}return e},removeStyle:function(){this.buffer.set();var t=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),t&&"SPAN"===t.tagName){var n=e(t);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}e.each(i,e.proxy(function(t,i){var n=e(i);e.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)!==-1&&!n.hasClass("redactor-selection-marker")&&(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(t){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var r=e(i);r.css(t,""),this.utils.removeEmptyAttr(r,"style"),0===r[0].attributes.length&&r.replaceWith(r.contents())}e.each(n,e.proxy(function(i,n){var r=e(n);e.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)!==-1&&!r.hasClass("redactor-selection-marker")&&(r.css(t,""),this.utils.removeEmptyAttr(r,"style"),0===r[0].attributes.length&&r.replaceWith(r.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var t=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),t&&"SPAN"===t.tagName&&e(t).replaceWith(e(t).contents()),e.each(this.selection.getNodes(),e.proxy(function(t,i){var n=e(i);e.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)!==-1&&!n.hasClass("redactor-selection-marker")&&n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(e){this.inline.format("span","class",e)},toggleStyle:function(e){this.inline.format("span","style",e)}},t}),i("modules/insert",["jquery"],function(e){"use strict";function t(){}return t.prototype={set:function(t,i){this.placeholder.remove(),t=this.clean.setVerified(t),"undefined"==typeof i&&(t=this.clean.onPaste(t,!1)),this.$editor.html(t),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(e.proxy(this.clean.clearUnverified,this),10)},text:function(t){if(this.placeholder.remove(),t=t.toString(),t=e.trim(t),t=this.clean.getPlainText(t,!1),this.$editor[0].focus(),this.utils.browser("msie"))this.insert.htmlIe(t);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=t;for(var n,r,a=document.createDocumentFragment();n=i.firstChild;)r=a.appendChild(n);if(this.range.insertNode(a),r){var o=this.range.cloneRange();o.setStartAfter(r),o.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(o)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(e){this.insert.html(e,!1)},html:function(t,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.$editor[0].focus(),t=this.clean.setVerified(t),i&&(t=this.clean.onPaste(t)),this.utils.browser("msie")?this.insert.htmlIe(t):(this.clean.singleLine?this.insert.execHtml(t):document.execCommand("insertHTML",!1,t),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(e.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var t=e(this.selection.getBlock()).next();t.length>0&&"P"===t[0].tagName&&""===t.html()&&t.remove()}},htmlIe:function(t){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=e("<div>").append(t),r=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&r?this.insert.ie11FixInserting(i,t):this.insert.ie11PasteFrag(t))}document.selection.createRange().pasteHTML(t)},execHtml:function(e){e=this.clean.setVerified(e),this.selection.get(),this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n,r=document.createDocumentFragment();i=t.firstChild;)n=r.appendChild(i);this.range.insertNode(r),this.range.collapse(!0),this.caret.setAfter(n)},node:function(t,i){t=t[0]||t;var n=this.utils.getOuterHtml(t);return n=this.clean.setVerified(n),null!==n.match(/</g)&&(t=e(n)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(t),this.range.collapse(!1),this.selection.addRange(),t},nodeToPoint:function(e,t,i){e=e[0]||e,this.selection.get();var n;if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(t,i);this.range.setStart(r.offsetNode,r.offset),this.range.collapse(!0),this.range.insertNode(e)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(t,i),n.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(t,i);var a=n.duplicate();a.moveToPoint(t,i),n.setEndPoint("EndToEnd",a),n.select()}},nodeToCaretPositionFromPoint:function(e,t){t=t[0]||t;var i,n=e.clientX,r=e.clientY;if(document.caretPositionFromPoint){var a=document.caretPositionFromPoint(n,r),o=document.getSelection();i=o.getRangeAt(0),i.setStart(a.offsetNode,a.offset),i.collapse(!0),i.insertNode(t)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,r),i.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,r);var s=i.duplicate();s.moveToPoint(n,r),i.setEndPoint("EndToEnd",s),i.select()}},ie11FixInserting:function(t,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var r=e(t).html();r="<p>"+r.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",e(t).replaceWith(r)},ie11PasteFrag:function(e){this.selection.get(),this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n,r=document.createDocumentFragment();i=t.firstChild;)n=r.appendChild(i);this.range.insertNode(r),this.range.collapse(!1),this.selection.addRange()}},t}),i("modules/keydown",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t){if(!this.rtePaste){var i,n=t.which,r=n>=37&&n<=40;this.keydown.ctrl=t.ctrlKey||t.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(t,n),this.keydown.checkEvents(r,n),this.keydown.setupBuffer(t,n),this.keydown.addArrowsEvent(r),this.keydown.setupSelectAll(t,n);var a=this.core.setCallback("keydown",t);if(a===!1)return t.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(n===this.keyCode.DOWN||n===this.keyCode.RIGHT)){var o=!1,s=!1;this.keydown.block&&"TD"===this.keydown.block.tagName&&(s=e(this.keydown.block).closest("table",this.$editor[0])),s&&s.find("td").last()[0]===this.keydown.block&&(o=!0),this.utils.isEndOfElement()&&o&&(i=e(this.opts.emptyHtml),s.after(i),this.caret.setStart(i))}if(this.opts.enterKey&&n===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&n===this.keyCode.ENTER)return t.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(n===this.keyCode.ENTER&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey){var l=this.core.setCallback("enter",t);if(l===!1)return t.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(t)===!0)return!1;var d,c;if(this.keydown.pre)return this.keydown.insertNewLine(t);if(this.keydown.blockquote||this.keydown.figcaption)return d=this.selection.getCurrent(),c=e(d).next(),0!==c.length&&"BR"===c[0].tagName?this.keydown.insertBreakLine(t):this.utils.isEndOfElement()&&d&&"SPAN"!==d?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t);if(this.opts.linebreaks&&!this.keydown.block)return d=this.selection.getCurrent(),c=e(this.keydown.current).next(),0!==c.length&&"BR"===c[0].tagName?this.keydown.insertBreakLine(t):d!==!1&&e(d).hasClass("redactor-invisible-space")?(this.caret.setAfter(d),e(d).contents().unwrap(),this.keydown.insertDblBreakLine(t)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(t):0===c.length&&d===!1&&"undefined"!=typeof c.context?this.keydown.insertBreakLine(t):this.keydown.insertBreakLine(t);if(this.opts.linebreaks&&this.keydown.block)setTimeout(e.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block)if("LI"!==this.keydown.block.tagName)setTimeout(e.proxy(this.keydown.replaceDivToParagraph,this),1);else{d=this.selection.getCurrent();var u=e(d).closest("li",this.$editor[0]),h=u.closest("ul,ol",this.$editor[0]);if(0!==u.length&&this.utils.isEmpty(u.html())&&0===h.next().length&&this.utils.isEmpty(h.find("li").last().html()))return h.find("li").last().remove(),i=e(this.opts.emptyHtml),h.after(i),this.caret.setStart(i),!1}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(t)}return n===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey)?this.keydown.onShiftEnter(t):n===this.keyCode.TAB||t.metaKey&&221===n||t.metaKey&&219===n?this.keydown.onTab(t,n):(n===this.keyCode.BACKSPACE&&(this.keydown.removeInvisibleSpace(),
this.keydown.removeEmptyListInTable(t)),void this.code.sync())}},checkEvents:function(e,t){!e&&("click"===this.core.getEvent()||"arrow"===this.core.getEvent())&&(this.core.addEvent(!1),this.keydown.checkKeyEvents(t)&&this.buffer.set())},checkKeyEvents:function(t){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.SPACE,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return e.inArray(t,n)===-1},addArrowsEvent:function(e){if(e)return"click"===this.core.getEvent()||"arrow"===this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow")},setupBuffer:function(e,t){return this.keydown.ctrl&&90===t&&!e.shiftKey&&!e.altKey&&this.opts.buffer.length?(e.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===t&&e.shiftKey&&!e.altKey&&0!==this.opts.rebuffer.length?(e.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(t===this.keyCode.BACKSPACE||t===this.keyCode.DELETE||t===this.keyCode.ENTER&&!e.ctrlKey&&!e.shiftKey||t===this.keyCode.SPACE)&&this.buffer.set())},setupSelectAll:function(e,t){this.keydown.ctrl&&65===t?this.utils.enableSelectAll():t!==this.keyCode.LEFT_WIN&&!this.keydown.ctrl&&this.utils.disableSelectAll()},onArrowDown:function(){for(var e=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],t=0;t<e.length;t++)if(e[t])return this.keydown.insertAfterLastElement(e[t]),!1},onShiftEnter:function(e){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e)},onTab:function(e,t){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;e.preventDefault();var i;return this.keydown.pre&&!e.shiftKey?(i=this.opts.preSpaces?document.createTextNode(new Array(this.opts.preSpaces+1).join("\xa0")):document.createTextNode("\t"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(new Array(this.opts.tabAsSpaces+1).join("\xa0")),this.insert.node(i),this.code.sync()):e.metaKey&&219===t?this.indent.decrease():e.metaKey&&221===t?this.indent.increase():e.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var t=this.selection.getBlock(),i=t.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===t.tagName||"P"===t.tagName)&&""===i&&!e(t).hasClass("redactor-editor")){var n=document.createElement("br");return e(t).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var t=this.selection.getBlock(),i=t.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===t.tagName&&""===i&&!e(t).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,e(t).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"===t.tagName&&e(t).removeAttr("class").removeAttr("style")},insertParagraph:function(e){e.preventDefault(),this.selection.get();var t;return this.selection.getParent()===!1&&(t=document.createElement("p"),t.innerHTML=this.$editor.html(),this.selection.selectAll(),this.range.deleteContents(),this.range.insertNode(t),this.caret.setAfter(t)),t=document.createElement("p"),t.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(t),this.caret.setStart(t),this.code.sync(),!1},exitFromBlockquote:function(t){if(this.utils.isEndOfElement()){var i=e.trim(e(this.keydown.block).html());if(i.search(/(<br\s?\/?>){2}$/i)!==-1){if(t.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");e(this.keydown.blockquote).after(n),this.caret.setBefore(n),e(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var r=e(this.opts.emptyHtml);e(this.keydown.blockquote).after(r),this.caret.setStart(r)}return!0}}},insertAfterLastElement:function(t){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=e("<div>").append(e.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"===n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!==this.utils.getOuterHtml(t))return;var r=document.createElement("br");e(t).after(r),this.caret.setAfter(r)}else{if(this.$editor.contents().last()[0]!==t)return;var a=e(this.opts.emptyHtml);e(t).after(a),this.caret.setStart(a)}},insertNewLine:function(e){e.preventDefault();var t=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(t),this.caret.setAfter(t),this.code.sync(),!1},insertBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e)},insertDblBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e,!0)},insertBreakLineProcessing:function(t,i){t.stopPropagation(),this.selection.get();var n=document.createElement("br");this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n);var r=e(n).parent("a");if(r.length>0&&(r.find(n).remove(),r.after(n)),i===!0){var a=e(n).next();if(0!==a.length&&"BR"===a[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var o=document.createElement("br");this.range.insertNode(o),this.caret.setAfter(o)}else this.keydown.insertBreakLineProcessingAfter(n);return this.code.sync(),!1},insertBreakLineProcessingAfter:function(t){var i=this.utils.createSpaceElement();e(t).after(i),this.selection.selectElement(i),e(i).replaceWith(function(){return e(this).contents()})},removeInvisibleSpace:function(){var t=e(this.keydown.current);0===t.text().search(/^\u200B$/g)&&t.remove()},removeEmptyListInTable:function(t){var i=e(this.keydown.current),n=e(this.keydown.parent),r=i.closest("td",this.$editor[0]);if(0!==r.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;t.preventDefault(),i.remove(),n.remove(),this.caret.setStart(r)}}},t}),i("modules/keyup",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t){if(!this.rtePaste){var i=t.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(e(this.keyup.parent).parent());this.code.sync();var r=this.core.setCallback("keyup",t);return r===!1?(t.preventDefault(),!1):(!this.opts.linebreaks&&3===this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"===this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),!this.opts.linebreaks&&e(this.keyup.parent).hasClass("redactor-invisible-space")&&(n===!1||"BODY"===n[0].tagName)&&(e(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.linkify.isEnabled()&&this.linkify.isKey(i)&&this.linkify.format(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?(this.clean.clearUnverified(),this.observe.image?(t.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(e.proxy(function(t,i){this.utils.removeEmpty(t,e(i).html())},this)),this.opts.linebreaks&&this.keyup.current&&"DIV"===this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(e(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),e(this.keyup.current).remove()),this.keyup.formatEmpty(t))):void 0)}},replaceToParagraph:function(t){var i,n=e(this.keyup.current);i=t===!1?e("<p>").append(n.html()):e("<p>").append(n.clone()),n.replaceWith(i);var r=e(i).next();"undefined"!=typeof r[0]&&"BR"===r[0].tagName&&r.remove(),this.caret.setEnd(i)},formatEmpty:function(t){var i=e.trim(this.$editor.html());if(this.utils.isEmpty(i))return t.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(i="<p><br /></p>",this.$editor.html(i),this.focus.setStart()),this.code.sync(),!1}},t}),i("modules/lang",[],function(){"use strict";function e(){}return e.prototype={load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(e){return"undefined"!=typeof this.opts.curLang[e]?this.opts.curLang[e]:""}},e}),i("modules/line",["jquery"],function(e){"use strict";function t(){}return t.prototype={insert:function(){this.buffer.set();var e=this.selection.getBlocks();return e[0]!==!1&&this.line.isExceptLastOrFirst(e)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(t){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=t[0].tagName.toLowerCase(),r=this.selection.getLastBlock();r="undefined"==typeof r?n:r.tagName.toLowerCase();var a=e.inArray(n,i)!==-1,o=e.inArray(r,i)!==-1;if(a&&o||a)return!0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var e='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(e='<br id="redactor-insert-line">'),document.execCommand("insertHTML",!1,"<hr>"+e),this.line.setFocus(),this.code.sync()},setFocus:function(){var t=this.$editor.find("#redactor-insert-line"),i=e(t).next()[0];i?(this.caret.setAfter(t),t.remove()):t.removeAttr("id")}},t}),i("text",["module"],function(e){"use strict";var i,n,r,a,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,f=c&&(location.port||void 0),p={},g=e.config&&e.config()||{};return i={version:"2.0.14",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=s[t];try{e=new ActiveXObject(i)}catch(e){}if(e){s=[i];break}}return e},parseName:function(e){var t,i,n,r=!1,a=e.lastIndexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return a!==-1&&(!o||a>1)?(t=e.substring(0,a),i=e.substring(a+1)):t=e,n=i||t,a=n.indexOf("!"),a!==-1&&(r="strip"===n.substring(a+1),n=n.substring(0,a),i?i=n:t=n),{moduleName:t,ext:i,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var a,o,s,l=i.xdRegExp.exec(e);return!l||(a=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(a&&a!==t||o&&o.toLowerCase()!==n.toLowerCase()||(s||o)&&s!==r))},finishLoad:function(e,t,n,r){n=t?i.strip(n):n,g.isBuild&&(p[e]=n),r(n)},load:function(e,t,n,r){if(r&&r.isBuild&&!r.inlineText)return void n();g.isBuild=r&&r.isBuild;var a=i.parseName(e),o=a.moduleName+(a.ext?"."+a.ext:""),s=t.toUrl(o),l=g.useXhr||i.useXhr;return 0===s.indexOf("empty:")?void n():void(!c||l(s,u,h,f)?i.get(s,function(t){i.finishLoad(e,a.strip,t,n)},function(e){n.error&&n.error(e)}):t([o],function(e){i.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)}))},write:function(e,t,n){if(p.hasOwnProperty(t)){var r=i.jsEscape(p[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,a){var o=i.parseName(t),s=o.ext?"."+o.ext:"",l=o.moduleName+s,d=n.toUrl(o.moduleName+s)+".js";i.load(l,n,function(){var t=function(e){return r(d,e)};t.asModule=function(e,t){return r.asModule(e,d,t)},i.write(e,l,t,a)},a)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=t.nodeRequire("fs"),i.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(e){i&&i(e)}}):"xhr"===g.env||!g.env&&i.createXhr()?i.get=function(e,t,n,r){var a,o=i.createXhr();if(o.open("GET",e,!0),r)for(a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),r[a]);g.onXhr&&g.onXhr(o,e),o.onreadystatechange=function(){var i,r;4===o.readyState&&(i=o.status||0,i>399&&i<600?(r=new Error(e+" HTTP status: "+i),r.xhr=o,n&&n(r)):t(o.responseText),g.onXhrComplete&&g.onXhrComplete(o,e))},o.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(e,t){var i,n,r="utf-8",a=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),r)),l="";try{for(i=new java.lang.StringBuffer,n=s.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=s.readLine());)i.append(o),i.append(n);l=String(i.toString())}finally{s.close()}t(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,i.get=function(e,t){var i,n,s,l={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{i=r["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(s,1,0,!1),n=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),n.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),t(l.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),i}),i("text!view/link/insert_anchor_modal.html",[],function(){return'<section id="redactor-modal-link">\n\t<label for="redactor-link-id">ID</label>\n\t<input type="text" id="redactor-anchor-id" class="redactor-input" />\n</section>\n'}),i("text!view/link/link_modal.html",[],function(){return'<section id="redactor-modal-link">\n\t<div class="redactor-tab redactor-tab1">\n\t\t<label>URL</label>\n\t\t<input type="text" id="redactor-link-url" class="redactor-input" />\n\t</div>\n\t<div class="redactor-tab redactor-tab2" style="display: none;">\n\t\t<label><%= curLang.site_page %></label>\n\t\t<div class="redactor-site-page-selected">\n\t\t\t<span class="redactor-site-page-selected-text"><%= curLang.site_page_select %></span>\n\t\t\t<button type="button" class="redactor-link-site-page-browse" title="<%= curLang.site_page_browse_title %>"><%= curLang.browse %></button>\n\t\t\t<% if (browseComposerSiteURL) { %>\n\t\t\t\t<button type="button" class="redactor-link-composer-site-page-browse" title="<%= curLang.composer_site_page_browse_title %>"><%= curLang.browse_composer %></button>\n\t\t\t<% } %>\n\t\t</div>\n\t</div>\n\t<div class="redactor-tab redactor-tab3" style="display: none;">\n\t\t<label><%= curLang.site_file %></label>\n\t\t<div class="redactor-site-file-selected">\n\t\t\t<span class="redactor-site-file-selected-text"><%= curLang.site_file_select %></span>\n\t\t\t<button type="button" class="redactor-link-site-file-browse" title="<%= curLang.site_file_browse_title %>"><%= curLang.browse %></button>\n\t\t</div>\n\t</div>\n\t<div class="redactor-tab redactor-tab4" style="display: none;">\n\t\t<label><%= curLang.media %></label>\n\t\t<div class="redactor-media-selected">\n\t\t\t<span class="redactor-media-selected-text"><%= curLang.media_select %></span>\n\t\t\t<button type="button" class="redactor-link-media-browse" title="<%= curLang.media_browse_title %>"><%= curLang.browse %></button>\n\t\t\t<input type="checkbox" id="redactor-link-media-show-title"> <label for="redactor-link-media-show-title">Display Media Title</label>\n\t\t\t<input type="checkbox" id="redactor-link-media-show-description"> <label for="redactor-link-media-show-description">Display Media Description</label>\n\t\t</div>\n\t</div>\n\t<div class="redactor-tab redactor-tab5" style="display: none;">\n\t\t<label for="redactor-anchor-id">Anchor</label>\n\t\t<select id="redactor-anchor-id">\n\t\t\t<option value="">Choose Anchor...</option>\n\t\t</select>\n\t</div>\n\t<input type="checkbox" class="redactor-link-blank" id="redactor-link-blank"><label for="redactor-link-blank"><%= curLang.link_new_tab %></label><br />\n\t<label for="redactor-link-title"><%= curLang.title %><span class="redactor-tooltip" data-title="<%= curLang.title_attr_description %>">?</span></label>\n\t<input type="text" id="redactor-link-title" class="redactor-input" />\n\t<label for="redactor-link-class"><%= curLang.class %> <span class="redactor-tooltip" data-title="<%= curLang.class_attr_description %>">?</span></label>\n\t<input type="text" id="redactor-link-class" placeholder="Choose Style..." class="redactor-input" />\n\t<label for="redactor-link-id">ID <span class="redactor-tooltip" data-title="<%= curLang.id_attr_description %>">?</span></label>\n\t<input type="text" id="redactor-link-id" class="redactor-input" />\n</section>\n'}),i("modules/link",["jquery","underscore","text!view/link/insert_anchor_modal.html","text!view/link/link_modal.html"],function(e,t,i,n){"use strict";function r(){}return r.prototype={initialize:function(){this.link.show=this.link.show,this.$toolbar.find(".redactor-dropdown-box-link").remove();var r=this,a=this.$toolbar.find(".re-link").closest("li"),o={title:this.opts.curLang.link},s=this.button.build("link",o),l={"1editlink":{title:"Insert/Edit Link (ctrl + k)",func:this.link.show},"2editanchor":{title:"Add/Edit Anchor",func:this.link.showAnchor},"3hideshowanchors":{title:"Hide Anchors",func:this.link.toggleAnchors}};a.empty().append(s),this.button.addDropdown(s,l),e(s).on("click",function(){r.$editor.hasClass("redactor-hide-anchors")?e(".redactor-dropdown-box-link .redactor-dropdown-3hideshowanchors").text("Show Anchors"):e(".redactor-dropdown-box-link .redactor-dropdown-3hideshowanchors").text("Hide Anchors")}),this.opts.link=e.extend({onMediaBrowseReturn:function(e){return e},onFileBrowseReturn:function(e){return e},onPageBrowseReturn:function(e){return e},anchorTest:/^#/,mediaTest:/^\/media\/\d/gi,siteFileTest:/^\/?(file.cfm|\/?uploaded)/gi,sitePageTest:/^\/pages\/\d/gi,anchorSelector:".redactor-editor [id]"},this.opts.link),this.opts.modal_insertAnchor=i,this.opts.modal_link=t.template(n)(this.opts)},show:function(){if(this.selectionHTML=this.selection.getHtml(),e(".redactor-link-tooltip").remove(),e("#redactor-overlay-box.redactor-overlay-type-img").length){var t=this.fs.$editTarget;this.fs.hideEditableControls(!1),this.selection.get(),this.range.selectNode(t.get(0)),this.selection.addRange()}this.modal.addTemplate("link",this.opts.modal_link),this.modal.load("link",this.opts.curLang.link+" Settings",540);var i=this.modal.getModal();this.modal.createTabber(i),this.modal.addTab(1,"URL","active"),this.modal.addTab(2,this.opts.curLang.site_page),this.modal.addTab(3,this.opts.curLang.site_file),this.modal.addTab(4,this.opts.curLang.media),this.modal.addTab(5,"Anchor"),this.modal.createCancelButton();var n=this.modal.createDeleteButton("Unlink"),r=this.modal.createActionButton("Save");this.selection.get(),this.link.getData();var a="",o="",s="",l="",d="",c="";this.link.$node&&(a=this.link.$node.attr("class"),o=this.link.$node.attr("title"),s=this.link.$node.attr("id"),l=this.link.$node.attr("data-page-name")||this.link.url,d=this.link.$node.attr("data-file-name")||this.link.url,c=this.link.$node.attr("data-media-name")||this.link.url,e("#redactor-link-title").val(o),e("#redactor-link-id").val(s),e("#redactor-link-class").val(a),e("#redactor-link-media-show-title").prop("checked",this.link.$node.attr("data-media-dialog-title")),e("#redactor-link-media-show-description").prop("checked",this.link.$node.attr("data-media-dialog-description")),this.link.$node.length>1&&e('#redactor-link-id, label[for="redactor-link-id"]').hide());var u;if(e.fn.selectize){var h=this.opts.classes?e.map(this.opts.classes,function(e){return{value:e["class"],text:e.name}}):[],f=e("#redactor-link-class").selectize({delimiter:" ",persist:!1,create:!0}),p=e.map(e(this.opts.link.anchorSelector),function(e){return{value:e.id,text:e.id}});u=e("#redactor-anchor-id").selectize({create:!0,onChange:function(t){e("#redactor-link-url").val("#"+t)}}),f[0].selectize.addOption(h),f[0].selectize.$control.on("keyup",function(e){e.stopPropagation()}),u[0].selectize.addOption(p),u[0].selectize.$control.on("keyup",function(e){e.stopPropagation()}),this.$element.one("modalClosed.redactor-api",function(){f[0].selectize.destroy(),u[0].selectize.destroy()})}var g=self.location.href.replace(/\/$/i,""),m=this.link.url.replace(g,"")||"http://";if(this.link.url.search(this.opts.link.sitePageTest)>=0)this.modal.$tabber.children(":eq(1)").click(),l&&e(".redactor-site-page-selected-text").text(l);else if(this.link.url.search(this.opts.link.siteFileTest)>=0)this.modal.$tabber.children(":eq(2)").click(),d&&e(".redactor-site-file-selected-text").text(d);else if(this.link.url.search(this.opts.link.mediaTest)>=0)this.modal.$tabber.children(":eq(3)").click(),c&&e(".redactor-media-selected-text").text(c);else if(this.link.url.search(this.opts.link.anchorTest)>=0&&(this.modal.$tabber.children(":eq(4)").click(),e.fn.selectize)){var v=this.link.url.replace("#","");u[0].selectize.addOption({value:v,text:v}),u[0].selectize.setValue(v)}e("#redactor-link-url").val(m),("_blank"===this.link.target||"http://"===m)&&e(".redactor-link-blank",this.$modal).prop("checked",!0),this.opts.browseComposerSiteURL.length>0&&this.$modal.on("click",".redactor-link-composer-site-page-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseComposerSiteURL,e.proxy(function(t){t=this.opts.link.onPageBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-site-page-selected-text",this.$modal).text(t.name)},this)),!1},this)),this.opts.browseSiteURL.length>0?this.$modal.on("click",".redactor-link-site-page-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseSiteURL,e.proxy(function(t){t=this.opts.link.onPageBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-site-page-selected-text",this.$modal).text(t.name)},this)),!1},this)):this.modal.$tabber.children(":eq(1)").hide(),this.opts.browseFileURL.length>0?this.$modal.on("click",".redactor-link-site-file-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,e.proxy(function(t){t=this.opts.link.onFileBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-site-file-selected-text",this.$modal).text(t.name)},this),620),!1},this)):this.modal.$tabber.children(":eq(2)").hide(),this.opts.browseMediaURL.length>0?this.$modal.on("click",".redactor-link-media-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseMediaURL,e.proxy(function(t){t=this.opts.link.onMediaBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-media-selected-text",this.$modal).text(t.name),e("#redactor-link-url").data(t)},this)),!1},this)):this.modal.$tabber.children(":eq(3)").hide(),e("#redactor-modal-tabber",this.$modal).on("click","a",function(){"http://"===m&&(1===e("#redactor-modal-tabber > a.active").index()||4===e("#redactor-modal-tabber > a.active").index()?e(".redactor-link-blank").prop("checked",!1):e(".redactor-link-blank").prop("checked",!0))}),r.on("click",this.link.linkProcess),n.on("click",e.proxy(function(){this.modal.close(),this.selection.restore(),this.link.unlink()},this)),this.selection.save(),this.modal.show(),e("#redactor-link-url",this.$modal)[0].focus()},linkProcess:function(){var t=e.extend({"class":"",href:"",target:"",title:"",id:"","data-page-name":"","data-file-name":"","data-media-name":"","data-media-dialog-title":"","data-media-dialog-description":""},e("#redactor-link-url").data("attributes")),i=e("#redactor-modal-tabber > a.active").index();if(t.href=e("#redactor-link-url").val()||"#",e(".redactor-link-blank",this.$modal).prop("checked")&&(t.target="_blank"),/^javascript:/.test(t.href)&&(t.target=""),"1"===i){var n=/((xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}/,r=new RegExp("^(http|ftp|https)://"+n,"i"),a=new RegExp("^"+n,"i");t.href.search(r)===-1&&0===t.href.search(a)&&this.opts.linkProtocol&&(t.href=this.opts.linkProtocol+t.href)}t["data-page-name"]=e(".redactor-site-page-selected-text:visible",this.$modal).text(),t["data-file-name"]=e(".redactor-site-file-selected-text:visible",this.$modal).text(),t["data-media-name"]=e(".redactor-media-selected-text:visible",this.$modal).text(),e("#redactor-link-media-show-title").is(":checked")&&(t["data-media-dialog-title"]="true"),e("#redactor-link-media-show-description").is(":checked")&&(t["data-media-dialog-description"]="true"),t.title=e.trim(this.clean.encodeEntities(e("#redactor-link-title").val())),t["class"]=e.trim(e("#redactor-link-class").val()),t.id=e.trim(this.fs.cleanID(e("#redactor-link-id").val())),this.link.linkInsert(t),this.modal.close()},linkInsert:function(t){var i=this;if(this.selection.restore(),this.link.$node)this.buffer.set(),e.each(t,function(e,t){i.fs.setAttr(i.link.$node,e,t)}),this.code.sync();else{this.selection.replaceWithHtml("");var n;this.fs.setImageFloatFix(),document.execCommand("createLink",!1,"redactor-temporary"),this.fs.unsetImageFloatFix(),n=e('a[href="redactor-temporary"]',this.$editor),n.length||(this.insert.html('<a id="redactor-inserted-link">'+t.href+"</a>"),n=e("#redactor-inserted-link").removeAttr("id")),this.selectionHTML&&n.html(this.selectionHTML),e.each(t,function(e,t){i.fs.setAttr(n,e,t)}),""===this.link.text&&!this.link.hasImage()&&(n.text(t.href),this.selection.selectElement(n)),this.code.sync(),this.core.setCallback("insertedLink",n)}setTimeout(e.proxy(function(){this.observe.links()},this),5)},showAnchor:function(){var e=this;this.modal.addTemplate("insertAnchor",this.opts.modal_insertAnchor),this.modal.load("insertAnchor","Add/Edit Anchor",460),this.modal.createCancelButton();var t=this.modal.createActionButton("Save"),i=this.modal.createDeleteButton("Remove");i.on("click",function(){e.modal.close(),e.selection.restore(),e.link.anchorRemove()}),this.range.collapse(!0),this.selection.addRange(),t.on("click",this.link.anchorProcess),this.link.selectedAnchor=this.selection.getBlock(),this.selection.save(),this.modal.show(),e.link.selectedAnchor&&e.link.selectedAnchor.id.length&&e.$modal.find("#redactor-anchor-id").val(e.link.selectedAnchor.id)},anchorProcess:function(){var t=this.$modal.find("#redactor-anchor-id").val();return this.$editor.find("#"+t).length&&t!==this.link.selectedAnchor.id?(this.$modal.find("p.error").remove().end().find("#redactor-anchor-id").addClass("error").after('<p class="error">ID is already in use. Please choose a different ID.</p>'),!1):(this.modal.close(),this.selection.restore(),this.fs.setInlineStyle(function(i){e(i[0]).attr("id",t)}),void 0)},anchorRemove:function(){this.fs.setInlineStyle(function(t){e(t[0]).removeAttr("id")})},toggleAnchors:function(){this.$editor.hasClass("redactor-hide-anchors")?this.$editor.removeClass("redactor-hide-anchors"):this.$editor.addClass("redactor-hide-anchors")},hasImage:function(){return e(this.selection.getNodes()).find("img").length},execUnlink:function(t,i){this.buffer.set();var n=this.currentOrParentIs("A");if(n)return e(n).replaceWith(e(n).html()),this.code.sync(),this.callback("execCommand",t,i),void 0},getData:function(){this.link.$node=!1;var t=e(this.selection.getCurrent()).closest("a",this.$editor[0]);0!==t.length&&"A"===t[0].tagName?(this.link.$node=t,this.link.url=t.attr("href")||"",this.link.text=t.text(),this.link.target=t.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},unlink:function(t){e(".redactor-link-tooltip").remove(),"undefined"!=typeof t&&t.preventDefault&&t.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,r=0;r<n;r++){var a=e(i[r]).closest("a",this.$editor[0]);a.replaceWith(a.contents())}e(".redactor-link-tooltip").remove(),this.code.sync()}}},r}),i("modules/linkify",["jquery"],function(e){"use strict";function t(){}return t.prototype={isKey:function(e){return e===this.keyCode.ENTER||e===this.keyCode.SPACE},isEnabled:function(){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&!this.utils.isCurrentOrParent("PRE")},format:function(){var t=this.linkify,i=this.opts;this.$editor.find(":not(iframe,img,a,pre)").addBack().contents().filter(function(){return 3===this.nodeType&&""!==e.trim(this.nodeValue)&&!e(this).parent().is("pre")&&(this.nodeValue.match(i.linkify.regexps.youtube)||this.nodeValue.match(i.linkify.regexps.vimeo)||this.nodeValue.match(i.linkify.regexps.image)||this.nodeValue.match(i.linkify.regexps.url))}).each(function(){var n=e(this).text(),r=n;i.convertVideoLinks&&(r.match(i.linkify.regexps.youtube)||r.match(i.linkify.regexps.vimeo))?r=t.convertVideoLinks(r):i.convertImageLinks&&r.match(i.linkify.regexps.image)?r=t.convertImages(r):i.convertUrlLinks&&(r=t.convertLinks(r)),e(this).before(n.replace(n,r)).remove()}),this.linkify.after()},convertVideoLinks:function(e){var t='<iframe width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe>';return e.match(this.opts.linkify.regexps.youtube)&&(e=e.replace(this.opts.linkify.regexps.youtube,t+"//www.youtube.com/embed/$1"+i)),e.match(this.opts.linkify.regexps.vimeo)&&(e=e.replace(this.opts.linkify.regexps.vimeo,t+"//player.vimeo.com/video/$2"+i)),e},convertImages:function(e){var t=e.match(this.opts.linkify.regexps.image);return t&&(e=e.replace(e,'<img src="'+t+'" />')),e},convertLinks:function(t){var i=t.match(this.opts.linkify.regexps.url);if(i){i=e.grep(i,function(t,n){return e.inArray(t,i)===n});for(var n=i.length,r=0;r<n;r++){var a=i[r],o=a,s=this.opts.linkProtocol+"://";null!==a.match(/(https?|ftp):\/\//i)&&(s=""),o.length>this.opts.linkSize&&(o=o.substring(0,this.opts.linkSize)+"..."),o=decodeURIComponent(o);var l="\\b";e.inArray(a.slice(-1),["/","&","="])!==-1&&(l="");var d=new RegExp("("+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g");t=t.replace(d,'<a href="'+s+e.trim(a)+'">'+e.trim(o)+"</a>")}}return t},after:function(){this.observe.load(),this.code.sync()}},t}),i("modules/list",["jquery"],function(e){"use strict";function t(){}return t.prototype={toggle:function(t){this.placeholder.remove(),this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=e(i).closest("ol, ul",this.$editor[0]);!this.utils.isRedactorParent(n)&&0!==n.length&&(n=!1);var r,a,o=!1;if(n&&n.length){o=!0;var s=n[0].tagName;r="orderedlist"===t&&"UL"===s,a="unorderedlist"===t&&"OL"===s}r?this.utils.replaceToTag(n,"ol"):a?this.utils.replaceToTag(n,"ul"):o?this.list.remove(t):this.list.insert(t),this.selection.restore(),this.code.sync()},insert:function(t){var i=this.selection.getParent(),n=this.selection.getCurrent(),r=e(n).closest("td, th",this.$editor[0]);this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(t):document.execCommand("insert"+t);var a=e(this.selection.getParent()).closest("ol, ul",this.$editor[0]);if(0!==r.length){var o=r.prev(),s=r.html();r.html(""),!o||1!==o.length||"TD"!==o[0].tagName&&"TH"!==o[0].tagName?e(i).prepend(r):e(o).after(r),r.html(s)}if(this.utils.isEmpty(a.find("li").text())){var l=a.children("li");l.find("br").remove(),l.append(this.selection.getMarkerAsHtml())}if(a.length){var d=a.parent();this.utils.isRedactorParent(d)&&"LI"!==d[0].tagName&&this.utils.isBlock(d[0])&&d.replaceWith(d.contents())}this.utils.browser("msie")||this.$editor[0].focus(),this.clean.clearUnverified()},insertInIe:function(t){var i=this.selection.wrap("div"),n=e(i).html(),r=e("orderedlist"===t?"<ol>":"<ul>"),a=e("<li>");if(""===e.trim(n))a.append(this.selection.getMarkerAsHtml()),r.append(a),this.$editor.find("#selection-marker-1").replaceWith(r);else{var o=n.split(/<br\s?\/?>/gi);if(o)for(var s=0;s<o.length;s++)""!==e.trim(o[s])&&r.append(e("<li>").html(o[s]));else a.append(n),r.append(a);e(i).replaceWith(r)}},remove:function(t){document.execCommand("insert"+t);var i=e(this.selection.getCurrent());this.indent.fixEmptyIndent(),!this.opts.linebreaks&&0===i.closest("li, th, td",this.$editor[0]).length&&(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(e.proxy(this.utils.removeEmpty,this)));var n=e(this.selection.getCurrent()).closest("table",this.$editor[0]),r=n.prev();!this.opts.linebreaks&&0!==n.length&&0!==r.length&&"BR"===r[0].tagName&&r.remove(),this.clean.clearUnverified();
}},t}),i("modules/media",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){var t=this;this.$element.on("observed.redactor.video observed.redactor.audio observed.redactor.iframe",this.media.setEditable),this.$toolbar.find("a.re-video").removeClass("re-video").addClass("re-embed"),this.$toolbar.find("a.re-media").addClass("re-video").removeClass("redactor-btn-image"),this.$box.on("resize",e.proxy(function(){clearTimeout(this.media.resizeDebouncer),this.media.resizeDebouncer=setTimeout(this.media.resizeMediaIframes,100)},this)),e(window).on("blur.redactorIframeClick",function(){t.media.iFrameMouseOver&&t.fs.loadEditableControls({element:t.media.iFrameMouseOver,buttons:t.media.iFrameButtons})}),this.opts.media=e.extend({onMediaBrowseReturn:function(e){return e},onFileBrowseReturn:function(e){return e}},this.opts.media),this.opts.modal_media_edit='<section class="redactor-media-modal">\t\t\t\t<div class="redactor-media-modalleftcol">\t\t\t\t\t<div id="redactor-media-preview">\t\t\t\t\t</div>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Size</legend>\t\t\t\t\t\t<label><input id="redactor-media-width" type="number" min="0" max="100" class="smallinput" value="100" />% Width</label>\t\t\t\t\t\t<div class="redactor-tab redactor-tab1">\t\t\t\t\t\t\t<select id="redactor-media-aspect-ratio-options" name="redactor-media-aspect-ratio">\t\t\t\t\t\t\t\t<option id="redactor-media-portrait-aspect-ratio"  type="radio" value="1.3333">Portrait (4:3)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-portrait2-aspect-ratio" value="1.5">Portrait (3:2)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-landscape-aspect-ratio" selected="selected" value=".5625">Landscape (16:9)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-landscape2-aspect-ratio" value=".75">Landscape (4:3)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-landscape3-aspect-ratio" value=".6667">Landscape (3:2)</option>\t\t\t\t\t\t\t</select>\t\t\t\t\t\t</div>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Margin</legend>\t\t\t\t\t\t<input id="redactor-media-marginTop" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginTop-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tTop\t\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-media-marginRight" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginRight-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tRight\t\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-media-marginBottom" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginBottom-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tBottom\t\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-media-marginLeft" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginLeft-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tLeft\t\t\t\t\t\t\t</label>\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div class="redactor-media-modalrightcol">\t\t\t\t\t<fieldset>\t\t\t\t\t\t<div class="redactor-tab redactor-tab1">\t\t\t\t\t\t\t<label>Media:</label>\t\t\t\t\t\t\t<div class="redactor-media-selected">\t\t\t\t\t\t\t\t<span class="redactor-media-selected-text">Please select from Media Manager</span>\t\t\t\t\t\t\t\t<button type="button" class="redactor-media-browse" title="Browse for media">'+this.opts.curLang.browse+'</button>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="redactor-tab redactor-tab2" style="display: none;">\t\t\t\t\t\t\t<label>Other Media:\t\t\t\t\t\t\t\t<span class="redactor-other-media-selected-text"></span>\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t<div class="redactor-other-media-selected">\t\t\t\t\t\t\t\t<input type="text" id="redactor-media-url" name="redactor-media-url"/>\t\t\t\t\t\t\t\t<button type="button" class="redactor-other-media-browse" title="Browse for media">'+this.opts.curLang.browse+'</button>\t\t\t\t\t\t\t\t<p class="error" style="display:none;">Only Flash, HTML5 Video & Audio files are accepted.</p>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-media-align">Alignment</label>\t\t\t\t\t\t<ul id="redactor-media-align">\t\t\t\t\t\t\t<li><input id="redactor-media-align-none" name="redactor-media-align" type="radio" value="none"><label for="redactor-media-align-none">None</label></li>\t\t\t\t\t\t\t<li><input id="redactor-media-align-left" name="redactor-media-align" type="radio" value="left"><label for="redactor-media-align-left">Left</label></li>\t\t\t\t\t\t\t<li><input id="redactor-media-align-right" name="redactor-media-align" type="radio" value="right"><label for="redactor-media-align-right">Right</label></li>\t\t\t\t\t\t</ul>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-media-id">ID</label><input id="redactor-media-id" />\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-media-name">Name</label><input id="redactor-media-name" />\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div style="clear:both"></div>\t\t\t\t</section>'},show:function(t){var i=this;this.modal.addTemplate("media",this.opts.modal_media_edit),this.modal.load("media",this.opts.curLang.media+" Settings",600);var n=this.modal.getModal();this.modal.createTabber(n),this.modal.addTab(1,"Media Manager","active"),this.modal.addTab(2,"Other Media"),this.modal.createCancelButton();var r=this.modal.createDeleteButton("Delete"),a=this.modal.createActionButton("Save");if(t=t||"media","string"==typeof t&&this.selection.save(),e("#redactor-media-url,#redactor-media-aspect-ratio-options",this.$modal).on("change",function(){var t=e("#redactor-media-url").val(),n=e("#redactor-media-aspect-ratio-options").val();e("#redactor-media-preview").empty(),i.media.isVideo(t)?e("#redactor-media-preview").append('<video controls="controls" src="'+t+'"/>'):i.media.isMediaEmbed(t)?(t=i.media.formatMediaURL(t,n),e("#redactor-media-preview").append('<iframe src="'+t+'" data-aspectratio="'+n+'" style="width:100%; height:'+e("#redactor-media-preview").width()*n+'px" scrolling="no" frameborder="0" class="fsEmbeddedMedia" />')):i.media.isAudio(t)&&e("#redactor-media-preview").append('<audio src="'+t+'"/>')}),1===t.length){var o=t.attr("src"),s=t[0].style,l=parseInt(s.width)||100,d=/\d+/,c=/\D+$/,u=t.attr("data-aspectratio")||".75";l>100&&(l=100),this.media.isMediaEmbed(o)||this.modal.$tabber.children(":eq(1)").click(),e("#redactor-media-url").val(o),e("#redactor-media-id").val(t.attr("id")),e("#redactor-media-name").val(t.attr("name")),e("#redactor-media-width").val(l),e("input[name=redactor-media-align][value="+t.css("float")+"]").click(),e("#redactor-media-aspect-ratio-options").val(u),e(".redactor-media-selected-text",this.$modal).text(t.attr("data-media-name")||"Please select from media manager"),e("#redactor-media-url",this.$modal).change(),e("input[type=number]",i.$modal).on("keydown",function(e){(e.keyCode>57||e.keyCode<48)&&8!==e.keyCode&&9!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&46!==e.keyCode&&e.preventDefault()}),e("#redactor-media-marginTop",i.$modal).val(s.marginTop.match(d)||0),e("#redactor-media-marginRight",i.$modal).val(s.marginRight.match(d)||0),e("#redactor-media-marginBottom",i.$modal).val(s.marginBottom.match(d)||0),e("#redactor-media-marginLeft",i.$modal).val(s.marginLeft.match(d)||0),e("#redactor-media-marginTop-unit",i.$modal).val(s.marginTop.match(c)||"px"),e("#redactor-media-marginRight-unit",i.$modal).val(s.marginRight.match(c)||"px"),e("#redactor-media-marginBottom-unit",i.$modal).val(s.marginBottom.match(c)||"px"),e("#redactor-media-marginLeft-unit",i.$modal).val(s.marginLeft.match(c)||"px")}this.opts.browseFileURL.length>0?this.$modal.on("click",".redactor-other-media-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,e.proxy(function(t){t=this.opts.media.onFileBrowseReturn(t),e("#redactor-media-url").val(t.path).change()},this)),!1},this)):this.$modal.find(".redactor-other-media-browse").hide(),this.opts.browseMediaURL.length>0?this.$modal.on("click",".redactor-media-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseMediaURL,e.proxy(function(t){t=this.opts.media.onMediaBrowseReturn(t),e("#redactor-media-url").val(t.path).change(),e(".redactor-media-selected-text",this.$modal).text(t.name)},this)),!1},this)):(this.modal.$tabber.children(":eq(1)").click(),this.$modal.find("#redactor-modal-tabber").hide()),a.on("click",function(){i.media.save(t)}),r.on("click",function(){t.remove(),i.modal.close()}),this.modal.show()},save:function(t){var i,n=e("input[name=redactor-media-align]:checked").val(),r=e("#redactor-media-aspect-ratio-options").val(),a=!1,o=e("#redactor-media-id").val(),s=e("#redactor-media-width").val(),l=e("#redactor-media-marginTop").val()||0,d=e("#redactor-media-marginRight").val()||0,c=e("#redactor-media-marginBottom").val()||0,u=e("#redactor-media-marginLeft").val()||0,h=e("#redactor-media-marginTop-unit").val(),f=e("#redactor-media-marginRight-unit").val(),p=e("#redactor-media-marginBottom-unit").val(),g=e("#redactor-media-marginLeft-unit").val(),m=e("#redactor-media-name").val(),v=e(".redactor-media-selected-text",this.$modal).text(),y=e.trim(e("#redactor-media-url").val());return this.media.isVideo(y)||this.media.isMediaEmbed(y)||this.media.isAudio(y)?(this.selection.restore(),y.length&&("string"==typeof t&&(a=!0),this.media.isMediaEmbed(y)?(i=e('<iframe scrolling="no" frameborder="0" class="fsEmbeddedMedia fsEmbeddedMediaResponsive"></iframe>'),y=this.media.formatMediaURL(y,r)):this.media.isVideo(y)?i=e('<video controls="controls">HTML Video is not supported by your browser.</video>'):this.media.isAudio(y)&&(i=e('<audio controls="controls">HTML Audio is not supported by your browser.</audio>')),!a&&t[0].tagName!==i.tagName&&(e.each(t[0].attributes,function(e,t){"undefined"==typeof i[0].attributes[t.name]&&i.attr(t.name,t.value)}),t.replaceWith(i)),t=i,t.attr("src",y).css("float",n).css("margin",l+d+c+u>0?l+h+" "+d+f+" "+c+p+" "+u+g:""),o.length&&this.fs.setAttr(t,"id",o),m.length&&this.fs.setAttr(t,"name",m),"IFRAME"===t[0].tagName&&t.attr("data-aspectratio",r),v.length&&this.fs.setAttr(t,"data-media-name",v),t[0].style.width=s+"%",a&&this.range.insertNode(t[0])),this.code.sync(),this.modal.close(),this.observe.images(),this.media.resizeMediaIframes(),void 0):(e(".redactor-other-media-selected p.error",this.$modal).show(),e("#redactor-media-url").addClass("error"),!1)},formatMediaURL:function(e,t){return e.replace(/&responsive=true/gi,"").replace(/&aspectRatio=[^&]+/gi,"")+"&aspectRatio="+t+"&responsive=true"},setEditable:function(t,i){var n=this,r=e(i),a=[];a.push({name:"Settings","class":"re-cog",title:"Edit Media Properties",onClick:function(){return n.media.show(r),!1}}),a.push({name:"Delete",title:"Delete","class":"re-trash",onClick:function(){return!!confirm("Are you sure you want to delete this media object?")&&(r.remove(),void n.code.sync())}}),"IFRAME"===r[0].tagName&&r.hasClass("fsEmbeddedMedia")?r.off("mouseover.redactorIframeOver").on("mouseover.redactorIframeOver",function(){n.media.iFrameMouseOver=r,n.media.iFrameButtons=a}).off("mouseout.redactorIframeOut").on("mouseout.redactorIframeOut",function(){n.media.iFrameMouseOver=!1,n.media.iFrameButtons=!1}):r.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(e){e.stopPropagation(),n.fs.loadEditableControls({element:r,buttons:a})})},isVideo:function(e){return/\.(mp4|m4v|ogv|ogm|webm(\?.*)?)$/.test(e)},isMediaEmbed:function(e){return/embed\.cfm(\?.*)?$/.test(e)},isAudio:function(e){return/\.(mp3|m4a|ogg|oga|opus|flac|wav(\?.*)?)$/.test(e)},resizeMediaIframes:function(){this.$editor.find(".fsEmbeddedMediaResponsive").each(function(){var t=e(this);t.height(parseInt(t.width()*t.data("aspectratio")))})}},t}),i("modules/modal",["jquery"],function(e){"use strict";function t(){}return t.prototype={callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+"</option></select></section>",image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"}},addCallback:function(e,t){this.modal.callbacks[e]=t},createTabber:function(t){this.modal.$tabber=e("<div>").attr("id","redactor-modal-tabber"),t.prepend(this.modal.$tabber)},addTab:function(t,i,n){var r=e('<a href="#" rel="tab'+t+'">').text(i);n&&r.addClass("active");var a=this;r.on("click",function(t){t.preventDefault(),e(".redactor-tab").hide(),e(".redactor-"+e(this).attr("rel")).show(),a.modal.$tabber.find("a").removeClass("active"),e(this).addClass("active")}),this.modal.$tabber.append(r)},addTemplate:function(e,t){this.opts.modal[e]=t},getTemplate:function(e){return this.opts.modal[e]},getModal:function(){return this.$modalBody.find("section")},load:function(e,t,i){this.modal.templateName=e,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(t),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[e]&&this.modal.callbacks[e].call(this)},show:function(){this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),e(document.body).addClass("body-redactor-hidden"),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.$modalOverlay.show(),this.$modalBox.show(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(e.proxy(this.modal.showOnDesktop,this),0),e(window).on("resize.redactor-modal",e.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),e(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",e.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var t=this.$modal.outerHeight(),i=window.innerHeight,n=e(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-t/2+"px"}):void(t>i?this.$modal.css({width:this.modal.width+"px",marginTop:"20px"}):this.$modal.css({width:this.modal.width+"px",marginTop:i/2-t/2+"px"}))},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(e){this.$modalHeader.html(e)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof e.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(e){13===e.which&&(e.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var t=e("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));t.on("click",e.proxy(this.modal.close,this)),this.$modalFooter.append(t)},createDeleteButton:function(e){return this.modal.createButton(e,"delete")},createActionButton:function(e){return this.modal.createButton(e,"action")},createButton:function(t,i){var n=e("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(t);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var e=this.$modalFooter.find("button"),t=e.length;0!==t&&e.css("width",100/t+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=e('<div id="redactor-modal-box" />').hide(),this.$modal=e('<div id="redactor-modal" />'),this.$modalHeader=e("<header />"),this.$modalClose=e('<span id="redactor-modal-close" />').html("&times;"),this.$modalBody=e('<div id="redactor-modal-body" />'),this.$modalFooter=e("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=e('<div id="redactor-modal-overlay">').hide(),e("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",e.proxy(this.modal.close,this)),e(document).on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",e.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),e(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),e(window).off("resize.redactor-modal")},closeHandler:function(e){e.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(t){if(t){if(!e(t.target).hasClass("redactor-modal-close-btn")&&t.target!==this.$modalClose[0]&&t.target!==this.$modalBox[0])return;t.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",e.proxy(function(){this.$modalBox.remove(),setTimeout(e.proxy(this.utils.restoreScroll,this),0),void 0!==t&&this.selection.restore(),e(document.body).removeClass("body-redactor-hidden"),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}},t}),i("modules/observe",["jquery"],function(e){"use strict";function t(){}return t.prototype={load:function(){this.observe.images(),this.observe.links()},buttons:function(t,i){var n=this.selection.getCurrent(),r=this.selection.getParent();if(t!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),t===!1&&"html"!==i)return void(e.inArray(i,this.opts.activeButtons)!==-1&&this.button.toggleActive(i));e.each(this.opts.activeButtonsStates,e.proxy(function(t,i){var a=e(r).closest(t,this.$editor[0]),o=e(n).closest(t,this.$editor[0]);(0===a.length||this.utils.isRedactorParent(a))&&this.utils.isRedactorParent(o)&&(0!==a.length||0!==o.closest(t,this.$editor[0]).length)&&this.button.setActive(i)},this));var a=e(r).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(this.utils.isRedactorParent(r)&&a.length){var o=""===a.css("text-align")?"left":a.css("text-align");this.button.setActive("align"+o)}},addButton:function(e,t){this.opts.activeButtons.push(t),this.opts.activeButtonsStates[e]=t},images:function(){var t=this;this.$editor.find("img,video,iframe,audio,table").each(function(i,n){var r=e(n);r.closest("a").on("click",function(e){e.preventDefault()}),t.utils.browser("msie")&&r.attr("unselectable","on"),t.$element.trigger("observed.redactor."+n.tagName.toLowerCase(),n)})},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)),e(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(e){return e.offset()},showTooltip:function(t){var i=e(t.target);if(t.stopPropagation(),"IMG"!==i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,r=this.observe.getTooltipPosition(n),a=e('<span class="redactor-link-tooltip"></span>'),o=n.attr("href");void 0===o&&(o=""),o.length>24&&(o=o.substring(0,24)+"...");var s=e('<a href="'+n.attr("href")+'" target="_blank" />').html(o).addClass("redactor-link-tooltip-action"),l=e('<a href="#" />').html(this.lang.get("edit")).on("click",e.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),d=e('<a href="#" />').html(this.lang.get("unlink")).on("click",e.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");a.append(s).append(" | ").append(l).append(" | ").append(d),a.css({top:r.top+(parseInt(n.css("line-height"),10)||parseInt(n.css("font-size"),10))+"px",left:r.left+"px"}),e(".redactor-link-tooltip").remove(),e(document.body).append(a)}},closeTooltip:function(t){t=t.originalEvent||t;var i=t.target,n=e(i).closest("a",this.$editor[0]);0!==n.length&&"A"===n[0].tagName&&"A"!==i.tagName||"A"===i.tagName&&this.utils.isRedactorParent(i)||e(i).hasClass("redactor-link-tooltip-action")||e(".redactor-link-tooltip").remove()}},t}),i("modules/paragraphize",["jquery"],function(e){"use strict";function t(){}return t.prototype={load:function(t){return this.opts.linebreaks?t:""===t||"<p></p>"===t?this.opts.emptyHtml:(t+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),t=this.paragraphize.getSafes(t),t=this.paragraphize.getSafesComments(t),t=this.paragraphize.replaceBreaksToNewLines(t),t=this.paragraphize.replaceBreaksToParagraphs(t),t=this.paragraphize.clear(t),t=this.paragraphize.restoreSafes(t),t=t.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")([^>]*)>","gi"),"<p><br /></p>\n<$1$2>"),e.trim(t))},getSafes:function(t){var i=e("<div />").append(t);return i.find("blockquote p").replaceWith(function(){return e(this).append("<br />").contents()}),t=i.html(),i.find(this.opts.paragraphizeBlocks.join(", ")).each(e.proxy(function(e,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t=t.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),t},getSafesComments:function(t){var i=t.match(/<!--([\w\W]*?)-->/gi);return i?(e.each(i,e.proxy(function(e,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,t=t.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),t):t},restoreSafes:function(t){return e.each(this.paragraphize.safes,function(e,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,t=t.replace("{replace"+e+"}",i)}),t},replaceBreaksToParagraphs:function(e){var t=e.split(new RegExp("\n","g"),-1);if(e="",t)for(var i=t.length,n=0;n<i;n++){if(!t.hasOwnProperty(n))return;t[n].search("{replace")===-1?(t[n]=t[n].replace(/<p>\n\t?<\/p>/gi,""),t[n]=t[n].replace(/<p><\/p>/gi,""),""!==t[n]&&(e+="<p>"+t[n].replace(/^\n+|\n+$/g,"")+"</p>")):e+=t[n]}return e},replaceBreaksToNewLines:function(e){return e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n"),e=e.replace(new RegExp("\r\n","g"),"\n"),e=e.replace(new RegExp("\r","g"),"\n"),e=e.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(e){return e=e.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),e=e.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),e=e.replace(new RegExp("<p><p ","gi"),"<p "),e=e.replace(new RegExp("<p><p>","gi"),"<p>"),e=e.replace(new RegExp("</p></p>","gi"),"</p>"),e=e.replace(new RegExp("<p>\\s?</p>","gi"),""),e=e.replace(new RegExp("\n</p>","gi"),"</p>"),e=e.replace(new RegExp("<p>\t?\t?\n?<p>","gi"),"<p>"),e=e.replace(new RegExp("<p>\t*</p>","gi"),"")}},t}),i("modules/paste",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),e(window).on("scroll.redactor-freeze",e.proxy(function(){e(window).scrollTop(this.saveBodyScroll)},this)),setTimeout(e.proxy(function(){var t=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(t),e(window).off("scroll.redactor-freeze"),this.linkify.isEnabled()&&this.linkify.format()},this),1),void 0):void setTimeout(e.proxy(this.code.sync,this),1)},createPasteBox:function(){this.$pasteBox=e("<div>").html("<p></p>").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.utils.browser("msie")?this.$box.append(this.$pasteBox):e("body").append(this.$pasteBox),this.$pasteBox[0].focus()},insert:function(t){t=this.core.setCallback("pasteBefore",t),t=this.utils.isSelectAll()?this.clean.onPaste(t,!1):this.clean.onPaste(t),t=this.core.setCallback("paste",t),t=this.paragraphize.load(t),this.utils.isSelectAll()?this.insert.set(t,!1):this.insert.html(t,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(e.proxy(this.clean.clearUnverified,this),10),setTimeout(e.proxy(function(){var t=this.$editor.find("span");e.each(t,function(t,i){var n=i.innerHTML.replace(/[\u200B-\u200D\uFEFF]/,"");""===n&&0===i.attributes.length&&e(i).remove()})},this),10)}},t}),i("modules/placeholder",["jquery"],function(e){"use strict";function t(){}return t.prototype={enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keyup.redactor-placeholder",e.proxy(this.placeholder.toggle,this)))},toggle:function(){var e="removeClass";this.utils.isEmpty(this.$editor.html(),!1)&&(e="addClass"),this.$editor[e]("redactor-placeholder")},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):"undefined"!=typeof this.$element.attr("placeholder")&&""!==this.$element.attr("placeholder")}},t}),i("modules/progress",["jquery"],function(e){"use strict";function t(){}return t.prototype={show:function(){e(document.body).append(e('<div id="redactor-progress"><span></span></div>')),e("#redactor-progress").fadeIn()},hide:function(){e("#redactor-progress").fadeOut(1500,function(){e(this).remove()})}},t}),i("modules/resize",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){this.opts.resizable&&this.resize.buildResizer()},buildResizer:function(){return this.opts.resize!==!1&&(this.$resizer=e('<span class="redactor-resize-handle"></span>'),this.$dimensions=e('<div class="redactor-resize-dimensions"></div>'),this.$box.append(this.$resizer),this.$box.append(this.$dimensions),this.$resizer.mousedown(e.proxy(this.resize.initResize,this)),void 0)},initResize:function(t){t.preventDefault&&t.preventDefault(),this.splitter=t.target,this.element_resize_parent=this.$box,this.opts.iframe?this.element_resize=this.$frame:this.element_resize=this.$editor,this.resize.stopResizeHdl=e.proxy(this.resize.stopResize,this),this.resize.startResizeHdl=e.proxy(this.resize.startResize,this),this.resize.resizeHdl=e.proxy(this.resize.doResize,this),e(document).mousedown(this.resize.startResizeHdl),e(document).mouseup(this.resize.stopResizeHdl),e(this.splitter).mouseup(this.resize.stopResizeHdl),this.null_pointX=!1,this.null_pointY=!1,this.h_new=!1,this.h=this.element_resize.height(),this.w_new=!1,this.w=this.element_resize.width()},startResize:function(){this.fs.hideEditableControls(),e(document).mousemove(this.resize.resizeHdl),this.$box.addClass("resize-outline"),this.$dimensions.show()},doResize:function(t){this.resize.resizeHoverIn.apply(this),t.preventDefault&&t.preventDefault();var i=t.pageY,n=t.pageX;this.null_pointX===!1&&(this.null_pointX=n),this.null_pointY===!1&&(this.null_pointY=i),this.h_new===!1&&(this.h_new=this.element_resize_parent.outerHeight()),this.w_new===!1&&(this.w_new=this.element_resize_parent.outerWidth());var r=this.h_new+i-this.null_pointY,a=this.w_new+n-this.null_pointX;r<=204&&(r=204),a<=204&&(a=204),r>=0&&(this.element_resize[0].style.height=r-this.$toolbar.height()+"px",this.element_resize_parent[0].style.height=r+"px",this.$textarea[0].style.height=r+"px"),a>=0&&(this.element_resize_parent[0].style.width=a+"px",this.$textarea[0].style.width=a+"px"),e(this.element_resize).trigger("resize")},stopResize:function(){e(document).unbind("mousemove",this.resize.resizeHdl),e(document).unbind("mousedown",this.resize.startResizeHdl),e(document).unbind("mouseup",this.resize.stopResizeHdl),e(this.splitter).unbind("mouseup",this.resize.stopResizeHdl),this.$box.removeClass("resize-outline"),this.$dimensions.hide()},resizeHoverIn:function(){this.$dimensions.show().html("<span>"+this.element_resize.width()+"px \xd7 "+this.element_resize.height()+"px </span>").css({top:this.element_resize.position().top,left:this.element_resize.position().left,lineHeight:this.element_resize.height()+"px",width:this.element_resize.outerWidth(),height:this.element_resize.outerHeight()})}},t}),i("modules/selection",["jquery"],function(e){"use strict";function t(){}return t.prototype={get:function(){this.sel=document.getSelection(),document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.range=this.sel.getRangeAt(0):this.range=document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(e){}this.sel.addRange(this.range)},getCurrent:function(){var e=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(e=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(e)},getParent:function(t){return t=t||this.selection.getCurrent(),!!t&&this.utils.isRedactorParent(e(t).parent()[0])},getBlock:function(t){for(t=t||this.selection.getCurrent();t;){if(this.utils.isBlockTag(t.tagName))return!e(t).hasClass("redactor-editor")&&t;t=t.parentNode}return!1},getInlines:function(t,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];t="undefined"==typeof t||t===!1?this.selection.getNodes():t;var r=this.opts.inlineTags;if(r.push("span"),"undefined"!=typeof i)for(var a=0;a<i.length;a++)r.push(i[a]);return e.each(t,e.proxy(function(t,i){e.inArray(i.tagName.toLowerCase(),r)!==-1&&n.push(i)},this)),0!==n.length&&n},getInlinesTags:function(t){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return e.each(n,e.proxy(function(n,r){e.inArray(r.tagName.toLowerCase(),t)!==-1&&i.push(r)},this)),0!==i.length&&i},getBlocks:function(t){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return t="undefined"==typeof t?this.selection.getNodes():t,e.each(t,e.proxy(function(e,t){this.utils.isBlock(t)&&(this.selection.lastBlock=t,i.push(t))},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var t=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2),n=this.range.cloneRange();if(this.range.collapsed===!1){var r=n.startContainer,a=n.startOffset;this.selection.setNodesMarker(n,i,!1),n.setStart(r,a),this.selection.setNodesMarker(n,t,!0)}else this.selection.setNodesMarker(n,t,!0),i=t;var o=[],s=0,l=this;this.$editor.find("*").each(function(){if(this===t){var n=e(this).parent();0!==n.length&&"BODY"!==n[0].tagName&&l.utils.isRedactorParent(n[0])&&o.push(n[0]),o.push(this),s=1}else s>0&&(o.push(this),s+=1);if(this===i)return!1});for(var d=[],c=o.length,u=0;u<c;u++)"nodes-marker-1"!==o[u].id&&"nodes-marker-2"!==o[u].id&&d.push(o[u]);return this.selection.removeNodesMarkers(),d},getNodesMarker:function(t){return e('<span id="nodes-marker-'+t+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(e,t,i){try{e.collapse(i),e.insertNode(t)}catch(e){}},removeNodesMarkers:function(){e(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(e,t){this.caret.setOffset(e,t)},wrap:function(e){
if(this.selection.get(),this.range.collapsed)return!1;var t=document.createElement(e);return t.appendChild(this.range.extractContents()),this.range.insertNode(t),t},selectElement:function(e){this.caret.set(e,0,e,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var e=this.selection.getMarker(1);if(this.selection.setMarker(this.range,e,!0),this.range.collapsed===!1){var t=this.selection.getMarker(2);this.selection.setMarker(this.range,t,!1)}this.savedSel=this.$editor.html()},getMarker:function(t){return"undefined"==typeof t&&(t=1),e('<span id="selection-marker-'+t+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(e){return this.utils.getOuterHtml(this.selection.getMarker(e))},setMarker:function(e,t,i){e=e.cloneRange();try{e.collapse(i),e.insertNode(t)}catch(e){this.focus.setStart()}},restore:function(){var e=this.$editor.find("span#selection-marker-1"),t=this.$editor.find("span#selection-marker-2");0!==e.length&&0!==t.length?this.caret.set(e,0,t,0):0!==e.length?this.caret.set(e,0,e,0):this.$editor[0].focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(t,i){var n=e(i).text().replace(/[\u200B-\u200D\uFEFF]/g,"");""===n?e(i).remove():e(i).replaceWith(function(){return e(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var e="";if(this.selection.get(),this.sel.rangeCount){for(var t=document.createElement("div"),i=this.sel.rangeCount,n=0;n<i;++n)t.appendChild(this.sel.getRangeAt(n).cloneContents());e=t.innerHTML}return this.clean.onSync(e)},replaceWithHtml:function(e){if(e=this.selection.getMarkerAsHtml(1)+e+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt){this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n=document.createDocumentFragment();i=t.firstChild;)n.appendChild(i);this.range.insertNode(n)}else document.selection&&document.selection.createRange&&this.range.pasteHTML(e);this.selection.restore(),this.code.sync()}},t}),i("modules/shortcuts",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t,i){return this.opts.shortcuts?void e.each(this.opts.shortcuts,e.proxy(function(i,n){for(var r=i.split(","),a=r.length,o=0;o<a;o++)"string"==typeof r[o]&&this.shortcuts.handler(t,e.trim(r[o]),e.proxy(function(){var e;"-1"!==n.func.search(/\./)?(e=n.func.split("."),"undefined"!=typeof this[e[0]]&&this[e[0]][e[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):((t.ctrlKey||t.metaKey)&&(66===i||73===i)&&t.preventDefault(),!1)},handler:function(t,i,n){var r={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var o=r[t.keyCode],s=String.fromCharCode(t.which).toLowerCase(),l="",d={};e.each(["alt","ctrl","meta","shift"],function(e,i){t[i+"Key"]&&o!==i&&(l+=i+"+")}),o&&(d[l+o]=!0),s&&(d[l+s]=!0,d[l+a[s]]=!0,"shift+"===l&&(d[a[s]]=!0));for(var c=0,u=i.length;c<u;c++)if(d[i[c]])return t.preventDefault(),n.apply(this,arguments)}},t}),i("modules/styles",["jquery"],function(e){"use strict";function t(){}return t.prototype={applyStylePreview:function(t){var i,n=e("<span></span>"),r={},a=this,o=["background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","color","font-family","font-kerning","font-size","font-style","font-variant","font-variant-ligatures","font-weight","text-align","text-decoration","text-indent","text-rendering","text-shadow","text-overflow","text-transform","line-height","outline-color","outline-offset","outline-style","outline-width","padding-bottom","padding-left","padding-right","padding-top"];r.RedactorClearStyle={title:"None",func:"styles.setStyle"},e.each(a.opts.classes,function(e,t){r[t["class"]]={title:t.name,func:"styles.setStyle"}}),i=this.button.addDropdown(this.$toolbar.find(".re-styles"),r),this.dropdown.show(t,"styles"),n.appendTo(this.$editor),i.children("a").each(function(t,i){var r,a=i.className.replace("redactor-dropdown-","");n.removeClass().addClass(a),r=window.getComputedStyle(n.get(0)),e.each(r,function(t,n){var a=r.getPropertyValue(n);return"display"===n&&"none"===a?void e(i).html(e(i).html()+" <em>(Hidden)</em>"):("color"===n&&"rgb(255, 255, 255)"===a&&(a="rgb(0, 0, 0)"),void(e.inArray(n,o)!==-1&&(i.style[n]=a)))})}),n.remove(),t.preventDefault()},parseForClasses:function(){var t=this;if(t.opts.localStylesheet){var i,n;e.each(document.styleSheets,function(e,n){if(n.href&&n.href.indexOf(t.opts.localStylesheet)>=0)return i=n,!1}),i&&(n=i.cssRules||i.rules||[],e.each(n,function(e,i){if(!i.selectorText)return!0;var n=i.selectorText.replace(/.redactor-editor/g,""),r=/\.[a-zA-Z0-9-_]+/.exec(n),a=/stylename_[a-zA-Z0-9-_]+/.exec(n);a&&(a=a[0].replace("stylename_","").replace(/__/g," ").replace(/\b[a-z]/g,function(e){return e.toUpperCase()})),r&&(r=r[0].replace(/^\./,"")),r&&r.length&&a&&a.length&&t.opts.classes.push({"class":r,name:a})}))}},initialize:function(){if(this.opts.classes||(this.opts.classes=[]),this.styles.parseForClasses(),this.opts.buttons.indexOf("styles")!==-1){var e=this.button.addAfter("formatting","styles","Style",null,{});this.$toolbar.find("a.re-styles").addClass("fsredactor-icon fsredactor-style re-has-dropdown"),e.one("click",this.styles.applyStylePreview)}},clearStyles:function(){return e("#redactor-overlay-box").length?(this.fs.$editTarget.removeAttr("class"),void this.code.sync()):(e.each(this.selection.getNodes(),function(t,i){e(i).removeAttr("class")}),void this.code.sync())},setStyle:function(t){return"RedactorClearStyle"===t?void this.styles.clearStyles():void this.fs.setInlineStyle(function(i){e(i).addClass(t)})}},t}),i("modules/tabifier",[],function(){"use strict";function e(){}return e.prototype={get:function(e){if(!this.opts.tabifier)return e;var t=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+t.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+t.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var r=0,a=e.length,o=0,s=null,l=null,d="",c="",u="";for(this.tabifier.cleanlevel=0;r<a;r++){if(o=r,-1===e.substr(r).indexOf("<"))return c+=e.substr(r),this.tabifier.finish(c);for(;o<a&&"<"!==e.charAt(o);)o++;for(r!==o&&(u=e.substr(r,o-r),u.match(/^\s{2,}$/g)||("\n"===c.charAt(c.length-1)?c+=this.tabifier.getTabs():"\n"===u.charAt(0)&&(c+="\n"+this.tabifier.getTabs(),u=u.replace(/^\s+/,"")),c+=u),u.match(/\n/)&&(c+="\n"+this.tabifier.getTabs())),s=o;o<a&&">"!==e.charAt(o);)o++;d=e.substr(s,o-s),r=o;var h;if("!--"===d.substr(1,3)){if(!d.match(/--$/)){for(;"-->"!==e.substr(o,3);)o++;o+=2,d=e.substr(s,o-s),r=o}"\n"!==c.charAt(c.length-1)&&(c+="\n"),c+=this.tabifier.getTabs(),c+=d+">\n"}else"!"===d[1]?c=this.tabifier.placeTag(d+">",c):"?"===d[1]?c+=d+">\n":(h=d.match(/^<(script|style|pre)/i))?(h[1]=h[1].toLowerCase(),d=this.tabifier.cleanTag(d),c=this.tabifier.placeTag(d,c),l=String(e.substr(r+1)).toLowerCase().indexOf("</"+h[1]),l&&(u=e.substr(r+1,l),r+=l,c+=u)):(d=this.tabifier.cleanTag(d),c=this.tabifier.placeTag(d,c))}return this.tabifier.finish(c)},getTabs:function(){for(var e="",t=0;t<this.tabifier.cleanlevel;t++)e+="\t";return e},finish:function(e){return e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/,""),e=e.replace(/[\s\n]*$/,""),e=e.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,e},cleanTag:function(e){var t="";e=e.replace(/\n/g," "),e=e.replace(/\s{2,}/g," "),e=e.replace(/^\s+|\s+$/g," ");var i="";e.match(/\/$/)&&(i="/",e=e.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(e);)n[2]?t+=n[1].toLowerCase()+"="+n[2]:n[1]&&(t+=n[1].toLowerCase()),t+=" ",e=e.substr(n[0].length);return t.replace(/\s*$/,"")+i+">"},placeTag:function(e,t){var i=e.match(this.tabifier.newLevel);return(e.match(this.tabifier.lineBefore)||i)&&(t=t.replace(/\s*$/,""),t+="\n"),i&&"/"===e.charAt(1)&&this.tabifier.cleanlevel--,"\n"===t.charAt(t.length-1)&&(t+=this.tabifier.getTabs()),i&&"/"!==e.charAt(1)&&this.tabifier.cleanlevel++,t+=e,(e.match(this.tabifier.lineAfter)||e.match(this.tabifier.newLevel))&&(t=t.replace(/ *$/,"")),t}},e}),i("text!view/table/settings_modal.html",[],function(){return'<section>\r\n\t<div class="redactor-table-column1-fieldset">\r\n\t\t<label for="redactor-table-columns">Columns</label><input id="redactor-table-columns" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column2-fieldset">\r\n\t\t<label for="redactor-table-rows">Rows</label><input id="redactor-table-rows" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<div class="redactor-table-column1-fieldset">\r\n\t\t<label for="redactor-table-cellspacing">Cellspacing</label><input id="redactor-table-cellspacing" type="number"/>px\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<div class="redactor-table-column1-fieldset">\r\n\t\t<label for="redactor-table-width">Width</label><input id="redactor-table-width" placeholder="auto" type="number"/>\r\n\t\t\t<select id="redactor-table-width-unit"><option>%</option><option>px</option></select>\r\n\t</div>\r\n\t<div class="redactor-table-column2-fieldset">\r\n\t\t<label for="redactor-table-height">Height</label><input id="redactor-table-height" placeholder="auto" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<label for="redactor-table-align">Alignment</label>\r\n\t<ul id="redactor-table-align">\r\n\t\t<li><input id="redactor-table-align-none" name="redactor-table-align" type="radio" value=""><label for="redactor-table-align-none">None</label></li>\r\n\t\t<li><input id="redactor-table-align-left" name="redactor-table-align" type="radio" value="left"><label for="redactor-table-align-left">Left</label></li>\r\n\t\t<li><input id="redactor-table-align-center" name="redactor-table-align" type="radio" value="center"><label for="redactor-table-align-center">Center</label></li>\r\n\t\t<li><input id="redactor-table-align-right" name="redactor-table-align" type="radio" value="right"><label for="redactor-table-align-right">Right</label></li>\r\n\t</ul>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-class">Class</label><input id="redactor-table-class" placeholder="Choose class..." type="text" />\r\n\t</div>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-border">Border</label><input id="redactor-table-border" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-background-color">Background Color</label><input id="redactor-table-background-color" type="text"/><button type="button" for="redactor-table-background-color" class="redactor-color-picker-button"></button>\r\n\t</div>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-border-color">Border Color</label><input id="redactor-table-border-color" type="text"/><button type="button" for="redactor-table-border-color" class="redactor-color-picker-button"></button>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n</section>\r\n'}),i("text!view/table/border_dropdown.html",[],function(){return'<label for="redactor-table-edit-border">Border</label>\r\n<input type="number" name="redactor-table-edit-border" id="redactor-table-edit-border" />px\r\n<div>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-top">Top</button>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-bottom">Bottom</button>\r\n</div>\r\n<div>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-left">Left</button>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-right">Right</button>\r\n</div>\r\n'}),i("text!view/table/width_dropdown.html",[],function(){return'<label for="redactor-table-edit-width">Width</label><input type="number" name="redactor-table-edit-width" id="redactor-table-edit-width" />\r\n<label><select id="redactor-table-edit-width-unit"><option>%</option><option>px</option></select></label>\r\n'}),i("modules/table",["jquery","text!view/table/settings_modal.html","text!view/table/border_dropdown.html","text!view/table/width_dropdown.html"],function(e,t,i,n){"use strict";function r(){}var a="redactor-table-cell-selected",o="."+a,s="td, th",l="&#8203;";return r.prototype={initialize:function(){var r=this,a={};a.insert_table={title:this.lang.get("insert_table"),func:this.table.show};var o=this.button.get("table");o.length&&(this.button.addDropdown(o,a),o=this.button.add("table-align","Alignment"),this.button.addDropdown(o,{left:{title:"Left",func:this.table.align},right:{title:"Right",func:this.table.align},center:{title:"Center",func:this.table.align}}),o=this.button.add("table-vertical-align","Vertical Alignment"),this.button.addDropdown(o,{top:{title:"Top",func:this.table.verticalAlign},middle:{title:"Middle",func:this.table.verticalAlign},bottom:{title:"Bottom",func:this.table.verticalAlign}}),o=this.button.add("table-rows-columns","Rows and Columns"),this.button.addDropdown(o,{addRowAbove:{title:"Add Row Above",func:this.table.addRowAbove},addRowBelow:{title:"Add Row Below",func:this.table.addRowBelow},addColumnBefore:{title:"Add Column Before",func:this.table.addColumnBefore},addColumnAfter:{title:"Add Column After",func:this.table.addColumnAfter},removeRow:{title:"Remove Row",func:this.table.removeRow},removeColumn:{title:"Remove Column",func:this.table.removeColumn},selectRow:{title:"Select Row",func:this.table.selectRow},selectColumn:{title:"Select Column",func:this.table.selectColumn},selectAll:{title:"Select All Cells",func:this.table.selectAllCells},toggleTH:{title:"Toggle as Table Headers",func:this.table.swapCellType}}),o=this.button.add("table-border","Border"),this.button.addDropdown(o),a=o.data("dropdown")[0],a.innerHTML=i,e(".re-table-border",this.$toolbar).on("click",function(){var t=parseInt(r.table.getSelectionCommonProperty("borderTopWidth")),i=parseInt(r.table.getSelectionCommonProperty("borderRightWidth")),n=parseInt(r.table.getSelectionCommonProperty("borderBottomWidth")),a=parseInt(r.table.getSelectionCommonProperty("borderLeftWidth"));e("#redactor-table-edit-border").val(Math.max(1,t,i,n,a)),e("#redactor-table-edit-border-top").toggleClass("redactor-button-active",!!t),e("#redactor-table-edit-border-right").toggleClass("redactor-button-active",!!i),e("#redactor-table-edit-border-bottom").toggleClass("redactor-button-active",!!n),e("#redactor-table-edit-border-left").toggleClass("redactor-button-active",!!a)}),e(a).on("click",".redactor-table-edit-border-toggle",function(){return e(this).toggleClass("redactor-button-active"),r.table.processBorder(e(this).closest(".redactor-dropdown")),!1}).on("click change keyup","#redactor-table-edit-border",function(){return r.table.processBorder(e(this).closest(".redactor-dropdown")),!1}),o=this.button.add("table-border-color","Border Color"),a=this.button.addDropdown(o),a.width(242),this.fs.buildPicker(a,"borderColor",this.fs.colors,this.table.setBorderColor,this.table.removeBorderColor),o=this.button.add("table-background-color","Background Color"),a=this.button.addDropdown(o),a.width(242),this.fs.buildPicker(a,"backgroundColor",this.fs.colors,this.table.setBackgroundColor,this.table.removeBackgroundColor),o=this.button.add("table-width","Width"),this.button.addDropdown(o),a=o.data("dropdown")[0],a.innerHTML=n,e(".re-table-width",this.$toolbar).on("click",function(){var t=r.table.getSelectionColumns(),i="100",n="%";if(t.length){var o=t[0].style.width;e.trim(o).length&&(i=parseInt(o),n=o.replace(/\d+/,""))}e("#redactor-table-edit-width",a).val(i),e("#redactor-table-edit-width-unit",a).val(n)}),e(a).on("click change keyup","#redactor-table-edit-width, #redactor-table-edit-width-unit",function(){return r.table.processWidth(e(this).closest(".redactor-dropdown")),!1}),this.$toolbar.find(".re-table-align, .re-table-vertical-align, .re-table-rows-columns, .re-table-border, .re-table-border-color, .re-table-background-color, .re-table-width").addClass("redactor-table-edit-only-button redactor-button-hidden"),this.$toolbar.find(".re-table").addClass("redactor-table-edit-button"),this.table.modal_table_edit=t,this.$element.on("sync.redactor-api",this.table.onSync),this.$element.on("observed.redactor.table",this.table.setEditable))},onSync:function(){var e=this.$textarea.val();e=e.replace(/(<table([^>]*)class="([^>]*))redactor-table-selected/gi,"$1"),e=e.replace(/(<table([^>]*)class="([^>]*))redactor-table-edit-mode/gi,"$1"),this.$textarea.val(e)},setEditable:function(t,i){var n=this,r=e(i),a=[];return a.push({name:"Delete","class":"re-trash",title:"Delete Table",onClick:function(){return!!confirm("Are you sure you want to delete this table?")&&(n.fs.hideEditableControls(),r.remove(),n.code.sync(),void 0)}}),a.push({name:"Settings","class":"re-cog",title:"Edit Table Properties",onClick:function(){return n.table.show(r),!1}}),a.push({name:"Edit","class":"re-pencil",title:"Edit Table Cells",onClick:function(){return n.table.enableTableEditMode(r),!1}}),r.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(t){return(!r.closest(n.fs.$editTarget).length||!n.$editor.hasClass("redactor-table-edit-mode"))&&(e(t.target).closest("table")[0]!==n.table.getSelectedTable()[0]&&(n.table.tableCleanUp(r),n.table.setSelectedTable(r[0]),n.fs.loadEditableControls({bCancelSelection:!0,element:r,buttons:a,offset:{top:-20,left:-1},onHide:function(){return r[0]===n.table.getSelectedTable()[0]&&(n.table.disableTableEditMode(r),n.table.setSelectedTable(null)),!0}}),t.stopPropagation(),t.preventDefault(),void 0))}),!1},enableTableEditMode:function(t){var i=this,n=e(this.selection.getNodes()).filter("td,th");return this.$editor.hasClass("redactor-table-edit-mode")?void this.table.disableTableEditMode(t):(this.$editor.addClass("redactor-table-edit-mode").prop("contenteditable",!1).prepend('<div class="redactor-table-edit-mode-overlay">'),this.$toolbar.find(".re-table").addClass("redactor-active").on("click.redactor-table-edit",function(){return i.table.disableTableEditMode(t),i.dropdown.hideAll(),!1}),t.find("td,th").each(function(){e(this).attr("unselectable","on")}),this.table.$previousButtons=this.$toolbar.find("a:not(.redactor-table-edit-button, .redactor-button-hidden)"),this.table.$previousButtons.addClass("redactor-button-hidden"),this.$toolbar.find(".redactor-table-edit-only-button").removeClass("redactor-button-hidden"),t.addClass("redactor-table-edit-mode"),this.table.setLastSelected(null),this.selection.remove(),n.length&&this.table.setSelection(n),t.on("mousedown.redactor-table-edit",s,function(){var n=e(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this,r=t.find(o);t.off("mouseover.redactor-table-edit").on("mouseover.redactor-table-edit",s,function(o){var s=e(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this;i.table.expandSelection(t,n,s,!0),(o.ctrlKey||o.metaKey)&&r.addClass(a)}).on("mouseup.redactor-table-edit",function(){t.off("mouseover.redactor-table-edit")}),i.dropdown.hideAll()}).on("click.redactor-table-edit",s,function(n){var r=e(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this;n.shiftKey&&i.table.getLastSelected()?(!n.ctrlKey&&!n.metaKey&&i.table.resetSelection(t),i.table.expandSelection(t,i.table.getLastSelected(),r),i.table.setLastSelected(r)):n.ctrlKey||n.metaKey?(e(r).toggleClass(a),e(r).hasClass(a)&&i.table.setLastSelected(r)):(i.table.resetSelection(t),e(r).addClass(a),i.table.setLastSelected(r))}),void 0)},disableTableEditMode:function(t){return!!t.length&&(this.$editor.removeClass("redactor-table-edit-mode").prop("contenteditable",!0).find(".redactor-table-edit-mode-overlay").remove(),this.$toolbar.find(".re-table").removeClass("redactor-active").off(".redactor-table-edit"),this.$toolbar.find(".redactor-table-edit-only-button").addClass("redactor-button-hidden"),t.removeClass("redactor-table-edit-mode").find(o).removeClass(a),t.find("td,th").each(function(){e(this).removeAttr("unselectable")}),this.opts.visual&&this.table.$previousButtons&&this.table.$previousButtons.removeClass("redactor-button-hidden"),t.off(".redactor-table-edit"),this.code.sync(),void 0)},tableCleanUp:function(t){t.find("td, th").each(function(){var t,i=e(this),n=i.contents();if(n.length)for(t in n)if(3!==n[t].nodeType)return;(!n.length||!/[\w]/.test(i.contents().text()))&&i.html(l)})},align:function(e){this.table.getSelection().css("text-align",e)},verticalAlign:function(e){this.table.getSelection().css("vertical-align",e)},getLastSelected:function(){return this.table.lastSelected=this.table.lastSelected||this.table.getSelection().get(0),this.table.lastSelected},setLastSelected:function(e){this.table.lastSelected=e},setSelection:function(t,i){i&&this.table.resetSelection(this.table.getSelectedTable()),e(t).addClass(a)},getSelection:function(){return e(this.table.target).find(o)},getSelectionCommonProperty:function(e){var t;return this.table.getSelection().each(function(){if(t){if(t!==this.style[e])return t=!1,!1}else t=this.style[e]}),t},getSelectionColumns:function(){var t=this.table.getSelectionColumnIndexes(),i=e(),n=this.table.getSelectedTable();return e.each(t,function(e,t){i=i.add(n.find("colgroup").children("col").eq(t))}),i},getSelectionColumnIndexes:function(){return e.unique(this.table.getSelection().map(function(){return e(this).index()})).get()},setupColumns:function(){var t=this.table.getSelectedTable(),i=t.find("col").length,n=t.find("colgroup"),r=0;for(n.length||(t.prepend("<colgroup>"),n=t.find("colgroup")),e("tr:first",t).find("> td, > th").each(function(){e(this).attr("colspan")?r+=+e(this).attr("colspan"):r++});i<r;i++)n.append("<col/>")},getSelectedTable:function(){return e(this.table.target)},setSelectedTable:function(t){this.table.target=t,this.$editor.find(".redactor-table-selected").removeClass("redactor-table-selected"),e(this.table.target).addClass("redactor-table-selected"),this.table.setupColumns(),this.table.setLastSelected(null)},resetSelection:function(e){e.find(o).removeClass(a)},expandSelection:function(e,t,i,n){var r,o,s=Math.min(t.cellIndex,i.cellIndex),l=Math.min(t.parentNode.rowIndex,i.parentNode.rowIndex),d=Math.max(t.cellIndex,i.cellIndex),c=Math.max(t.parentNode.rowIndex,i.parentNode.rowIndex);for(n&&this.table.resetSelection(e),o=l;o<=c;o++)for(r=s;r<=d;r++)e.find("> tr, > thead > tr, > tbody > tr, > tfoot > tr").eq(o).find("> td, > th").eq(r).addClass(a)},show:function(t){var i=this;"insert_table"===t&&(t=!1),this.modal.addTemplate("table",this.table.modal_table_edit),this.modal.load("table",this.lang.get("insert_table"),500),this.modal.createCancelButton();var n=this.modal.createActionButton(this.lang.get("save"));n.on("click",function(){i.table.save(t)}),this.selection.save(),this.modal.show();var r=e('<div style="display:none; position:absolute; background: #fff"/>');if(this.$modal.append(r),this.$modal.on("keyup change","#redactor-table-background-color, #redactor-table-border-color",function(){var t=e(this);t.next(".redactor-color-picker-button").css("backgroundColor",t.val())}),this.$modal.on("click",".redactor-color-picker-button",function(){var t=e(this);return r.$triggerer=e("#"+t.attr("for")),r.show().css({top:t.position().top}),i.$modal.one("click",function(){r.hide()}),!1}),this.fs.buildPicker(r,"tableSetting",this.fs.colors,function(e,t){r.$triggerer.val(t).change(),r.hide()},function(){r.$triggerer.val("").change(),r.hide()}),t.length){var a=this.fs.rgb2hex(t[0].style.borderColor)||"#000000",o=this.fs.rgb2hex(t[0].style.backgroundColor);e("#redactor-table-rows").val(t[0].rows.length),e("#redactor-table-columns").val(t[0].rows[0].children.length),e("#redactor-table-cellspacing").val(parseInt(t[0].style.borderSpacing)||0),e("#redactor-table-width").val(parseInt(t[0].style.width)||""),e("#redactor-table-width-unit").val("px"===t[0].style.width.slice(-2)?"px":"%"),e("#redactor-table-height").val(parseInt(t[0].style.height)||""),e("#redactor-table-border").val(parseInt(t[0].style.borderWidth)||0),e("#redactor-table-border-color").val(a),e("#redactor-table-background-color").val(o),e("#redactor-table-align-"+("0px auto"===t[0].style.margin?"center":t[0].style["float"])).prop("checked",!0),t.removeClass("redactor-table-selected"),t.removeClass("redactor-table-edit-mode"),e("#redactor-table-class").val(t[0].className),e('.redactor-color-picker-button[for="redactor-table-background-color"]').css("backgroundColor",o),e('.redactor-color-picker-button[for="redactor-table-border-color"]').css("backgroundColor",a)}if(e.fn.selectize){var s=this.opts.classes?e.map(this.opts.classes,function(e){return{value:e["class"],text:e.name}}):[],l=e("#redactor-table-class").selectize({delimiter:" ",persist:!1,create:!0});l[0].selectize.addOption(s),l[0].selectize.$control.on("keyup",function(e){e.stopPropagation()})}e("#redactor-table-columns")[0].focus()},save:function(t){var i,n,r,a,o=e("#redactor-table-rows").val(),s=e("#redactor-table-columns").val(),d=e("#redactor-table-cellspacing").val(),c=e("#redactor-table-width").val(),u=e("#redactor-table-width-unit").val(),h=e("#redactor-table-height").val(),f=e('input[name="redactor-table-align"]:checked',this.$modal).val(),p=e("#redactor-table-class").val(),g=e("#redactor-table-border").val(),m=e("#redactor-table-border-color").val()||"#000000",v=e("#redactor-table-background-color").val(),y=0,b=0,_=e("<div>"),w=Math.floor(99999*Math.random()),E=!0;if(t.length?(E=!1,y=t[0].rows.length,b=t[0].rows[0].children.length):t=e('<table id="table'+w+'"><tbody></tbody></table>'),t.css({borderCollapse:d>0?"separate":"collapse",borderSpacing:d?d+"px":"",borderWidth:g?g+"px":"",borderColor:m,borderStyle:g?"solid":"",backgroundColor:v,width:c?c+u:"",height:h?h+"px":"","float":"center"===f?"":f}).attr("class",p),"center"===f&&t.css("margin","0px auto"),t.find("tr").each(function(){var t=s-b;if(t>0)for(i=0;i<t;i++)e(this).append(e("<td>"+l+"</td>"));else for(i=0;i<-t;i++)e(this).find("th:last, td:last").remove()}),0===y||y<o)for(i=y;i<o;i++){for(n=e("<tr>"),r=0;r<s;r++)a=e("<td>"+l+"</td>"),0===i&&0===r&&a.append(this.selection.getMarker()),e(n).append(a);t.append(n)}else for(i=y;i>o;i--)t.find("tr:last").remove();if(this.modal.close(),this.selection.restore(),this.code.sync(),E){_.append(t);var T=_.html();this.buffer.set();var S=this.selection.getBlock()||this.selection.getCurrent();S&&"BODY"!==S.tagName&&"TD"!==S.tagName&&"TH"!==S.tagName?("LI"===S.tagName&&(S=e(S).closest("ul, ol")),e(S).after(T)):this.insert.html(T),this.selection.restore();var C=this.$editor.find("#table"+w);if(!this.opts.linebreaks&&(this.utils.browser("mozilla")||this.utils.browser("msie"))){var x=C.next();0===x.length&&C.after(this.opts.emptyHtml)}this.observe.buttons(),this.observe.images(),C.find("span.redactor-selection-marker").remove(),C.removeAttr("id"),this.code.sync(),this.core.setCallback("insertedTable",C)}},getTable:function(){var t=e(this.selection.getParent()).closest("table");return!!this.utils.isRedactorParent(t)&&(0!==t.size()&&t)},addRowAbove:function(){var e=this.table.getCurrentRow();e.before(this.table.newRow(e[0].cells.length))},addRowBelow:function(){var e=this.table.getCurrentRow();e.after(this.table.newRow(e[0].cells.length))},removeRow:function(){this.table.getAllRows().has(o).remove()},getAllRows:function(){return this.table.getSelectedTable().find("> tr, > thead > tr, > tbody > tr, > tfoot > tr")},getCurrentRow:function(){return e(this.table.getLastSelected()).closest("tr")},newRow:function(t){var i,n=e("<tr></tr>");for(i=0;i<t;i++)n.append(e("<td>"+l+"</td>"));return n},addColumnAfter:function(){var t=e(this.table.getLastSelected()).index();this.table.getAllRows().each(function(){e("<td>"+l+"</td>").insertAfter(e("> td,> th",this).eq(t))}),this.table.getSelectedTable().find("> col, > colgroup > col").eq(t).after("<col/>")},addColumnBefore:function(){var t=e(this.table.getLastSelected()).index();this.table.getAllRows().each(function(){e("<td>"+l+"</td>").insertBefore(e("> td,> th",this).eq(t))}),this.table.getSelectedTable().find("> col, > colgroup > col").eq(t).before("<col/>")},removeColumn:function(){var t=this.table.getSelectionColumnIndexes().reverse(),i=this;e.each(t,function(t,n){i.table.getAllRows().each(function(){e("> td,> th",this).eq(n).remove()})})},swapCellType:function(){var t=!1,i=function(t){return function(){var i=e(this),n=e(t),r=n[0];return r.className=this.className,e.extend(r.classList,this.classList),e.extend(r.attributes,this.attributes),n.append(i.contents())}};this.table.getSelection().each(function(n){0===n&&"TH"===this.tagName&&(t=!0),t&&"TD"!==this.tagName?e(this).replaceWith(i("<td>")):"TH"!==this.tagName&&e(this).replaceWith(i("<th>"))})},selectRow:function(){this.table.setSelection(e(this.table.getLastSelected()).siblings("td,th").andSelf(),!0)},selectColumn:function(){var t=e(this.table.getLastSelected()).index();this.table.setSelection(e("td:eq("+t+"),th:eq("+t+")",this.table.getAllRows()),!0)},selectAllCells:function(){this.table.setSelection(e(s,this.table.getAllRows()),!0)},setBorderColor:function(e,t){this.table.getSelection().css("borderColor",t)},removeBorderColor:function(){this.table.getSelection().css("borderColor","")},setBackgroundColor:function(e,t){this.table.getSelection().css("backgroundColor",t)},removeBackgroundColor:function(){this.table.getSelection().css("backgroundColor","")},processBorder:function(t){var i=e("#redactor-table-edit-border-top",t).hasClass("redactor-button-active"),n=e("#redactor-table-edit-border-right",t).hasClass("redactor-button-active"),r=e("#redactor-table-edit-border-bottom",t).hasClass("redactor-button-active"),a=e("#redactor-table-edit-border-left",t).hasClass("redactor-button-active"),o=e("#redactor-table-edit-border",t).val()+"px"||"1px";this.table.getSelection().css({borderTopWidth:i?o:0,borderRightWidth:n?o:0,borderBottomWidth:r?o:0,borderLeftWidth:a?o:0,borderStyle:"solid"})},processWidth:function(t){var i=e("#redactor-table-edit-width",t).val(),n=e("#redactor-table-edit-width-unit",t).val();this.table.getSelectionColumns().css("width",i+n)},restoreAfterDelete:function(e){this.selection.restore(),e.find("span.redactor-selection-marker").remove(),this.code.sync()},deleteTable:function(){var e=this.table.getTable();if(e){this.buffer.set();var t=e.next();this.opts.linebreaks||0===t.length?this.caret.setAfter(e):this.caret.setStart(t),e.remove(),this.code.sync()}}},r}),i("modules/textdirection",[],function(){"use strict";function e(){}return e.prototype={initialize:function(){var e=this,t={};t.ltr={title:"Left to Right",func:e.textdirection.setLtr},t.rtl={title:"Right to Left",
func:e.textdirection.setRtl};var i=this.button.get("textdirection");i.length&&this.button.addDropdown(i,t)},setRtl:function(){this.buffer.set(),this.block.setAttr("dir","rtl")},setLtr:function(){this.buffer.set(),this.block.removeAttr("dir")}},e}),i("modules/tidy",["jquery"],function(e){"use strict";function t(){}return t.prototype={setupAllowed:function(){if(this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var e=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(e),this.opts.deniedTags&&this.tidy.removeFromDenied(e)}},addToAllowed:function(t){for(var i=t.length,n=0;n<i;n++)e.inArray(t[n],this.opts.allowedTags)===-1&&this.opts.allowedTags.push(t[n])},removeFromDenied:function(t){for(var i=t.length,n=0;n<i;n++){var r=e.inArray(t[n],this.opts.deniedTags);r!==-1&&this.opts.deniedTags.splice(r,1)}},load:function(t,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},e.extend(this.tidy.settings,i),t=this.tidy.removeComments(t),this.tidy.$div=e("<div />").append(t),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),t=this.tidy.$div.html(),this.tidy.$div.remove(),t},removeComments:function(e){return this.tidy.settings.removeComments?e.replace(/<!--[\s\S]*?-->/gi,""):e},replaceTags:function(t){if(!this.tidy.settings.replaceTags)return t;for(var i=this.tidy.settings.replaceTags.length,n=[],r=[],a=0;a<i;a++)r.push(this.tidy.settings.replaceTags[a][1]),n.push(this.tidy.settings.replaceTags[a][0]);e.each(n,e.proxy(function(t,i){this.tidy.$div.find(i).replaceWith(function(){return e("<"+r[t]+" />",{html:e(this).html()})})},this))},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var t=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(e.proxy(function(i,n){function r(t,i){var n=document.createElement(i);return e(n).append(e(t).contents())}for(var a=e(n),o=a.attr("style"),s=0;s<t;s++)if(o&&o.match(new RegExp("^"+this.tidy.settings.replaceStyles[s][0],"i"))){var l=this.tidy.settings.replaceStyles[s][1];a.replaceWith(r(a[0],l))}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(t,i){""===i.innerHTML?e(i).remove():e(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(t,i){""===i.innerHTML?e(i).remove():e(i).contents().unwrap()})},removeAttr:function(){var t,i;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var n=[],r=[];for(i=this.tidy.settings.allowedAttr.length,t=0;t<i;t++)n.push(this.tidy.settings.allowedAttr[t][0]),r.push(this.tidy.settings.allowedAttr[t][1]);this.tidy.$div.find("*").each(e.proxy(function(t,i){var a=e(i),o=e.inArray(a[0].tagName.toLowerCase(),n),s=this.tidy.removeAttrGetRemoves(o,r,a);s&&e.each(s,function(e,t){a.removeAttr(t)})},this))}if(this.tidy.settings.removeAttr)for(i=this.tidy.settings.removeAttr.length,t=0;t<i;t++){var a=this.tidy.settings.removeAttr[t][1];e.isArray(a)&&(a=a.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[t][0]).removeAttr(a)}},removeAttrGetRemoves:function(t,i,n){var r=[];return t===-1?e.each(n[0].attributes,function(e,t){r.push(t.name)}):"*"===i[t].toString()?r=[]:e.each(n[0].attributes,function(n,a){e.isArray(i[t])?e.inArray(a.name,i[t])===-1&&r.push(a.name):i[t]!==a.name&&r.push(a.name)}),r},removeAttrs:function(t,i){return i=new RegExp(i,"g"),t.each(function(){for(var t=e(this),n=this.attributes.length-1,r=n;r>=0;r--){var a=this.attributes[r];a&&a.specified&&a.name.search(i)>=0&&t.removeAttr(a.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var t=e(this),i=t.text();i=i.replace(/[\u200B-\u200D\uFEFF]/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===t.children().length&&t.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var t=this.tidy.settings.removeDataAttr;e.isArray(this.tidy.settings.removeDataAttr)&&(t=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(t),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&e(this).contents().unwrap()})}},t}),i("modules/toolbar",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(){return{backcolor:{title:this.lang.get("backcolor")},html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"},h6:{title:this.lang.get("header6"),func:"block.format"}}},fontcolor:{title:this.lang.get("fontcolor")},fontfamily:{title:"Change Font Family"},fontsize:{title:"Change Font Size"},fullscreen:{title:"Fullscreen",func:"fullscreen.toggle"},bold:{title:this.lang.get("bold"),func:"inline.format"},embed:{title:this.lang.get("embed"),func:"embed.show"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show"},unlink:{title:this.lang.get("unlink"),func:"link.unlink"}}},media:{title:this.lang.get("media"),func:"media.show"},table:{title:this.lang.get("table")},textdirection:{title:"Change Text Direction"},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"},undo:{title:"Undo",func:"buffer.undo"},redo:{title:"Redo",func:"buffer.redo"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",e.proxy(this.observe.buttons,this)))},createContainer:function(){return e("<ul>").addClass("redactor-toolbar").attr("id","redactor-toolbar-"+this.uuid)},setFormattingTags:function(){e.each(this.opts.toolbar.formatting.dropdown,e.proxy(function(t){e.inArray(t,this.opts.formatting)===-1&&delete this.opts.toolbar.formatting.dropdown[t]},this))},loadButtons:function(){e.each(this.opts.buttons,e.proxy(function(t,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(e("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),e(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),e(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,e.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var e=this.opts.buttons.indexOf("html");e!==-1&&this.opts.buttons.splice(e,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&e.each(this.opts.buttonsHide,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);i>=0&&this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&e.each(this.opts.buttonsHideOnMobile,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var t=e(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),t>i?this.toolbar.observeScrollEnable(t,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(t,i){var n=this.$toolbar.height(),r=i+this.$box.height()-n,a=this.$box.innerWidth();this.$box.css("paddingTop",n+"px"),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"fixed",width:a,top:0,left:this.$box.offset().left-e(this.opts.toolbarFixedTarget).scrollLeft()}),t>r&&e(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",t<r?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.$box.css("paddingTop",""),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var t=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(t=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),e(".redactor-dropdown-"+this.uuid).each(function(){e(this).css({position:i,top:t+"px"})})},unsetDropdownsFixed:function(){var t=this.$toolbar.innerHeight()+this.$toolbar.offset().top;e(".redactor-dropdown-"+this.uuid).each(function(){e(this).css({position:"absolute",top:t+"px"})})}},t}),i("modules/upload",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=e(t),this.upload.$droparea=e('<div id="redactor-droparea" />'),this.upload.$placeholdler=e('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=e('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",e.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",e.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",e.proxy(function(e){e=e.originalEvent||e,this.upload.traverseFile(this.upload.$input[0].files[0],e)},this)),this.upload.$droparea.on("drop.redactor.upload",e.proxy(function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(e)},this))},directUpload:function(e,t){this.upload.direct=!0,this.upload.traverseFile(e,t)},onDrop:function(e){e=e.originalEvent||e;var t=e.dataTransfer.files;this.upload.traverseFile(t[0],e)},traverseFile:function(e,t){if(this.opts.s3)return this.upload.setConfig(e),void this.upload.s3uploadFile(e);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(e);var n="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,e)}this.progress.show(),this.core.setCallback("uploadStart",t,i),this.upload.sendData(i,t)},setConfig:function(e){this.upload.getType(e),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(e){this.upload.type="image",this.opts.imageTypes.indexOf(e.type)===-1&&(this.upload.type="file")},getHiddenFields:function(t,i){return t===!1||"object"!=typeof t?i:(e.each(t,e.proxy(function(t,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),i.append(t,n)},this)),i)},sendData:function(t,i){"image"===this.upload.type?(t=this.upload.getHiddenFields(this.opts.uploadImageFields,t),t=this.upload.getHiddenFields(this.upload.imageFields,t)):(t=this.upload.getHiddenFields(this.opts.uploadFileFields,t),t=this.upload.getHiddenFields(this.upload.fileFields,t));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=e.proxy(function(){if(4===n.readyState){var t=n.responseText;t=t.replace(/^\[/,""),t=t.replace(/\]$/,"");var r;try{r="string"==typeof t?e.parseJSON(t):t}catch(e){r={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(r,this.upload.direct,i)}},this),n.send(t)},onDrag:function(e){e.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(e,t){this.upload.imageFields[e]=t},removeImageFields:function(e){delete this.upload.imageFields[e]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(e,t){this.upload.fileFields[e]=t},removeFileFields:function(e){delete this.upload.fileFields[e]},s3uploadFile:function(t){this.upload.s3executeOnSignedUrl(t,e.proxy(function(e){this.upload.s3uploadToS3(t,e)},this))},s3executeOnSignedUrl:function(e,t){var i=new XMLHttpRequest,n="?";"-1"!==this.opts.s3.search(/\?/)&&(n="&"),i.open("GET",this.opts.s3+n+"name="+e.name+"&type="+e.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var r=this;i.onreadystatechange=function(){4===this.readyState&&200===this.status?(r.progress.show(),t(decodeURIComponent(this.responseText))):4===this.readyState&&200!==this.status},i.send()},s3createCORSRequest:function(e,t){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null,i},s3uploadToS3:function(t,i){var n=this.upload.s3createCORSRequest("PUT",i);!n||(n.onload=e.proxy(function(){if(200===n.status){this.progress.hide();var e=i.split("?");if(!e[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var t={filelink:e[0]};if("file"===this.upload.type){var r=e[0].split("/");t.filename=r[r.length-1]}this.upload.callback(t,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",t.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(t))}},t}),i("modules/utils",["jquery"],function(e){"use strict";function t(){}return t.prototype={isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isEmpty:function(t,i){return t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&nbsp;/gi,""),t=t.replace(/<\/?br\s?\/?>/g,""),t=t.replace(/\s/g,""),t=t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),t=t.replace(/<iframe([^>]*)>$/i,"iframe"),t=t.replace(/<source([^>]*)>$/i,"source"),i!==!1&&(t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),t=e.trim(t),""===t},normalize:function(e){return"undefined"==typeof e?0:parseInt(e.replace("px",""),10)},hexToRgb:function(e){if("undefined"!=typeof e){if(e.search(/^#/)===-1)return e;var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(t){return e("<div>").append(e(t).eq(0).clone()).html()},getAlignmentElement:function(t){return e.inArray(t.tagName,this.opts.alignmentTags)!==-1?e(t):e(t).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(t,i){var n=e(t);return"undefined"==typeof n.attr(i)||""===n.attr(i)&&(n.removeAttr(i),!0)},removeEmpty:function(t,i){var n=e(e.parseHTML(i));if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, video, iframe, source").length){var r=e.trim(n.text());this.utils.isEmpty(r,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=e(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=e(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){"undefined"==typeof this.saveScroll&&"undefined"==typeof this.saveBodyScroll||(e(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&e(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var e=document.createElement("span");return e.className="redactor-invisible-space",e.innerHTML=this.opts.invisibleSpace,e},removeInlineTags:function(t){var i=this.opts.inlineTags;i.push("span"),"PRE"===t.tagName&&i.push("a"),e(t).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(t,i){var n=this;return e(t).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),e(this).contents()}),e(t)},replaceToTag:function(t,i,n){var r,a=this;return e(t).replaceWith(function(){r=e("<"+i+" />").append(e(this).contents());for(var t=0;t<this.attributes.length;t++)r.attr(this.attributes[t].name,this.attributes[t].value);return n===!0&&a.utils.removeInlineTags(r),r}),r},isStartOfElement:function(){var e=this.selection.getBlock();if(!e)return!1;var t=this.caret.getOffsetOfElement(e);return 0===t},isEndOfElement:function(t){if("undefined"==typeof t&&(t=this.selection.getBlock(),!t))return!1;var i=this.caret.getOffsetOfElement(t),n=e.trim(e(t).text()).replace(/\n\r\n/g,"");return i===n.length},isEndOfEditor:function(){var t=this.$editor[0],i=this.caret.getOffsetOfElement(t),n=e.trim(e(t).html().replace(/(<([^>]+)>)/gi,""));return i===n.length},isBlock:function(e){return e=e[0]||e,e&&this.utils.isBlockTag(e.tagName)},isBlockTag:function(e){return"undefined"!=typeof e&&this.reIsBlock.test(e)},isInline:function(e){return e=e[0]||e,e&&this.utils.isInlineTag(e.tagName)},isInlineTag:function(e){return"undefined"!=typeof e&&this.reIsInline.test(e)},isTag:function(t,i){var n=e(t).closest(i,this.$editor[0]);return 1===n.length&&n[0]},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(t){return!!t&&(0!==e(t).parents(".redactor-editor").length&&!e(t).hasClass("redactor-editor")&&t)},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(t){var i=this.selection.getParent(),n=this.selection.getCurrent();if(e.isArray(t)){var r=0;return e.each(t,e.proxy(function(e,t){this.utils.isCurrentOrParentOne(n,i,t)&&r++},this)),0!==r}return this.utils.isCurrentOrParentOne(n,i,t)},isCurrentOrParentOne:function(e,t,i){return i=i.toUpperCase(),t&&t.tagName===i?t:!(!e||e.tagName!==i)&&e},isOldIe:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9)},isLessIe10:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10)},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(e){var t=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"safari"===e?"undefined"!=typeof i[3]&&"safari"===i[3]:"version"===e?i[2]:"webkit"===e?"chrome"===i[1]||"opr"===i[1]||"webkit"===i[1]:"rv"===i[1]?"msie"===e:"opr"===i[1]?"webkit"===e:e===i[1]}},t}),i("Redactor",["require","jquery","jquery-redactor-shim","options","modules/alignment","modules/block","modules/buffer","modules/build","modules/button","modules/caret","modules/clean","modules/code","modules/codeMirror","modules/core","modules/dropdown","modules/embed","modules/file","modules/focus","modules/fontcolor","modules/fontfamily","modules/fontsize","modules/fs","modules/fullscreen","modules/image","modules/indent","modules/inline","modules/insert","modules/keydown","modules/keyup","modules/lang","modules/line","modules/link","modules/linkify","modules/list","modules/media","modules/modal","modules/observe","modules/paragraphize","modules/paste","modules/placeholder","modules/progress","modules/resize","modules/selection","modules/shortcuts","modules/styles","modules/tabifier","modules/table","modules/textdirection","modules/tidy","modules/toolbar","modules/upload","modules/utils"],function(e){"use strict";function t(e,t){var r=this;this.beforeInit(t).always(function(t){if(r.$element=i(e),r.uuid=n++,r.rtePaste=!1,r.$pasteBox=!1,r.loadOptions(t),r.loadModules(r.modules),isNaN(r.opts.indentValue)&&(r.opts.indentValue=parseFloat(i(document.body).css("font-size"))),r.opts&&r.opts.codeOnly&&(r.opts.visual=!1),r.formatting={},i.merge(r.opts.blockLevelElements,r.opts.alignmentTags),r.reIsBlock=new RegExp("^("+r.opts.blockLevelElements.join("|")+")$","i"),r.reIsInline=new RegExp("^("+r.opts.inlineTags.join("|")+")$","i"),r.tidy.setupAllowed(),r.opts.deniedTags!==!1)for(var a=["html","head","link","body","meta","applet"],o=0;o<a.length;o++)r.opts.deniedTags.push(a[o]);r.lang.load(),i.extend(r.opts.shortcuts,r.opts.shortcutsAdd),r.core.setCallback("start"),r.start=!0,r.build.run(),r.fs.init(),r.fs.hidePluginButtons(),r.$element.on("modalOpened.redactor-api",r.fs.modalIframeBrowseInit),r.$element.on("dropdownShown.redactor-api",r.fs.dropdownShow),r.$element.on("sync.redactor-api",r.fs.sync)})}var i=e("jquery"),n=0;return e("jquery-redactor-shim"),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),i.fn.redactor=function(e){var n=[],r=Array.prototype.slice.call(arguments,1);return"string"==typeof e?this.each(function(){var t,a=i.data(this,"redactor");if(e.search(/\./)!==-1?(t=e.split("."),"undefined"!=typeof a[t[0]]&&(t=a[t[0]][t[1]])):t=a[e],"undefined"!=typeof a&&i.isFunction(t)){var o=t.apply(a,r);void 0!==o&&o!==a&&n.push(o)}else i.error('No such method "'+e+'" for Redactor')}):this.each(function(){i.data(this,"redactor",{}),i.data(this,"redactor",new t(this,e))}),0===n.length?this:1===n.length?n[0]:n},window.hasRedactor=!0,window.Redactor=t.prototype={version:"1.1.3",keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},opts:e("options"),modules:["alignment","block","buffer","build","button","caret","clean","code","codeMirror","core","dropdown","embed","file","focus","fs","fontcolor","fontfamily","fontsize","fullscreen","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","media","modal","observe","paragraphize","paste","placeholder","progress","resize","selection","shortcuts","styles","tabifier","table","textdirection","tidy","toolbar","upload","utils"],loadOptions:function(e){this.opts=i.extend({},i.extend(!0,{},this.opts),this.$element.data(),e)},beforeInit:function(e){var t=i.Deferred();return t.resolve(e),t},getModuleMethods:function(e){return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(function(t){return"function"==typeof e[t]})},loadModules:function(e){for(var t=e.length,i=0;i<t;i++)this.bindModuleMethods(e[i])},bindModuleMethods:function(e){if("undefined"!=typeof this[e]){this[e]=new this[e];for(var t=this.getModuleMethods(this[e]),i=t.length,n=0;n<i;n++)this[e][t[n]]=this[e][t[n]].bind(this)}},alignment:e("modules/alignment"),block:e("modules/block"),buffer:e("modules/buffer"),build:e("modules/build"),button:e("modules/button"),caret:e("modules/caret"),clean:e("modules/clean"),code:e("modules/code"),codeMirror:e("modules/codeMirror"),core:e("modules/core"),dropdown:e("modules/dropdown"),embed:e("modules/embed"),file:e("modules/file"),focus:e("modules/focus"),fontcolor:e("modules/fontcolor"),fontfamily:e("modules/fontfamily"),fontsize:e("modules/fontsize"),fs:e("modules/fs"),fullscreen:e("modules/fullscreen"),image:e("modules/image"),indent:e("modules/indent"),inline:e("modules/inline"),insert:e("modules/insert"),keydown:e("modules/keydown"),keyup:e("modules/keyup"),lang:e("modules/lang"),line:e("modules/line"),link:e("modules/link"),linkify:e("modules/linkify"),list:e("modules/list"),media:e("modules/media"),modal:e("modules/modal"),observe:e("modules/observe"),paragraphize:e("modules/paragraphize"),paste:e("modules/paste"),placeholder:e("modules/placeholder"),progress:e("modules/progress"),resize:e("modules/resize"),selection:e("modules/selection"),shortcuts:e("modules/shortcuts"),styles:e("modules/styles"),tabifier:e("modules/tabifier"),table:e("modules/table"),textdirection:e("modules/textdirection"),tidy:e("modules/tidy"),toolbar:e("modules/toolbar"),upload:e("modules/upload"),utils:e("modules/utils")},t}),t("Redactor")}),function(e,t,i,n){"use strict";function r(e){e.buttonsHide=e.buttonsHide||[];var t={edit_background_color:"backcolor",edit_font_color:"fontcolor",edit_font_face:"fontfamily",edit_font_size:"fontsize",edit_html:"html",edit_images:"image",insert_tables:"table"};return i.each(t,function(t,i){a[t]||e.buttonsHide.push(i)}),e.forceImage&&(e.buttonsHide=n.without(e.buttonsHide,"image")),e}var a;t.prototype.opts=i.extend(t.prototype.opts,{aviaryPopupURL:"/cf_filemanager/imageedit.cfm?mode=editor&file={file}&composer",browseFileURL:"/cf_filemanager/adminfiles.cfm?opener=iframe",browseMediaURL:"/fs/pages/media_picker",browseSiteURL:"/fs/pages/picker",localStylesheet:"styles.cfm",link:{anchorSelector:".fsContentEditable [id], .redactor-editor [id]",mediaTest:/^#media-playlist-link/,siteFileTest:/^(file.cfm|\/?uploaded)/gi,onMediaBrowseReturn:function(e){return e.path="#media-playlist-link",e}},media:{onMediaBrowseReturn:function(e){return e.path="/cf_media/embed.cfm?"+e.flashVars,e}}}),t.prototype.beforeInit=function(t){var n=i.Deferred();return a=a||(window.FSApp?window.FSApp.currentUser.get("rights").editor:void 0),a?n.resolve(r(t)):e.getInternalNS("user").getCurrentUser().always(function(e){a=e.rights?e.rights.editor:{},n.resolve(r(t))}),n.promise()}}(FS,Redactor,jQuery,_),function(e,t,i,n){"use strict";var r={baseFloatZIndex:1e5,baseurl:"/",isComposer:!0,pagePickers:0,stylesSet:"fs_styles:/styles_ckeditor.cfm",toolbar:[{name:"document",items:["A11ychecker","fskitchensink","autoFormat","sourceUndo","sourceRedo","Undo","Redo","Bold","Italic","Format","Styles","JustifyGrouped","RemoveFormat","Table","HorizontalRule","fsLink","fsImage","fsmedia","BulletedList","NumberedList","Underline","IndentGrouped","BidiGrouped"]},{items:[],name:"styles"},{name:"otherthings",items:["Blockquote","SpecialChar","PasteCode","Mathjax","Superscript","Subscript","Strike","Abbr"]}]},a={toolbar:[{name:"document",items:["fskitchensink","Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Abbr"]},{name:"paragraph",items:["NumberedList","BulletedList","IndentGrouped","JustifyGrouped"]},{name:"links",items:["fsLink"]},{name:"styles",items:["Format","Styles"]}]},o={codeOnly:!0,startupMode:"source",codemirror:{autoCloseBrackets:!0,autoCloseTags:!0,lint:!0,showAutoCompleteButton:!0,showHint:!0},toolbar:[{items:["autoFormat","sourceUndo","sourceRedo"],name:"document"}]},s=i.once(function(){var o=t.FSApp?t.FSApp.currentUser.get("rights").editor:void 0,s=n.Deferred(),l=i.findWhere(r.toolbar,{name:"styles"}).items;return o?s.resolve():e.getInternalNS("user").getCurrentUser().done(function(e){o=e.rights?e.rights.editor:{},s.resolve()}).fail(function(){s.reject()}),s.done(function(){o.edit_html&&(i.findWhere(r.toolbar,{name:"document"}).items.unshift("Source"),i.findWhere(a.toolbar,{name:"document"}).items.unshift("Source")),o.edit_font_face&&l.push("Font"),o.edit_font_size&&l.push("FontSize"),o.edit_font_color&&l.push("TextColor"),o.edit_background_color&&l.push("BGColor")}),s.promise()});e.ckeditor={getConfig:function(e){var l=n.Deferred(),d=s();return"basic"==e?e=a:"source"==e&&(e=o),e=i.extend(e||{},{contentsCss:i.without(i.pluck(document.styleSheets,"href"),null),usePickerEvents:e.usePickerEvents||!!t.FSApp}),d.done(function(){l.resolve(i.extend({},r,e))}),l.promise()}}}(FS,window,FS._||_,FS.$||jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,n){var r,a=this;a.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return e('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},a.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(a,a.initials),a.activeBreakpoint=null,a.animType=null,a.animProp=null,a.breakpoints=[],a.breakpointSettings=[],a.cssTransitions=!1,a.focussed=!1,a.interrupted=!1,a.hidden="hidden",a.paused=!0,a.positionProp=null,a.respondTo=null,a.rowCount=1,a.shouldClick=!0,a.$slider=e(t),a.$slidesCache=null,a.transformType=null,a.transitionType=null,a.visibilityChange="visibilitychange",a.windowWidth=0,a.windowTimer=null,r=e(t).data("slick")||{},a.options=e.extend({},a.defaults,n,r),a.currentSlide=a.options.initialSlide,a.originalSettings=a.options,"undefined"!=typeof document.mozHidden?(a.hidden="mozHidden",a.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a.autoPlay=e.proxy(a.autoPlay,a),a.autoPlayClear=e.proxy(a.autoPlayClear,a),a.autoPlayIterator=e.proxy(a.autoPlayIterator,a),a.changeSlide=e.proxy(a.changeSlide,a),
a.clickHandler=e.proxy(a.clickHandler,a),a.selectHandler=e.proxy(a.selectHandler,a),a.setPosition=e.proxy(a.setPosition,a),a.swipeHandler=e.proxy(a.swipeHandler,a),a.dragHandler=e.proxy(a.dragHandler,a),a.keyHandler=e.proxy(a.keyHandler,a),a.instanceUid=i++,a.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,a.registerBreakpoints(),a.init(!0)}var i=0;return t}(),t.prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var r=this;if("boolean"==typeof i)n=i,i=null;else if(i<0||i>=r.slideCount)return!1;r.unload(),"number"==typeof i?0===i&&0===r.$slides.length?e(t).appendTo(r.$slideTrack):n?e(t).insertBefore(r.$slides.eq(i)):e(t).insertAfter(r.$slides.eq(i)):n===!0?e(t).prependTo(r.$slideTrack):e(t).appendTo(r.$slideTrack),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),r.$slidesCache=r.$slides,r.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},r=this;r.animateHeight(),r.options.rtl===!0&&r.options.vertical===!1&&(t=-t),r.transformsEnabled===!1?r.options.vertical===!1?r.$slideTrack.animate({left:t},r.options.speed,r.options.easing,i):r.$slideTrack.animate({top:t},r.options.speed,r.options.easing,i):r.cssTransitions===!1?(r.options.rtl===!0&&(r.currentLeft=-r.currentLeft),e({animStart:r.currentLeft}).animate({animStart:t},{duration:r.options.speed,easing:r.options.easing,step:function(e){e=Math.ceil(e),r.options.vertical===!1?(n[r.animType]="translate("+e+"px, 0px)",r.$slideTrack.css(n)):(n[r.animType]="translate(0px,"+e+"px)",r.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(r.applyTransition(),t=Math.ceil(t),r.options.vertical===!1?n[r.animType]="translate3d("+t+"px, 0px, 0px)":n[r.animType]="translate3d(0px,"+t+"px, 0px)",r.$slideTrack.css(n),i&&setTimeout(function(){r.disableTransition(),i.call()},r.options.speed))},t.prototype.getNavTarget=function(){var t=this,i=t.options.asNavFor;return i&&null!==i&&(i=e(i).not(t.$slider)),i},t.prototype.asNavFor=function(t){var i=this,n=i.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};t.options.fade===!1?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(e.options.infinite===!1&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(n.options.dots===!0){for(n.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)i.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),t.options.centerMode!==!0&&t.options.swipeToSlide!==!0||(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,n,r,a,o,s=this;if(n=document.createDocumentFragment(),a=s.$slider.children(),s.options.rows>1){for(o=s.options.slidesPerRow*s.options.rows,r=Math.ceil(a.length/o),e=0;e<r;e++){var l=document.createElement("div");for(t=0;t<s.options.rows;t++){var d=document.createElement("div");for(i=0;i<s.options.slidesPerRow;i++){var c=e*o+(t*s.options.slidesPerRow+i);a.get(c)&&d.appendChild(a.get(c))}l.appendChild(d)}n.appendChild(l)}s.$slider.empty().append(n),s.$slider.children().children().children().css({width:100/s.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,r,a,o=this,s=!1,l=o.$slider.width(),d=window.innerWidth||e(window).width();if("window"===o.respondTo?a=d:"slider"===o.respondTo?a=l:"min"===o.respondTo&&(a=Math.min(d,l)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){r=null;for(n in o.breakpoints)o.breakpoints.hasOwnProperty(n)&&(o.originalSettings.mobileFirst===!1?a<o.breakpoints[n]&&(r=o.breakpoints[n]):a>o.breakpoints[n]&&(r=o.breakpoints[n]));null!==r?null!==o.activeBreakpoint?(r!==o.activeBreakpoint||i)&&(o.activeBreakpoint=r,"unslick"===o.breakpointSettings[r]?o.unslick(r):(o.options=e.extend({},o.originalSettings,o.breakpointSettings[r]),t===!0&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),s=r):(o.activeBreakpoint=r,"unslick"===o.breakpointSettings[r]?o.unslick(r):(o.options=e.extend({},o.originalSettings,o.breakpointSettings[r]),t===!0&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),s=r):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,t===!0&&(o.currentSlide=o.options.initialSlide),o.refresh(t),s=r),t||s===!1||o.$slider.trigger("breakpoint",[o,s])}},t.prototype.changeSlide=function(t,i){var n,r,a,o=this,s=e(t.currentTarget);switch(s.is("a")&&t.preventDefault(),s.is("li")||(s=s.closest("li")),a=o.slideCount%o.options.slidesToScroll!==0,n=a?0:(o.slideCount-o.currentSlide)%o.options.slidesToScroll,t.data.message){case"previous":r=0===n?o.options.slidesToScroll:o.options.slidesToShow-n,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide-r,!1,i);break;case"next":r=0===n?o.options.slidesToScroll:n,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide+r,!1,i);break;case"index":var l=0===t.data.index?0:t.data.index||s.index()*o.options.slidesToScroll;o.slideHandler(o.checkNavigable(l),!1,i),s.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i,n=this;if(t=n.getNavigableIndexes(),i=0,e>t[t.length-1])e=t[t.length-1];else for(var r in t){if(e<t[r]){e=i;break}i=t[r]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),t.options.accessibility===!0&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(e.options.infinite===!0)if(e.slideCount<=e.options.slidesToShow)++n;else for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,i,n,r,a=this,o=0;return a.slideOffset=0,i=a.$slides.first().outerHeight(!0),a.options.infinite===!0?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=a.slideWidth*a.options.slidesToShow*-1,r=-1,a.options.vertical===!0&&a.options.centerMode===!0&&(2===a.options.slidesToShow?r=-1.5:1===a.options.slidesToShow&&(r=-2)),o=i*a.options.slidesToShow*r),a.slideCount%a.options.slidesToScroll!==0&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth*-1,o=(a.options.slidesToShow-(e-a.slideCount))*i*-1):(a.slideOffset=a.slideCount%a.options.slidesToScroll*a.slideWidth*-1,o=a.slideCount%a.options.slidesToScroll*i*-1))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,o=(e+a.options.slidesToShow-a.slideCount)*i),a.slideCount<=a.options.slidesToShow&&(a.slideOffset=0,o=0),a.options.centerMode===!0&&a.slideCount<=a.options.slidesToShow?a.slideOffset=a.slideWidth*Math.floor(a.options.slidesToShow)/2-a.slideWidth*a.slideCount/2:a.options.centerMode===!0&&a.options.infinite===!0?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:a.options.centerMode===!0&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=a.options.vertical===!1?e*a.slideWidth*-1+a.slideOffset:e*i*-1+o,a.options.variableWidth===!0&&(n=a.slideCount<=a.options.slidesToShow||a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow),t=a.options.rtl===!0?n[0]?(a.$slideTrack.width()-n[0].offsetLeft-n.width())*-1:0:n[0]?n[0].offsetLeft*-1:0,a.options.centerMode===!0&&(n=a.slideCount<=a.options.slidesToShow||a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow+1),t=a.options.rtl===!0?n[0]?(a.$slideTrack.width()-n[0].offsetLeft-n.width())*-1:0:n[0]?n[0].offsetLeft*-1:0,t+=(a.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,r=[];for(t.options.infinite===!1?e=t.slideCount:(i=t.options.slidesToScroll*-1,n=t.options.slidesToScroll*-1,e=2*t.slideCount);i<e;)r.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return r},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n,r=this;return n=r.options.centerMode===!0?r.slideWidth*Math.floor(r.options.slidesToShow/2):0,r.options.swipeToSlide===!0?(r.$slideTrack.find(".slick-slide").each(function(t,a){if(a.offsetLeft-n+e(a).outerWidth()/2>r.swipeLeft*-1)return i=a,!1}),t=Math.abs(e(i).attr("data-slick-index")-r.currentSlide)||1):r.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var i=this;i.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var r=n.indexOf(i);e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),r!==-1&&e(this).attr({"aria-describedby":"slick-slide-control"+t.instanceUid+r})}),t.$dots.attr("role","tablist").find("li").each(function(r){var a=n[r];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+r,"aria-controls":"slick-slide"+t.instanceUid+a,"aria-label":r+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var r=t.currentSlide,a=r+t.options.slidesToShow;r<a;r++)t.$slides.eq(r).attr("tabindex",0);t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.accessibility===!0&&t.$dots.on("keydown.slick",t.keyHandler)),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:t.options.rtl===!0?"previous":"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=e(this).attr("data-srcset"),r=e(this).attr("data-sizes")||o.$slider.attr("data-sizes"),a=document.createElement("img");a.onload=function(){t.animate({opacity:0},100,function(){n&&(t.attr("srcset",n),r&&t.attr("sizes",r)),t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),o.$slider.trigger("lazyLoaded",[o,t,i])})},a.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,t,i])},a.src=i})}var i,n,r,a,o=this;if(o.options.centerMode===!0?o.options.infinite===!0?(r=o.currentSlide+(o.options.slidesToShow/2+1),a=r+o.options.slidesToShow+2):(r=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),a=2+(o.options.slidesToShow/2+1)+o.currentSlide):(r=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,a=Math.ceil(r+o.options.slidesToShow),o.options.fade===!0&&(r>0&&r--,a<=o.slideCount&&a++)),i=o.$slider.find(".slick-slide").slice(r,a),"anticipated"===o.options.lazyLoad)for(var s=r-1,l=a,d=o.$slider.find(".slick-slide"),c=0;c<o.options.slidesToScroll;c++)s<0&&(s=o.slideCount-1),i=i.add(d.eq(s)),i=i.add(d.eq(l)),s--,l++;t(i),o.slideCount<=o.options.slidesToShow?(n=o.$slider.find(".slick-slide"),t(n)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(n=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),t(n)):0===o.currentSlide&&(n=o.$slider.find(".slick-cloned").slice(o.options.slidesToShow*-1),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var i=this;if(!i.unslicked&&(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),i.options.accessibility===!0&&(i.initADA(),i.options.focusOnChange))){var n=e(i.$slides.get(i.currentSlide));n.attr("tabindex",0).focus()}},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,n,r,a,o,s=this,l=e("img[data-lazy]",s.$slider);l.length?(i=l.first(),n=i.attr("data-lazy"),r=i.attr("data-srcset"),a=i.attr("data-sizes")||s.$slider.attr("data-sizes"),o=document.createElement("img"),o.onload=function(){r&&(i.attr("srcset",r),a&&i.attr("sizes",a)),i.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),s.options.adaptiveHeight===!0&&s.setPosition(),s.$slider.trigger("lazyLoaded",[s,i,n]),s.progressiveLazyLoad()},o.onerror=function(){t<3?setTimeout(function(){s.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),s.$slider.trigger("lazyLoadError",[s,i,n]),s.progressiveLazyLoad())},o.src=n):s.$slider.trigger("allImagesLoaded",[s])},t.prototype.refresh=function(t){var i,n,r=this;n=r.slideCount-r.options.slidesToShow,!r.options.infinite&&r.currentSlide>n&&(r.currentSlide=n),r.slideCount<=r.options.slidesToShow&&(r.currentSlide=0),i=r.currentSlide,r.destroy(!0),e.extend(r,r.initials,{currentSlide:i}),r.init(),t||r.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,r=this,a=r.options.responsive||null;if("array"===e.type(a)&&a.length){r.respondTo=r.options.respondTo||"window";for(t in a)if(n=r.breakpoints.length-1,a.hasOwnProperty(t)){for(i=a[t].breakpoint;n>=0;)r.breakpoints[n]&&r.breakpoints[n]===i&&r.breakpoints.splice(n,1),n--;r.breakpoints.push(i),r.breakpointSettings[i]=a[t].settings}r.breakpoints.sort(function(e,t){return r.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;return"boolean"==typeof e?(t=e,e=t===!0?0:n.slideCount-1):e=t===!0?--e:e,!(n.slideCount<1||e<0||e>n.slideCount-1)&&(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},t.prototype.setCSS=function(e){var t,i,n=this,r={};n.options.rtl===!0&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",r[n.positionProp]=e,n.transformsEnabled===!1?n.$slideTrack.css(r):(r={},n.cssTransitions===!1?(r[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(r)):(r[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(r)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,r){t=i.slideWidth*n*-1,i.options.rtl===!0?e(r).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(r).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,n,r,a,o=this,s=!1;if("object"===e.type(arguments[0])?(n=arguments[0],s=arguments[1],a="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],r=arguments[1],s=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?a="responsive":"undefined"!=typeof arguments[1]&&(a="single")),"single"===a)o.options[n]=r;else if("multiple"===a)e.each(n,function(e,t){o.options[e]=t});else if("responsive"===a)for(i in r)if("array"!==e.type(o.options.responsive))o.options.responsive=[r[i]];else{for(t=o.options.responsive.length-1;t>=0;)o.options.responsive[t].breakpoint===r[i].breakpoint&&o.options.responsive.splice(t,1),t--;o.options.responsive.push(r[i])}s&&(o.unload(),o.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,i,n,r,a=this;if(i=a.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),a.$slides.eq(e).addClass("slick-current"),a.options.centerMode===!0){var o=a.options.slidesToShow%2===0?1:0;t=Math.floor(a.options.slidesToShow/2),a.options.infinite===!0&&(e>=t&&e<=a.slideCount-1-t?a.$slides.slice(e-t+o,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=a.options.slidesToShow+e,i.slice(n-t+1+o,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-a.options.slidesToShow).addClass("slick-center"):e===a.slideCount-1&&i.eq(a.options.slidesToShow).addClass("slick-center")),a.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=a.slideCount-a.options.slidesToShow?a.$slides.slice(e,e+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=a.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(r=a.slideCount%a.options.slidesToShow,n=a.options.infinite===!0?a.options.slidesToShow+e:e,a.options.slidesToShow==a.options.slidesToScroll&&a.slideCount-e<a.options.slidesToShow?i.slice(n-(a.options.slidesToShow-r),n+r).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==a.options.lazyLoad&&"anticipated"!==a.options.lazyLoad||a.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,r=this;if(r.options.fade===!0&&(r.options.centerMode=!1),r.options.infinite===!0&&r.options.fade===!1&&(i=null,r.slideCount>r.options.slidesToShow)){for(n=r.options.centerMode===!0?r.options.slidesToShow+1:r.options.slidesToShow,t=r.slideCount;t>r.slideCount-n;t-=1)i=t-1,e(r.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-r.slideCount).prependTo(r.$slideTrack).addClass("slick-cloned");for(t=0;t<n+r.slideCount;t+=1)i=t,e(r.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+r.slideCount).appendTo(r.$slideTrack).addClass("slick-cloned");r.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),r=parseInt(n.attr("data-slick-index"));
return r||(r=0),i.slideCount<=i.options.slidesToShow?void i.slideHandler(r,!1,!0):void i.slideHandler(r)},t.prototype.slideHandler=function(e,t,i){var n,r,a,o,s,l=null,d=this;if(t=t||!1,!(d.animating===!0&&d.options.waitForAnimate===!0||d.options.fade===!0&&d.currentSlide===e))return t===!1&&d.asNavFor(e),n=e,l=d.getLeft(n),o=d.getLeft(d.currentSlide),d.currentLeft=null===d.swipeLeft?o:d.swipeLeft,d.options.infinite===!1&&d.options.centerMode===!1&&(e<0||e>d.getDotCount()*d.options.slidesToScroll)?void(d.options.fade===!1&&(n=d.currentSlide,i!==!0?d.animateSlide(o,function(){d.postSlide(n)}):d.postSlide(n))):d.options.infinite===!1&&d.options.centerMode===!0&&(e<0||e>d.slideCount-d.options.slidesToScroll)?void(d.options.fade===!1&&(n=d.currentSlide,i!==!0?d.animateSlide(o,function(){d.postSlide(n)}):d.postSlide(n))):(d.options.autoplay&&clearInterval(d.autoPlayTimer),r=n<0?d.slideCount%d.options.slidesToScroll!==0?d.slideCount-d.slideCount%d.options.slidesToScroll:d.slideCount+n:n>=d.slideCount?d.slideCount%d.options.slidesToScroll!==0?0:n-d.slideCount:n,d.animating=!0,d.$slider.trigger("beforeChange",[d,d.currentSlide,r]),a=d.currentSlide,d.currentSlide=r,d.setSlideClasses(d.currentSlide),d.options.asNavFor&&(s=d.getNavTarget(),s=s.slick("getSlick"),s.slideCount<=s.options.slidesToShow&&s.setSlideClasses(d.currentSlide)),d.updateDots(),d.updateArrows(),d.options.fade===!0?(i!==!0?(d.fadeSlideOut(a),d.fadeSlide(r,function(){d.postSlide(r)})):d.postSlide(r),void d.animateHeight()):void(i!==!0?d.animateSlide(l,function(){d.postSlide(r)}):d.postSlide(r)))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,r=this;return e=r.touchObject.startX-r.touchObject.curX,t=r.touchObject.startY-r.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),n<0&&(n=360-Math.abs(n)),n<=45&&n>=0?r.options.rtl===!1?"left":"right":n<=360&&n>=315?r.options.rtl===!1?"left":"right":n>=135&&n<=225?r.options.rtl===!1?"right":"left":r.options.verticalSwiping===!0?n>=35&&n<=135?"down":"up":"vertical"},t.prototype.swipeEnd=function(){var e,t,i=this;if(i.dragging=!1,i.swiping=!1,i.scrolling)return i.scrolling=!1,!1;if(i.interrupted=!1,i.shouldClick=!(i.touchObject.swipeLength>10),void 0===i.touchObject.curX)return!1;if(i.touchObject.edgeHit===!0&&i.$slider.trigger("edge",[i,i.swipeDirection()]),i.touchObject.swipeLength>=i.touchObject.minSwipe){switch(t=i.swipeDirection()){case"left":case"down":e=i.options.swipeToSlide?i.checkNavigable(i.currentSlide+i.getSlideCount()):i.currentSlide+i.getSlideCount(),i.currentDirection=0;break;case"right":case"up":e=i.options.swipeToSlide?i.checkNavigable(i.currentSlide-i.getSlideCount()):i.currentSlide-i.getSlideCount(),i.currentDirection=1}"vertical"!=t&&(i.slideHandler(e),i.touchObject={},i.$slider.trigger("swipe",[i,t]))}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&e.type.indexOf("mouse")!==-1))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,r,a,o,s=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!s.dragging||s.scrolling||a&&1!==a.length)&&(t=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,s.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),o=Math.round(Math.sqrt(Math.pow(s.touchObject.curY-s.touchObject.startY,2))),!s.options.verticalSwiping&&!s.swiping&&o>4?(s.scrolling=!0,!1):(s.options.verticalSwiping===!0&&(s.touchObject.swipeLength=o),i=s.swipeDirection(),void 0!==e.originalEvent&&s.touchObject.swipeLength>4&&(s.swiping=!0,e.preventDefault()),r=(s.options.rtl===!1?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),s.options.verticalSwiping===!0&&(r=s.touchObject.curY>s.touchObject.startY?1:-1),n=s.touchObject.swipeLength,s.touchObject.edgeHit=!1,s.options.infinite===!1&&(0===s.currentSlide&&"right"===i||s.currentSlide>=s.getDotCount()&&"left"===i)&&(n=s.touchObject.swipeLength*s.options.edgeFriction,s.touchObject.edgeHit=!0),s.options.vertical===!1?s.swipeLeft=t+n*r:s.swipeLeft=t+n*(s.$list.height()/s.listWidth)*r,s.options.verticalSwiping===!0&&(s.swipeLeft=t+n*r),s.options.fade!==!0&&s.options.touchMove!==!1&&(s.animating===!0?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft))))},t.prototype.swipeStart=function(e){var t,i=this;return i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(i.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,n=this,r=arguments[0],a=Array.prototype.slice.call(arguments,1),o=n.length;for(e=0;e<o;e++)if("object"==typeof r||"undefined"==typeof r?n[e].slick=new t(n[e],r):i=n[e].slick[r].apply(n[e].slick,a),"undefined"!=typeof i)return i;return n}}),/*!
 * JavaScript Cookie v2.0.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=t,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(i){function n(t,r,a){var o;if(arguments.length>1){if(a=e({path:"/"},n.defaults,a),"number"==typeof a.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(e){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,a.expires&&"; expires="+a.expires.toUTCString(),a.path&&"; path="+a.path,a.domain&&"; domain="+a.domain,a.secure?"; secure":""].join("")}t||(o={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var u=l[c].split("="),h=u[0].replace(d,decodeURIComponent),f=u.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{if(f=i&&i(f,h)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===h){o=f;break}t||(o[h]=f)}catch(e){}}return o}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,i){n(t,"",e(i,{expires:-1}))},n.withConverter=t,n}return t()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return kn.apply(null,arguments)}function t(e){kn=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var i in t)d(t,i)&&(e[i]=t[i]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,i,n){return St(e,t,i,n,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=h()),e._pf}function p(e){if(null==e._isValid){var t=f(e),i=An.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function g(e){var t=u(NaN);return null!=e?c(f(t),e):f(t).userInvalidated=!0,t}function m(e,t){var i,n,r;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=f(t)),a(t._locale)||(e._locale=t._locale),In.length>0)for(i=0;i<In.length;i++)n=In[i],r=t[n],a(r)||(e[n]=r);return e}function v(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Dn===!1&&(Dn=!0,e.updateOffset(this),Dn=!1)}function y(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=b(t)),i}function w(e,t,i){var n,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;n<r;n++)(i&&e[n]!==t[n]||!i&&_(e[n])!==_(t[n]))&&o++;return o+a}function E(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,i){var n=!0;return c(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),n){for(var r,a=[],o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){r+="\n["+o+"] ";for(var s in arguments[0])r+=s+": "+arguments[0][s]+", ";r=r.slice(0,-2)}else r=arguments[o];a.push(r)}E(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function S(t,i){null!=e.deprecationHandler&&e.deprecationHandler(t,i),Mn[t]||(E(i),Mn[t]=!0)}function C(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function x(e){var t,i;for(i in e)t=e[i],C(t)?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function k(e,t){var i,r=c({},e);for(i in t)d(t,i)&&(n(e[i])&&n(t[i])?(r[i]={},c(r[i],e[i]),c(r[i],t[i])):null!=t[i]?r[i]=t[i]:delete r[i]);for(i in e)d(e,i)&&!d(t,i)&&n(e[i])&&(r[i]=c({},r[i]));return r}function A(e){null!=e&&this.set(e)}function I(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return C(n)?n.call(t,i):n}function D(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function M(){return this._invalidDate}function P(e){return this._ordinal.replace("%d",e)}function R(e,t,i,n){var r=this._relativeTime[i];return C(r)?r(e,t,i,n):r.replace(/%d/i,e)}function O(e,t){var i=this._relativeTime[e>0?"future":"past"];return C(i)?i(t):i.replace(/%s/i,t)}function N(e,t){var i=e.toLowerCase();Bn[i]=Bn[i+"s"]=Bn[t]=e}function L(e){return"string"==typeof e?Bn[e]||Bn[e.toLowerCase()]:void 0}function F(e){var t,i,n={};for(i in e)d(e,i)&&(t=L(i),t&&(n[t]=e[i]));return n}function j(e,t){Hn[e]=t}function B(e){var t=[];for(var i in e)t.push({unit:i,priority:Hn[i]});return t.sort(function(e,t){return e.priority-t.priority}),t}function H(e,t,i){var n=""+Math.abs(e),r=t-n.length,a=e>=0;return(a?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function U(e,t,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),e&&(qn[e]=r),t&&(qn[t[0]]=function(){return H(r.apply(this,arguments),t[1],t[2])}),i&&(qn[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,i,n=e.match(Un);for(t=0,i=n.length;t<i;t++)qn[n[t]]?n[t]=qn[n[t]]:n[t]=$(n[t]);return function(t){var r,a="";for(r=0;r<i;r++)a+=C(n[r])?n[r].call(t,e):n[r];return a}}function q(e,t){return e.isValid()?(t=W(t,e.localeData()),zn[t]=zn[t]||z(t),zn[t](e)):e.localeData().invalidDate()}function W(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for($n.lastIndex=0;n>=0&&$n.test(e);)e=e.replace($n,i),$n.lastIndex=0,n-=1;return e}function Y(e,t,i){lr[e]=C(t)?t:function(e){return e&&i?i:t}}function G(e,t){return d(lr,e)?lr[e](t._strict,t._locale):new RegExp(V(e))}function V(e){return K(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r}))}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),o(t)&&(n=function(e,i){i[t]=_(e)}),i=0;i<e.length;i++)dr[e[i]]=n}function Q(e,t){X(e,function(e,i,n,r){n._w=n._w||{},t(e,n._w,n,r)})}function J(e,t,i){null!=t&&d(dr,e)&&dr[e](t,i._a,i,e)}function Z(e){return ee(e)?366:365}function ee(e){return e%4===0&&e%100!==0||e%400===0}function te(){return ee(this.year())}function ie(t,i){return function(n){return null!=n?(re(this,t,n),e.updateOffset(this,i),this):ne(this,t)}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function re(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&ee(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),le(i,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function ae(e){return e=L(e),C(this[e])?this[e]():this}function oe(e,t){if("object"==typeof e){e=F(e);for(var i=B(e),n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit])}else if(e=L(e),C(this[e]))return this[e](t);return this}function se(e,t){return(e%t+t)%t}function le(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=se(t,12);return e+=(t-i)/12,1===i?ee(e)?29:28:31-i%7%2}function de(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||wr).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone}function ce(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[wr.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ue(e,t,i){var n,r,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=u([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===t?(r=br.call(this._shortMonthsParse,o),r!==-1?r:null):(r=br.call(this._longMonthsParse,o),r!==-1?r:null):"MMM"===t?(r=br.call(this._shortMonthsParse,o),r!==-1?r:(r=br.call(this._longMonthsParse,o),r!==-1?r:null)):(r=br.call(this._longMonthsParse,o),r!==-1?r:(r=br.call(this._shortMonthsParse,o),r!==-1?r:null))}function he(e,t,i){var n,r,a;if(this._monthsParseExact)return ue.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=u([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function fe(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=_(t);else if(t=e.localeData().monthsParse(t),!o(t))return e;return i=Math.min(e.date(),le(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function pe(t){return null!=t?(fe(this,t),e.updateOffset(this,!0),this):ne(this,"Month")}function ge(){return le(this.year(),this.month())}function me(e){return this._monthsParseExact?(d(this,"_monthsRegex")||ye.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Sr),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ve(e){return this._monthsParseExact?(d(this,"_monthsRegex")||ye.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=Cr),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ye(){function e(e,t){return t.length-e.length}var t,i,n=[],r=[],a=[];for(t=0;t<12;t++)i=u([2e3,t]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(n.sort(e),r.sort(e),a.sort(e),t=0;t<12;t++)n[t]=K(n[t]),r[t]=K(r[t]);for(t=0;t<24;t++)a[t]=K(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function be(e,t,i,n,r,a,o){var s=new Date(e,t,i,n,r,a,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function _e(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function we(e,t,i){var n=7+t-i,r=(7+_e(e,0,n).getUTCDay()-t)%7;return-r+n-1}function Ee(e,t,i,n,r){var a,o,s=(7+i-n)%7,l=we(e,n,r),d=1+7*(t-1)+s+l;return d<=0?(a=e-1,o=Z(a)+d):d>Z(e)?(a=e+1,o=d-Z(e)):(a=e,o=d),{year:a,dayOfYear:o}}function Te(e,t,i){var n,r,a=we(e.year(),t,i),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?(r=e.year()-1,n=o+Se(r,t,i)):o>Se(e.year(),t,i)?(n=o-Se(e.year(),t,i),r=e.year()+1):(r=e.year(),n=o),{week:n,year:r}}function Se(e,t,i){var n=we(e,t,i),r=we(e+1,t,i);return(Z(e)-n+r)/7}function Ce(e){return Te(e,this._week.dow,this._week.doy).week}function xe(){return this._week.dow}function ke(){return this._week.doy}function Ae(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ie(e){var t=Te(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function De(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Me(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Pe(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone}function Re(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Oe(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,i){var n,r,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=u([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===t?(r=br.call(this._weekdaysParse,o),r!==-1?r:null):"ddd"===t?(r=br.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=br.call(this._minWeekdaysParse,o),r!==-1?r:null):"dddd"===t?(r=br.call(this._weekdaysParse,o),r!==-1?r:(r=br.call(this._shortWeekdaysParse,o),r!==-1?r:(r=br.call(this._minWeekdaysParse,o),r!==-1?r:null))):"ddd"===t?(r=br.call(this._shortWeekdaysParse,o),r!==-1?r:(r=br.call(this._weekdaysParse,o),r!==-1?r:(r=br.call(this._minWeekdaysParse,o),r!==-1?r:null))):(r=br.call(this._minWeekdaysParse,o),r!==-1?r:(r=br.call(this._weekdaysParse,o),r!==-1?r:(r=br.call(this._shortWeekdaysParse,o),r!==-1?r:null)))}function Le(e,t,i){var n,r,a;if(this._weekdaysParseExact)return Ne.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=u([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=De(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Be(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Me(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function He(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=Dr),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ue(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Mr),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $e(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pr),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ze(){function e(e,t){return t.length-e.length}var t,i,n,r,a,o=[],s=[],l=[],d=[];for(t=0;t<7;t++)i=u([2e3,1]).day(t),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),a=this.weekdays(i,""),o.push(n),s.push(r),l.push(a),d.push(n),d.push(r),d.push(a);for(o.sort(e),s.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)s[t]=K(s[t]),l[t]=K(l[t]),d[t]=K(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function qe(){return this.hours()%12||12}function We(){return this.hours()||24}function Ye(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function Ve(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Xe(e){return e?e.toLowerCase().replace("_","-"):e}function Qe(e){for(var t,i,n,r,a=0;a<e.length;){for(r=Xe(e[a]).split("-"),t=r.length,i=Xe(e[a+1]),i=i?i.split("-"):null;t>0;){if(n=Je(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&w(r,i,!0)>=t-1)break;t--}a++}return Rr}function Je(e){var t=null;if(!Fr[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Rr._abbr;var i=require;i("./locale/"+e),Ze(t)}catch(e){}return Fr[e]}function Ze(e,t){var i;return e&&(i=a(t)?it(e):et(e,t),i?Rr=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Rr._abbr}function et(e,t){if(null!==t){var i,n=Lr;if(t.abbr=e,null!=Fr[e])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Fr[e]._config;else if(null!=t.parentLocale)if(null!=Fr[t.parentLocale])n=Fr[t.parentLocale]._config;else{if(i=Je(t.parentLocale),null==i)return jr[t.parentLocale]||(jr[t.parentLocale]=[]),jr[t.parentLocale].push({name:e,config:t}),null;n=i._config}return Fr[e]=new A(k(n,t)),jr[e]&&jr[e].forEach(function(e){et(e.name,e.config)}),Ze(e),Fr[e]}return delete Fr[e],null}function tt(e,t){if(null!=t){var i,n,r=Lr;n=Je(e),null!=n&&(r=n._config),t=k(r,t),i=new A(t),i.parentLocale=Fr[e],Fr[e]=i,Ze(e)}else null!=Fr[e]&&(null!=Fr[e].parentLocale?Fr[e]=Fr[e].parentLocale:null!=Fr[e]&&delete Fr[e]);return Fr[e]}function it(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Rr;if(!i(e)){if(t=Je(e))return t;e=[e]}return Qe(e)}function nt(){return Pn(Fr)}function rt(e){var t,i=e._a;return i&&f(e).overflow===-2&&(t=i[ur]<0||i[ur]>11?ur:i[hr]<1||i[hr]>le(i[cr],i[ur])?hr:i[fr]<0||i[fr]>24||24===i[fr]&&(0!==i[pr]||0!==i[gr]||0!==i[mr])?fr:i[pr]<0||i[pr]>59?pr:i[gr]<0||i[gr]>59?gr:i[mr]<0||i[mr]>999?mr:-1,f(e)._overflowDayOfYear&&(t<cr||t>hr)&&(t=hr),f(e)._overflowWeeks&&t===-1&&(t=vr),f(e)._overflowWeekday&&t===-1&&(t=yr),f(e).overflow=t),e}function at(e,t,i){return null!=e?e:null!=t?t:i}function ot(t){var i=new Date(e.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function st(e){var t,i,n,r,a,o=[];if(!e._d){for(n=ot(e),e._w&&null==e._a[hr]&&null==e._a[ur]&&lt(e),null!=e._dayOfYear&&(a=at(e._a[cr],n[cr]),(e._dayOfYear>Z(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),i=_e(a,0,e._dayOfYear),e._a[ur]=i.getUTCMonth(),e._a[hr]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[fr]&&0===e._a[pr]&&0===e._a[gr]&&0===e._a[mr]&&(e._nextDay=!0,e._a[fr]=0),e._d=(e._useUTC?_e:be).apply(null,o),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[fr]=24),e._w&&"undefined"!=typeof e._w.d&&e._w.d!==r&&(f(e).weekdayMismatch=!0)}}function lt(e){var t,i,n,r,a,o,s,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)a=1,o=4,i=at(t.GG,e._a[cr],Te(Ct(),1,4).year),n=at(t.W,1),r=at(t.E,1),(r<1||r>7)&&(l=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var d=Te(Ct(),a,o);i=at(t.gg,e._a[cr],d.year),n=at(t.w,d.week),null!=t.d?(r=t.d,(r<0||r>6)&&(l=!0)):null!=t.e?(r=t.e+a,(t.e<0||t.e>6)&&(l=!0)):r=a}n<1||n>Se(i,a,o)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=Ee(i,n,r,a,o),e._a[cr]=s.year,e._dayOfYear=s.dayOfYear)}function dt(e){var t,i,n,r,a,o,s=e._i,l=Br.exec(s)||Hr.exec(s);if(l){for(f(e).iso=!0,t=0,i=$r.length;t<i;t++)if($r[t][1].exec(l[1])){r=$r[t][0],n=$r[t][2]!==!1;break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,i=zr.length;t<i;t++)if(zr[t][1].exec(l[3])){a=(l[2]||" ")+zr[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!Ur.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=r+(a||"")+(o||""),vt(e)}else e._isValid=!1}function ct(e,t,i,n,r,a){var o=[ut(e),Tr.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return a&&o.push(parseInt(a,10)),o}function ut(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function ht(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ft(e,t,i){if(e){var n=Ar.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(n!==r)return f(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function pt(e,t,i){if(e)return Yr[e];if(t)return 0;var n=parseInt(i,10),r=n%100,a=(n-r)/100;return 60*a+r}function gt(e){var t=Wr.exec(ht(e._i));if(t){var i=ct(t[4],t[3],t[2],t[5],t[6],t[7]);if(!ft(t[1],i,e))return;e._a=i,e._tzm=pt(t[8],t[9],t[10]),e._d=_e.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function mt(t){var i=qr.exec(t._i);return null!==i?void(t._d=new Date(+i[1])):(dt(t),void(t._isValid===!1&&(delete t._isValid,gt(t),t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t)))))}function vt(t){if(t._f===e.ISO_8601)return void dt(t);if(t._f===e.RFC_2822)return void gt(t);t._a=[],f(t).empty=!0;var i,n,r,a,o,s=""+t._i,l=s.length,d=0;for(r=W(t._f,t._locale).match(Un)||[],i=0;i<r.length;i++)a=r[i],n=(s.match(G(a,t))||[])[0],n&&(o=s.substr(0,s.indexOf(n)),o.length>0&&f(t).unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),d+=n.length),qn[a]?(n?f(t).empty=!1:f(t).unusedTokens.push(a),J(a,n,t)):t._strict&&!n&&f(t).unusedTokens.push(a);f(t).charsLeftOver=l-d,s.length>0&&f(t).unusedInput.push(s),t._a[fr]<=12&&f(t).bigHour===!0&&t._a[fr]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[fr]=yt(t._locale,t._a[fr],t._meridiem),st(t),rt(t)}function yt(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function bt(e){var t,i,n,r,a;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)a=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],vt(t),p(t)&&(a+=f(t).charsLeftOver,a+=10*f(t).unusedTokens.length,f(t).score=a,(null==n||a<n)&&(n=a,i=t));c(e,i||t)}function _t(e){if(!e._d){var t=F(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),st(e)}}function wt(e){var t=new v(rt(Et(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Et(e){var t=e._i,n=e._f;return e._locale=e._locale||it(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new v(rt(t)):(s(t)?e._d=t:i(n)?bt(e):n?vt(e):Tt(e),p(e)||(e._d=null),e))}function Tt(t){var r=t._i;a(r)?t._d=new Date(e.now()):s(r)?t._d=new Date(r.valueOf()):"string"==typeof r?mt(t):i(r)?(t._a=l(r.slice(0),function(e){return parseInt(e,10)}),st(t)):n(r)?_t(t):o(r)?t._d=new Date(r):e.createFromInputFallback(t)}function St(e,t,a,o,s){var l={};return a!==!0&&a!==!1||(o=a,a=void 0),(n(e)&&r(e)||i(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=a,l._i=e,l._f=t,l._strict=o,wt(l)}function Ct(e,t,i,n){return St(e,t,i,n,!1)}function xt(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ct();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function kt(){var e=[].slice.call(arguments,0);return xt("isBefore",e)}function At(){var e=[].slice.call(arguments,0);return xt("isAfter",e)}function It(e){for(var t in e)if(br.call(Xr,t)===-1||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,n=0;n<Xr.length;++n)if(e[Xr[n]]){if(i)return!1;parseFloat(e[Xr[n]])!==_(e[Xr[n]])&&(i=!0)}return!0}function Dt(){return this._isValid}function Mt(){return Xt(NaN)}function Pt(e){var t=F(e),i=t.year||0,n=t.quarter||0,r=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._isValid=It(t),this._milliseconds=+c+1e3*d+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+r+3*n+12*i,this._data={},this._locale=it(),this._bubble()}function Rt(e){return e instanceof Pt}function Ot(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Nt(e,t){U(e,0,0,function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+H(~~(e/60),2)+t+H(~~e%60,2)})}function Lt(e,t){var i=(t||"").match(e);if(null===i)return null;var n=i[i.length-1]||[],r=(n+"").match(Qr)||["-",0,0],a=+(60*r[1])+_(r[2]);return 0===a?0:"+"===r[0]?a:-a}function Ft(t,i){var n,r;return i._isUTC?(n=i.clone(),r=(y(t)||s(t)?t.valueOf():Ct(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),e.updateOffset(n,!1),n):Ct(t).local()}function jt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Bt(t,i,n){var r,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(t=Lt(ar,t),null===t)return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&i&&(r=jt(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==t&&(!i||this._changeInProgress?ti(this,Xt(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:jt(this)}function Ht(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ut(e){return this.utcOffset(0,e)}function $t(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jt(this),"m")),this}function zt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Lt(rr,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function qt(e){return!!this.isValid()&&(e=e?Ct(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Wt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(m(e,this),e=Et(e),e._a){var t=e._isUTC?u(e._a):Ct(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Gt(){return!!this.isValid()&&!this._isUTC}function Vt(){return!!this.isValid()&&this._isUTC}function Kt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xt(e,t){var i,n,r,a=e,s=null;return Rt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(a={},t?a[t]=e:a.milliseconds=e):(s=Jr.exec(e))?(i="-"===s[1]?-1:1,a={y:0,d:_(s[hr])*i,h:_(s[fr])*i,m:_(s[pr])*i,s:_(s[gr])*i,ms:_(Ot(1e3*s[mr]))*i}):(s=Zr.exec(e))?(i="-"===s[1]?-1:("+"===s[1],1),a={y:Qt(s[2],i),M:Qt(s[3],i),w:Qt(s[4],i),d:Qt(s[5],i),h:Qt(s[6],i),m:Qt(s[7],i),s:Qt(s[8],i)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=Zt(Ct(a.from),Ct(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),n=new Pt(a),Rt(e)&&d(e,"_locale")&&(n._locale=e._locale),n}function Qt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Jt(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Zt(e,t){var i;return e.isValid()&&t.isValid()?(t=Ft(t,e),e.isBefore(t)?i=Jt(e,t):(i=Jt(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ei(e,t){return function(i,n){var r,a;return null===n||isNaN(+n)||(S(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=i,i=n,n=a),i="string"==typeof i?+i:i,r=Xt(i,n),ti(this,r,e),this}}function ti(t,i,n,r){var a=i._milliseconds,o=Ot(i._days),s=Ot(i._months);t.isValid()&&(r=null==r||r,s&&fe(t,ne(t,"Month")+s*n),o&&re(t,"Date",ne(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),r&&e.updateOffset(t,o||s))}function ii(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ni(t,i){var n=t||Ct(),r=Ft(n,this).startOf("day"),a=e.calendarFormat(this,r)||"sameElse",o=i&&(C(i[a])?i[a].call(this,n):i[a]);return this.format(o||this.localeData().calendar(a,this,Ct(n)))}function ri(){return new v(this)}function ai(e,t){var i=y(e)?e:Ct(e);return!(!this.isValid()||!i.isValid())&&(t=L(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())}function oi(e,t){var i=y(e)?e:Ct(e);return!(!this.isValid()||!i.isValid())&&(t=L(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())}function si(e,t,i,n){return n=n||"()",("("===n[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===n[1]?this.isBefore(t,i):!this.isAfter(t,i))}function li(e,t){var i,n=y(e)?e:Ct(e);return!(!this.isValid()||!n.isValid())&&(t=L(t||"millisecond"),"millisecond"===t?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))}function di(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function ci(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function ui(e,t,i){var n,r,a;if(!this.isValid())return NaN;if(n=Ft(e,this),!n.isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),t=L(t)){case"year":a=hi(this,n)/12;break;case"month":a=hi(this,n);break;case"quarter":a=hi(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-r)/864e5;break;case"week":a=(this-n-r)/6048e5;break;default:a=this-n}return i?a:b(a)}function hi(e,t){var i,n,r=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(r,"months");return t-a<0?(i=e.clone().add(r-1,"months"),n=(t-a)/(a-i)):(i=e.clone().add(r+1,"months"),n=(t-a)/(i-a)),-(r+n)||0}function fi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pi(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?q(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(i,"Z")):q(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var i="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",a=t+'[")]';return this.format(i+n+r+a)}function mi(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);
var i=q(this,t);return this.localeData().postformat(i)}function vi(e,t){return this.isValid()&&(y(e)&&e.isValid()||Ct(e).isValid())?Xt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function yi(e){return this.from(Ct(),e)}function bi(e,t){return this.isValid()&&(y(e)&&e.isValid()||Ct(e).isValid())?Xt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _i(e){return this.to(Ct(),e)}function wi(e){var t;return void 0===e?this._locale._abbr:(t=it(e),null!=t&&(this._locale=t),this)}function Ei(){return this._locale}function Ti(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Si(e){return e=L(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Ci(){return this._d.valueOf()-6e4*(this._offset||0)}function xi(){return Math.floor(this.valueOf()/1e3)}function ki(){return new Date(this.valueOf())}function Ai(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ii(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Di(){return this.isValid()?this.toISOString():null}function Mi(){return p(this)}function Pi(){return c({},f(this))}function Ri(){return f(this).overflow}function Oi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ni(e,t){U(0,[e,e.length],0,t)}function Li(e){return Hi.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Fi(e){return Hi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function ji(){return Se(this.year(),1,4)}function Bi(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function Hi(e,t,i,n,r){var a;return null==e?Te(this,n,r).year:(a=Se(e,n,r),t>a&&(t=a),Ui.call(this,e,t,i,n,r))}function Ui(e,t,i,n,r){var a=Ee(e,t,i,n,r),o=_e(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function $i(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function zi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function qi(e,t){t[mr]=_(1e3*("0."+e))}function Wi(){return this._isUTC?"UTC":""}function Yi(){return this._isUTC?"Coordinated Universal Time":""}function Gi(e){return Ct(1e3*e)}function Vi(){return Ct.apply(null,arguments).parseZone()}function Ki(e){return e}function Xi(e,t,i,n){var r=it(),a=u().set(n,t);return r[i](a,e)}function Qi(e,t,i){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return Xi(e,t,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Xi(e,n,i,"month");return r}function Ji(e,t,i,n){"boolean"==typeof e?(o(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,o(t)&&(i=t,t=void 0),t=t||"");var r=it(),a=e?r._week.dow:0;if(null!=i)return Xi(t,(i+a)%7,n,"day");var s,l=[];for(s=0;s<7;s++)l[s]=Xi(t,(s+a)%7,n,"day");return l}function Zi(e,t){return Qi(e,t,"months")}function en(e,t){return Qi(e,t,"monthsShort")}function tn(e,t,i){return Ji(e,t,i,"weekdays")}function nn(e,t,i){return Ji(e,t,i,"weekdaysShort")}function rn(e,t,i){return Ji(e,t,i,"weekdaysMin")}function an(){var e=this._data;return this._milliseconds=ca(this._milliseconds),this._days=ca(this._days),this._months=ca(this._months),e.milliseconds=ca(e.milliseconds),e.seconds=ca(e.seconds),e.minutes=ca(e.minutes),e.hours=ca(e.hours),e.months=ca(e.months),e.years=ca(e.years),this}function on(e,t,i,n){var r=Xt(t,i);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function sn(e,t){return on(this,e,t,1)}function ln(e,t){return on(this,e,t,-1)}function dn(e){return e<0?Math.floor(e):Math.ceil(e)}function cn(){var e,t,i,n,r,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*dn(hn(s)+o),o=0,s=0),l.milliseconds=a%1e3,e=b(a/1e3),l.seconds=e%60,t=b(e/60),l.minutes=t%60,i=b(t/60),l.hours=i%24,o+=b(i/24),r=b(un(o)),s+=r,o-=dn(hn(r)),n=b(s/12),s%=12,l.days=o,l.months=s,l.years=n,this}function un(e){return 4800*e/146097}function hn(e){return 146097*e/4800}function fn(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if(e=L(e),"month"===e||"year"===e)return t=this._days+n/864e5,i=this._months+un(t),"month"===e?i:i/12;switch(t=this._days+Math.round(hn(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function pn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12):NaN}function gn(e){return function(){return this.as(e)}}function mn(){return Xt(this)}function vn(e){return e=L(e),this.isValid()?this[e+"s"]():NaN}function yn(e){return function(){return this.isValid()?this._data[e]:NaN}}function bn(){return b(this.days()/7)}function _n(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function wn(e,t,i){var n=Xt(e).abs(),r=xa(n.as("s")),a=xa(n.as("m")),o=xa(n.as("h")),s=xa(n.as("d")),l=xa(n.as("M")),d=xa(n.as("y")),c=r<=ka.ss&&["s",r]||r<ka.s&&["ss",r]||a<=1&&["m"]||a<ka.m&&["mm",a]||o<=1&&["h"]||o<ka.h&&["hh",o]||s<=1&&["d"]||s<ka.d&&["dd",s]||l<=1&&["M"]||l<ka.M&&["MM",l]||d<=1&&["y"]||["yy",d];return c[2]=t,c[3]=+e>0,c[4]=i,_n.apply(null,c)}function En(e){return void 0===e?xa:"function"==typeof e&&(xa=e,!0)}function Tn(e,t){return void 0!==ka[e]&&(void 0===t?ka[e]:(ka[e]=t,"s"===e&&(ka.ss=t-1),!0))}function Sn(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),i=wn(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function Cn(e){return(e>0)-(e<0)||+e}function xn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n=Aa(this._milliseconds)/1e3,r=Aa(this._days),a=Aa(this._months);e=b(n/60),t=b(e/60),n%=60,e%=60,i=b(a/12),a%=12;var o=i,s=a,l=r,d=t,c=e,u=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var f=h<0?"-":"",p=Cn(this._months)!==Cn(h)?"-":"",g=Cn(this._days)!==Cn(h)?"-":"",m=Cn(this._milliseconds)!==Cn(h)?"-":"";return f+"P"+(o?p+o+"Y":"")+(s?p+s+"M":"")+(l?g+l+"D":"")+(d||c||u?"T":"")+(d?m+d+"H":"")+(c?m+c+"M":"")+(u?m+u+"S":"")}var kn,An;An=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,n=0;n<i;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var In=e.momentProperties=[],Dn=!1,Mn={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Pn;Pn=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)d(e,t)&&i.push(t);return i};var Rn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},On={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Nn="Invalid date",Ln="%d",Fn=/\d{1,2}/,jn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Bn={},Hn={},Un=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$n=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zn={},qn={},Wn=/\d/,Yn=/\d\d/,Gn=/\d{3}/,Vn=/\d{4}/,Kn=/[+-]?\d{6}/,Xn=/\d\d?/,Qn=/\d\d\d\d?/,Jn=/\d\d\d\d\d\d?/,Zn=/\d{1,3}/,er=/\d{1,4}/,tr=/[+-]?\d{1,6}/,ir=/\d+/,nr=/[+-]?\d+/,rr=/Z|[+-]\d\d:?\d\d/gi,ar=/Z|[+-]\d\d(?::?\d\d)?/gi,or=/[+-]?\d+(\.\d{1,3})?/,sr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lr={},dr={},cr=0,ur=1,hr=2,fr=3,pr=4,gr=5,mr=6,vr=7,yr=8;U("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),N("year","y"),j("year",1),Y("Y",nr),Y("YY",Xn,Yn),Y("YYYY",er,Vn),Y("YYYYY",tr,Kn),Y("YYYYYY",tr,Kn),X(["YYYYY","YYYYYY"],cr),X("YYYY",function(t,i){i[cr]=2===t.length?e.parseTwoDigitYear(t):_(t)}),X("YY",function(t,i){i[cr]=e.parseTwoDigitYear(t)}),X("Y",function(e,t){t[cr]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var br,_r=ie("FullYear",!0);br=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),N("month","M"),j("month",8),Y("M",Xn),Y("MM",Xn,Yn),Y("MMM",function(e,t){return t.monthsShortRegex(e)}),Y("MMMM",function(e,t){return t.monthsRegex(e)}),X(["M","MM"],function(e,t){t[ur]=_(e)-1}),X(["MMM","MMMM"],function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);null!=r?t[ur]=r:f(i).invalidMonth=e});var wr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Er="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Tr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Sr=sr,Cr=sr;U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),j("week",5),j("isoWeek",5),Y("w",Xn),Y("ww",Xn,Yn),Y("W",Xn),Y("WW",Xn,Yn),Q(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=_(e)});var xr={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),Y("d",Xn),Y("e",Xn),Y("E",Xn),Y("dd",function(e,t){return t.weekdaysMinRegex(e)}),Y("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Y("dddd",function(e,t){return t.weekdaysRegex(e)}),Q(["dd","ddd","dddd"],function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);null!=r?t.d=r:f(i).invalidWeekday=e}),Q(["d","e","E"],function(e,t,i,n){t[n]=_(e)});var kr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ar="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ir="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Dr=sr,Mr=sr,Pr=sr;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,qe),U("k",["kk",2],0,We),U("hmm",0,0,function(){return""+qe.apply(this)+H(this.minutes(),2)}),U("hmmss",0,0,function(){return""+qe.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),Ye("a",!0),Ye("A",!1),N("hour","h"),j("hour",13),Y("a",Ge),Y("A",Ge),Y("H",Xn),Y("h",Xn),Y("k",Xn),Y("HH",Xn,Yn),Y("hh",Xn,Yn),Y("kk",Xn,Yn),Y("hmm",Qn),Y("hmmss",Jn),Y("Hmm",Qn),Y("Hmmss",Jn),X(["H","HH"],fr),X(["k","kk"],function(e,t){var i=_(e);t[fr]=24===i?0:i}),X(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),X(["h","hh"],function(e,t,i){t[fr]=_(e),f(i).bigHour=!0}),X("hmm",function(e,t,i){var n=e.length-2;t[fr]=_(e.substr(0,n)),t[pr]=_(e.substr(n)),f(i).bigHour=!0}),X("hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[fr]=_(e.substr(0,n)),t[pr]=_(e.substr(n,2)),t[gr]=_(e.substr(r)),f(i).bigHour=!0}),X("Hmm",function(e,t){var i=e.length-2;t[fr]=_(e.substr(0,i)),t[pr]=_(e.substr(i))}),X("Hmmss",function(e,t){var i=e.length-4,n=e.length-2;t[fr]=_(e.substr(0,i)),t[pr]=_(e.substr(i,2)),t[gr]=_(e.substr(n))});var Rr,Or=/[ap]\.?m?\.?/i,Nr=ie("Hours",!0),Lr={calendar:Rn,longDateFormat:On,invalidDate:Nn,ordinal:Ln,dayOfMonthOrdinalParse:Fn,relativeTime:jn,months:Er,monthsShort:Tr,week:xr,weekdays:kr,weekdaysMin:Ir,weekdaysShort:Ar,meridiemParse:Or},Fr={},jr={},Br=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ur=/Z|[+-]\d\d(?::?\d\d)?/,$r=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],zr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qr=/^\/?Date\((\-?\d+)/i,Wr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Yr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var Gr=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),Vr=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}),Kr=function(){return Date.now?Date.now():+new Date},Xr=["year","quarter","month","week","day","hour","minute","second","millisecond"];Nt("Z",":"),Nt("ZZ",""),Y("Z",ar),Y("ZZ",ar),X(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Lt(ar,e)});var Qr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Jr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Zr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Xt.fn=Pt.prototype,Xt.invalid=Mt;var ea=ei(1,"add"),ta=ei(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ia=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ni("gggg","weekYear"),Ni("ggggg","weekYear"),Ni("GGGG","isoWeekYear"),Ni("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),Y("G",nr),Y("g",nr),Y("GG",Xn,Yn),Y("gg",Xn,Yn),Y("GGGG",er,Vn),Y("gggg",er,Vn),Y("GGGGG",tr,Kn),Y("ggggg",tr,Kn),Q(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=_(e)}),Q(["gg","GG"],function(t,i,n,r){i[r]=e.parseTwoDigitYear(t)}),U("Q",0,"Qo","quarter"),N("quarter","Q"),j("quarter",7),Y("Q",Wn),X("Q",function(e,t){t[ur]=3*(_(e)-1)}),U("D",["DD",2],"Do","date"),N("date","D"),j("date",9),Y("D",Xn),Y("DD",Xn,Yn),Y("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),X(["D","DD"],hr),X("Do",function(e,t){t[hr]=_(e.match(Xn)[0])});var na=ie("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),j("dayOfYear",4),Y("DDD",Zn),Y("DDDD",Gn),X(["DDD","DDDD"],function(e,t,i){i._dayOfYear=_(e)}),U("m",["mm",2],0,"minute"),N("minute","m"),j("minute",14),Y("m",Xn),Y("mm",Xn,Yn),X(["m","mm"],pr);var ra=ie("Minutes",!1);U("s",["ss",2],0,"second"),N("second","s"),j("second",15),Y("s",Xn),Y("ss",Xn,Yn),X(["s","ss"],gr);var aa=ie("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),N("millisecond","ms"),j("millisecond",16),Y("S",Zn,Wn),Y("SS",Zn,Yn),Y("SSS",Zn,Gn);var oa;for(oa="SSSS";oa.length<=9;oa+="S")Y(oa,ir);for(oa="S";oa.length<=9;oa+="S")X(oa,qi);var sa=ie("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var la=v.prototype;la.add=ea,la.calendar=ni,la.clone=ri,la.diff=ui,la.endOf=Si,la.format=mi,la.from=vi,la.fromNow=yi,la.to=bi,la.toNow=_i,la.get=ae,la.invalidAt=Ri,la.isAfter=ai,la.isBefore=oi,la.isBetween=si,la.isSame=li,la.isSameOrAfter=di,la.isSameOrBefore=ci,la.isValid=Mi,la.lang=ia,la.locale=wi,la.localeData=Ei,la.max=Vr,la.min=Gr,la.parsingFlags=Pi,la.set=oe,la.startOf=Ti,la.subtract=ta,la.toArray=Ai,la.toObject=Ii,la.toDate=ki,la.toISOString=pi,la.inspect=gi,la.toJSON=Di,la.toString=fi,la.unix=xi,la.valueOf=Ci,la.creationData=Oi,la.year=_r,la.isLeapYear=te,la.weekYear=Li,la.isoWeekYear=Fi,la.quarter=la.quarters=$i,la.month=pe,la.daysInMonth=ge,la.week=la.weeks=Ae,la.isoWeek=la.isoWeeks=Ie,la.weeksInYear=Bi,la.isoWeeksInYear=ji,la.date=na,la.day=la.days=Fe,la.weekday=je,la.isoWeekday=Be,la.dayOfYear=zi,la.hour=la.hours=Nr,la.minute=la.minutes=ra,la.second=la.seconds=aa,la.millisecond=la.milliseconds=sa,la.utcOffset=Bt,la.utc=Ut,la.local=$t,la.parseZone=zt,la.hasAlignedHourOffset=qt,la.isDST=Wt,la.isLocal=Gt,la.isUtcOffset=Vt,la.isUtc=Kt,la.isUTC=Kt,la.zoneAbbr=Wi,la.zoneName=Yi,la.dates=T("dates accessor is deprecated. Use date instead.",na),la.months=T("months accessor is deprecated. Use month instead",pe),la.years=T("years accessor is deprecated. Use year instead",_r),la.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ht),la.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yt);var da=A.prototype;da.calendar=I,da.longDateFormat=D,da.invalidDate=M,da.ordinal=P,da.preparse=Ki,da.postformat=Ki,da.relativeTime=R,da.pastFuture=O,da.set=x,da.months=de,da.monthsShort=ce,da.monthsParse=he,da.monthsRegex=ve,da.monthsShortRegex=me,da.week=Ce,da.firstDayOfYear=ke,da.firstDayOfWeek=xe,da.weekdays=Pe,da.weekdaysMin=Oe,da.weekdaysShort=Re,da.weekdaysParse=Le,da.weekdaysRegex=He,da.weekdaysShortRegex=Ue,da.weekdaysMinRegex=$e,da.isPM=Ve,da.meridiem=Ke,Ze("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),e.lang=T("moment.lang is deprecated. Use moment.locale instead.",Ze),e.langData=T("moment.langData is deprecated. Use moment.localeData instead.",it);var ca=Math.abs,ua=gn("ms"),ha=gn("s"),fa=gn("m"),pa=gn("h"),ga=gn("d"),ma=gn("w"),va=gn("M"),ya=gn("y"),ba=yn("milliseconds"),_a=yn("seconds"),wa=yn("minutes"),Ea=yn("hours"),Ta=yn("days"),Sa=yn("months"),Ca=yn("years"),xa=Math.round,ka={ss:44,s:45,m:45,h:22,d:26,M:11},Aa=Math.abs,Ia=Pt.prototype;return Ia.isValid=Dt,Ia.abs=an,Ia.add=sn,Ia.subtract=ln,Ia.as=fn,Ia.asMilliseconds=ua,Ia.asSeconds=ha,Ia.asMinutes=fa,Ia.asHours=pa,Ia.asDays=ga,Ia.asWeeks=ma,Ia.asMonths=va,Ia.asYears=ya,Ia.valueOf=pn,Ia._bubble=cn,Ia.clone=mn,Ia.get=vn,Ia.milliseconds=ba,Ia.seconds=_a,Ia.minutes=wa,Ia.hours=Ea,Ia.days=Ta,Ia.weeks=bn,Ia.months=Sa,Ia.years=Ca,Ia.humanize=Sn,Ia.toISOString=xn,Ia.toString=xn,Ia.toJSON=xn,Ia.locale=wi,Ia.localeData=Ei,Ia.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xn),Ia.lang=ia,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Y("x",nr),Y("X",or),X("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),X("x",function(e,t,i){i._d=new Date(_(e))}),e.version="2.22.2",t(Ct),e.fn=la,e.min=kt,e.max=At,e.now=Kr,e.utc=u,e.unix=Gi,e.months=Zi,e.isDate=s,e.locale=Ze,e.invalid=g,e.duration=Xt,e.isMoment=y,e.weekdays=tn,e.parseZone=Vi,e.localeData=it,e.isDuration=Rt,e.monthsShort=en,e.weekdaysMin=rn,e.defineLocale=et,e.updateLocale=tt,e.locales=nt,e.weekdaysShort=nn,e.normalizeUnits=L,e.relativeTimeRounding=En,e.relativeTimeThreshold=Tn,e.calendarFormat=ii,e.prototype=la,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},e}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.rome=e()}}(function(){return function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){"use strict";function i(e,t,i){function o(){m.sleeping=!0}function s(){return l()}function l(e){var i=t.getBoundingClientRect(),n=document.body.scrollTop||document.documentElement.scrollTop;return v?(e=v.read(),{x:(e.absolute?0:i.left)+e.x,y:(e.absolute?0:i.top)+n+e.y+20}):{x:i.left,y:i.top+n}}function d(e){c(e)}function c(i){if(p)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(v&&!i)return m.sleeping=!1,void v.refresh();var n=l(i);v||t===e||(n.y+=t.offsetHeight),e.style.left=n.x+"px",e.style.top=n.y+"px"}function u(){v&&v.destroy(),n.remove(window,"resize",g),p=!0}var h=i,f=t&&t.tagName;f||2!==arguments.length||(h=t),f||(t=e),h||(h={});var p=!1,g=r(c,30),m={update:h.autoupdateToCaret!==!1&&d},v=h.caret&&a(t,m);return c(),h.tracking!==!1&&n.add(window,"resize",g),{read:s,refresh:c,destroy:u,sleep:o}}var n=e("crossvent"),r=e("./throttle"),a=e("./tailormade");t.exports=i},{"./tailormade":11,"./throttle":12,crossvent:18}],2:[function(e,t){(function(i){"use strict";var n,r=i.document,a=e("./getSelectionRaw"),o=e("./getSelectionNullOp"),s=e("./getSelectionSynthetic"),l=e("./isHost");n=l.method(i,"getSelection")?a:"object"==typeof r.selection&&r.selection?s:o,t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":3,"./getSelectionRaw":4,"./getSelectionSynthetic":5,"./isHost":6}],3:[function(e,t){"use strict";function i(){}function n(){return{removeAllRanges:i,addRange:i}}t.exports=n},{}],4:[function(e,t){(function(e){"use strict";function i(){return e.getSelection()}t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t){(function(i){"use strict";function n(e){var t=this,i=e.createRange();this._selection=e,this._ranges=[],"Control"===e.type?h(t):c(i)?u(t,i):s(t)}function r(e,t){for(var i,n=b.createControlRange(),r=0,a=t.length;a>r;++r){i=d(t[r]);try{n.add(i)}catch(e){throw new Error("setRanges(): Element could not be added to control selection")}}n.select(),h(e)}function a(e,t){var i=e.getAllRanges();e.removeAllRanges();for(var n=0,r=i.length;r>n;++n)p(t,i[n])||e.addRange(i[n]);e.rangeCount||s(e)}function o(e,t){var i="start",n="end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[n+"Container"],e.focusOffset=t[n+"Offset"]}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function l(e){if(!e.length||1!==e[0].nodeType)return!1;for(var t=1,i=e.length;i>t;++t)if(!g(e[0],e[t]))return!1;return!0}function d(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return t[0]}function c(e){return e&&void 0!==e.text}function u(e,t){e._ranges=[t],o(e,t,!1),e.rangeCount=1,e.isCollapsed=t.collapsed}function h(e){if(e._ranges.length=0,"None"===e._selection.type)s(e);else{var t=e._selection.createRange();if(c(t))u(e,t);else{e.rangeCount=t.length;for(var i,n=0;n<e.rangeCount;++n)i=y.createRange(),i.selectNode(t.item(n)),e._ranges.push(i);e.isCollapsed=1===e.rangeCount&&e._ranges[0].collapsed,o(e,e._ranges[e.rangeCount-1],!1)}}}function f(e,t){for(var i=e._selection.createRange(),n=d(t),r=b.createControlRange(),a=0,o=i.length;o>a;++a)r.add(i.item(a));try{r.add(n)}catch(e){throw new Error("addRange(): Element could not be added to control selection")}r.select(),h(e)}function p(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}function g(e,t){for(var i=t;i.parentNode;){if(i.parentNode===e)return!0;i=i.parentNode}return!1}function m(){return new n(i.document.selection)}var v=e("./rangeToTextRange"),y=i.document,b=y.body,_=n.prototype;_.removeAllRanges=function(){var e;try{this._selection.empty(),"None"!==this._selection.type&&(e=b.createTextRange(),e.select(),this._selection.empty())}catch(e){}s(this)},_.addRange=function(e){"Control"===this._selection.type?f(this,e):(v(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,e,!1))},_.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?r(this,e):t&&this.addRange(e[0])},_.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[e].cloneRange()},_.removeRange=function(e){if("Control"!==this._selection.type)return void a(this,e);for(var t,i=this._selection.createRange(),n=d(e),r=b.createControlRange(),o=!1,s=0,l=i.length;l>s;++s)t=i.item(s),t!==n||o?r.add(i.item(s)):o=!0;r.select(),h(this)},_.eachRange=function(e,t){var i=0,n=this._ranges.length;for(i=0;n>i;++i)if(e(this.getRangeAt(i)))return t},_.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},_.setSingleRange=function(e){this.removeAllRanges(),this.addRange(e)},t.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":7}],6:[function(e,t){"use strict";function i(e,t){var i=typeof e[t];return"function"===i||!("object"!==i||!e[t])||"unknown"===i}function n(e,t){return"undefined"!=typeof e[t]}function r(e){return function(t,i){for(var n=i.length;n--;)if(!e(t,i[n]))return!1;return!0}}t.exports={method:i,methods:r(i),property:n,properties:r(n)}},{}],7:[function(e,t){(function(e){"use strict";function i(e){if(e.collapsed)return r({node:e.startContainer,offset:e.startOffset},!0);var t=r({node:e.startContainer,offset:e.startOffset},!0),i=r({node:e.endContainer,offset:e.endOffset},!1),n=o.createTextRange();return n.setEndPoint("StartToStart",t),n.setEndPoint("EndToEnd",i),n}function n(e){var t=e.nodeType;return 3===t||4===t||8===t}function r(e,t){var i,r,s,l,d=e.offset,c=o.createTextRange(),u=n(e.node);return u?(i=e.node,r=i.parentNode):(l=e.node.childNodes,i=d<l.length?l[d]:null,r=e.node),s=a.createElement("span"),s.innerHTML="&#feff;",i?r.insertBefore(s,i):r.appendChild(s),c.moveToElementText(s),c.collapse(!t),r.removeChild(s),u&&c[t?"moveStart":"moveEnd"]("character",d),c}var a=e.document,o=a.body;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t){"use strict";var i=e("./getSelection"),n=e("./setSelection");t.exports={get:i,set:n}},{"./getSelection":2,"./setSelection":9}],9:[function(e,t){(function(i){"use strict";function n(e){function t(){var t=r(),i=o.createRange();e.startContainer&&(e.endContainer?i.setEnd(e.endContainer,e.endOffset):i.setEnd(e.startContainer,e.startOffset),i.setStart(e.startContainer,e.startOffset),t.removeAllRanges(),t.addRange(i))}function i(){a(e).select()}o.createRange?t():i()}var r=e("./getSelection"),a=e("./rangeToTextRange"),o=i.document;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":2,"./rangeToTextRange":7}],10:[function(e,t){"use strict";function i(e){return{start:e.selectionStart,end:e.selectionEnd}}function n(e){function t(t,n){return i!==e&&(i?i.focus():e.blur()),{start:t,end:n}}var i=document.activeElement;i!==e&&e.focus();var n=document.selection.createRange(),o=n.getBookmark(),s=e.value,l=r(s),d=n.parentElement();if(null===d||!a(d))return t(0,0);n.text=l+n.text+l;var c=e.value;return e.value=s,n.moveToBookmark(o),n.select(),t(c.indexOf(l),c.lastIndexOf(l)-l.length)}function r(e){var t;do t="@@marker."+Math.random()*new Date;while(-1!==e.indexOf(t));return t}function a(e){return"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName}function o(e,t){e.selectionStart=l(e,t.start),e.selectionEnd=l(e,t.end)}function s(e,t){var i=e.createTextRange();"end"===t.start&&"end"===t.end?(i.collapse(!1),i.select()):(i.collapse(!0),i.moveEnd("character",l(e,t.end)),i.moveStart("character",l(e,t.start)),i.select())}function l(e,t){return"end"===t?e.value.length:t||0}function d(e,t){return 2===arguments.length&&u(e,t),c(e)}var c=i,u=o;document.selection&&document.selection.createRange&&(c=n,u=s),t.exports=d},{}],11:[function(e,t){(function(i){"use strict";function n(e,t){function i(){}function n(){return(w?f:p)()}function o(){return T.sleeping?void 0:(T.update||i)(n())}function f(){var t=r(e),i=v(),n=g(i,t.start);return u.body.removeChild(i.mirror),n}function p(){var e=l();if(e.rangeCount){var t=e.getRangeAt(0),i="P"===t.startContainer.nodeName&&0===t.startOffset;if(i)return{x:t.startContainer.offsetLeft,y:t.startContainer.offsetTop,absolute:!0};if(t.getClientRects){var n=t.getClientRects();if(n.length>0)return{x:n[0].left,y:n[0].top,absolute:!0}}}return{x:0,y:0}}function g(t,i){var n=u.createElement("span"),r=t.mirror,a=t.computed;return y(r,m(e).substring(0,i)),"INPUT"===e.tagName&&(r.textContent=r.textContent.replace(/\s/g,"\xa0")),y(n,m(e).substring(i)||"."),r.appendChild(n),{x:n.offsetLeft+parseInt(a.borderLeftWidth),y:n.offsetTop+parseInt(a.borderTopWidth)}}function m(e){return w?e.value:e.innerHTML}function v(){function t(e){r[e]=i[e]}var i=c.getComputedStyle?getComputedStyle(e):e.currentStyle,n=u.createElement("div"),r=n.style;return u.body.appendChild(n),"INPUT"!==e.tagName&&(r.wordWrap="break-word"),r.whiteSpace="pre-wrap",r.position="absolute",r.visibility="hidden",d.forEach(t),h?(r.width=parseInt(i.width)-2+"px",e.scrollHeight>parseInt(i.height)&&(r.overflowY="scroll")):r.overflow="hidden",{mirror:n,computed:i}}function y(e,t){w?e.textContent=t:e.innerHTML=t}function b(t){var i=t?"remove":"add";a[i](e,"keydown",E),a[i](e,"keyup",E),a[i](e,"input",E),a[i](e,"paste",E),a[i](e,"change",E)}function _(){b(!0)}var w="INPUT"===e.tagName||"TEXTAREA"===e.tagName,E=s(o,30),T=t||{};return b(),{read:n,refresh:E,destroy:_}}var r=e("sell"),a=e("crossvent"),o=e("seleccion"),s=e("./throttle"),l=o.get,d=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],c=i,u=document,h=null!==c.mozInnerScreenX&&void 0!==c.mozInnerScreenX;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./throttle":12,crossvent:18,seleccion:8,sell:10}],12:[function(e,t){"use strict";function i(e,t){var i,n=-1/0;return function(){function r(){clearTimeout(i),i=null;var a=n+t,o=Date.now();o>a?(n=o,e()):i=setTimeout(r,a-o)}i||r()}}t.exports=i},{}],13:[function(e,t){"use strict";var i=e("ticky");t.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},{ticky:16}],14:[function(e,t){"use strict";var i=e("atoa"),n=e("./debounce");t.exports=function(e,t){var r=t||{},a={};return void 0===e&&(e={}),e.on=function(t,i){return a[t]?a[t].push(i):a[t]=[i],e},e.once=function(t,i){return i._once=!0,e.on(t,i),e},e.off=function(t,i){var n=arguments.length;if(1===n)delete a[t];else if(0===n)a={};else{var r=a[t];if(!r)return e;r.splice(r.indexOf(i),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(a[t]||[]).slice(0);return function(){var a=i(arguments),s=this||e;if("error"===t&&r["throws"]!==!1&&!o.length)throw 1===a.length?a[0]:a;return o.forEach(function(i){r.async?n(i,a,s):i.apply(s,a),i._once&&e.off(t,i)}),e}},e}},{"./debounce":13,atoa:15}],15:[function(e,t){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],16:[function(e,t){var i,n="function"==typeof setImmediate;i=n?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=i},{}],17:[function(e,t){(function(e){function i(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var n=e.CustomEvent;t.exports=i()?n:"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t){(function(i){"use strict";function n(e,t,i,n){return e.addEventListener(t,i,n)}function r(e,t,i){return e.attachEvent("on"+t,d(e,t,i))}function a(e,t,i,n){return e.removeEventListener(t,i,n)}function o(e,t,i){return e.detachEvent("on"+t,c(e,t,i))}function s(e,t,i){function n(){var e;return p.createEvent?(e=p.createEvent("Event"),e.initEvent(t,!0,!0)):p.createEventObject&&(e=p.createEventObject()),e}function r(){return new h(t,{detail:i})}var a=-1===f.indexOf(t)?r():n();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,t,n){return function(t){var r=t||i.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(e,r)}}function d(e,t,i){var n=c(e,t,i)||l(e,t,i);return v.push({wrapper:n,element:e,type:t,fn:i}),n}function c(e,t,i){var n=u(e,t,i);if(n){var r=v[n].wrapper;return v.splice(n,1),r}}function u(e,t,i){var n,r;for(n=0;n<v.length;n++)if(r=v[n],r.element===e&&r.type===t&&r.fn===i)return n}var h=e("custom-event"),f=e("./eventmap"),p=document,g=n,m=a,v=[];i.addEventListener||(g=r,m=o),t.exports={add:g,remove:m,fabricate:s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":19,"custom-event":17}],19:[function(e,t){(function(e){"use strict";var i=[],n="",r=/^on/;for(n in e)r.test(n)&&i.push(n.slice(2));t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t){"use strict";function i(e,t){var i=l[e.id];return i&&i[t.id]}function n(e,t){var i=l[e.id];i||(i=l[e.id]={});var n=a(t);i[t.id]=n,e.on("data",n),e.on("destroyed",r.bind(null,e,t))}function r(e,t){var i=l[e.id];if(i){var n=i[t.id];e.off("data",n),delete i[t.id]}}function a(e){return function(){e.refresh()}}function o(e,t){s(t.associated)||i(e,t)||n(e,t)}var s=e("./isInput"),l={};t.exports={add:o,remove:r}},{"./isInput":30}],21:[function(e,t){"use strict";function i(e){function t(){return Ie}function i(i){return ce=c(i||e,Ie),fe||(fe=o({className:ce.styles.container})),pe=ce.weekdayFormat,ge=pe.length,ve=n,me=n,ye=n,be=n,ce.appendTo.appendChild(fe),G(fe),Ce=!1,ue=ce.initialValue?ce.initialValue:u.moment(),he=ue.clone(),Ie.back=N,Ie.container=fe,Ie.destroyed=!1,Ie.destroy=g.bind(Ie,!1),Ie.emitValues=q,Ie.getDate=se,Ie.getDateString=le,Ie.getMoment=de,Ie.hide=D,Ie.next=L,Ie.options=v,Ie.options.reset=y,Ie.refresh=W,Ie.restore=t,Ie.setValue=Y,Ie.show=I,m(),p(),Ie}function p(){Ie.emit("ready",d(ce))}function g(e){fe&&fe.parentNode&&fe.parentNode.removeChild(fe),ce&&m(!0);var n=Ie.emitterSnapshot("destroyed");return Ie.back=f,Ie.destroyed=!0,Ie.destroy=t,Ie.emitValues=t,Ie.getDate=f,Ie.getDateString=f,Ie.getMoment=f,Ie.hide=t,Ie.next=f,Ie.options=t,Ie.options.reset=t,Ie.refresh=t,Ie.restore=i,Ie.setValue=t,Ie.show=t,Ie.off(),e!==!0&&n(),Ie}function m(e){var t=e?"remove":"add";ce.autoHideOnBlur&&r[t](document.documentElement,"focus",R,!0),ce.autoHideOnClick&&r[t](document,"click",O)}function v(e){return 0===arguments.length?d(ce):(g(),i(e),Ie)}function y(){return v({appendTo:ce.appendTo})}function b(){Ce||(Ce=!0,_(),w(),Ie.emit("render"))}function _(){function e(e){var t=o({className:ce.styles.month,parent:_e});0===e&&(we=o({type:"button",className:ce.styles.back,attributes:{type:"button"},parent:t})),e===ce.monthsInCalendar-1&&(Ee=o({type:"button",className:ce.styles.next,attributes:{type:"button"},parent:t}));var i,n=o({className:ce.styles.monthLabel,parent:t}),r=o({type:"table",className:ce.styles.dayTable,parent:t}),a=o({type:"thead",className:ce.styles.dayHead,parent:r}),s=o({type:"tr",className:ce.styles.dayRow,parent:a}),l=o({type:"tbody",className:ce.styles.dayBody,parent:r});for(i=0;ge>i;i++)o({type:"th",className:ce.styles.dayHeadElem,parent:s,text:pe[E(i)]});l.setAttribute(xe,e),ke.push({label:n,body:l})}if(ce.date){var t;for(ke=[],_e=o({className:ce.styles.date,parent:fe}),t=0;t<ce.monthsInCalendar;t++)e(t);r.add(we,"click",N),r.add(Ee,"click",L),r.add(_e,"click",ie)}}function w(){if(ce.time&&ce.timeInterval){var e=o({className:ce.styles.time,parent:fe});Te=o({className:ce.styles.selectedTime,parent:e,text:ue.format(ce.timeFormat)}),r.add(Te,"click",S),Se=o({className:ce.styles.timeList,parent:e}),r.add(Se,"click",oe);for(var t=u.moment("00:00:00","HH:mm:ss"),i=t.clone().add(1,"days");t.isBefore(i);)o({className:ce.styles.timeOption,parent:Se,text:t.format(ce.timeFormat)}),t.add(ce.timeInterval,"seconds")}}function E(e,t){var i=t?-1:1,n=e+ce.weekStart*i;return(n>=ge||0>n)&&(n+=ge*-i),n}function T(){if(ce.time&&Ce){var e,t,i,n,r=Se.children,a=r.length;for(n=0;a>n;n++)i=r[n],t=u.moment(s(i),ce.timeFormat),e=ae(ue.clone(),t),i.style.display=X(e,!1,ce.timeValidator)?"block":"none"}}function S(e){var t="boolean"==typeof e?e:"none"===Se.style.display;t?C():x()}function C(){Se&&(Se.style.display="block")}function x(){Se&&(Se.style.display="none")}function k(){fe.style.display="inline-block",Ie.emit("show")}function A(){"none"!==fe.style.display&&(fe.style.display="none",Ie.emit("hide"))}function I(){return b(),W(),S(!ce.date),k(),Ie}function D(){return x(),setTimeout(A,0),Ie}function M(){x();var e=h.contains(fe,ce.styles.positioned);return e&&setTimeout(A,0),Ie}function P(e){var t=e.target;if(t===Ie.associated)return!0;for(;t;){if(t===fe)return!0;t=t.parentNode}}function R(e){P(e)||M()}function O(e){P(e)||M()}function N(){F("subtract")}function L(){F("add")}function F(e){var t,i="add"===e?-1:1,n=ce.monthsInCalendar+i*re(be);he[e](n,"months"),t=Z(he.clone()),ue=t||ue,t&&(he=t.clone()),j(),Ie.emit("add"===e?"next":"back",ue.month())}function j(e){B(),z(),e!==!0&&q(),T()}function B(){function e(e,t){var i=he.clone().add(t,"months");s(e.label,i.format(ce.monthFormat)),G(e.body)}if(ce.date&&Ce){var t=he.year(),i=he.month(),n=he.date();if(n!==ye||i!==ve||t!==me){var r=U();if(ye=he.date(),ve=he.month(),me=he.year(),r)return void H();ke.forEach(e),V()}}}function H(){function e(e){var t,i=[];for(t=0;t<e.length;t++)i.push(e[t]);return i}function t(t){return e(t.children)}function i(e){return!h.contains(e,ce.styles.dayPrevMonth)&&!h.contains(e,ce.styles.dayNextMonth)}var n=he.date()-1;ne(!1),ke.forEach(function(r){var a;$(r.date,he)&&(a=e(r.body.children).map(t),a=Array.prototype.concat.apply([],a).filter(i),ne(a[n]))})}function U(){function e(e){return!!me&&$(e.date,he)}return ke.some(e)}function $(e,t){return e&&t&&e.year()===t.year()&&e.month()===t.month()}function z(){ce.time&&Ce&&s(Te,ue.format(ce.timeFormat))}function q(){return Ie.emit("data",le()),Ie.emit("year",ue.year()),Ie.emit("month",ue.month()),Ie.emit("day",ue.day()),Ie.emit("time",ue.format(ce.timeFormat)),Ie}function W(){return me=!1,ve=!1,ye=!1,j(!0),Ie}function Y(e){var t=l(e,ce.inputFormat);if(null!==t)return ue=Z(t)||ue,he=ue.clone(),j(!0),Ie}function G(e,t){for(;e&&e.firstChild;)e.removeChild(e.firstChild);t===!0&&e.parentNode.removeChild(e)}function V(){var e;for(e=0;e<ce.monthsInCalendar;e++)K(e)}function K(e){function t(e){var t,n,r;for(t=0;t<e.length;t++)h.children.length===ge&&(h=o({type:"tr",className:ce.styles.dayRow,parent:a.body})),n=e.base.clone().add(t,"days"),r=o({type:"td",parent:h,text:n.format(ce.dayFormat),className:i(n,e.cell.join(" ").split(" ")).join(" ")}),e.selectable&&n.date()===d&&ne(r)}function i(e,t){return X(e,!0,ce.dateValidator)||t.push(g),t}function n(e,t){return e&&t.push(ce.styles.dayConcealed),t}var r,a=ke[e],s=he.clone().add(e,"months"),l=s.daysInMonth(),d=s.month()!==ue.month()?-1:ue.date(),c=s.clone().date(1),u=E(c.day(),!0),h=o({type:"tr",className:ce.styles.dayRow,parent:a.body}),f=n(0!==e,[ce.styles.dayBodyElem,ce.styles.dayPrevMonth]),p=n(e!==ce.monthsInCalendar-1,[ce.styles.dayBodyElem,ce.styles.dayNextMonth]),g=ce.styles.dayDisabled;t({base:c.clone().subtract(u,"days"),length:u,cell:f}),t({base:c.clone(),length:l,cell:[ce.styles.dayBodyElem],selectable:!0}),r=c.clone().add(l,"days"),t({base:r,length:ge-h.children.length,cell:p}),we.disabled=!Q(c,!0),Ee.disabled=!J(r,!0),a.date=s.clone()}function X(e,t,i){if(!Q(e,t))return!1;if(!J(e,t))return!1;var n=(i||Function.prototype).call(Ie,e.toDate());return n!==!1}function Q(e,t){var i=!!ce.min&&(t?ce.min.clone().startOf("day"):ce.min);return!i||!e.isBefore(i)}function J(e,t){var i=!!ce.max&&(t?ce.max.clone().endOf("day"):ce.max);return!i||!e.isAfter(i)}function Z(e){if(ce.min&&e.isBefore(ce.min))return Z(ce.min.clone());if(ce.max&&e.isAfter(ce.max))return Z(ce.max.clone());var t=e.clone().subtract(1,"days");return te(t,e,"add")?ee(t):(t=e.clone(),te(t,e,"subtract")?ee(t):void 0)}function ee(e){var t,i=e.clone().subtract(ce.timeInterval,"seconds"),n=Math.ceil(Ae/ce.timeInterval);for(t=0;n>t;t++)if(i.add(ce.timeInterval,"seconds"),i.date()>e.date()&&i.subtract(1,"days"),ce.timeValidator.call(Ie,i.toDate())!==!1)return i}function te(e,t,i){for(var n=!1;n===!1&&(e[i](1,"days"),e.month()===t.month());)n=ce.dateValidator.call(Ie,e.toDate());return n!==!1}function ie(e){var t=e.target;if(!h.contains(t,ce.styles.dayDisabled)&&h.contains(t,ce.styles.dayBodyElem)){var i=parseInt(s(t),10),n=h.contains(t,ce.styles.dayPrevMonth),r=h.contains(t,ce.styles.dayNextMonth),a=re(t)-re(be);ue.add(a,"months"),(n||r)&&ue.add(n?-1:1,"months"),ne(t),ue.date(i),ae(ue,Z(ue)||ue),he=ue.clone(),ce.autoClose===!0&&M(),j()}}function ne(e){be&&h.remove(be,ce.styles.selectedDay),e&&h.add(e,ce.styles.selectedDay),be=e}function re(e){for(var t;e&&e.getAttribute;){if(t=e.getAttribute(xe),"string"==typeof t)return parseInt(t,10);e=e.parentNode}return 0}function ae(e,t){return e.hour(t.hour()).minute(t.minute()).second(t.second()),e}function oe(e){var t=e.target;if(h.contains(t,ce.styles.timeOption)){var i=u.moment(s(t),ce.timeFormat);ae(ue,i),he=ue.clone(),q(),z(),!ce.date&&ce.autoClose===!0||"time"===ce.autoClose?M():x()}}function se(){return ue.toDate()}function le(e){return ue.format(e||ce.inputFormat)}function de(){return ue.clone()}var ce,ue,he,fe,pe,ge,me,ve,ye,be,_e,we,Ee,Te,Se,Ce=!1,xe="data-rome-offset",ke=[],Ae=86400,Ie=a({associated:e.associated});return i(),setTimeout(p,0),Ie}var n,r=e("crossvent"),a=e("contra/emitter"),o=e("./dom"),s=e("./text"),l=e("./parse"),d=e("./clone"),c=e("./defaults"),u=e("./momentum"),h=e("./classes"),f=e("./noop");t.exports=i},{"./classes":22,"./clone":23,"./defaults":25,"./dom":26,"./momentum":31,"./noop":32,"./parse":33,"./text":45,"contra/emitter":14,crossvent:18}],22:[function(e,t){"use strict";function i(e){return e.className.replace(s,"").split(l)}function n(e,t){e.className=t.join(" ")}function r(e,t){var i=a(e,t);i.push(t),n(e,i)}function a(e,t){var r=i(e),a=r.indexOf(t);return-1!==a&&(r.splice(a,1),n(e,r)),r}function o(e,t){return-1!==i(e).indexOf(t)}var s=/^\s+|\s+$/g,l=/\s+/;t.exports={add:r,remove:a,contains:o}},{}],23:[function(e,t){"use strict";function i(e){var t,r={};for(var a in e)t=e[a],r[a]=t?n.isMoment(t)?t.clone():t._isStylesConfiguration?i(t):t:t;return r}var n=e("./momentum");t.exports=i},{"./momentum":31}],24:[function(e,t){"use strict";function i(e,t){var i,s=n.find(e);return s?s:(i=o(e)?r(e,t):a(e,t),n.assign(e,i),i)}var n=e("./index"),r=e("./input"),a=e("./inline"),o=e("./isInput");t.exports=i},{"./index":27,"./inline":28,"./input":29,"./isInput":30}],25:[function(e,t){"use strict";function i(e,t){var i,o,s=e||{};if(s.autoHideOnClick===o&&(s.autoHideOnClick=!0),s.autoHideOnBlur===o&&(s.autoHideOnBlur=!0),s.autoClose===o&&(s.autoClose=!0),s.appendTo===o&&(s.appendTo=document.body),"parent"===s.appendTo){if(!r(t.associated))throw new Error("Inline calendars must be appended to a parent node explicitly.");s.appendTo=t.associated.parentNode}if(s.invalidate===o&&(s.invalidate=!0),s.required===o&&(s.required=!1),s.date===o&&(s.date=!0),s.time===o&&(s.time=!0),s.date===!1&&s.time===!1)throw new Error("At least one of `date` or `time` must be `true`.");if(s.inputFormat===o&&(s.inputFormat=s.date&&s.time?"YYYY-MM-DD HH:mm":s.date?"YYYY-MM-DD":"HH:mm"),s.initialValue=s.initialValue===o?null:n(s.initialValue,s.inputFormat),s.min=s.min===o?null:n(s.min,s.inputFormat),s.max=s.max===o?null:n(s.max,s.inputFormat),s.timeInterval===o&&(s.timeInterval=1800),s.min&&s.max)if(s.max.isBefore(s.min)&&(i=s.max,s.max=s.min,s.min=i),s.date===!0){if(s.max.clone().subtract(1,"days").isBefore(s.min))throw new Error("`max` must be at least one day after `min`")}else if(1e3*s.timeInterval-s.min%(1e3*s.timeInterval)>s.max-s.min)throw new Error("`min` to `max` range must allow for at least one time option that matches `timeInterval`");if(s.dateValidator===o&&(s.dateValidator=Function.prototype),s.timeValidator===o&&(s.timeValidator=Function.prototype),s.timeFormat===o&&(s.timeFormat="HH:mm"),s.weekStart===o&&(s.weekStart=a.moment().weekday(0).day()),s.weekdayFormat===o&&(s.weekdayFormat="min"),"long"===s.weekdayFormat)s.weekdayFormat=a.moment.weekdays();else if("short"===s.weekdayFormat)s.weekdayFormat=a.moment.weekdaysShort();else if("min"===s.weekdayFormat)s.weekdayFormat=a.moment.weekdaysMin();else if(!Array.isArray(s.weekdayFormat)||s.weekdayFormat.length<7)throw new Error("`weekdays` must be `min`, `short`, or `long`");s.monthsInCalendar===o&&(s.monthsInCalendar=1),s.monthFormat===o&&(s.monthFormat="MMMM YYYY"),s.dayFormat===o&&(s.dayFormat="DD"),s.styles===o&&(s.styles={}),s.styles._isStylesConfiguration=!0;var l=s.styles;return l.back===o&&(l.back="rd-back"),l.container===o&&(l.container="rd-container"),l.positioned===o&&(l.positioned="rd-container-attachment"),l.date===o&&(l.date="rd-date"),l.dayBody===o&&(l.dayBody="rd-days-body"),l.dayBodyElem===o&&(l.dayBodyElem="rd-day-body"),l.dayPrevMonth===o&&(l.dayPrevMonth="rd-day-prev-month"),l.dayNextMonth===o&&(l.dayNextMonth="rd-day-next-month"),l.dayDisabled===o&&(l.dayDisabled="rd-day-disabled"),l.dayConcealed===o&&(l.dayConcealed="rd-day-concealed"),l.dayHead===o&&(l.dayHead="rd-days-head"),l.dayHeadElem===o&&(l.dayHeadElem="rd-day-head"),l.dayRow===o&&(l.dayRow="rd-days-row"),l.dayTable===o&&(l.dayTable="rd-days"),l.month===o&&(l.month="rd-month"),l.monthLabel===o&&(l.monthLabel="rd-month-label"),l.next===o&&(l.next="rd-next"),l.selectedDay===o&&(l.selectedDay="rd-day-selected"),l.selectedTime===o&&(l.selectedTime="rd-time-selected"),l.time===o&&(l.time="rd-time"),l.timeList===o&&(l.timeList="rd-time-list"),l.timeOption===o&&(l.timeOption="rd-time-option"),s}var n=e("./parse"),r=e("./isInput"),a=e("./momentum");t.exports=i},{"./isInput":30,"./momentum":31,"./parse":33}],26:[function(e,t){"use strict";function i(e){var t=e||{};t.type||(t.type="div");var i=document.createElement(t.type);return t.className&&(i.className=t.className),t.text&&(i.innerText=i.textContent=t.text),t.attributes&&Object.keys(t.attributes).forEach(function(e){i.setAttribute(e,t.attributes[e])}),t.parent&&t.parent.appendChild(i),i}t.exports=i},{}],27:[function(e,t){"use strict";function i(e){if("number"!=typeof e&&e&&e.getAttribute)return i(e.getAttribute(a));var t=o[e];return t!==r?t:null}function n(e,t){e.setAttribute(a,t.id=o.push(t)-1)}var r,a="data-rome-id",o=[];t.exports={find:i,assign:n}},{}],28:[function(e,t){"use strict";function i(e,t){var i=t||{};i.appendTo=e,i.associated=e;var r=n(i);return r.show(),r}var n=e("./calendar");t.exports=i},{"./calendar":21}],29:[function(e,t){"use strict";function i(e,t){function i(t){_=o(t||_,S),d.add(S.container,_.styles.positioned),n.add(S.container,"mousedown",f),n.add(S.container,"click",h),S.getDate=b(S.getDate),S.getDateString=b(S.getDateString),S.getMoment=b(S.getMoment),_.initialValue&&(e.value=_.initialValue.format(_.inputFormat)),T=r(S.container,e),S.on("data",v),S.on("show",T.refresh),u(),C()}function c(){u(!0),T.destroy(),T=null}function u(t){var r=t?"remove":"add";n[r](e,"click",g),n[r](e,"touchend",g),n[r](e,"focusin",g),n[r](e,"change",C),n[r](e,"keypress",C),n[r](e,"keydown",C),n[r](e,"input",C),_.invalidate&&n[r](e,"blur",p),t?(S.once("ready",i),S.off("destroyed",c)):(S.off("ready",i),S.once("destroyed",c))}function h(){E=!0,e.focus(),E=!1}function f(){function e(){w=!1}w=!0,setTimeout(e,0)}function p(){w||y()||S.emitValues()}function g(){E||S.show()}function m(){var t=e.value.trim();if(!y()){var i=l.moment(t,_.inputFormat,_.strictParse);S.setValue(i)}}function v(t){e.value=t}function y(){return _.required===!1&&""===e.value.trim()}function b(e){return function(){return y()?null:e.apply(this,arguments)}}var _=t||{};_.associated=e;var w,E,T,S=s(_),C=a(m,30);return i(_),S}var n=e("crossvent"),r=e("bullseye"),a=e("./throttle"),o=(e("./clone"),e("./defaults")),s=e("./calendar"),l=e("./momentum"),d=e("./classes");t.exports=i},{"./calendar":21,"./classes":22,"./clone":23,"./defaults":25,"./momentum":31,"./throttle":46,bullseye:1,crossvent:18}],30:[function(e,t){"use strict";function i(e){return e&&e.nodeName&&"input"===e.nodeName.toLowerCase()}t.exports=i},{}],31:[function(e,t){"use strict";function i(e){return e&&Object.prototype.hasOwnProperty.call(e,"_isAMomentObject")}var n={moment:null,isMoment:i};t.exports=n},{}],32:[function(e,t){"use strict";function i(){}t.exports=i},{}],33:[function(e,t){"use strict";function i(e,t){return"string"==typeof e?r.moment(e,t):"[object Date]"===Object.prototype.toString.call(e)?r.moment(e):r.isMoment(e)?e.clone():void 0}function n(e,t){var n=i(e,"string"==typeof t?t:null);return n&&n.isValid()?n:null}var r=e("./momentum");t.exports=n},{"./momentum":31}],34:[function(){"use strict";Array.prototype.filter||(Array.prototype.filter=function(e,t){var i=[];return this.forEach(function(n,r,a){e.call(t,n,r,a)&&i.push(n)},t),i})},{}],35:[function(){"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;for(var i=this,n=i.length,r=0;n>r;r++)r in i&&e.call(t,i[r],r,i)})},{}],36:[function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError;var i=this.length;for(t=+t||0,1/0===Math.abs(t)?t=0:0>t&&(t+=i,0>t&&(t=0));i>t;t++)if(this[t]===e)return t;return-1})},{}],37:[function(){"use strict";Array.isArray||(Array.isArray=function(e){return""+e!==e&&"[object Array]"===Object.prototype.toString.call(e)})},{}],38:[function(){"use strict";Array.prototype.map||(Array.prototype.map=function(e,t){var i,n,r;if(null==this)throw new TypeError("this is null or not defined");var a=Object(this),o=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=new Array(o),r=0;o>r;)r in a&&(n[r]=e.call(i,a[r],r,a)),r++;return n})},{}],39:[function(){"use strict";Array.prototype.some||(Array.prototype.some=function(e,t){var i,n;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),a=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=0;a>n;){if(n in r){var o=e.call(i,r[n],n,r);if(o)return!0}n++}return!1})},{}],40:[function(){"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){var r=this instanceof n&&e?this:e,a=t.concat(Array.prototype.slice.call(arguments));return i.apply(r,a)};return n.prototype=this.prototype,r.prototype=new n,r})},{}],41:[function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;Object.keys||(Object.keys=function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var a,o,s=[];for(a in r)e.call(r,a)&&s.push(a);if(t)for(o=0;n>o;o++)e.call(r,i[o])&&s.push(i[o]);return s})},{}],42:[function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},{}],43:[function(e,t){"use strict";e("./polyfills/function.bind"),e("./polyfills/array.foreach"),e("./polyfills/array.map"),e("./polyfills/array.filter"),e("./polyfills/array.isarray"),e("./polyfills/array.indexof"),e("./polyfills/array.some"),e("./polyfills/string.trim"),e("./polyfills/object.keys");var i=e("./core"),n=e("./index"),r=e("./use");i.use=r.bind(i),i.find=n.find,i.val=e("./validators"),t.exports=i},{"./core":24,"./index":27,"./polyfills/array.filter":34,"./polyfills/array.foreach":35,"./polyfills/array.indexof":36,"./polyfills/array.isarray":37,"./polyfills/array.map":38,"./polyfills/array.some":39,"./polyfills/function.bind":40,"./polyfills/object.keys":41,"./polyfills/string.trim":42,"./use":47,"./validators":48}],44:[function(e,t){(function(i){var n=e("./rome"),r=e("./momentum");if(n.use(i.moment),void 0===r.moment)throw new Error("rome depends on moment.js, you can get it at http://momentjs.com, or you could use the bundled distribution file instead.");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./momentum":31,"./rome":43}],45:[function(e,t){"use strict";function i(e,t){return 2===arguments.length&&(e.innerText=e.textContent=t),e.innerText||e.textContent}t.exports=i},{}],46:[function(e,t){"use strict";t.exports=function(e,t){var i,n=-1/0;return function(){function r(){clearTimeout(i),i=null;var a=n+t,o=+new Date;o>a?(n=o,e.apply(this,arguments)):i=setTimeout(r,a-o)}i||r()}}},{}],47:[function(e,t){"use strict";function i(e){this.moment=n.moment=e}var n=e("./momentum");t.exports=i},{"./momentum":31}],48:[function(e,t){"use strict";function i(e){return function(t){var i=a(t);return function(n){var s=r.find(t),l=a(n),d=i||s&&s.getMoment();return!d||(s&&o.add(this,s),e(l,d))}}}function n(e,t){return function(i,n){function s(e){var t,i,n=r.find(e);return n?t=i=n.getMoment():Array.isArray(e)?(t=e[0],i=e[1]):t=i=e,n&&o.add(n,this),{start:a(t).startOf("day").toDate(),end:a(i).endOf("day").toDate()}}var l,d=arguments.length;return Array.isArray(i)?l=i:1===d?l=[i]:2===d&&(l=[[i,n]]),function(i){return l.map(s.bind(this))[e](t.bind(this,i))}}}var r=e("./index"),a=e("./parse"),o=e("./association"),s=i(function(e,t){return e>=t}),l=i(function(e,t){return e>t}),d=i(function(e,t){return t>=e}),c=i(function(e,t){return t>e}),u=n("every",function(e,t){return t.start>e||t.end<e}),h=n("some",function(e,t){return t.start<=e&&t.end>=e});t.exports={afterEq:s,after:l,beforeEq:d,before:c,except:u,only:h}},{"./association":20,"./index":27,"./parse":33}]},{},[44])(44)}),function(){function e(i){this.extend(e,google.maps.OverlayView),this.b=[],this.d=null,this.g=100,this.m=!1,i=i||{},void 0==i.backgroundColor&&(i.backgroundColor=this.A),void 0==i.borderColor&&(i.borderColor=this.B),void 0==i.borderRadius&&(i.borderRadius=this.C),void 0==i.borderWidth&&(i.borderWidth=this.D),void 0==i.padding&&(i.padding=this.H),void 0==i.arrowPosition&&(i.arrowPosition=this.u),void 0==i.disableAutoPan&&(i.disableAutoPan=!1),void 0==i.disableAnimation&&(i.disableAnimation=!1),void 0==i.minWidth&&(i.minWidth=this.G),void 0==i.shadowStyle&&(i.shadowStyle=this.I),void 0==i.arrowSize&&(i.arrowSize=this.v),void 0==i.arrowStyle&&(i.arrowStyle=this.w),void 0==i.closeSrc&&(i.closeSrc=this.F),t(this),this.setValues(i)}function t(e){var t=e.c=document.createElement("DIV");t.style.position="absolute",t.style.zIndex=e.g,(e.i=document.createElement("DIV")).style.position="relative";var n=e.j=document.createElement("IMG");n.style.position="absolute",n.style.border=0,n.style.zIndex=e.g+1,n.style.cursor="pointer",n.src=e.get("closeSrc"),google.maps.event.addDomListener(n,"click",function(){e.close(),google.maps.event.trigger(e,"closeclick")});var r=e.e=document.createElement("DIV");r.style.overflowX="auto",r.style.overflowY="auto",r.style.cursor="default",r.style.clear="both",r.style.position="relative";var a=e.k=document.createElement("DIV");r.appendChild(a),a=e.N=document.createElement("DIV"),a.style.position="relative";var s=e.n=document.createElement("DIV"),l=e.l=document.createElement("DIV"),d=i(e);s.style.position=l.style.position="absolute",s.style.left=l.style.left="50%",s.style.height=l.style.height="0",s.style.width=l.style.width="0",s.style.marginLeft=o(-d),s.style.borderWidth=o(d),s.style.borderBottomWidth=0,d=e.a=document.createElement("DIV"),d.style.position="absolute",t.style.display=d.style.display="none",t.appendChild(e.i),t.appendChild(n),t.appendChild(r),a.appendChild(s),a.appendChild(l),t.appendChild(a),t=document.createElement("style"),t.setAttribute("type","text/css"),e.h="_ibani_"+Math.round(1e4*Math.random()),t.textContent="."+e.h+"{-webkit-animation-name:"+e.h+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+e.h+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}",document.getElementsByTagName("head")[0].appendChild(t)}function i(e){return parseInt(e.get("arrowSize"),10)||0}function n(e){return parseInt(e.get("borderRadius"),10)||0}function r(e){return parseInt(e.get("borderWidth"),10)||0}function a(e){return parseInt(e.get("padding"),10)||0}function o(e){return e?e+"px":e}function s(e){var t="mousedown mousemove mouseover mouseout mouseup mousewheel DOMMouseScroll touchstart touchend touchmove dblclick contextmenu click".split(" "),i=e.c;e.s=[];for(var n,r=0;n=t[r];r++)e.s.push(google.maps.event.addDomListener(i,n,function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))}function l(e,t,i){u(e),t&&e.setMap(t),i&&(e.set("anchor",i),e.bindTo("anchorPoint",i),e.bindTo("position",i)),e.c.style.display=e.a.style.display="",e.get("disableAnimation")||(e.c.className+=" "+e.h,e.a.className+=" "+e.h),v(e),e.m=!0,e.get("disableAutoPan")||window.setTimeout(function(){e.o()},200)}function d(e){e=e.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var t=document.createElement("DIV");if(t.innerHTML=e,1==t.childNodes.length)return t.removeChild(t.firstChild);for(e=document.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);return e}function c(e){if(e)for(var t;t=e.firstChild;)e.removeChild(t)}function u(e){if(e.k){c(e.k);var t=e.getContent();if(t){"string"==typeof t&&(t=d(t)),e.k.appendChild(t);for(var i,t=e.k.getElementsByTagName("IMG"),n=0;i=t[n];n++)google.maps.event.addDomListener(i,"load",function(){var t=!e.get("disableAutoPan");v(e),!t||0!=e.b.length&&0!=e.d.index||e.o()});google.maps.event.trigger(e,"domready")}v(e)}}function h(e){if(e.b&&e.b.length){for(var t,i=0;t=e.b[i];i++)f(e,t.f);e.d.style.zIndex=e.g,i=r(e),t=a(e)/2,e.d.style.borderBottomWidth=0,e.d.style.paddingBottom=o(t+i)}}function f(e,t){var i=e.get("backgroundColor"),s=e.get("borderColor"),l=n(e),d=r(e),c=a(e),u=o(-Math.max(c,l)),l=o(l),h=e.g;t.index&&(h-=t.index);var f,i={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:i,border:o(d)+" solid "+s,padding:o(c/2)+" "+o(c),marginRight:u,whiteSpace:"nowrap",borderRadiusTopLeft:l,MozBorderRadiusTopleft:l,webkitBorderTopLeftRadius:l,borderRadiusTopRight:l,MozBorderRadiusTopright:l,webkitBorderTopRightRadius:l,zIndex:h,display:"inline"};for(f in i)t.style[f]=i[f];f=e.get("tabClassName"),void 0!=f&&(t.className+=" "+f)}function p(e,t){t.U=google.maps.event.addDomListener(t,"click",function(){g(e,this)})}function g(e,t){if(t){var i=a(e)/2,n=r(e);if(e.d){var s=e.d;s.style.zIndex=e.g-s.index,s.style.paddingBottom=o(i),s.style.borderBottomWidth=o(n)}t.style.zIndex=e.g,t.style.borderBottomWidth=0,t.style.marginBottomWidth="-10px",t.style.paddingBottom=o(i+n),e.setContent(e.b[t.index].content),u(e),e.d=t,v(e)}else e.setContent(""),u(e)}function m(e,t,i){var n=document.createElement("DIV");return n.style.display="inline",n.style.position="absolute",n.style.visibility="hidden","string"==typeof e?n.innerHTML=e:n.appendChild(e.cloneNode(!0)),document.body.appendChild(n),e=new google.maps.Size(n.offsetWidth,n.offsetHeight),t&&e.width>t&&(n.style.width=o(t),e=new google.maps.Size(n.offsetWidth,n.offsetHeight)),i&&e.height>i&&(n.style.height=o(i),e=new google.maps.Size(n.offsetWidth,n.offsetHeight)),document.body.removeChild(n),delete n,e}function v(e){var t=e.get("map");if(t){var s=a(e);r(e),n(e);var l=i(e),c=t.getDiv(),u=2*l,t=c.offsetWidth-u,c=c.offsetHeight-u-y(e),u=0,h=e.get("minWidth")||0,f=e.get("minHeight")||0,p=e.get("maxWidth")||0,g=e.get("maxHeight")||0,p=Math.min(t,p),g=Math.min(c,g),v=0;if(e.b.length)for(var b,_=0;b=e.b[_];_++){var w=m(b.f,p,g);b=m(b.content,p,g),h<w.width&&(h=w.width),v+=w.width,f<w.height&&(f=w.height),w.height>u&&(u=w.height),h<b.width&&(h=b.width),f<b.height&&(f=b.height)}else _=e.get("content"),"string"==typeof _&&(_=d(_)),_&&(b=m(_,p,g),h<b.width&&(h=b.width),f<b.height&&(f=b.height));p&&(h=Math.min(h,p)),g&&(f=Math.min(f,g)),h=Math.max(h,v),h==v&&(h+=2*s),h=Math.max(h,2*l),h>t&&(h=t),f>c&&(f=c-u),e.i&&(e.t=u,e.i.style.width=o(v)),e.e.style.width=o(h),e.e.style.height=o(f)}n(e),s=r(e),t=2,e.b.length&&e.t&&(t+=e.t),l=2+s,(c=e.e)&&c.clientHeight<c.scrollHeight&&(l+=15),e.j.style.right=o(l),e.j.style.top=o(t+s),e.draw()}function y(e){return e.get("anchor")&&(e=e.get("anchorPoint"))?-1*e.y:0}var b;window.InfoBubble=e,b=e.prototype,b.v=15,b.w=0,b.I=1,b.G=50,b.u=50,b.H=10,b.D=1,b.B="#ccc",b.C=10,b.A="#fff",b.F="https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif",b.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},b.ea=function(e){this.set("backgroundClassName",e)},e.prototype.setBackgroundClassName=e.prototype.ea,e.prototype.O=function(){this.k.className=this.get("backgroundClassName")},e.prototype.backgroundClassName_changed=e.prototype.O,e.prototype.pa=function(e){this.set("tabClassName",e)},e.prototype.setTabClassName=e.prototype.pa,e.prototype.sa=function(){h(this)},e.prototype.tabClassName_changed=e.prototype.sa,e.prototype.da=function(e){this.set("arrowStyle",e)},e.prototype.setArrowStyle=e.prototype.da,e.prototype.M=function(){this.p()},e.prototype.arrowStyle_changed=e.prototype.M,e.prototype.ca=function(e){this.set("arrowSize",e)},e.prototype.setArrowSize=e.prototype.ca,e.prototype.p=function(){this.r()},e.prototype.arrowSize_changed=e.prototype.p,e.prototype.ba=function(e){this.set("arrowPosition",e)},e.prototype.setArrowPosition=e.prototype.ba,e.prototype.L=function(){var e=parseInt(this.get("arrowPosition"),10)||0;this.n.style.left=this.l.style.left=e+"%",v(this)},e.prototype.arrowPosition_changed=e.prototype.L,e.prototype.setZIndex=function(e){this.set("zIndex",e)},e.prototype.setZIndex=e.prototype.setZIndex,
e.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.g},e.prototype.ua=function(){var e=this.getZIndex();this.c.style.zIndex=this.g=e,this.j.style.zIndex=e+1},e.prototype.zIndex_changed=e.prototype.ua,e.prototype.na=function(e){this.set("shadowStyle",e)},e.prototype.setShadowStyle=e.prototype.na,e.prototype.qa=function(){var e="",t="",i="";switch(parseInt(this.get("shadowStyle"),10)||0){case 0:e="none";break;case 1:t="40px 15px 10px rgba(33,33,33,0.3)",i="transparent";break;case 2:t="0 0 2px rgba(33,33,33,0.3)",i="rgba(33,33,33,0.35)"}this.a.style.boxShadow=this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow=t,this.a.style.backgroundColor=i,this.m&&(this.a.style.display=e,this.draw())},e.prototype.shadowStyle_changed=e.prototype.qa,e.prototype.ra=function(){this.set("hideCloseButton",!1)},e.prototype.showCloseButton=e.prototype.ra,e.prototype.R=function(){this.set("hideCloseButton",!0)},e.prototype.hideCloseButton=e.prototype.R,e.prototype.S=function(){this.j.style.display=this.get("hideCloseButton")?"none":""},e.prototype.hideCloseButton_changed=e.prototype.S,e.prototype.setBackgroundColor=function(e){e&&this.set("backgroundColor",e)},e.prototype.setBackgroundColor=e.prototype.setBackgroundColor,e.prototype.P=function(){var e=this.get("backgroundColor");this.e.style.backgroundColor=e,this.l.style.borderColor=e+" transparent transparent",h(this)},e.prototype.backgroundColor_changed=e.prototype.P,e.prototype.setBorderColor=function(e){e&&this.set("borderColor",e)},e.prototype.setBorderColor=e.prototype.setBorderColor,e.prototype.Q=function(){var e=this.get("borderColor"),t=this.e,i=this.n;t.style.borderColor=e,i.style.borderColor=e+" transparent transparent",t.style.borderStyle=i.style.borderStyle=this.l.style.borderStyle="solid",h(this)},e.prototype.borderColor_changed=e.prototype.Q,e.prototype.fa=function(e){this.set("borderRadius",e)},e.prototype.setBorderRadius=e.prototype.fa,e.prototype.q=function(){var e=n(this),t=r(this);this.e.style.borderRadius=this.e.style.MozBorderRadius=this.e.style.webkitBorderRadius=this.a.style.borderRadius=this.a.style.MozBorderRadius=this.a.style.webkitBorderRadius=o(e),this.i.style.paddingLeft=this.i.style.paddingRight=o(e+t),v(this)},e.prototype.borderRadius_changed=e.prototype.q,e.prototype.ga=function(e){this.set("borderWidth",e)},e.prototype.setBorderWidth=e.prototype.ga,e.prototype.r=function(){var e=r(this);this.e.style.borderWidth=o(e),this.i.style.top=o(e);var e=r(this),t=i(this),n=parseInt(this.get("arrowStyle"),10)||0,a=o(t),s=o(Math.max(0,t-e)),l=this.n,d=this.l;this.N.style.marginTop=o(-e),l.style.borderTopWidth=a,d.style.borderTopWidth=s,0==n||1==n?(l.style.borderLeftWidth=a,d.style.borderLeftWidth=s):l.style.borderLeftWidth=d.style.borderLeftWidth=0,0==n||2==n?(l.style.borderRightWidth=a,d.style.borderRightWidth=s):l.style.borderRightWidth=d.style.borderRightWidth=0,2>n?(l.style.marginLeft=o(-t),d.style.marginLeft=o(-(t-e))):l.style.marginLeft=d.style.marginLeft=0,l.style.display=0==e?"none":"",h(this),this.q(),v(this)},e.prototype.borderWidth_changed=e.prototype.r,e.prototype.ma=function(e){this.set("padding",e)},e.prototype.setPadding=e.prototype.ma,e.prototype.ha=function(e){e&&this.j&&(this.j.src=e)},e.prototype.setCloseSrc=e.prototype.ha,e.prototype.Z=function(){var e=a(this);this.e.style.padding=o(e),h(this),v(this)},e.prototype.padding_changed=e.prototype.Z,e.prototype.onAdd=function(){this.c||t(this),s(this);var e=this.getPanes();e&&(e.floatPane.appendChild(this.c),e.floatShadow.appendChild(this.a))},e.prototype.onAdd=e.prototype.onAdd,e.prototype.draw=function(){var e=this.getProjection();if(e){var t=this.get("position");if(t){var n=0;this.d&&(n=this.d.offsetHeight);var r=y(this),a=i(this),s=parseInt(this.get("arrowPosition"),10)||0,s=s/100,e=e.fromLatLngToDivPixel(t),t=this.e.offsetWidth,l=this.c.offsetHeight;if(t){l=e.y-(l+a),r&&(l-=r);var d=e.x-t*s;switch(this.c.style.top=o(l),this.c.style.left=o(d),parseInt(this.get("shadowStyle"),10)){case 1:this.a.style.top=o(l+n-1),this.a.style.left=o(d),this.a.style.width=o(t),this.a.style.height=o(this.e.offsetHeight-a);break;case 2:t*=.8,this.a.style.top=o(r?e.y:e.y+a),this.a.style.left=o(e.x-t*s),this.a.style.width=o(t),this.a.style.height=o(2)}}}else this.close()}},e.prototype.draw=e.prototype.draw,e.prototype.onRemove=function(){this.c&&this.c.parentNode&&this.c.parentNode.removeChild(this.c),this.a&&this.a.parentNode&&this.a.parentNode.removeChild(this.a);for(var e,t=0;e=this.s[t];t++)google.maps.event.removeListener(e)},e.prototype.onRemove=e.prototype.onRemove,e.prototype.T=function(){return this.m},e.prototype.isOpen=e.prototype.T,e.prototype.close=function(){this.c&&(this.c.style.display="none",this.c.className=this.c.className.replace(this.h,"")),this.a&&(this.a.style.display="none",this.a.className=this.a.className.replace(this.h,"")),this.m=!1},e.prototype.close=e.prototype.close,e.prototype.open=function(e,t){var i=this;window.setTimeout(function(){l(i,e,t)},0)},e.prototype.open=e.prototype.open,e.prototype.setPosition=function(e){e&&this.set("position",e)},e.prototype.setPosition=e.prototype.setPosition,e.prototype.getPosition=function(){return this.get("position")},e.prototype.getPosition=e.prototype.getPosition,e.prototype.$=function(){this.draw()},e.prototype.position_changed=e.prototype.$,e.prototype.o=function(){var e=this.getProjection();if(e&&this.c){var t=y(this),i=this.c.offsetHeight+t,t=this.get("map"),n=t.getDiv().offsetHeight,r=this.getPosition(),a=e.fromLatLngToContainerPixel(t.getCenter()),r=e.fromLatLngToContainerPixel(r),i=a.y-i,n=n-a.y,a=0;0>i&&(a=(-1*i+n)/2),r.y-=a,r=e.fromContainerPixelToLatLng(r),t.getCenter()!=r&&t.panTo(r)}},e.prototype.panToView=e.prototype.o,e.prototype.setContent=function(e){this.set("content",e)},e.prototype.setContent=e.prototype.setContent,e.prototype.getContent=function(){return this.get("content")},e.prototype.getContent=e.prototype.getContent,e.prototype.oa=function(e){(e=this.b[e-1])&&g(this,e.f)},e.prototype.setTabActive=e.prototype.oa,e.prototype.ja=function(e){this.set("maxWidth",e)},e.prototype.setMaxWidth=e.prototype.ja,e.prototype.W=function(){v(this)},e.prototype.maxWidth_changed=e.prototype.W,e.prototype.ia=function(e){this.set("maxHeight",e)},e.prototype.setMaxHeight=e.prototype.ia,e.prototype.V=function(){v(this)},e.prototype.maxHeight_changed=e.prototype.V,e.prototype.la=function(e){this.set("minWidth",e)},e.prototype.setMinWidth=e.prototype.la,e.prototype.Y=function(){v(this)},e.prototype.minWidth_changed=e.prototype.Y,e.prototype.ka=function(e){this.set("minHeight",e)},e.prototype.setMinHeight=e.prototype.ka,e.prototype.X=function(){v(this)},e.prototype.minHeight_changed=e.prototype.X,e.prototype.J=function(e,t){var i=document.createElement("DIV");i.innerHTML=e,f(this,i),p(this,i),this.i.appendChild(i),this.b.push({label:e,content:t,f:i}),i.index=this.b.length-1,i.style.zIndex=this.g-i.index,this.d||g(this,i),i.className=i.className+" "+this.h,v(this)},e.prototype.addTab=e.prototype.J,e.prototype.ta=function(e,t,i){!this.b.length||0>e||e>=this.b.length||(e=this.b[e],void 0!=t&&(e.f.innerHTML=e.label=t),void 0!=i&&(e.content=i),this.d==e.f&&(this.setContent(e.content),u(this)),v(this))},e.prototype.updateTab=e.prototype.ta,e.prototype.aa=function(e){if(!(!this.b.length||0>e||e>=this.b.length)){var t=this.b[e];t.f.parentNode.removeChild(t.f),google.maps.event.removeListener(t.f.U),this.b.splice(e,1),delete t;for(var i,n=0;i=this.b[n];n++)i.f.index=n;t.f==this.d&&(this.d=this.b[e]?this.b[e].f:this.b[e-1]?this.b[e-1].f:void 0,g(this,this.d)),v(this)}},e.prototype.removeTab=e.prototype.aa,e.prototype.K=function(){this.draw()},e.prototype.anchorPoint_changed=e.prototype.K}(),/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,i){function n(e,t){return i(t,e)}e.each(t,n)},map:e.map,filter:e.grep,every:function(t,i){var n=!0;return t?(e.each(t,function(e,r){if(!(n=i.call(null,r,e,t)))return!1}),!!n):n},some:function(t,i){var n=!1;return t?(e.each(t,function(e,r){if(n=i.call(null,r,e,t))return!1}),!!n):n},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function i(){return String(t)}return e.isFunction(t)?t:i},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var n,r;return function(){var a,o,s=this,l=arguments;return a=function(){n=null,i||(r=e.apply(s,l))},o=i&&!n,clearTimeout(n),n=setTimeout(a,t),o&&(r=e.apply(s,l)),r}},throttle:function(e,t){var i,n,r,a,o,s;return o=0,s=function(){o=new Date,r=null,a=e.apply(i,n)},function(){var l=new Date,d=t-(l-o);return i=this,n=arguments,d<=0?(clearTimeout(r),r=null,o=l,a=e.apply(i,n)):r||(r=setTimeout(s,d)),a}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(!0)+e(!0)+e()},noop:function(){}}}(),i=function(){"use strict";function e(e){var o,s;return s=t.mixin({},a,e),o={css:r(),classes:s,html:i(s),selectors:n(s)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function i(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div role="listbox" class="'+e.menu+'"></div>'}}function n(e){var i={};return t.each(e,function(e,t){i[t]="."+e}),i}function r(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var a={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e}(),n=function(){"use strict";function i(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var n,r;return n="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(i.prototype,{_trigger:function(t,i){var r=e.Event(n+t);return this.$el.trigger.call(this.$el,r,i||[]),r},before:function(e){var t,i;return t=[].slice.call(arguments,1),i=this._trigger("before"+e,t),i.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=r[e])&&this._trigger(t,[].slice.call(arguments,1))}}),i}(),r=function(){"use strict";function e(e,t,i,n){var r;if(!i)return this;for(t=t.split(l),i=n?s(i,n):i,this._callbacks=this._callbacks||{};r=t.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][e].push(i);return this}function t(t,i,n){return e.call(this,"async",t,i,n)}function i(t,i,n){return e.call(this,"sync",t,i,n)}function n(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function r(e){var t,i,n,r,o;if(!this._callbacks)return this;for(e=e.split(l),n=[].slice.call(arguments,1);(t=e.shift())&&(i=this._callbacks[t]);)r=a(i.sync,this,[t].concat(n)),o=a(i.async,this,[t].concat(n)),r()&&d(o);return this}function a(e,t,i){function n(){for(var n,r=0,a=e.length;!n&&r<a;r+=1)n=e[r].apply(t,i)===!1;return!n}return n}function o(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function s(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,d=o();return{onSync:i,onAsync:t,off:n,trigger:r}}(),a=function(e){"use strict";function i(e){return a[e.toUpperCase()]||e}function n(e,n,r,a){for(var o,s=[],l=0,d=e.length;l<d;l++){var c=t.escapeRegExChars(e[l]);a&&(c=c.replace(/\S/g,i)),s.push(c)}return o=r?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}var r={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},a={A:"[Aa\xaa\xc0-\xc5\xe0-\xe5\u0100-\u0105\u01cd\u01ce\u0200-\u0203\u0226\u0227\u1d2c\u1d43\u1e00\u1e01\u1e9a\u1ea0-\u1ea3\u2090\u2100\u2101\u213b\u249c\u24b6\u24d0\u3371-\u3374\u3380-\u3384\u3388\u3389\u33a9-\u33af\u33c2\u33ca\u33df\u33ff\uff21\uff41]",B:"[Bb\u1d2e\u1d47\u1e02-\u1e07\u212c\u249d\u24b7\u24d1\u3374\u3385-\u3387\u33c3\u33c8\u33d4\u33dd\uff22\uff42]",C:"[Cc\xc7\xe7\u0106-\u010d\u1d9c\u2100\u2102\u2103\u2105\u2106\u212d\u216d\u217d\u249e\u24b8\u24d2\u3376\u3388\u3389\u339d\u33a0\u33a4\u33c4-\u33c7\uff23\uff43]",D:"[Dd\u010e\u010f\u01c4-\u01c6\u01f1-\u01f3\u1d30\u1d48\u1e0a-\u1e13\u2145\u2146\u216e\u217e\u249f\u24b9\u24d3\u32cf\u3372\u3377-\u3379\u3397\u33ad-\u33af\u33c5\u33c8\uff24\uff44]",E:"[Ee\xc8-\xcb\xe8-\xeb\u0112-\u011b\u0204-\u0207\u0228\u0229\u1d31\u1d49\u1e18-\u1e1b\u1eb8-\u1ebd\u2091\u2121\u212f\u2130\u2147\u24a0\u24ba\u24d4\u3250\u32cd\u32ce\uff25\uff45]",F:"[Ff\u1da0\u1e1e\u1e1f\u2109\u2131\u213b\u24a1\u24bb\u24d5\u338a-\u338c\u3399\ufb00-\ufb04\uff26\uff46]",G:"[Gg\u011c-\u0123\u01e6\u01e7\u01f4\u01f5\u1d33\u1d4d\u1e20\u1e21\u210a\u24a2\u24bc\u24d6\u32cc\u32cd\u3387\u338d-\u338f\u3393\u33ac\u33c6\u33c9\u33d2\u33ff\uff27\uff47]",H:"[Hh\u0124\u0125\u021e\u021f\u02b0\u1d34\u1e22-\u1e2b\u1e96\u210b-\u210e\u24a3\u24bd\u24d7\u32cc\u3371\u3390-\u3394\u33ca\u33cb\u33d7\uff28\uff48]",I:"[Ii\xcc-\xcf\xec-\xef\u0128-\u0130\u0132\u0133\u01cf\u01d0\u0208-\u020b\u1d35\u1d62\u1e2c\u1e2d\u1ec8-\u1ecb\u2071\u2110\u2111\u2139\u2148\u2160-\u2163\u2165-\u2168\u216a\u216b\u2170-\u2173\u2175-\u2178\u217a\u217b\u24a4\u24be\u24d8\u337a\u33cc\u33d5\ufb01\ufb03\uff29\uff49]",J:"[Jj\u0132-\u0135\u01c7-\u01cc\u01f0\u02b2\u1d36\u2149\u24a5\u24bf\u24d9\u2c7c\uff2a\uff4a]",K:"[Kk\u0136\u0137\u01e8\u01e9\u1d37\u1d4f\u1e30-\u1e35\u212a\u24a6\u24c0\u24da\u3384\u3385\u3389\u338f\u3391\u3398\u339e\u33a2\u33a6\u33aa\u33b8\u33be\u33c0\u33c6\u33cd-\u33cf\uff2b\uff4b]",L:"[Ll\u0139-\u0140\u01c7-\u01c9\u02e1\u1d38\u1e36\u1e37\u1e3a-\u1e3d\u2112\u2113\u2121\u216c\u217c\u24a7\u24c1\u24db\u32cf\u3388\u3389\u33d0-\u33d3\u33d5\u33d6\u33ff\ufb02\ufb04\uff2c\uff4c]",M:"[Mm\u1d39\u1d50\u1e3e-\u1e43\u2120\u2122\u2133\u216f\u217f\u24a8\u24c2\u24dc\u3377-\u3379\u3383\u3386\u338e\u3392\u3396\u3399-\u33a8\u33ab\u33b3\u33b7\u33b9\u33bd\u33bf\u33c1\u33c2\u33ce\u33d0\u33d4-\u33d6\u33d8\u33d9\u33de\u33df\uff2d\uff4d]",N:"[Nn\xd1\xf1\u0143-\u0149\u01ca-\u01cc\u01f8\u01f9\u1d3a\u1e44-\u1e4b\u207f\u2115\u2116\u24a9\u24c3\u24dd\u3381\u338b\u339a\u33b1\u33b5\u33bb\u33cc\u33d1\uff2e\uff4e]",O:"[Oo\xba\xd2-\xd6\xf2-\xf6\u014c-\u0151\u01a0\u01a1\u01d1\u01d2\u01ea\u01eb\u020c-\u020f\u022e\u022f\u1d3c\u1d52\u1ecc-\u1ecf\u2092\u2105\u2116\u2134\u24aa\u24c4\u24de\u3375\u33c7\u33d2\u33d6\uff2f\uff4f]",P:"[Pp\u1d3e\u1d56\u1e54-\u1e57\u2119\u24ab\u24c5\u24df\u3250\u3371\u3376\u3380\u338a\u33a9-\u33ac\u33b0\u33b4\u33ba\u33cb\u33d7-\u33da\uff30\uff50]",Q:"[Qq\u211a\u24ac\u24c6\u24e0\u33c3\uff31\uff51]",R:"[Rr\u0154-\u0159\u0210-\u0213\u02b3\u1d3f\u1d63\u1e58-\u1e5b\u1e5e\u1e5f\u20a8\u211b-\u211d\u24ad\u24c7\u24e1\u32cd\u3374\u33ad-\u33af\u33da\u33db\uff32\uff52]",S:"[Ss\u015a-\u0161\u017f\u0218\u0219\u02e2\u1e60-\u1e63\u20a8\u2101\u2120\u24ae\u24c8\u24e2\u33a7\u33a8\u33ae-\u33b3\u33db\u33dc\ufb06\uff33\uff53]",T:"[Tt\u0162-\u0165\u021a\u021b\u1d40\u1d57\u1e6a-\u1e71\u1e97\u2121\u2122\u24af\u24c9\u24e3\u3250\u32cf\u3394\u33cf\ufb05\ufb06\uff34\uff54]",U:"[Uu\xd9-\xdc\xf9-\xfc\u0168-\u0173\u01af\u01b0\u01d3\u01d4\u0214-\u0217\u1d41\u1d58\u1d64\u1e72-\u1e77\u1ee4-\u1ee7\u2106\u24b0\u24ca\u24e4\u3373\u337a\uff35\uff55]",V:"[Vv\u1d5b\u1d65\u1e7c-\u1e7f\u2163-\u2167\u2173-\u2177\u24b1\u24cb\u24e5\u2c7d\u32ce\u3375\u33b4-\u33b9\u33dc\u33de\uff36\uff56]",W:"[Ww\u0174\u0175\u02b7\u1d42\u1e80-\u1e89\u1e98\u24b2\u24cc\u24e6\u33ba-\u33bf\u33dd\uff37\uff57]",X:"[Xx\u02e3\u1e8a-\u1e8d\u2093\u213b\u2168-\u216b\u2178-\u217b\u24b3\u24cd\u24e7\u33d3\uff38\uff58]",Y:"[Yy\xdd\xfd\xff\u0176-\u0178\u0232\u0233\u02b8\u1e8e\u1e8f\u1e99\u1ef2-\u1ef9\u24b4\u24ce\u24e8\u33c9\uff39\uff59]",Z:"[Zz\u0179-\u017e\u01f1-\u01f3\u1dbb\u1e90-\u1e95\u2124\u2128\u24b5\u24cf\u24e9\u3390-\u3394\uff3a\uff5a]"};return function(i){function a(t){var n,r,a;return(n=s.exec(t.data))&&(a=e.createElement(i.tagName),i.className&&(a.className=i.className),r=t.splitText(n.index),r.splitText(n[0].length),a.appendChild(r.cloneNode(!0)),t.parentNode.replaceChild(a,r)),!!n}function o(e,t){for(var i,n=3,r=0;r<e.childNodes.length;r++)i=e.childNodes[r],i.nodeType===n?r+=t(i)?1:0:o(i,t)}var s;i=t.mixin({},r,i),i.node&&i.pattern&&(i.pattern=t.isArray(i.pattern)?i.pattern:[i.pattern],s=n(i.pattern,i.caseSensitive,i.wordsOnly,i.diacriticInsensitive),o(i.node,a))}}(window.document),o=function(){"use strict";function i(i,r){i=i||{},i.input||e.error("input is missing"),r.mixin(this),this.$hint=e(i.hint),this.$input=e(i.input),this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"}),e(r.menu).attr("id",this.$input.attr("id")+"_listbox"),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),this.onSync("cursorchange",this._updateDescendent)}function n(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function a(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(i.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=s[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var i;switch(e){case"up":case"down":i=!o(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function(e,t){var i;switch(e){case"tab":i=!o(t);break;default:i=!0}return i},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var i,n;i=a(e,this.query),n=!!i&&this.query.length!==e.length,this.query=e,t||i?!t&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(e,t){this.$input.attr("aria-activedescendant",t)},bind:function(){var e,i,n,r,a=this;return e=t.bind(this._onBlur,this),i=t.bind(this._onFocus,this),n=t.bind(this._onKeydown,this),r=t.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",i).on("keydown.tt",n),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){s[e.which||e.keyCode]||t.defer(t.bind(a._onInput,a,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,i,n;e=this.getInputValue(),t=this.getHint(),i=e!==t&&0===t.indexOf(e),n=""!==e&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,i,n;return e=this.$input.val().length,i=this.$input[0].selectionStart,t.isNumber(i)?i===e:!document.selection||(n=document.selection.createRange(),n.moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),i}(),s=function(){"use strict";function i(i,r){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||e.error("missing source"),i.node||e.error("missing node"),i.name&&!s(i.name)&&e.error("invalid dataset name: "+i.name),r.mixin(this),this.highlight=!!i.highlight,this.name=t.toStr(i.name||d()),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=o(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=t.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=e(i.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(e){function i(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:i}function o(i,n){function r(i){return e('<div role="option">').attr("id",t.guid()).text(n(i))}return{notFound:i.notFound&&t.templatify(i.notFound),pending:i.pending&&t.templatify(i.pending),header:i.header&&t.templatify(i.header),footer:i.footer&&t.templatify(i.footer),suggestion:i.suggestion||r}}function s(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var l,d;return l={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},d=t.getIdGenerator(),i.extractData=function(t){var i=e(t);return i.data(l.obj)?{dataset:i.data(l.dataset)||"",val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},t.mixin(i.prototype,r,{_overwrite:function(e,t){t=t||[],t.length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",t,!1,this.name)},_append:function(e,t){t=t||[],t.length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",t,!0,this.name)},_renderSuggestions:function(e,t){var i;i=this._getSuggestionsFragment(e,t),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var i,n;i=this._getSuggestionsFragment(e,t),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var r,o=this;return r=document.createDocumentFragment(),t.each(n,function(t){var n,a;a=o._injectQuery(i,t),n=e(o.templates.suggestion(a)).data(l.dataset,o.name).data(l.obj,t).data(l.val,o.displayFn(t)).addClass(o.classes.suggestion+" "+o.classes.selectable),r.appendChild(n[0])}),this.highlight&&a({className:this.classes.highlight,node:r,pattern:i}),e(r)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,i){return t.isObject(i)?t.mixin({_query:e},i):i},update:function(t){function i(e){o||(o=!0,e=(e||[]).slice(0,r.limit),s=e.length,r._overwrite(t,e),s<r.limit&&r.async&&r.trigger("asyncRequested",t,r.name))}function n(i){if(i=i||[],!a&&s<r.limit){r.cancel=e.noop;var n=Math.abs(s-r.limit);s+=n,r._append(t,i.slice(0,n)),r.async&&r.trigger("asyncReceived",t,r.name)}}var r=this,a=!1,o=!1,s=0;this.cancel(),this.cancel=function(){a=!0,r.cancel=e.noop,r.async&&r.trigger("asyncCanceled",t,r.name)},this.source(t,i,n),!o&&i([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function r(t){var i=a.$node.find(t.node).first();return t.node=i.length?i:e("<div>").appendTo(a.$node),new s(t,n)}var a=this;i=i||{},i.node||e.error("node is required"),n.mixin(this),this.$node=e(i.node),this.query=null,this.datasets=t.map(i.datasets,r)}return t.mixin(i.prototype,r,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return t.every(this.datasets,t.bind(function(e){var t=e.isEmpty();return this.$node.attr("aria-expanded",!t),t},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,i,n,r;t=e.position().top,i=t+e.outerHeight(!0),n=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(n+t):r<i&&this.$node.scrollTop(n+(i-r))},bind:function(){var i,n=this;return i=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,i),this.$node.on("mouseover",this.selectors.selectable,function(){n.setCursor(e(this))}),this.$node.on("mouseleave",function(){n._removeCursor()}),t.each(this.datasets,function(e){e.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,i,n,r;return i=this.getActiveSelectable(),t=this._getSelectables(),n=i?t.index(i):-1,r=n+e,r=(r+1)%(t.length+1)-1,r=r<-1?t.length-1:r,r===-1?null:t.eq(r)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?s.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){function i(t){t.update(e)}var n=e!==this.query;return n&&(this.query=e,t.each(this.datasets,i)),n},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,i)}}),i}(),d=function(){"use strict";function i(i){this.$el=e("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),i.$input.after(this.$el),t.each(i.menu.datasets,t.bind(function(e){e.onSync&&(e.onSync("rendered",t.bind(this.update,this)),e.onSync("cleared",t.bind(this.cleared,this)))},this))}return t.mixin(i.prototype,{update:function(e,t){var i,n=t.length;i=1===n?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(n+" "+i.result+" "+i.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),i}(),c=function(){"use strict";function e(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return t.mixin(e.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e}(),u=function(){"use strict";function i(i,r){var a,o,s,l,d,c,u,h,f,p,g;i=i||{},i.input||e.error("missing input"),i.menu||e.error("missing menu"),i.eventBus||e.error("missing event bus"),r.mixin(this),this.eventBus=i.eventBus,this.minLength=t.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.autoselect=!!i.autoselect,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),a=n(this,"activate","open","_onFocused"),o=n(this,"deactivate","_onBlurred"),s=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),d=n(this,"isActive","_onEscKeyed"),c=n(this,"isActive","open","_onUpKeyed"),u=n(this,"isActive","open","_onDownKeyed"),h=n(this,"isActive","isOpen","_onLeftKeyed"),f=n(this,"isActive","isOpen","_onRightKeyed"),p=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",a,this).onSync("blurred",o,this).onSync("enterKeyed",s,this).onSync("tabKeyed",l,this).onSync("escKeyed",d,this).onSync("upKeyed",c,this).onSync("downKeyed",u,this).onSync("leftKeyed",h,this).onSync("rightKeyed",f,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(e){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);t.each(i,function(t){return e[t].apply(e,n)})}}return t.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||e("<div>"),n=this.menu.$node||e("<div>"),i.on("blur.tt",function(e){var r,a,o;r=document.activeElement,a=n.is(r),o=n.has(r).length>0,t.isMsie()&&(a||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,i,n){if(this._updateHint(),this.autoselect){var r=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(r)}this.eventBus.trigger("render",t,i,n)},_onAsyncRequested:function(e,t,i){this.eventBus.trigger("asyncrequest",i,t)},_onAsyncCanceled:function(e,t,i){this.eventBus.trigger("asynccancel",i,t)},_onAsyncReceived:function(e,t,i){this.eventBus.trigger("asyncreceive",i,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&(t.preventDefault(),t.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(t.preventDefault(),t.stopPropagation())},_onTabKeyed:function(e,t){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&t.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return e=t.isString(e)?e:this.input.getQuery()||"",e.length>=this.minLength},_updateHint:function(){var e,i,n,r,a,s,l;e=this.menu.getTopSelectable(),i=this.menu.getSelectableData(e),n=this.input.getInputValue(),!i||t.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(r=o.normalizeQuery(n),a=t.escapeRegExChars(r),s=new RegExp("^(?:"+a+")(.+$)","i"),l=s.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj,t.dataset)||(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj,t.dataset),this.close(),0))},autocomplete:function(e){var t,i,n;return t=this.input.getQuery(),i=this.menu.getSelectableData(e),n=i&&t!==i.val,!(!n||this.eventBus.before("autocomplete",i.obj,i.dataset)||(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj,i.dataset),0))},moveCursor:function(e){var t,i,n,r,a,o,s;return t=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(e),n=this.menu.getSelectableData(i),r=n?n.obj:null,a=n?n.dataset:null,s=i?i.attr("id"):null,this.input.trigger("cursorchange",s),o=this._minLengthMet()&&this.menu.update(t),!o&&!this.eventBus.before("cursorchange",r,a)&&(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r,a),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function r(t,i){t.each(function(){var t,n=e(this);(t=n.data(m.typeahead))&&i(t,n)})}function a(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(h(e)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function s(e,t){e.data(m.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e}function h(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function f(e){var i,n;i=e.data(m.www),n=e.parent().filter(i.selectors.wrapper),t.each(e.data(m.attrs),function(i,n){t.isUndefined(i)?e.removeAttr(n):e.attr(n,i)}),e.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(i.classes.input),n.length&&(e.detach().insertAfter(n),n.remove())}function p(i){var n,r;return n=t.isJQuery(i)||t.isElement(i),r=n?e(i).first():[],r.length?r:null}var g,m,v;g=e.fn.typeahead,m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},v={initialize:function(r,h){function f(){var i,f,v,y,b,_,w,E,T,S,C,x;t.each(h,function(e){e.highlight=!!r.highlight}),i=e(this),f=e(g.html.wrapper),v=p(r.hint),y=p(r.menu),b=r.hint!==!1&&!v,_=r.menu!==!1&&!y,b&&(v=a(i,g)),_&&(y=e(g.html.menu).css(g.css.menu)),v&&v.val(""),i=s(i,g),(b||_)&&(f.css(g.css.wrapper),i.css(b?g.css.input:g.css.inputWithNoHint),i.wrap(f).parent().prepend(b?v:null).append(_?y:null)),x=_?c:l,w=new n({el:i}),E=new o({hint:v,input:i},g),T=new x({node:y,datasets:h},g),S=new d({$input:i,menu:T}),C=new u({input:E,menu:T,eventBus:w,minLength:r.minLength,autoselect:r.autoselect},g),i.data(m.www,g),i.data(m.typeahead,C)}var g;return h=t.isArray(h)?h:[].slice.call(arguments,1),r=r||{},g=i(r.classNames),this.each(f)},isEnabled:function(){var e;return r(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return r(this,function(e){e.enable()}),this},disable:function(){return r(this,function(e){e.disable()}),this},isActive:function(){var e;return r(this.first(),function(t){e=t.isActive()}),e},activate:function(){return r(this,function(e){e.activate()}),this},deactivate:function(){return r(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return r(this.first(),function(t){e=t.isOpen()}),e},open:function(){return r(this,function(e){e.open()}),this},close:function(){return r(this,function(e){e.close()}),this},select:function(t){var i=!1,n=e(t);return r(this.first(),function(e){i=e.select(n)}),i},autocomplete:function(t){var i=!1,n=e(t);return r(this.first(),function(e){i=e.autocomplete(n)}),i},moveCursor:function(e){var t=!1;return r(this.first(),function(i){t=i.moveCursor(e)}),t},val:function(e){
var i;return arguments.length?(r(this,function(i){i.setVal(t.toStr(e))}),this):(r(this.first(),function(e){i=e.getVal()}),i)},destroy:function(){return r(this,function(e,t){f(t),e.destroy()}),this}},e.fn.typeahead=function(e){return v[e]?v[e].apply(this,[].slice.call(arguments,1)):v.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=g,this}}()}),FS.cookies=Cookies.noConflict(),FS.dashjs=window.dashjs,FS.rome=window.rome,FS.moment=window.moment,function(e){"use strict";var t,i=".",n=e.getInternalNS("elements.constants");n.classes={elementContent:"fsElementContent",loadMoreButton:"fsLoadMoreButton",loadMoreClicked:"fsLoadMoreClicked",loadingDots:"fsLoadingDots",loadingDotsOverlay:"fsLoadingDotsOverlay",selectAll:"fsSelectAll",stateActive:"fsStateActive",stateExpanded:"fsStateExpanded",stateHidden:"fsStateHidden",stateOpen:"fsStateOpen",stateSelected:"fsStateSelected"},t=n.classes,n.selectors={elementContent:i+t.elementContent,loadMoreButton:i+t.loadMoreButton,loadingDotsOverlay:i+t.loadingDotsOverlay,selectAll:i+t.selectAll,stateActive:i+t.stateActive,stateExpanded:i+t.stateExpanded,stateHidden:i+t.stateHidden,stateOpen:i+t.stateOpen,stateSelected:i+t.stateSelected}}(FS),function(){function e(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),i=function(e,i){return!(void 0===t[e]||t[e]===i)};if(t.opacity<1||i("zIndex","auto")||i("transform","none")||i("mixBlendMode","normal")||i("filter","none")||i("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1}function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function i(e){e&&e.blur&&e!==document.body&&e.blur()}function n(e,t){for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1}function r(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function a(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal.bind(this));t.observe(e,{attributes:!0,attributeFilter:["open"]})}else{var i,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),a=function(t){if(t.target===e){var a="DOMNodeRemoved";n|=t.type.substr(0,a.length)===a,window.clearTimeout(i),i=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,a)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="fsDialogBackdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}var o=window.CustomEvent;o&&"object"!=typeof o||(o=function(e,t){t=t||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),i},o.prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var i=document.createEvent("MouseEvents");i.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(i),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"],n=t.map(function(e){return e+":not([disabled])"});n.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(n.join(", "))}i(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");e(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new o("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var s={};if(s.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,i=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,i)+"px"},s.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var i=document.styleSheets[t],r=null;try{r=i.cssRules}catch(e){}if(r)for(var a=0;a<r.length;++a){var o=r[a],s=null;try{s=document.querySelectorAll(o.selectorText)}catch(e){}if(s&&n(s,e)){var l=o.style.getPropertyValue("top"),d=o.style.getPropertyValue("bottom");if(l&&"auto"!==l||d&&"auto"!==d)return!0}}}return!1},s.needsCentering=function(e){var t=window.getComputedStyle(e);return"absolute"===t.position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!s.isInlinePositionSetByStylesheet(e))},s.forceRegisterDialog=function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(e)},s.registerDialog=function(e){e.showModal||s.forceRegisterDialog(e)},s.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var i=[];t.forEach(function(e){for(var t,n=0;t=e.removedNodes[n];++n)t instanceof Element&&("dialog"===t.localName&&i.push(t),i=i.concat(t.querySelectorAll("dialog")))}),i.length&&e(i)}))},s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,i=0;e=this.pendingDialogStack[i];++i)e.updateZIndex(--t,--t),0===i&&(this.overlay.style.zIndex=--t);var n=this.pendingDialogStack[0];if(n){var r=n.dialog.parentNode||document.body;r.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var i,n=0;i=this.pendingDialogStack[n];++n)if(i.dialog===e)return 0===n;e=e.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),i(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0],n=t.dialog,r=n.compareDocumentPosition(e.target);return r&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new o("cancel",{bubbles:!1,cancelable:!0}),i=this.pendingDialogStack[0];i&&i.dialog.dispatchEvent(t)&&i.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},s.DialogManager.prototype.checkDOM_=function(e){var t=this.pendingDialogStack.slice();t.forEach(function(t){e.indexOf(t.dialog)!==-1?t.downgradeModal():t.maybeHideModal()})},s.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);t!==-1&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var l=document.createElement("form");if(l.setAttribute("method","dialog"),"dialog"!==l.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var c=d.get;d.get=function(){return r(this)?"dialog":c.call(this)};var u=d.set;d.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):u.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",function(e){if(s.formSubmitter=null,s.useValue=null,!e.defaultPrevented){var i=e.target;if(i&&r(i.form)){var n="submit"===i.type&&["button","input"].indexOf(i.localName)>-1;if(!n){if("input"!==i.localName||"image"!==i.type)return;s.useValue=e.offsetX+","+e.offsetY}var a=t(i);a&&(s.formSubmitter=i)}}},!1);var h=HTMLFormElement.prototype.submit,f=function(){if(!r(this))return h.call(this);var e=t(this);e&&e.close()};HTMLFormElement.prototype.submit=f,document.addEventListener("submit",function(e){var i=e.target;if(r(i)){e.preventDefault();var n=t(i);if(n){var a=s.formSubmitter;a&&a.form===i?n.close(s.useValue||a.value):n.close(),s.formSubmitter=null}}},!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return s}):"object"==typeof module&&"object"==typeof module.exports?module.exports=s:window.dialogPolyfill=s}(),function(e,t,i){"use strict";var n=i.$,r=i._,a=i.getInternalNS("dialogs"),o=i.util,s=r.template('<dialog id="<%= id %>Dialog" class="fsDialog <%= dialogClass %>" aria-describedby="<%= id %>DialogContent"><button id="<%= id %>CloseButton" class="fsDialogCloseButton" type="button" aria-label="Close"></button><div id="<%= id %>DialogContent" class="fsDialogContent" aria-live="polite" aria-busy="true" aria-atomic="true"><div class="fsLoadingDots"></div></div></dialog>');o.ensureDialog=e.createElement("DIALOG").showModal?i._.noop:t.dialogPolyfill.registerDialog,delete t.dialogPolyfill,a.Dialog=function(t){var i,a,l,d;return t.removeOnClose=t.removeOnClose!==!1,t.id=t.id||"fs_"+r.uniqueId()+"_",a=n(s({dialogClass:t.dialogClass,id:t.id})),l=a.find(".fsDialogContent"),i=a[0],o.ensureDialog(i),a.on("close cancel",function(){t.removeOnClose&&a.remove(),d.focus()}),a.find(".fsDialogCloseButton").click(function(){i.close()}),{addContent:function(e){l.append(e)},attachToPage:function(){n(e.body).has(a).length||n(e.body).append(a)},close:function(){i.close()},getContentElement:function(){return l},open:function(e){d=e,this.attachToPage(),i.showModal()},setContent:function(e){l.html(e).attr("aria-busy","false")},setLoading:function(){l.html('<div class="fsLoadingDots"></div>').attr("aria-busy","true")}}}}(document,window,FS),function(e,t){"use strict";function i(){function e(e){return i[e]||(i[e]=[null])}function t(e,t){var i=!1;return e==t||(e&&t&&(i=!0,Q.each(e,function(n){if(void 0==t[n]||e[n]!=t[n])return i=!1,!1})),i)}var i={};this.addState=function(t,i){e(t).push(i)},this.getBackLinkState=function(i){for(var n=e(i),r=this.getCurrentState(i),a=0;a<n.length;a++)if(t(n[a],r))return a>0?n[a-1]:null;return null},this.getCurrentState=function(t){var i=e(t);return i.length>1?i[i.length-1]:null},this.didChangeState=function(e){return!t(ie.getCurrentHistoryState()[e],this.getCurrentState(e))},this.isStatesEmpty=function(){return Q.isEmptyObject(i)}}function n(e){var t=e?e.find(Ie):Q(Ie);t.each(function(){var e=Q(this);e.height(Math.round(e.width()*e.data("aspectratio")))})}function r(t,i,n){var r=e.dashjs.MediaPlayer().create();r.on(e.dashjs.MediaPlayer.events.ERROR,function(){t.one("loadedmetadata",function(){n&&n.resolve()}),t.attr("src",t.data("default-url")),t.attr("poster",t.data("poster-url")),i&&t[0].play()}),r.on(e.dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,function(){n&&n.resolve()}),r.initialize(t[0],t.data("dash-url"),i)}function a(e,t,i,n,r,a,o){return Q.ajax({cache:!1,type:"POST",url:fe,data:{copy_element_id:a,copy_timestamp:o,element_type_id:n,is_organizational:i,page_id:r,parent_id:e,sibling_id:t},error:function(){alert("There was an error creating the element. Please try again.")}})}function o(e,t,i,n){var r,a,o,s="fsElementDialog fs"+e+(n?" "+n:""),l={dialogClass:s};return t&&(l.id="fsEl_"+t+"_"+(i||0)+"_",a=Q("#"+l.id+"Dialog"),a.length&&(a[0].close(),a.remove())),o=re.Dialog(l),r=o.getContentElement(),r.data("type",e.replace("Element","")),J.extend(o,{setContentSuccess:function(e){o.setContent(e),ee.triggerElementDialogShown(r)}})}function s(e,t,i){return i=J.defaults(i||{},{elementUpdatedData:[],updateDOM:!0}),Q.ajax({cache:!1,data:J.defaults(t||{},{is_draft:E}),type:"GET",url:fe+"/"+e}).then(function(t){var n=Q(t),r=u(e);return r.attr("aria-busy",!1),i.updateDOM&&(r.replaceWith(n),i.elementUpdatedData.unshift(n),ee.triggerElementUpdated.apply(null,i.elementUpdatedData)),n})}function l(){return t.location.protocol+"//"+t.location.hostname}function d(){return t.history.state||{}}function c(e){return e.closest('[id^="fsEl_"]')}function u(e){return Q("#fsEl_"+e)}function h(e){return e.attr("id").split("_")[1]}function f(e,t){var i,n,r,a=/\/~([\w-]+)\/([\w-]+)/,o=/^\/fs\/pages\/(\d+)/;return t||o.test(e)?(r=e.split("?")[1],t||(t=parseInt(e.match(o)[1])),a.test(e)&&(n=e.match(a),i=n[1].replace(/-/g,"_")+"="+n[2],r=i+(r?"&"+r:"")),{pageID:t,queryString:r}):{}}function p(){return De.data("pageid")}function g(e){var i,n,r={};if(void 0===e?i=t.location.search.substring(1):(n=e.split("?"),i=n.length>0?n[1]:null),i)for(var a,o,s=0,l=i.split("&"),d=l.length;s<d;s++)o=l[s].split("="),a=Q.trim(decodeURIComponent(o[0])),a&&(r[a]=decodeURIComponent(o[1]));return r}function m(){return Q(Ee).find("> .fsElement.fsStateEditable[data-shared-id]")}function v(e){return parseInt(e.attr("id").split("_")[2])||0}function y(e){return e.closest("li").attr("id").split(/-|_/g)[1]}function b(){return K||(K=Q.Deferred(),Q.get("/fs/sessions/user/csrf-token").done(function(e){K.resolve(Q(e).val())}).fail(function(){K.reject(),K=void 0})),K.promise()}function _(){return De.hasClass(se)}function w(){return De.hasClass(ce)}function E(){return De.hasClass(de)}function T(){return De.hasClass(Ce)}function S(e){return e.hasClass("fsStateEditable")}function C(){return Q(ae).length>0}function x(e,t){var i=J.defaults(t,{is_draft:S(e),is_load_more:!0,parent_id:h(e)});return e.data("element-override")&&(i.element_override=e.data("element-override")),Q.ajax({cache:!1,data:i,url:"/fs/elements/"+i.parent_id,error:function(){alert("There was an error with the element. Please try again."),e.children(ye).remove()}})}function k(e){var t,i,n,r=Q(this),a={},o=["Constituent","EnotifyArchive"],s=r.data("start-row");t=c(r);for(var l=0;l<o.length;l++)if(t.hasClass("fs"+o[l])){n=o[l];break}if(!t)return!1;switch(i=t.children(he),n){case"Constituent":e.preventDefault(),a.const_page=r.data("page"),a=Q.extend(a,r.closest(".fsElementPagination").data("searchparams"));break;case"EnotifyArchive":a.start_row=s}A(i),x(t,a).done(function(e){var a=Q(e);if("EnotifyArchive"==n){var o=a.find(he).children(":not(.fsElementEmpty)");i.siblings(ye).remove(),i.append(o),t.addClass("fsLoadMoreClicked"),r.remove(),ee.triggerElementMoreLoaded(t,o)}else t.replaceWith(a),ee.triggerElementUpdated(a)})}function A(e){e.closest(".fsElement").attr("aria-busy",!0),e.before('<div class="fsLoadingDotsOverlay" style="height:'+e.height()+"px; width: "+e.width()+'px">'+we+"</div>")}function I(){var e=Q(this),t=e.find(".fsLoginUsername input"),i=e.find(".fsLoginPassword input");if(t.length){if(0==Q.trim(t.val()).length)return alert("Please enter your username to log in."),t.val(""),t.focus(),!1;if(0==i.val().length)return alert("Please enter your password to log in."),i.val(""),i.focus(),!1}return A(e),!!e.find('input[name="authenticity_token"]').length||(Q.get("/fs/sessions/user/csrf-token",function(t){e.append(t).submit()}),!1)}function D(e){var t,i,n={axis:"x",items:"> li:not(:has(> .fsAddPanelGroupTab))",beforeActivate:function(e){e.preventDefault()},update:function(e,n){var r=Q(n.item),a=r.prev(),o=y(r),s=u(o),l=a.length?y(a):0,d=u(l);P(s,d,t).done(function(){0==l?i.after(s):d.after(s)})}};e.hasClass("fsPageContent")?e.find(".fsPanelGroup:not(.fsAccordion)").each(function(){t=Q(this),i=t.children(he).children(".fsTabsNav"),i.sortable(n)}):(t=e,i=t.children(he).children(".fsTabsNav"),i.sortable(n))}function M(e,t){e.find(ke).addBack(ke).sortable(ie.SORTABLE_CONFIG),e.find("> "+he).sortable(Q.extend({},ie.SORTABLE_CONFIG,{axis:"y",cancel:".fsElementEditSettings, .fsElementDelete, .fsStateRichTextEditing, .redactor-editor, .redactor-box",connectWith:!1,containment:"parent",cursorAt:!1,helper:"original",items:t,update:function(e,t){var i=Q(t.item),n=i.prev(".fsElement"),r=Q(this);P(i,n,i.parent().parent()).fail(function(){r.sortable("cancel")})}}))}function P(t,i,n){var r=h(t),a=h(n),o=i.length?h(i):0;return Q.ajax({cache:!1,dataType:"json",type:"PUT",url:fe+"/"+r,data:{page_id:p(),element:{parent_id:a,sibling_id:o}},error:function(){alert("There was an error saving the element. Please refresh and try again.")},success:function(){e.events.triggerElementMoved(t,i),R("element:update",r)}})}function R(e,i){var n,r,a=0==e.indexOf("element:")&&"element:settings:display"!=e;_()&&a?(n=Q(oe),n.find(".fsElementBannerPublish").removeClass(me),r={data:h(n),event:"banner:update"}):r=T()&&a?{data:m().data("shared-id"),event:"sharedElement:update"}:{data:i,event:e},t.location.origin||(t.location.origin=l()+(t.location.port?":"+t.location.port:"")),t.parent.postMessage(JSON.stringify(r),t.location.origin)}function O(e,t){var i=o("AthleticsEvent");Q.post({cache:!1,data:{action:"getAthleticEventDialogHTML",athleticOccurID:e},dataType:"html",url:"/cf_calendar/ajax/fullcalendar.cfm"}).done(function(e){i.setContentSuccess(e),t.data("use-alerts")||i.getContentElement().find("a.fsAlertIcon.fsAthleticsEvent").remove()}).fail(function(){i.setContent("<p>There was an error loading the Athletic Event Details.</p>")}),i.open(t)}function N(e,i,n){var r="/cf_directory/cp.cfm?eventtype="+e+"&eventid="+i;n&&(r+="&calendar_ids="+n),t.open(r,"","width=600,height=700")}function L(e,t,i,n){var r="Page "+e,a=Q('<a href="#">').attr("aria-label",r).attr(n||{}).html(i).data("page",e);return e==t&&(a.attr({"aria-current":!0,"aria-label":r+", Current Page"}),a.prop("disabled",!0),a.addClass("fsStateActive")),a}function F(e,t,i,n){var r=Math.ceil(i/n);if(e.empty(),!(i<=n)){t>1&&e.append(L(t-1,t,"&lt;",{"class":"fsPreviousPageLink"})),e.append(L(1,t,1,{"class":"fsFirstPageLink"}));for(var a=t-1,o=[];a>1;){if(o.push(L(a,t,a)),t-a>1&&a>4&&r>10){o.push(L(Math.floor(t/2),t,"&hellip;"));break}a--}for(e.append(o.reverse()),a=Math.max(t,2);a<r;){if(e.append(L(a,t,a)),a-t>1&&r-a>3&&r>10){e.append(L(Math.floor((a+r)/2),t,"&hellip;"));break}a++}e.append(L(r,t,r,{"class":"fsLastPageLink"})),t<r&&e.append(L(t+1,t,"&gt;",{"class":"fsNextPageLink"})),e.append(Q("<span>").text("showing "+((t-1)*n+1)+" - "+t*n+" of "+i))}}function j(e,t){return 1==e?t:t+"s"}function B(e,t){J.each(e.data("linked-element-ids"),function(e){var i=u(e);i.length&&s(e,t)})}function H(e){e.closest(".fsElement").attr("aria-busy",!1).find(ye).remove()}function U(e){e.each(function(){var e=Q(this),t=Q("<span>",{"class":"fsClearInputContainer"}),i=Q("<button></button>",{"aria-label":"Clear"});i.toggleClass(me,!e.val().length),e.on("change input",function(){i.toggleClass(me,!e.val().length)}),i.on("click",function(){e.val("").trigger("change").focus()}),e.wrap(t).after(i)})}function $(e){e.on("click",pe,function(){var e=Q(this);e.toggleClass(ge)})}function z(e,t){e.on("click",Te,function(){var e=Q(this),t=e.text()==Se;e.parent().find(_e).prop("checked",t),e.text(t?le:Se)}).on("change",ve,function(){Q(this).closest(t).find(Te).trigger("updateLabel")}).on("updateLabel",Te,function(){var e=Q(this);e.text(0==e.parent().find(_e+be).length?le:Se)})}function q(e,t,i,n,r){var a=h(e),l=v(e),d=o(i,a,l,r);return l&&(t.shared_element_id=l),d.open(n),s(a,t,{updateDOM:!1}).done(function(e){d.setContentSuccess(e.find(".fsElementContent").html()),e.hasClass("fsResourceElement")&&d.getContentElement().find("audio, video").on("play pause",function(e){var t=Q(this),i=t.data(),n=t.is("video")?"Video":"Audio",r="resource"+n+e.type.charAt(0).toUpperCase()+e.type.slice(1);Y(r,i.resourceTitle,i.resourceUuid)})}).fail(function(e,t,i){d.setContent("<p>An error occurred while retrieving the data:</p><p>"+i+"</p>")})}function W(){return De.hasClass(Ae)}function Y(e,t,i){var n={event:e,resourceTitle:t,url:l()+"/fs/resource-manager/view/"+i};ne.push(n)}function G(e){if(t.history.pushState){var i,n={},r=g();Q.each(e,function(e,t){null===t||"element_id"==e?delete r[e]:r[e]=t}),i=Q.param(r),i=i.length>0?"?"+i:i,n[e.element_id]=e,t.history.pushState(Q.extend(d(),n),"",i)}}function V(e){if(t.history.replaceState&&e){var i=t.location,n=i.pathname;e.virtualParam&&(n=n.split("~")[0].replace(/\/$/,"")+e.virtualParam),n+=e.queryString?"?"+Q.param(J.extend(g(),e.queryString)):i.search,t.history.replaceState({},"",n)}}var K,X,Q=e.$,J=e._,Z=e.getInternalNS("elements.constants.classes"),ee=e.events,te=e.getInternalNS("elements.constants.selectors"),ie=e.getInternalNS("elements.utils"),ne=t.dataLayer||[],re=e.getInternalNS("dialogs"),ae="#fsAccountBar",oe=".fsBannerEdit",se="fsBannerEditMode",le="Deselect All",de="fsDraftMode",ce="fsComposeMode",ue="fsElementContent",he="."+ue,fe="/fs/elements",pe=".fsStyleExpandable",ge="fsStateExpanded",me=Z.stateHidden,ve='input[type="checkbox"]',ye=".fsLoadingDotsOverlay",be=":not(:checked)",_e="li:not("+te.stateHidden+") "+ve,we='<div class="fsLoadingDots"></div>',Ee="#fsPageContent",Te=te.selectAll,Se="Select All",Ce="fsSharedElementEditMode",xe="> "+he+".fsStateEditable",ke=oe+", .fsDiv.fsStateEditable, .fsPanel"+te.stateOpen+" "+xe+", .fsContainer "+xe+", .fsTab.fsStateEditable, .fsPersonalizationPanelElement "+xe,Ae="fsSuppressGoogleMaps",Ie=".fsEmbeddedMediaResponsive",De=Q(document.body);X={ElementHistory:i,SORTABLE_SELECTOR:ke,adjustMediaAspectRatio:n,createDashPlayer:r,createElement:a,fetchElementHTML:s,getCurrentHistoryState:d,getElement:c,getElementByID:u,getElementID:h,getInternalLinkProperties:f,getPageID:p,getQueryStringValues:g,getSharedElement:m,getTabID:y,getToken:b,inBannerEditMode:_,inComposeMode:w,inDraftMode:E,inSharedElementEditMode:T,isLoggedIn:C,loadElementData:x,loadMoreHandler:k,loadingOverlay:A,loginFormSubmitHandler:I,makePanelGroupTabsSortable:D,makeSubelementsSortable:M,moveBehind:P,notifyAdminInterface:R,openAthleticEventPopup:O,openCalendarAlertPopup:N,pagination:F,pluralize:j,populateLinkedElements:B,removeLoadingOverlay:H,setupClearInputButtons:U,setupExpandableHeaders:$,setupSelectAllButtons:z,showElementPopupDialog:q,suppressGoogleMaps:W,trackResourceEvent:Y,updateQueryStringValueAndHistory:G,updateURLParams:V},Q.extend(ie,X)}(FS,window),function(e,t){"use strict";function i(e,t,i){var n,a,o=X.data("element"),s=ee('<div id="newEl_'+(new Date).getTime()+'" class="'+Ue+'">'+pt+"</div>");o.hasClass(Ue)?"above"==X.find("button."+Bt).val()?s.insertBefore(o):s.insertAfter(o):o.replaceWith(s),n=s.prev($e),a=n.length?ue(n):0,se(ue(de(s.parent())),a,!1,ee(e).data("type-id"),fe(),t,i).fail(function(){var e=de(s.parent());s.remove(),r(e)}).done(function(e){var i=ee(e);s.replaceWith(i),i.find(ie.SORTABLE_SELECTOR).sortable(li),i.hasClass(_e)?R(i):i.hasClass(Le)&&i.find(Yt).sortable(li),ye("element:create",ue(i)),be.triggerElementAdded(i),t&&i.find($e).each(function(){be.triggerElementAdded(ee(this))})}),X.dialog("close")}function n(){var e=ee("#fsElementSettingShowBoards"),t=ee("#fsElementSettingsDisplayBoardsMethod");e.click(function(){Y(e.siblings("#fsConstituentSettingDisplayBoardsLinkContainer"),!this.checked)}),t.find("input:radio").click(function(){Y(t.siblings(At),"fsElementSettingsOpenMethodFolders"!=this.id)}),ee("#fsElementSettingLinkedPostFolderPicker").click(function(e){var t=e.originalEvent.target,i={id:t.id,pickerOptions:{selectedItemIDs:ee(kt).map(function(){return ee(this).val()})}};ye("postFolderPicker:open",i)})}function r(e){var t;switch(e.data("type")){case"Banner":case"Div":case"Tab":t=e;break;case"Container":case"Panel":case"PersonalizationPanel":t=e.find("> "+qe);break;default:return}t.find($e).length?t.find("> "+it).remove():t.append('<div class="fsElementAddWrapper '+tt+'"><button class="fsElementAdd">ADD ELEMENT</button></div>')}function a(){sessionStorage.removeItem("copiedElement"),Qt.find(Ge).removeClass(Ye)}function o(){Qt.removeClass(Ie),V.hide()}function s(e){var t,i,n,r;e.data("editor")==Me?(i=v(b(e,Pe).attr("id")),n=ee.trim(i.getData()),t=e.parent().parent().find(".fsContentOverlay"),te.defer(function(){i.destroy()})):(n=ee.trim(e.redactor("code.get")),t=e.prev(".fsContentOverlay"),e.redactor("core.destroy")),r=""==n,t.toggleClass("fsStateEmpty",r).find(je).toggleClass(Te,r).text(r?"Click here to add content":"EDIT CONTENT"),e.closest(Fe).removeClass(Nt),Qt.removeClass(Nt),ei.trigger("resize",{forceUpdate:!0})}function l(e){e?O(ee(bt)):(ne&&ee(Ae).find(".fsElementBannerExit").click(),K&&K.dialog("isOpen")&&K.dialog("close"),Qt.hasClass(et)&&X.dialog("close"),u()),Qt.toggleClass(Ne,e),be.triggerComposeModeChanged(e)}function d(){return"true"==sessionStorage.getItem("composeModeEnabled")}function c(t){var i=ee("#fsDateFilterSettingPostCount"),n=i.next("label"),r=ee("#fsDateFilterSettingDisplayRange"),a=ee("#fsDateFilterSettingDaysAfter"),o=ee("#fsDateFilterSettingDaysBefore"),s={autoHideOnBlur:!1,inputFormat:"YYYY-MM-DD",time:!1},l=document.getElementById("fsDateFilterSettingStartDate"),d=document.getElementById("fsDateFilterSettingEndDate");"athletics"!=t&&(i.find("option[value='0']").remove(),r.find("option[value='5']").remove()),"news"==t?(r.find("option[value='1']").remove(),r.find("option[value='2']").remove(),Y(a,!0),Y(ee('label[for="fsDateFilterSettingDaysAfter"]'),!0)):r.find("option[value='0']").remove(),l&&(e.rome(l,ee.extend({dateValidator:e.rome.val.beforeEq(d)},s)),ee(".rd-container").on("focusin",function(e){e.stopPropagation()})),d&&e.rome(d,ee.extend({dateValidator:e.rome.val.afterEq(l)},s)),r.on("change",function(){var e=ee(this),r=e.val(),s=i.val(),l=(1==s?"item":"items")+" from",d=i.find("option[value='0']");Y(e.siblings(".fsDateFilterSettingDateRange"),3!=r),Y(e.siblings(".fsDateFilterSettingDayRange"),4!=r),Y(e.parent().siblings(".fsDateFilterSettingEventYear"),5!=r),n.html(l),"athletics"==t&&(1==r||2==r||5==r?(d.length||(d=ee('<option value="0">all</option>'),i.append(d)),5==r&&(d.prop("selected",!0),i.change())):(d.remove(),0==s&&i.change())),o.change(),a.change()}),o.on("change",function(){Y(ee(".fsDisplayPastEventsToggleContainer"),4==r.val()&&o.val()>0)}),a.on("change",function(){Y(ee(".fsDisplayUpcomingEventsToggleContainer"),4==r.val()&&a.val()>0)}),i.on("change",function(){var e=ee(this),t=(1==e.val()?"item":"items")+" from";n.html(t),Y(ee(".fsDateFilterSettingDisplayMoreContainer"),0==e.val())})}function u(){ee(".ui-sortable").sortable("destroy")}function h(e){e?Zt.hasClass(He)||(Zt.addClass(He),Zt.on("mousewheel DOMMouseScroll",f)):(Zt.removeClass(He),Zt.off("mousewheel DOMMouseScroll",f))}function f(e){e=t.event||e.originalEvent,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,ei.scrollTop(ei.scrollTop()+60*Math.max(-1,Math.min(1,-e.wheelDelta||e.detail)))}function p(e){if(0!=e.length){var t=ue(e),i=S(e);e.data("use-new")&&ye("element:layout:display",_(e,t,i))}}function g(e){if(0!=e.length){var t,i=ue(e),n=S(e),r=e.data("shared-id");if(e.data("use-new"))return void ye("element:settings:display",w(e,i,n,r));k(),K.dialog("option","title",n.split(/(?=[A-Z])/).join(" ")+("Banner"==n?"":" Element")+" Settings"),K.html(pt),K.dialog("open"),t=K.parent().find(".ui-dialog-buttonset"),t.addClass(mt),r&&K.data(rt,r),e.hasClass("fsSharedContainer")?K.html('<h3 class="fsSharedElementTitle">This container is shared!</h3><p>Shared containers can only be edited in the Shared Element editor</p>').append(ee('<button class="fsSharedElementButton">Edit Shared</button>').on("click",function(){ye("sharedElement:display",r)})):ee.ajax({cache:!1,dataType:"html",url:at+"/"+i+"/settings"+(0==i?"/"+E(e):""),error:function(e){K.dialog("close"),403==e.status?alert(e.responseText):alert("There was an error loading the settings for this element. Please try again.")},success:function(a){K.data(Je,i),0==i&&K.data(nt,E(e)),!r||ae&&ue(pe())==i?(A(a,n,!1),t.removeClass(mt)):K.html('<h3 class="fsSharedElementTitle">This element is shared!</h3><p>Would you like to orphan just this element or edit the shared element?</p>').append(ee('<button class="fsSharedElementButton">Orphan and Edit</button>').on("click",function(){A(a,n,!0),t.removeClass(mt)}),ee('<button class="fsSharedElementButton">Edit Shared</button>').on("click",function(){ye("sharedElement:display",r)}))}})}}function m(){var e="fsElementLibraryWrapper",t="fsElementLocation";if(!X){var n,r;X=ee('<div id="fsElementLibrary"><div id="'+e+'">'+pt+'</div><div id="'+Ze+'"><div class="fsElementCopiedItem"><span aria-hidden="true"></span><div><p class="name"></p><p class="message">Paste this Element</p></div></div><button value="clear" >Clear</button></div><button class="'+Bt+" "+t+'" value="below" >Place Below</button><button class="'+t+'" value="above">Place Above</button></div>'),r=X.find("button."+t),X.dialog(ee.extend({},ai,{appendTo:Qt,dialogClass:"fsElementsDialog",width:500,close:function(){Qt.removeClass(et),X.data("element").removeClass(Ee)},open:function(){Qt.addClass(et),X.data("libraryLoaded")&&r.toggleClass(ot,!X.data("showLocation")),ee(".ui-widget-overlay").bind("click",function(){X.dialog("close")})}})),X.siblings(".ui-dialog-titlebar").remove(),ee.ajax({cache:!1,data:{page_id:fe()},dataType:"html",url:at+"/library",error:function(){alert("There was an error loading the element library. Please try again."),X.remove(),X=!1},success:function(n){X.find("#"+e).html(n),r.toggleClass(ot,!X.data("showLocation")),X.data("libraryLoaded",!0);var a=X.find(".fsElementLibraryCategoryShared");ae&&(a.find(".fsContainerIcon").parent().remove(),0==a.find(".fsElementLibraryItem").length&&(a.remove(),X.find(".fsTab").eq(a.index()).remove())),oe&&X.find(".fsEmbeddedMapIcon").parent().remove(),X.on("click","button."+t,function(){ee(this).hasClass(Bt)||r.toggleClass(Bt)}),X.on("click",".fsTab",function(){var e=ee(this);return e.addClass(Bt).siblings().removeClass(Bt),X.find(".fsElementLibraryCategory").addClass(ot).eq(e.index()).removeClass(ot),
!1}),X.on("click",".fsElementLibraryItem:not(.fsStateDisabled, .fsStateDeprecated)",function(){i(this)})}}),n=ee("#"+Ze),n.find("button[value=clear]").click(function(){a(),W()}),n.click(function(){var e=y();i(this,e.id,e.timestamp)})}return W(),X}function v(e){return CKEDITOR.instances[e.replace(De,"")]}function y(){var e=sessionStorage.getItem("copiedElement");if(e)return JSON.parse(e)}function b(e,t){return e.parent().parent().find(t)}function _(e,t,i){var n,r=ce(t).closest(".fsBanner");return n=r.length&&r.parent().hasClass("fsBannerLeft")?"Left Banner":r.length&&r.parent().hasClass("fsBannerRight")?"Right Banner":"Page",{elementID:t,pageID:fe(),parentType:n,settingsID:E(e),type:i}}function w(e,t,i,n){var r,a=ce(t).closest(".fsBanner");return r=a.length&&a.parent().hasClass("fsBannerLeft")?"Left Banner":a.length&&a.parent().hasClass("fsBannerRight")?"Right Banner":"Page",{bannerID:a.length?ue(a):0,elementID:t,inSharedElementEditMode:ae,isSharedContainer:e.hasClass("fsSharedContainer"),pageID:fe(),parentType:r,settingsID:E(e),sharedElementID:pe().length>0?ue(pe()):0,sharedElementTypeID:n,type:i}}function E(e){return parseInt(e.data("settings-id"))}function T(e){return e.attr("data-title")}function S(e){return e.attr("data-type")}function C(e){var t=K.primaryButtons,i=K.primaryTitle;Q.after(e),Q.switchClass(It,Dt),e.removeClass(jt,400),K.removeClass(Ft),i&&K.dialog("option","title",i),t&&K.dialog("option","buttons",t),K.dialog("open")}function x(){ee("#fsDateSeparatorSetting").on("change",function(){var e=ee("#fsDateSeparatorSetting option:selected").val();ee("#fsDateFormatSetting option").each(function(){var t=ee(this);t.html(t.html().replace(/[\/.-]|&nbsp;|\u2022/g,e))})}),ee("#fsDateFormatSetting").on("change",function(){var e=ee("#fsDateFormatSetting option:selected").val();Y(ee("#fsCustomDateContainer"),"custom"!=e)}),ee(".fsToggleCustomFormatExample").on("click",function(e){e.preventDefault(),ee(".fsCustomFormatExample").toggleClass(ot)})}function k(){K||(K=ee('<div id="fsPageDialog"></div>').appendTo(Qt),K.dialog(ee.extend({},ai,{dialogClass:"fsElementSettingsDialog",buttons:[{text:"Cancel",click:function(){ee(this).dialog("close")}},{id:"fsElementSettingSaveButton",text:"Save",click:function(){var e,i,n=ee(this),r=n.data(Je),a=at+"/"+r+"/",o=fe(),s=ce(r).closest(".fsBanner"),l=n.data("orphan");n.hasClass(Ut)?(i={banner_id:s.length?ue(s):0,page_id:o,shared_element_name:n.find("#fsElementShareName").val()},$(!0,"Saving shared element settings"),ee.ajax({cache:!1,data:i,dataType:"json",type:"POST",url:a+"shared",error:function(e){var t,i=e.responseJSON;t=403==e.status&&e.responseJSON.message?e.responseJSON.message:i&&i.name?"The shared element name "+i.name:"There was an error creating the shared element",alert(t)},success:function(e){ye("sharedElement:create",e),ne?P(ce(r).closest(".fsBanner")).done(function(){n.dialog("close")}):t.location.reload()}}).always(function(){$(!1)})):(e=ee("#fsElementSettings, .fsSecondaryElementSettings").find("input,textarea,select"),i=e.serializeArray(),o&&i.push({name:"page_id",value:o}),l&&i.push({name:"orphan",value:!0}),$(!0,"Saving element settings"),ee.ajax({cache:!1,data:i,type:"PUT",url:a+"settings"+(0==r?"/"+n.data(nt):""),error:function(e){var t=ee.parseJSON(e.responseText);403==e.status?alert(t.message):422==e.status&&"has already been taken"==t.title?alert("This banner name is in use. Please change the name and try again."):alert("There was an error saving the settings for this element. Please try again.")},success:function(e){var t=ee(e),a=!l&&n.data(rt);if(n.dialog("close"),ce(r).replaceWith(t),n.removeData(rt),t.hasClass("fsBanner")){var o,s={id:parseInt(r)},d=i.length,c=0;for(c;c<d;c++)o=i[c].name.match(/settings\[(\w*)\]$/),o&&(s[o[1]]=i[c].value);ye("banner:update",s),O(t)}else a?ye("sharedElement:update",a):ae?ye("sharedElement:update",pe().data("shared-id")):(ye("element:update",r),O(ee(bt)));be.triggerElementUpdated(t)}}).always(function(){$(!1)}))}}],close:function(){ee(this).hasClass(Ut)&&G(),ei.off("keyup.settingsDialog"),ee(".fsSecondarySettingsDialog").dialog("close").dialog("destroy").remove(),Qt.removeClass("fsDialogOpen")},open:function(){ei.on("keyup.settingsDialog",function(e){13!=e.keyCode||ee("#fsElementSettingSaveButton").hasClass(ot)||"TEXTAREA"==document.activeElement.tagName||"true"==ee(document.activeElement).attr("contenteditable")||ee(".selectize-dropdown-content").is(":visible")||ee("#fsElementSettingSaveButton").trigger("click")}),Qt.addClass("fsDialogOpen")}})),K.on("change","#fsElementSubtypeList input[type=radio]",function(e){ee("#fsSubtypeSettingsFlag").attr("class","fsSubtypeSelected"+ee(e.target).val())}),K.on("click",".fsStyleAccordionHeader",function(){ee(this).toggleClass(Bt)}),K.on("click",'.fsStyleAccordionHeader input[type="radio"], .fsStyleAccordionHeader label',function(e){e.stopPropagation(),ee(this).closest(".fsStyleAccordionHeader").addClass(Bt)}),K.on("focus","#fsElementSettingTitle",function(){ee(this).select()}),K.on("change","#fsElementSettingShowTitle",function(){ee("#fsElementSettingTitle").toggleClass("fsElementTitleHidden",!this.checked)})),ee("#fsElementSettingSaveButton").addClass(ot)}function A(e,i,n){var r,a=ee('<div><div id="fsPageDialogContent">'+e+"</div></div>"),o=a.find(Ht);o.length&&a.prepend(o),K.html(a.html()).data("orphan",n),ee("#fsElementSettingSaveButton").removeClass(ot),ee("select[multiple]").selectize({hideSelected:!1,plugins:["fsSelectize"],onInitialize:function(){var e=ee(this);e[0].settings.create=e[0].$input.data("create");var t=e[0].$input.data("maxitems");isNaN(t)||(e[0].settings.maxItems=t)}}),Q=ee(Mt),si[i]&&si[i](),ee(Ce).on("change",function(){ee(xe).attr("src",ee(this).val())}),ee("#fsElementSettingBackgroundImageFileManager").on("click",function(){ee(t).one("message.pageThumbnailSelected",function(e){var t=JSON.parse(e.originalEvent.data);"fileManager:selected"==t.event&&ee(Ce).val(t.path).trigger("change")}),L("gif,png,jpg,jpeg,svg")}),r=ee.extend({},oi,{buttonsHide:["embed","media","table"],linebreaks:!0,paragraphize:!1}),ee("#settings_header_text, #settings_footer_text").redactor(r),C(ee(".fsSecondaryElementSettings")),ie.setupClearInputButtons(K.find(Oe))}function I(e){function t(t,r){var a,o=r||n.find(".fsGroupPickerTree").jstree(!0).get_selected(!0),s=o.length;e.multiple?a=0==s?"No Groups Selected":1==s?"1 Group Selected":s+" Groups Selected":(a=o[0].text,C(i)),ee("#fsSelectedGroupsCount").text(a)}var i=ee("#fsSelectGroupsDialogContent"),n=ee("#fsSelectGroupsTree"),r={hiddenFieldName:"settings[group_ids][]"};e.multiple=0!=e.multiple,n.fsGroupPicker(ee.extend(r,e)).on("groupPicker:selectionLoaded groupPicker:change",t),ee("#fsOpenSelectGroupsDialogButton").click(function(){q(i,e.multiple?"Select Groups":"Choose Group")})}function D(){ee(zt).change(function(){1==ee(this).val()?ee($t).prop(Be,!0).val(1):ee($t).prop(Be,!1)})}function M(){ee(".fsSettingShowThumbnail").on("change",function(){var e=ee(this),t=e.siblings(".fsElementSettingThumbnailOptions");Y(t,!e.prop("checked"))}),ee(".fsSettingThumbnailPosition").on("change",function(){var e=ee(this),t=e.siblings(".fsElementSettingThumbnailAlignShapeContainer");Y(t,e.val()>=2)})}function P(e){return F(de(e),!0).done(function(e){Qt.addClass(Ie),O(e),z(e.find(ct))})}function R(e){ie.makeSubelementsSortable(e,wt)}function O(e){e.find(ie.SORTABLE_SELECTOR).addBack(ie.SORTABLE_SELECTOR).sortable(li),R(e.find(we)),ie.makeSubelementsSortable(e.find(".fsPersonalizationElement"),".fsPersonalizationPanelElement"),ie.makePanelGroupTabsSortable(e)}function N(e){ri=e,ye("contentElement:unsavedEdits",{unsavedEdits:ri})}function L(e){var i="/cf_filemanager/adminfiles.cfm?do=refresh&opener=cmsAssets&ext="+e,n="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=750,height=550",r=t.open(i,"popupFileManager",n);r.focus()}function F(e,t){return le(ue(de(e)),{in_draft_mode:!0,is_draft:t,page_id:fe()})}function j(){return ni.enabled&&ni.access?2:0}function B(e){var t,i,n,r=de(e),a={},o=ue(r),l=ii[o]||{},d=fe();e.data("editor")==Me?(t=v(b(e,Pe).attr("id")),n=t.getResourcesUsed(),te.each(l.resources,function(e){n.indexOf(e.uuid)==-1&&(e._destroy=!0,l.changed=!0)}),te.each(n,function(e){var t=te.find(l.resources,function(t){return e==t.uuid});t||(l.resources.push({uuid:e}),l.changed=!0)}),i=t.getData()):i=e.redactor("code.get"),i==J?s(e):(a.element_id=o,l&&l.resources&&(a.content_resources_attributes=l.resources),d&&(a.page_id=d),a.content=i,ee.ajax({contentType:"application/json",data:JSON.stringify(a),dataType:"json",type:"PUT",url:"/fs/element-settings/"+E(r)}).done(function(t){N(!1),0==o?ye("sharedElement:update",r.data("shared-id")):ye("element:update",o),s(e),r.replaceWith(t.element_html)}).fail(function(e){403==e.status?alert(e.responseJSON.message):alert("An error occurred saving your content")}))}function H(e){ee("#fsDateFilterSettingDisplayMoreItemsText").on("change",function(){var t=ee(this);""==t.val()&&t.val(e)})}function U(){var e=ee(yt);ee("#fsElementSettingShowLink").on("change",function(){var e=ee(this).siblings(Pt);e.length&&Y(e,!this.checked)}),e.find("input:radio").on("click",function(){Y(e.siblings(lt),"fsElementSettingsOpenMethodPage"!=this.id),Y(e.siblings(".fsLinkedElementContainer"),"fsElementSettingsOpenMethodElement"!=this.id)})}function $(e,t){ye("showLoadingOverlay",{message:t,state:e})}function z(e){if(e.length){var t=e.map(function(){return ee(this).data("title")}).get();ye("showMissingLinkedPageErrors",{errors:t})}}function q(e,t){K.primaryTitle=K.dialog("option","title"),K.primaryButtons=K.dialog("option","buttons"),Q.after(e),Q.switchClass(Dt,It),e.addClass(jt,400),K.addClass(Ft),K.dialog("option","buttons",[{text:"Back",click:function(){C(e)}}]),t&&K.dialog("option","title",t),K.dialog("open")}function W(){var e=ee("#"+Ze),t=y();t&&(e.find("p.name").text(t.title),e.find("span:first-child").attr("class","fs"+t.type+"Icon"),e.data("elementID",t.id)),e.toggleClass(ot,!t)}function Y(e,t){e.toggleClass(ot,t)}function G(){var e="Save";K.toggleClass(Ut),K.hasClass(Ut)&&(e+=" and Convert to Shared Element"),K.parent().find('button > span:contains("Save")').text(e)}var V,K,X,Q,J,Z,ee=e.$,te=e._,ie=e.getInternalNS("elements.utils"),ne=ie.inBannerEditMode(),re=ie.inDraftMode(),ae=ie.inSharedElementEditMode(),oe=ie.suppressGoogleMaps(),se=ie.createElement,le=ie.fetchElementHTML,de=ie.getElement,ce=ie.getElementByID,ue=ie.getElementID,he=ie.getInternalLinkProperties,fe=ie.getPageID,pe=ie.getSharedElement,ge=ie.getTabID,me=e.getInternalNS("elements.media"),ve=ie.moveBehind,ye=ie.notifyAdminInterface,be=e.events,_e="fsAccordion",we="."+_e,Ee="fsStateActive",Te="fsAdminWarning",Se="."+Te,Ce="#fsElementSettingBackgroundImagePath",xe="#fsElementSettingBackgroundImagePreview",ke="fsBannerEditOverlay",Ae=".fsBannerEdit",Ie="fsBannerEditMode",De="cke_",Me="cke",Pe="."+Me,Re="fsClearInput",Oe="."+Re,Ne="fsComposeMode",Le="fsContainer",Fe=".fsContent",je=".fsContentOverlayText",Be="disabled",He="fsDevicePreviewMode",Ue="fsElement",$e="."+Ue,ze="fsElementContent",qe="."+ze,We=".fsContentEditable",Ye="fsElementCopied",Ge="."+Ye,Ve=".fsElementCopy",Ke="fsStateElementDragging",Xe=".fsElementEditLayout",Qe=".fsElementEditSettings",Je="elementID",Ze="fsElementLibraryClipboard",et="fsElementLibraryOpen",tt="fsElementEmptyPlaceholder",it="."+tt,nt="elementSettingsID",rt="sharedElementID",at="/fs/elements",ot="fsStateHidden",st=".fsLinkedPageClearButton",lt=".fsLinkedPageContainer",dt=".fsLinkedPageID",ct=".fsElementMissingLinkedPage",ut=".fsLinkedPageName",ht="fsLinkedPageNameDefault",ft=[".fsAthleticsEvent",".fsCalendar",".fsNews",".fsPostElement",".fsCommentList",".fsIssueElement",".fsMessagesElement"],pt='<div class="fsLoadingDots"></div>',gt=".fsMediaSettingsSelectedMediaNodes",mt="fsOneButton",vt="fsStateOpen",yt="#fsElementSettingsOpenMethod",bt="#fsPageContent",_t="fsPanel",wt="."+_t,Et="fsPanelGroup",Tt="."+Et,St="fsTabsNavItem",Ct=".fsTabsNav",xt=Tt+" "+Ct,kt=".fsLinkedPostFolderIDs",At="#fsElementSettingsDisplayPostFoldersMethod",It="fsElementSettingsOffScreen",Dt="fsElementSettingsOnScreen",Mt="#fsElementSettings",Pt=".fsElementSettingShowReadMoreContainer",Rt="redactor-editor",Ot="."+Rt,Nt="fsStateRichTextEditing",Lt="."+Nt,Ft="fsSecondaryElementSettingsVisible",jt="fsSecondaryElementSettingsOnScreen",Bt="fsStateSelected",Ht="#fsElementShareButton",Ut="fsElementShareSettings",$t="#settings_slideshow_slide_count",zt="#settings_slideshow_transition_effect",qt="fsStateEditable",Wt="."+qt,Yt="> "+qe+Wt,Gt="#fsSelectedMediaName",Vt="fsTabs",Kt="."+Vt,Xt=Kt+" > "+qe,Qt=ee(document.body),Jt=ee(document),Zt=ee("html"),ei=ee(t),ti=ee('meta[name="csrf-token"]').attr("content"),ii={},ni=e.getNS("managers.resources"),ri=!1,ai={autoOpen:!1,closeOnEscape:!0,draggable:!0,modal:!0,position:["center",15],resizable:!1},oi={buttonsHide:["media"]},si={Calendar:function(){c("calendar"),D(),x(),U(),H("Load More Events"),ee("#fsCalendarSettingEndDate, #fsCalendarSettingStartDate").datepicker({dateFormat:"yy-mm-dd"}),ee("#fsElementSettingSlideshowAutoplay").on("change",function(){var e=ee(".fsElementSettingSlideshowDuration");Y(e,!ee(this).prop("checked"))}),ee("#fsCalendarSettingCombineWeekendDays").on("change",function(){ee("#fsCalendarSettingWeekStartsOnContainer").toggleClass(ot,ee(this).is(":checked"))}),ee("#fsCalendarSettingDisplayAthleticEvents").on("change",function(){ee("#fsCalendarSettingsTeamsContainer").toggleClass(ot,!ee(this).is(":checked"))}),ee(".fsCalendarSettingEventDisplayType").on("change",function(){Y(ee(".fsCalendarSettingsCalendars"),1==ee(this).val()),Y(ee(".fsCalendarSettingDisplayTypeSpecific"),0==ee(this).val())}),ee('input[name="settings[subtype]"]').on("change",function(){var e="Event"==ee(this).val();Y(ee(".fsCalendarSettingsCalendars"),e&&1==ee(".fsCalendarSettingEventDisplayType:checked").val())})},Constituent:function(){var e=ee("#fsConstituentID"),t=ee("#fsConstituentSettingName"),i=["#fsConstituentSettingSearchLocation","#fsConstituentSettingSearchDepartment"],r=i.join(", "),a="#fsConstituentSettingSearchLocationDepartment";M(),U(),n(),I({excludeRoles:!0}),ee('input[name="settings[any_roles]"]').on("change",function(){Y(ee("#fsConstituentSettingRoleSelect"),1==ee(this).val())}),ee('input[name="settings[use_default_format]"]').on("change",function(){Y(ee(".fsConstituentCustomFormatSetting"),1==ee(this).val())}),ee('input[name="settings[display_degrees]"]').on("change",function(){Y(ee("#fsConstituentSettingDegreeFields"))}),ee('input[name="settings[custom_format_display_degrees]"]').on("change",function(){Y(ee("#fsCustomFormatDegreeFields"))}),ee("#fsConstituentSettingDisplayAddress").on("change",function(){var e=ee(this);e.siblings(".fsConstituentSettingAddressTypeContainer").toggleClass(ot,!e.prop("checked"))}),ee("#fsConstituentSettingCustomFormatDisplayAddresses").on("change",function(){var e=ee(this);e.siblings(".fsConstituentSettingCustomFormatAddressTypeContainer").toggleClass(ot,!e.prop("checked"))}),ee("#fsConstituentSettingDisplayDirectoryEmails, #fsConstituentSettingDisplayProfileEmails").on("change",function(){var e=ee(this),t=ee(this).siblings(".fsElementSettingEmailOptions");Y(t,!e.prop("checked"))}),ee(a).prop("disabled",!ee(r).is(":checked")),ee(r).on("change",function(){var e=ee(a);ee(r).is(":checked")?e.prop("disabled",!1):(e.prop("checked",!1),e.prop("disabled",!0))}),ee("#fsElementSettingShowLink").on("change",function(){Y(ee("#fsConstituentSettingDisplayProfileLinkContainer"),!ee(this).prop("checked"))}),ee("#fsConstituentSettingDisplayProfileLink").on("change",function(){ee("#fsConstituentSettingProfileLinkText").prop("readonly",!ee(this).prop("checked"))}),ee('input[name="settings[subtype]"]').on("change",function(){var e=ee(this).val();"Directory"==e?ee(".fsConstituentFormatSettings").html("<span></span>Pop-Up Details"):"Profile"==e&&ee(".fsConstituentFormatSettings").html("<span></span>Field Details")}),t.attr("placeholder","Please enter a name..."),t.autocomplete({minLength:2,change:function(i,n){n.item||(t.val(""),e.val(""))},open:function(){t.autocomplete("widget").addClass("fsConstituentsSettingAutoComplete")},select:function(i,n){return i.stopPropagation(),i.preventDefault(),e.val(n.item.personid),t.val(n.item.name),!1},source:function(e,t){ee.ajax({dataType:"json",url:"/cf_endpoints/routes.cfm/constituents/autosuggest.json",data:{filter:e.term},success:function(e){t(e)}})}}).data("ui-autocomplete")._renderItem=function(e,t){return ee("<li>").data("item.autocomplete",t).append('<a><div><img src="'+t.avatar+'"> <span>'+t.name+"</span></div></a>").appendTo(e)}},Media:function(){var e,t=ee("#fsSelectMediaDialogContent");ee("#fsMediaSettingsPlayerControls").on("change",function(){var e={disabled:2==ee(this).val()};e.disabled&&(e.checked=!0),ee("#fsMediaSettingsAutoPlay").prop(e)}),e=ee(gt+" input:checked").next("label").text(),ee(Gt).text((e||"No media")+" selected"),me.initPicker(t),t.on("mediaPicker:change",function(e,t){ee(Gt).text(t+" selected")}),ee("#fsShowSelectMediaSettingsButton").click(function(){q(t,"Select Media")})},News:function(){c("news"),D(),x(),M(),U(),H("Load More News"),ee("#fsElementSubtypeList").on("change",'input[name="settings[subtype]"]',function(){ee("#fsNewsSettingDisplayTypeNewsPost").prop("checked")&&"Post"!=ee(this).val()&&ee("#fsNewsSettingDisplayTypeNews").prop("checked",!0).change()}),ee(".fsNewsSettingDisplayType").on("change",function(){var e=ee(this),t=e.closest(".fsNewsSettingGeneral").find(".fsNewsSettingCategories");Y(t.insertAfter(e.parent()),2==e.val()||4==e.val())}),ee("#fsNewsSettingShowBody").on("change",function(){var e=ee(this),t=e.siblings(".fsNewsSettingCalloutOption");Y(t,!e.prop("checked"))}),ee("#fsNewsSettingShowComments").on("change",function(){var e=ee(this),t=e.siblings(".fsNewsSettingCommentOptions");Y(t,!e.prop("checked"))}),ee("#fsElementSettingSlideshowAutoplay").on("change",function(){Y(ee(".fsElementSettingSlideshowDuration"),!ee(this).is(":checked"))}),ee("#fsNewsSettingPostShowBody").on("change",function(){var e=ee(this),t=e.siblings(".fsNewsSettingPostCalloutOption");Y(t,!e.prop("checked"))})}},li={connectWith:ie.SORTABLE_SELECTOR,cursorAt:{left:5,top:5},distance:10,items:">"+$e+Wt+":not("+Xt+" > "+wt+")",placeholder:"fsElementPlaceholder",scrollSensitivity:125,tolerance:"pointer",cancel:Lt+", :input:not(.fsElementMovable),.CodeMirror,.redactor-box,.fsEmbeddedGoogleMap,"+wt+" > header h2,.fsBannerOverlayWrapper",helper:function(e,t){return ee("<div/>",{height:"auto",id:"fsElementDragHelper",text:t.data("title")+" Element",width:"250px"})},start:function(){ee(this).sortable("refreshPositions"),Qt.addClass(Ke)},stop:function(){Qt.removeClass(Ke)},update:function(e,t){var i=ee(this);if(r(de(i)),this===t.item.parent()[0]){var n=ee(t.item),a=n.parent(),o=n.prev($e),s=a.hasClass(St);s&&(a=ce(ge(a)),o=a.find("> "+qe+" > "+$e).last()),ve(n,o,de(a)).fail(function(){i.sortable("cancel"),ee(t.sender).sortable("cancel")}).success(function(){s&&(o.length?n.insertAfter(o):n.appendTo(a.find(qe)),r(de(a))),be.triggerElementMoved(n)})}else t.item.parent().parent().hasClass(_e)&&!t.item.hasClass(_t)&&i.sortable("cancel")}};if(Jt.ajaxSend(function(e,t,i){/PUT|POST|PATCH|DELETE/.test(i.type)&&t.setRequestHeader("X-CSRF-Token",ti)}),Jt.ajaxError(function(e,i){401==i.status&&(t.alert("You are not authorized. Please log in and try again."),top.location.href=re?"/admin.cfm":"/fs/login")}),Qt.on("click",Fe+" > "+qe+Wt,function(){var i,n,r=ee(this),a=r.closest(Fe),o=r.find(We),s=!1;if(sessionStorage.setItem("expandPageID",Qt.data("pageid")),Qt.hasClass(Ne)&&"undefined"!=typeof CKEDITOR)if(o.hasClass(Rt)||a.hasClass(Nt)?s=!0:Qt.add(a).addClass(Nt),o.data("editor")==Me)s||(i={fsHasResources:j(),startupFocus:!0,usePickerEvents:!0,on:{blur:function(){t.cancelEditorBlurSave?t.console.warn("Editor blur fired but was cancelled because cancelEditorBlurSave is true."):B(o)},change:function(){ri||N(!0)},instanceReady:function(){J=this.getData(),n=ue(de(r)),ii[n]?(ii[n].resources=[],ii[n].changed=!1):ii[n]={changed:!1,resources:[]},te.each(o.data("resources"),function(e){ii[n].resources.push({id:e.id,uuid:e.uuid})})}}},t.FS.ckeditor.getConfig(i).done(function(t){t.fsHasResourcesCompatibilityMode=e.managers.resources.compatibilityMode,t.fsHasResourcesRequireAltText=e.managers.resources.requireAltText,CKEDITOR.replace(o.get(0),t)}));else if(!o.hasClass(Rt)){var l=ee.extend({},oi,{focus:!0,blurCallback:function(){ee(".redactor-image-editter, .redactor-link-tooltip").is(":visible")||B(o)},changeCallback:function(){ri||N(!0)},initCallback:function(){Qt.find(Lt).not(a).each(function(){B(ee(this).find(We))}),J=this.code.get()}});o.redactor(l)}}),Qt.on("click",Fe+"[data-shared-id]:not([data-settings-id])",function(e){var t=de(ee(this));Qt.hasClass(Ne)&&!ee(e.target).hasClass("fsElementAdd")&&g(t)}),Qt.on("click",".fsElementAdd",function(e){var t=ee(this).parent(),i=t.hasClass(tt),n=i?t:de(t);n.addClass(Ee),m().data("element",n).data("showLocation",!i).dialog("option","position",{at:"center",my:"center top",of:e}).dialog("open")}),Qt.on("mousedown",".fsElementSave",function(){var e=b(ee(this),We);return B(e),!1}),Qt.on("mousedown",".fsElementCancel",function(){var e,t=b(ee(this),We);return t.data("editor")==Me?(e=b(ee(this),Pe),v(e.attr("id")).setData(J)):(e=b(ee(this),Ot),e.redactor("code.set",J)),s(t),N(!1),!1}),Qt.on("click",".fsElementBannerEdit",function(){V||(V=ee('<div id="'+ke+'"></div>'),Qt.append(V)),V.show(),u(),P(ee(this))}),Qt.on("click",".fsElementBannerExit, #"+ke,function(){u(),O(ee(bt)),F(de(ee(Ae)),!1).done(o)}),Qt.on("click",".fsElementBannerPublish",function(){ye("banner:requestPublish",ue(de(ee(this))))}),Qt.on("click",Xe,function(){var e=ee(this),t=de(e);return p(t),!1}),Qt.on("click",Qe,function(){var e,t=ee(this);return e=t.is(Xt+" > ul "+Qe)?ce(ge(t)):de(t),g(e),!1}),Qt.on("click",Ve,function(){var e,t=ee(this),i=de(t),n="fsElementCopySuccessful",r=S(i);return"SharedContainer"==r?r="Container":"PanelGroup"==r&&(r+=i.hasClass("fsTabs")?"Tabs":"Accordion"),a(),e={id:ue(i),timestamp:Date.now(),title:T(i),type:r},sessionStorage.setItem("copiedElement",JSON.stringify(e)),t.addClass(Ye).addClass(n),setTimeout(function(){t.removeClass(n)},1e3),!1}),Qt.on("click",".fsElementDelete",function(){var e,t,i,n,a=ee(this),o="",s=a.is(Xt+" > ul .fsElementDelete")||a.is(xt+" > .fsElementDelete"),l=ee('<div id="fsElementDeleteDialog"></div>').appendTo(Qt);if(s){i=a.closest("li");var d=i.parent();if(d.find(".fsTabsNavItem").length<2)return alert("Sorry, you cannot delete at this time. This element requires at least one panel."),!1;t=ge(a),e=ce(t)}else e=de(a),t=ue(e);return n=T(e),e.find($e).not($e+wt).length>0&&(o+='<p class="fsWarning">WARNING: Deleting this will also delete any elements it contains.</p>'),o+='<p>Are you sure you want to delete "'+n+'"?</p>',l.dialog(ee.extend({},ai,{dialogClass:"fsElementDeleteDialog",title:"Delete "+n,buttons:[{text:"Cancel",click:function(){ee(this).dialog("close")}},{id:"fsElementDeleteConfirmButton",text:"Delete",click:function(){var n=ee(this);n.html(pt),ee.ajax({cache:!1,dataType:"json",type:"DELETE",url:at+"/"+t+"?page_id="+fe(),error:function(){n.dialog("close"),alert("There was an error deleting this element. Please try again.")},success:function(){var a=de(e.parent());s&&i.remove(),be.triggerElementDeleted(e),e.remove(),r(a),ye("element:delete",t),n.dialog("close")}})}}]})),l.html(o),l.dialog("open"),!1}),Qt.on("click",".fsAddTab",function(){var e=ee(this),t=e.closest(Kt),i=ue(t),n=e.parent().prev(),r=e.html();e.prop(Be,!0).html(pt),se(i,n.length>0?ue(n):0,!0).done(function(e){var r=ee(e).addClass(vt),a=t.find("ul .fsElementActionButtonContainer").first().clone(),o=ue(ee(e)),s=ee("<li>",{id:"fsTab_"+o});s.append(ee("<a>",{href:"#"+r.attr("id"),html:"New Tab"})).append(a).addClass(St),s.insertAfter(n),t.find("> "+qe+" > .fsElement").last().after(r),be.triggerElementUpdated(t),be.triggerElementAdded(r),O(ee(bt)),ye("element:create",i)}).always(function(){e.prop(Be,!1).html(r)})}),Qt.on("click",$e+Wt+" "+Se+":not("+je+"), "+$e+Wt+" .fsElementEmpty",function(){var e=de(ee(this));re&&d()&&e.find(Qe).length&&g(e)}),ne&&O(ee(Ae)),ae&&O(ee(bt)),re&&d()&&!Qt.hasClass("fsBannerPreviewMode")&&l(!0),Qt.on("click",Ht,function(){return G(),!1}),Qt.on("click",st,function(e){var t=ee(e.originalEvent.target),i=t.closest(lt),n=i.find(ut);i.find(dt).val(0),n.data("defaulttext")?n.text(n.data("defaulttext")).addClass(ht):n.empty().addClass(ot),t.closest(st).addClass(ot)}),Qt.on("click",".fsLinkedPagePickerButton",function(e){var t=e.originalEvent.target,i={id:t.id,pickerOptions:{allowBranchSelection:!0,depth:ee(t).attr("data-depth"),selectedPageIDs:[fe()]}};ye("pagePicker:open",i)}),re){var di=".redactor-box a, .redactor-dropdown a, .redactor-link-tooltip a, #redactor-modal a,.fsMediaGalleryObject a, .fsTabs a, .fsTabsNav .ui-tabs-anchor, .jstree-checkbox-selectall,.fsNotification a, .fsAlternateViewToggleLink, .fsElementPagination a, .juicer-feed a";Qt.on("click","a[href]:not("+di+")",function(){var e=ee(this),i=e.attr("href"),n=he(i,e.data("page-id"));return!!/^(javascript:|mailto:|tel:|#)/.test(i)||(n.pageID?ye("page:show",{pageID:n.pageID,queryString:n.queryString}):t.open(i,"fsPopWin"),!1)})}if(ei.on("message",function(e){var i;try{i=JSON.parse(e.originalEvent.data)}catch(e){i={event:""}}switch(i.event&&"fsGlobal:"==i.event.substr(0,9)&&t.parent.postMessage(JSON.stringify(i),t.location.origin),i.event){case"composeMode":l(i.data);break;case"devicePreview:open":h(!0);break;case"devicePreview:close":h(!1);break;case"element:updated":var n=ee(i.data.elementHtml),r=ce(i.data.elementID),a="linked-element-ids",o=n.data(a)||[],s=r.data(a)||[],d=r.closest(".fsBanner");r.replaceWith(n),te.isEqual(o,s)||te.each(te.unique(o.concat(s)),function(e){var t=ce(e);t.length&&le(e)}),be.triggerElementUpdated(n),d.length&&(d.find(".fsElementBannerPublish").removeClass(ot),ie.notifyAdminInterface("banner:update",ie.getElementID(d)));break;case"pagePicker:return":var c=ee("#"+i.data.target).closest(lt);c.find(dt).val(i.data.pageID),c.find(ut).text(i.data.pageName).removeClass(ot+" "+ht),c.find(st).removeClass(ot);break;case"postFolderPicker:return":var u=ee("#"+i.data.target).closest(At),f=ee("<input>",{"class":"fsLinkedPostFolderIDs",multiple:"multiple",name:"settings[board_folder_ids][]",type:"hidden"}),p=i.data.selectedItemIDs;u.find(kt).remove(),ee.each(p,function(e,t){u.append(f.clone().val(t))}),0==p.length&&u.append(f),u.find(".fsLinkedPostFoldersSelected").text(p.length+" folders selected")}e.preventDefault()}),Qt.on("click",".fsElementPagination a, .fsLoadMoreButton:not("+ft.map(function(e){return e+" .fsLoadMoreButton"}).join(",")+")",ie.loadMoreHandler),ei.resize(function(){clearInterval(Z),Z=setTimeout(ie.adjustMediaAspectRatio,250)}),ee.widget("ui.dialog",ee.ui.dialog,{_allowInteraction:function(e){return!!this._super(e)||(e.target.ownerDocument!=this.document[0]||(!!ee(e.target).closest("#redactor-modal, .redactor-dropdown, .redactor-link-tooltip, .redactor-box-fullscreen").length||void 0))},_moveToTop:function(e,t){e&&this.options.modal||this._super(e,t)}}),re){var ci=te.debounce(function(){Qt.hasClass(Ne)&&ee(bt).find(ie.SORTABLE_SELECTOR).sortable(li)},750);be.onElementShown("Panel",ci),be.onElementHidden("Panel",ci),ee(function(){var e=y();if(ie.setupClearInputButtons(Qt.find(Oe)),z(Qt.find(ct)),e){var t=ce(e.id);t&&t.find(Ve+":first").addClass(Ye)}})}ie.SORTABLE_CONFIG=li}(FS,window),function(e){"use strict";function t(e,t,i,n,r){return e<i&&(r||i*n>=t)}function i(e){for(var t=e.parent();t;){if("inline"!=t.css("display")&&parseInt(t.css("width"))>g)return t;t=t.parent()}return e}function n(e){var n,r,a,o,s=e.closest(".fsDialog"),d=e.closest(".fsPanel"),u=e.attr("data-aspect-ratio"),h=e.data("cache-id"),f=c[h],p=e.attr("width"),m=JSON.parse(e.attr("data-image-sizes").replace(/%22/g,'"')),v=!1,y="IMG"==e.prop("tagName"),b=!1,_=e.get(0).style.height,w={alt:e.attr("alt"),style:e.attr("style")||""};d.length&&!d.hasClass("fsStateOpen")||s.length&&!s.attr("open")&&!s.hasClass("fsStateOpen")||(e.attr("alt","").css({height:0,margin:0,padding:0}),f||(v=!0,h=l.uniqueId(),f=c[h]={$parentElement:i(e),cachedSize:0,sizes:l.sortBy(m,"width")},e.data("cache-id",h)),a=e.width(),e.get(0).style.height=_,r=e.innerHeight(),(y&&!v||a<g)&&(a=f.$parentElement.width(),b=!0,a>p&&(a=p)),o=b||r<g,e.attr(w),t(a,r,f.cachedSize,u,o)||(n=l.find(f.sizes,function(e,i){return t(a,r,e.width,u,o)||i==f.sizes.length-1}),y&&e.attr("src")!=n.url?(e.one("load",function(){e.data("image-loaded",!0),e.trigger("image:loaded")}),e.data("image-loaded",!1),e.attr("src",n.url),f.cachedSize=n.width):y||e.css("background-image").replace(/url\(['"]?([^'"]+)['"]?\)/,"$1")==n.url||(e.css("background-image","url('"+n.url+"')"),f.cachedSize=n.width)))}function r(e){s(p).each(function(){var t=s(this);e&&h.getElement(t).attr("data-manual-resource-scaling")||n(t)})}function a(e){e.find(p).addBack(p).each(function(){n(s(this))})}var o,s=e.$,l=e._,d=s(window),c={},u=e.getNS("events"),h=e.getInternalNS("elements.utils"),f="all",p="[data-image-sizes]",g=40;o=l.debounce(r,500),d.resize(function(){o(!1)}),u.onElementAdded(f,a),u.onElementDialogShown(f,a),u.onElementMoved(f,a),u.onElementShown(u.ALL_CONTAINERS_TYPE,a),u.onElementUpdated(f,a),r(!0),e.util.updateDynamicImages=a}(FS),function(e){"use strict";function t(t){return e(t).closest(h)}function i(e){var i=t(e);i.find(d).val(""),i.find(f+","+p).addClass(u),i.find(c).removeClass(u),i.find(d).focus()}function n(e){var i=t(e);i.find(c+","+p+","+g).addClass(u),i.find(f).removeClass(u).find(".fsLoginUsername").focus()}function r(e){var i=t(e);i.find(c+","+f).addClass(u),i.find(p).removeClass(u),i.find(p+" .fsLoginNewFirstName").focus()}function a(e){var i=t(e);i.find(_).removeClass(u),i.find(w).addClass(u),i.find(m).text(""),i.find(y).val(""),i.find(v).val(""),i.find(b).val(""),i.find(v).focus()}function o(e,i){var n=t(e);n.find(_).addClass(u),n.find(w).removeClass(u),n.find(m).text(i),n.find(y).val(i),n.find(b).focus()}function s(){return e(".fsStaggeredLogin").length>0}var l=FS.getInternalNS("elements.utils"),d=".fsLoginForgotEmail",c=".fsLoginForgotView",u="fsStateHidden",h=".fsAccount",f=".fsLoginMainView",p=".fsLoginNewView",g=".fsResetPasswordView",m=".fsStaggeredLoginUsernameDisplay",v='input[name="usernameCheck"]',y='input[name="username"]',b='input[name="password"]',_=".fsStaggeredLoginStage1",w=".fsStaggeredLoginStage2";e(".fsLoginForgotPasswordLink a").on("click",function(){var t=e(this);return"#"!=t.attr("href")||(i(this),!1)}),e(".fsLoginNewAccountLink a").on("click",function(){var t=e(this);return"#"!=t.attr("href")||(r(this),!1)}),e(".fsLoginForgotCancel, .fsLoginNewCancel, .fsResetCancel").on("click",function(){n(this)}),s()?(e(".fsStaggeredLoginCheckAuthType").submit(function(t){t.preventDefault();var i=e(this),n=i.find(v).val();l.loadingOverlay(i),e.when(l.getToken()).then(function(t){e.ajax({dataType:"json",type:"POST",url:"/fs/auth/checkauthtype",data:{authenticity_token:t,username:n}}).done(function(e){e.oauth_redirect?window.location=e.oauth_redirect:o(i,n)}).fail(function(e,t,i){400==e.status?alert("Your username was missing. Please enter it and try again."):alert(i)}).always(function(){l.removeLoadingOverlay(i)})})}),e(".fsAccount form:not(.fsStaggeredLoginCheckAuthType)").submit(l.loginFormSubmitHandler),e(".fsStaggeredLoginGotoStage1").click(function(){a(e(this))})):e(".fsAccount form").submit(l.loginFormSubmitHandler),e(".fsResetContinue").on("click",function(){var i,r=e(this),a=t(r),o=a.find(".fsResetRequestKey"),s=a.find(".fsResetUsername"),l=a.find(".fsResetNewPassword"),d=a.find(".fsResetNewVerifyPassword"),c=e.trim(s.val()),h=e.trim(o.val()),f=e.trim(l.val()),p=e.trim(d.val());return a.find(".fsError").addClass(u),0==c.length?(i="Please enter your username to continue.",alert(i),s.next(".fsError").removeClass(u).html(i),void s.val("").focus()):0==f.length?(i="Please enter a password to continue.",alert(i),l.next(".fsError").removeClass(u).html(i),void l.val("").focus()):0==p.length?(i="Please verify the password by typing it again.",alert(i),d.next(".fsError").removeClass(u).html(i),void d.val("").focus()):f!=p?(i="Please verify the password by ensuring that both passwords match.",l.next(".fsError").removeClass(u).html(i),d.next(".fsError").removeClass(u).html(i),void alert(i)):(r.prop("disabled",!0),void e.ajax({dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/reset_password.json",data:{password:f,password_confirm:p,request_key:h,username:c},error:function(e,t,i){alert(i),r.prop("disabled",!1)},success:function(e){e.success?(alert("You have successfully updated your password. Please log in using your new password."),
n(r)):alert(e.error),r.prop("disabled",!1)}}))}),e(".fsLoginForgotSubmit").on("click",function(){var t=e(this),i=t.siblings(d),r=e.trim(i.val());return 0==r.length?(alert("Please enter an email address to continue."),i.val(""),void i.focus()):(t.prop("disabled",!0),void e.ajax({data:{email:r},dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/forgot.json",error:function(e,i,n){alert(n),t.prop("disabled",!1)},success:function(e){e.success?(alert("You have been sent an email with your login information."),n(t)):alert(e.error),t.prop("disabled",!1)}}))}),e(".fsLoginNewContinue").on("click",function(){var i=e(this),n=t(this),r=n.find('.fsLoginNewFirstName + input[type="text"]'),a=n.find('.fsLoginNewLastName + input[type="text"]'),o=n.find('.fsLoginNewEmail + input[type="text"]'),s=n.find('.fsLoginNewVerifyEmail + input[type="text"]'),l=n.find('.fsLoginNewPassword + input[type="password"]'),d=n.find('.fsLoginNewVerifyPassword + input[type="password"]'),c=n.find(".fsLoginNewCaptcha"),u=n.find('.fsLoginNewCaptcha textarea[name="g-recaptcha-response"]'),h=e.trim(r.val()),p=e.trim(a.val()),g=e.trim(o.val()),m=e.trim(s.val()),v=l.val(),_=d.val(),w="";if(0==h.length)return alert("Please enter your first name to continue."),void r.val("").focus();if(0==p.length)return alert("Please enter your last name to continue."),void a.val("").focus();if(0==g.length)return alert("Please enter your email address to continue."),void o.val("").focus();if(0==m.length)return alert("Please verify your email address by typing it again."),void s.val("").focus();if(g!=m)return void alert("Please verify your email address by ensuring that both addresses match.");if(0==v.length)return alert("Please enter a password to continue."),void l.val("").focus();if(0==_.length)return alert("Please verify the password by typing it again."),void d.val("").focus();if(v!=_)return void alert("Please verify the password by ensuring that both passwords match.");if(c.length>0&&u.length>0&&(w=u.val(),0==w.length))return alert("Please complete the CAPTCHA to continue."),void u.focus();i.prop("disabled",!0);var E={email:g,first_name:h,last_name:p,password:v,verify_email:m,verify_password:_};w.length>0&&(E.captcha_response=w),e.ajax({data:E,dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/new.json",error:function(e,t,n){alert(n),i.prop("disabled",!1)},success:function(e){e.success?(alert("You have been sent an email with your new account information."),n.find(y).val(g),n.find(b).val(v),n.find(f+" form").submit()):alert(e.error),i.prop("disabled",!1)}})})}(jQuery),function(e,t,i){"use strict";function n(){var n=e(this),r=i.getElement(n),a=r.children(o),s=r.hasClass("fsList")?r.find(".fsListItems"):r.find(".fsEventTable"),c={},u=n.data("start-row"),h=s.data("event-year");c.athletics_team_id=n.data("filter-id"),c.start_row=u,n.hasClass(l)?(c.is_load_more=!1,c.start_event_year=e(d).val()):h&&(c.start_event_year=h),i.loadingOverlay(a),i.loadElementData(r,c).done(function(i){var s,d=e(i);n.hasClass(l)?(s=d.find(o),a.replaceWith(s),a=r.children(o)):(r.hasClass("fsTable")?(s=d.find(".fsEventTable > tbody").children(),r.find(".fsLoadMoreButtonRow").replaceWith(s)):(s=d.find(o).children(":not(.fsElementEmpty)"),n.replaceWith(s)),r.addClass("fsLoadMoreClicked"),t.triggerElementMoreLoaded(r,s)),a.siblings(".fsLoadingDotsOverlay").remove()})}function r(t){t.on("click",".fsLoadMoreButton",n).on("change",d,n).on("click",".fsAthleticsEventDetailLink, .fsAthleticsEventRecapLink, .fsAthleticsEventReadMoreLink",function(t){var n=e(this),r=i.getElement(n),a=n.data("occurid");return"page"==n.data("linktype")||(t.preventDefault(),void(r.data("linked-element-ids")?(i.populateLinkedElements(r,{occur_id:a}),i.updateURLParams({virtualParam:"/~occur-id/"+a})):"popup"==n.data("linktype")&&i.openAthleticEventPopup(a,n)))}).on("click",".fsAlertIcon",function(t){t.preventDefault(),window.open("/cf_directory/cp.cfm?eventtype=Athletics&eventid="+e(this).data("eventid"),"","width=600,height=600")}).on("click",".fsRSSIcon, .fsAlertsIcon",function(e){e.preventDefault(),window.open("/cf_athletics/cms_athletic_feeds.cfm","","width=600,height=600")})}var a="fsElementContent",o="."+a,s="AthleticsEvent",l="fsSelectStartEventYear",d="."+l;t.onElementAdded(s,r),t.onElementUpdated(s,r),t.onElementDialogShown(s,r),r(e(".fs"+s))}(FS.$,FS.events,FS.getInternalNS("elements.utils")),function(e){"use strict";function t(e){e.find(".fsAthleticsBioLink").on("click",function(){var e=n(this),t=e.closest(".fsElementTable"),i=e.text(),r=e.data("person-id"),a=t.data("team-id"),o=t.data("team-name"),s="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=520,height=400",l="/cf_athletics/components/display.cfc?method=outputBio&view=bio&personid="+r+"&teamID="+a+"&derivedName="+encodeURI(i)+"&teamName="+encodeURI(o),d=window.open(l,"bioPop",s);return d.focus(),!1})}var i="AthleticsRoster",n=e.$,r=e.events;r.onElementAdded(i,t),r.onElementUpdated(i,t),t(n(".fs"+i))}(FS),function(e,t){"use strict";function i(e){e.on("change",".fsAthleticsTeamDirectory",function(){var i=t(this),r=i.val();if(""==r)return!1;if(e.data("linked-element-ids"))n(e,r);else if(s){var a=o(r,i.data("page-id"));l("page:show",{pageID:a.pageID,queryString:a.queryString})}else window.location.href=r}).on("click",".fsAthleticsTeamName > a[data-team-id]",function(){return n(e,t(this).data("team-id")),!1})}function n(e,t){a.populateLinkedElements(e,{athletics_team_id:t}),a.updateURLParams({virtualParam:"/~athletics-team-id/"+t})}var r=e.events,a=e.getInternalNS("elements.utils"),o=a.getInternalLinkProperties,s=a.inDraftMode(),l=a.notifyAdminInterface;t(".fsAthleticsTeam").each(function(){i(t(this))}),r.onElementAdded("athleticsteam",i),r.onElementUpdated("athleticsteam",i)}(FS,FS.$),function(e){"use strict";var t=e.$,i=e.events,n=t("body"),r=".fsMenu",a="fsStateMenuOpen";e.menu={hide:function(){n.hasClass(a)&&(n.removeClass(a),i.triggerElementHidden(t(r)))},show:function(){n.hasClass(a)||(n.addClass(a),i.triggerElementShown(t(r)))},toggle:function(){n.hasClass(a)?e.menu.hide():e.menu.show()}},i.onElementUpdated("Banner",function(e){e.find(".fsElement").each(function(){i.triggerElementUpdated(t(this))})})}(FS),function(e){"use strict";function t(e){e.on("click",".fsBoardLink[data-slug][data-opens-in=element]",function(){var e=i(this),t=r.getElement(e);return r.populateLinkedElements(t,{board_id:e.data("board-id"),page_id:r.getPageID()}),r.updateURLParams({virtualParam:"/~board/"+e.data("slug")}),!1})}var i=e.$,n=e.events,r=e.getInternalNS("elements.utils"),a="Board";n.onElementAdded(a,t),n.onElementUpdated(a,t),n.onElementDialogShown(a,t),i(".fs"+a+"Element").each(function(){t(i(this))})}(FS),function(e){"use strict";var t=e.$,i=e.getInternalNS("elements.calendar.utils"),n=e.getInternalNS("elements.constants.classes"),r=e.getInternalNS("elements.utils"),a=e.moment,o="fsCalendarGridShowMonthPickerButton",s="."+o,l=".fsCalendarMonthYearPicker";i.getDateDivFromMoment=function(e,t){return e.find('.fsCalendarDate[data-day="'+t.date()+'"][data-year="'+t.year()+'"][data-month="'+t.month()+'"]')},i.getMomentFromDateDiv=function(e){return a({date:e.data("day"),month:e.data("month"),year:e.data("year")})},i.monthPickerClickHandler=function(i,d){var c=i.find(l);if(c.length)c.toggleClass(n.stateHidden);else{var u,h,f,p=i.find(s),g=p.data("month"),m=p.data("year"),v=r.getElementID(i);c=t('<div class="fsCalendarMonthYearPicker"><div class="fsCalendarMonthPicker"><ul/></div><div class="fsCalendarYearPicker"><ul/></div><button class="fsStyleUpdateButton" disabled>GO</button></div>'),h=c.find(".fsCalendarMonthPicker ul"),f=c.find(".fsCalendarYearPicker ul"),u=c.find("button"),e._.each(a.months(),function(e,i){var n="fsCalendarGridMonthPickerInput"+e+"-"+v,r=i+1,a=t("<li>"),o=t("<label>",{"for":n,text:e}),s=t("<input>",{checked:r==g,id:n,name:"fsCalendarMonthInput-"+v,type:"radio",value:r<10?"0"+r:r});a.append(s),a.append(o),h.append(a)});for(var y=m-5;y<=m+5;y++){var b="fsElementGridYearPickerInput"+y+"-"+v,_=t("<label>",{"for":b,text:y}),w=t("<li>"),E=t("<input>",{checked:y==m,id:b,name:"fsCalendarYearInput-"+v,type:"radio",value:y});w.append(E),w.append(_),f.append(w)}c.on("change","input",function(){var e=h.find("input:checked").val(),t=f.find("input:checked").val();u.prop("disabled",!1).val(t+"-"+e+"-01")}),u.click(function(){c.addClass(n.stateHidden),t(document).off("click.monthPicker")}).click(d),p.parent().append(c.wrap("<div/>").parent()),h.find("input:checked").focus()}t(document).on("click.monthPicker",function(e){var i=t(e.target);i.closest(c).length||i.hasClass(o)||(c.addClass(n.stateHidden),t(document).off("click.monthPicker"))})}}(FS),function(e,t){"use strict";function i(e,t,i){var n=e.find(M),r="fsCalendar"+t+"Browser";e.find(".fsDisplayNavigation input[value="+t+"]").prop("checked",!0),n.removeClass("fsCalendarMonthBrowser fsCalendarWeekBrowser fsCalendarDayBrowser").addClass(r),"Week"==t?m(e,i):"Day"==t?f(e,i):g(e)}function n(e){var t=e.find(k),i=e.find(x);return t.length?t:U.getDateDivFromMoment(e,U.getMomentFromDateDiv(i))}function r(e){var t=e.find(M);return t.hasClass("fsCalendarDayBrowser")?"Day":t.hasClass("fsCalendarWeekBrowser")?"Week":"Month"}function a(e){return($.get(e)||"").split(":").filter(function(e){return""!=e})}function o(e){var t=w(e.target),n=Y.getElement(t),a=n.children(I),o=t.val(),s=r(n),l=H(t.val()),d=z[Y.getElementID(n)].filters,u=t.data("start-row");return o&&(d.cal_date=o),u&&(d.start_row=u),s.match(/^(Day|Week)$/)&&U.getDateDivFromMoment(n,l).length?(i(n,s,l),!1):(Y.loadingOverlay(a),void Y.loadElementData(n,d).done(function(e){var t=w(e);n.replaceWith(t),q.triggerElementUpdated(t,s,l),W.triggerUpdated(Y.getElementID(n),d),c(n,l)}))}function s(e){"complete"==document.readyState?d(e):e.data("willResizeOnLoad")||(e.data("willResizeOnLoad",!0),w(t).one("load",function(){d(e)}))}function l(e,t,i,n,r,a,o){var s=w("<ul>"),l=w("<span><strong>"+o+"</strong></span>"),d=t.length>0?"Select All":"Deselect All",c=w('<button class="fsSelectAll fsStyleDefaultButton fsStyleFloatRight">'+d+"</button>");w.each(e,function(e,a){var o=w("<li>"),l=a[i],d=r+l;o.append(w("<input>",{checked:t.indexOf(l.toString())==-1,id:d,type:"checkbox",value:l})),o.append(w("<label>",{"for":d,text:a[n]})),s.append(o)}),a.html(s).prepend(c).prepend(l),Y.setupSelectAllButtons(a,a)}function d(t){t.find(".fsCalendarRow").each(function(){var t,i=w(".fsCalendarDaybox",this);i.css("height",""),t=e._.reduce(i,function(e,t){var i,n,r=w(t);return r.hasClass("fsCalendarWeekendDayBox")?(n=r.children("div"),i=2*Math.max(w(n[0]).outerHeight(),w(n[1]).outerHeight())):i=r.outerHeight(),Math.max(e,i)},0),i.css("height",t+"px")})}function c(e,t){var i=z[Y.getElementID(e)],n=t.format(O);Y.updateURLParams({queryString:{cal_date:n}}),i.filters.cal_date=n,i.date=t}function u(e,t,i,n){e.find(x).data({day:t,month:i,year:n})}function h(e,n,d){var c=e.attr("data-calendar-ids")||"",u=Y.getElementID(e),h=e.attr("data-team-ids")||"",f=e.data("trigger-element-ids");n&&d&&e.hasClass("fsGrid")&&i(e,n,d),f&&W.onFilter(u,f,function(t,n){var a=r(e),o=z[u],s=!0;if(E.has(n,"calendarIDsToHide")){var l="hide_cals_el_"+u;n.calendarIDsToHide.length>0?$.set(l,n.calendarIDsToHide.join(":")):$.remove(l)}if(E.has(n,"teamIDsToHide")){var d="hide_teams_el_"+u;n.teamIDsToHide.length>0?$.set(d,n.teamIDsToHide.join(":")):$.remove(d)}if(E.has(n,"date")&&(o.date=n.date,o.filters.cal_date=n.date.format(O),e.hasClass("fsList"))){var c=n.date.format(O);o.filters.start_date=c,o.filters.end_date=c}if(E.has(n,"keywords")&&(o.filters.keywords=n.keywords),E.has(n,"rangeStart")&&(o.filters.start_date=n.rangeStart?n.rangeStart.format(O):null),E.has(n,"rangeEnd")&&(o.filters.end_date=n.rangeEnd?n.rangeEnd.format(O):null),E.isEqual(E.keys(n),["date"])){var h=U.getDateDivFromMoment(e,n.date);h.length&&!h.parent().hasClass("fsCalendarOutOfRange")&&(s=!1)}s?(Y.loadingOverlay(e.find(I)),Y.fetchElementHTML(u,o.filters,{elementUpdatedData:[a,o.date]}).done(function(){W.triggerUpdated(u,o.filters,t)})):i(e,a,o.date)}),e.on("click",".fsAlertIcon",function(e){var t=w(this);e.preventDefault(),Y.openCalendarAlertPopup(t.siblings(".fsCalendarEventLink").data("ath-id")?"athletics":"calendar",t.data("eventid"))}).on("click",".fsAlertsIcon",function(e){e.preventDefault(),Y.openCalendarAlertPopup("calendar","all",Y.getElement(w(this)).data("calendar-ids"))}).on("click",".fsAlternateViewToggleLink",function(i){i.preventDefault();var n=w(this),r=e.find(".fsDayContainer:first > article > time"),a=e.hasClass("fsGrid")?U.getMomentFromDateDiv(e.find(x)):H(r.attr("datetime")),o=e.data("element-override")?e.data("element-override"):Y.getElementID(e),s="element_override="+o+"&cal_date="+a.format(O);Y.inDraftMode()?Y.notifyAdminInterface("page:show",{pageID:n.data("page-id"),queryString:s}):t.location.href=n.attr("href")+"?"+s}).on("click",".fsLoadMoreButton",function(){var t=w(this),i=e.find(I),n={},r=Y.getQueryStringValues(),a=t.data("start-row");r.cal_date&&r.cal_date.length&&(n.cal_date=r.cal_date),a&&(n.start_row=a),E.extend(n,z[u].filters),Y.loadingOverlay(i),Y.loadElementData(e,n).done(function(n){var r=w(n),a=r.find(I).children(":not(.fsElementEmpty)");i.siblings(".fsLoadingDotsOverlay").remove(),i.append(a),e.addClass("fsLoadMoreClicked"),t.remove(),q.triggerElementMoreLoaded(e,a)})}).on("click",".fsRSSIcon",function(e){var i=Y.getElement(w(this));e.preventDefault(),t.open("/cf_calendar/cms_calendar_feeds.cfm?element_id="+u+"&calendar_ids="+i.data("calendar-ids")+"&team_ids="+i.data("team-ids"),"","width=550,height=625")}).on("click",".fsRequestEventControl",function(e){e.preventDefault(),t.open("/cf_calendar/postEvent.cfm?calendar_ids="+w(this).data("calendarids"),"","width=625,height=725")}).on("click",".fsDisplayNavigation input",function(){i(e,w(this).val())}).on("click",".fsCalendarFilter",function(e){var t,n=w(this),o=n.closest(".fsElement"),s=n.data("element-id"),d="hide_cals_el_"+s,f="hide_teams_el_"+s,p=w(".fsCalendarFilterDialog[data-element-id='"+s+"']");e.preventDefault(),p.length?p.dialog("open"):(p=w('<div class="fsCalendarFilterDialog" data-element-id="'+s+'"><div class="fsCalendarFilterDialogContent"><div class="fsCalendarFilterDialogCalendars"><div class="fsLoadingDots"></div></div><div class="fsCalendarFilterDialogTeams"><div class="fsLoadingDots"></div></div></div>'),p.dialog({modal:!0,title:"Calendar Filter",buttons:[{text:"Cancel",click:function(){var e,t=w(this),i=a(d),n=a(f);t.find("fsCalendarFilterDialogCalendars input").each(function(){e=w(this),e.prop("checked",i.indexOf(e.val())==-1)}),t.find("fsCalendarFilterDialogTeams input").each(function(){e=w(this),e.prop("checked",n.indexOf(e.val())==-1)}),t.dialog("close")}},{"class":".fsAppModalApplyButton",text:"Apply",click:function(){var e=w(this),t=r(o),n=z[u],a=e.find(".fsCalendarFilterDialogCalendars input:checkbox:not(:checked)").map(function(){return this.value}).get(),l=e.find(".fsCalendarFilterDialogTeams input:checkbox:not(:checked)").map(function(){return this.value}).get();a.length>0?$.set(d,a.join(":")):$.remove(d),l.length>0?$.set(f,l.join(":")):$.remove(f),e.dialog("close"),o.html('<div class="fsLoadingDots"></div>'),Y.fetchElementHTML(s,n.filters).done(function(e){o=e,i(o,t,n.date)})}}]}),c.length?(t="/cf_endpoints/routes.cfm/calendars.json?calendar_ids="+c,o.data("display-group-calendars")&&(t+="&include_group_calendars=true"),w.getJSON(t).done(function(e){l(e,a(d),"calendarid","calendarname","calendar_filter_id_",p.find(".fsCalendarFilterDialogCalendars"),"Display Calendar Events")})):p.find(".fsCalendarFilterDialogCalendars").html(""),h.length?w.getJSON("/cf_endpoints/routes.cfm/athletics/teams.json?team_ids="+h).done(function(e){l(e,a(f),"id","name","team_filter_id_",p.find(".fsCalendarFilterDialogTeams"),"Display Athletic Events by Team")}):p.find(".fsCalendarFilterDialogTeams").html(""))}).on("click keypress",F,p).on("click",".fsCalendarPrevMonth, .fsCalendarNextMonth",o),s(e)}function f(e,t){var i,r;i=t?U.getDateDivFromMoment(e,t):n(e),t=U.getMomentFromDateDiv(i),r=i.parent().find(".fsCalendarInfo"),e.find(".fsCalendarRow").removeClass(R),e.find(".fsCalendarEventGrid").addClass(R),u(e,i.data(A),i.data(N),i.data(j)),e.find(x).html(r.length?r.clone():"<em>no events to show</em>").removeClass(R),y(e,t),W.triggerDisplayChanged(Y.getElementID(e),"Day",t),v(e,i,"days")}function p(){var e=Y.getElement(w(this));return"Month"==r(e)&&(U.monthPickerClickHandler(e,o),!1)}function g(e){var t=e.find('.fsCalendarDaybox:not(.fsCalendarOutOfRange) .fsCalendarDate[data-day="1"]');e.find(".fsCalendarEventGrid, .fsCalendarRow").removeClass(R),u(e,t.data(A),t.data(N),t.data(j)),e.find(x).addClass(R),b(e),W.triggerDisplayChanged(Y.getElementID(e),"Month"),v(e,t,"months")}function m(e,t){var i,r,a;a=t?U.getDateDivFromMoment(e,t):n(e),r=a.parents(".fsCalendarRow"),e.find(".fsCalendarEventGrid").removeClass(R),r.removeClass(R).siblings(".fsCalendarRow").addClass(R),i=r.find(C+":first"),u(e,i.data(A),i.data(N),i.data(j)),e.find(x).addClass(R),_(e),W.triggerDisplayChanged(Y.getElementID(e),"Week",U.getMomentFromDateDiv(i)),v(e,i,"weeks")}function v(e,t,i){var n=H([t.data(j),t.data(N),t.data(A)]),r=n.clone().add(1,i),a=n.clone().subtract(1,i);e.find(".fsCalendarNextMonth").val(r.format(O)),e.find(".fsCalendarPrevMonth").val(a.format(O))}function y(t,i){var n="md"==e.currentPage.dateFormat?"MMMM D, YYYY":"D MMMM, YYYY";t.find(P).html(i.format(n)),c(t,i)}function b(e){var t=e.find('.fsCalendarDaybox:not(.fsCalendarOutOfRange) .fsCalendarDate[data-day="1"]'),i=e.find(P);i.html(U.getMomentFromDateDiv(t).format("MMMM YYYY"))}function _(t){var i=t.find(".fsCalendarRow:not(."+R+")"),n=i.find(C+":first"),r=i.find(C+":last"),a=t.find(P),o="dm"==e.currentPage.dateFormat?"D MMMM":"MMMM D",s=U.getMomentFromDateDiv(n);a.html(s.format(o)+" - "+U.getMomentFromDateDiv(r).format(o)),c(t,s)}var w=e.$,E=e._,T=e.getInternalNS("elements.constants.classes"),S=e.getInternalNS("elements.constants.selectors"),C=".fsCalendarDate",x=".fsCalendarDayView",k=".fsCalendarToday > .fsCalendarDate",A="day",I=S.elementContent,D="Calendar",M=".fsCalendarGridBrowser",P=".fsCalendarGridBrowser > span",R=T.stateHidden,O="YYYY-MM-DD",N="month",L="fsCalendarGridShowMonthPickerButton",F="."+L,j="year",B=w(document.body),H=e.moment,U=e.getInternalNS("elements.calendar.utils"),$=e.cookies,z={},q=e.events,W=e.getInternalNS("elements.linkedEvents"),Y=e.getInternalNS("elements.utils");q.onElementAdded(D,h),q.onElementUpdated(D,h),q.onElementDialogShown(D,h),q.onElementShown(q.ALL_CONTAINERS_TYPE,s),w(".fs"+D).each(function(){var e=w(this);z[Y.getElementID(e)]={filters:{}},h(e)}),B.on("click",'.fsCalendarEventLink[href="#"]',function(e){var t=w(this),i=Y.getElement(t),n=t.data("occur-id");return e.preventDefault(),t.data("ath-id")?Y.openAthleticEventPopup(n,t):i.data("linked-element-ids")?(Y.populateLinkedElements(i,{occur_id:n}),Y.updateURLParams({virtualParam:"/~occur_id/"+n})):Y.showElementPopupDialog(i,{occur_id:n,show_event:!0},D,t),!1})}(FS,window),function(e){"use strict";var t=e.getInternalNS("elements.element_tools.utils"),i=e.getInternalNS("elements.linkedEvents"),n=e.getInternalNS("elements.utils");t.setupSearch=function(t){function r(){var e={};d&&(e.rangeStart=o.getMoment(),e.rangeEnd=a.getMoment()),c&&(e.keywords=l.val()),i.triggerFilter(n.getElementID(t),e)}var a,o,s=t.find(".fsElementToolsDateRange"),l=t.find(".fsElementToolsKeyword > input"),d=s.length>0,c=l.length>0;if(d){var u=s.find(".fsElementToolsDateRangeStart"),h=s.find(".fsElementToolsDateRangeEnd");o=e.rome(u[0],{dateValidator:e.rome.val.beforeEq(h[0]),time:!1}),a=e.rome(h[0],{dateValidator:e.rome.val.afterEq(u[0]),time:!1})}c&&t.on("click",".fsButtonClear",function(){l.val("")}),l.on("keydown",function(e){13==e.keyCode&&r()}),t.on("click",".fsElementToolsSearchButton",r)}}(FS),function(e){"use strict";function t(e){var t=s(e.target),n=t.val(),r=m.getElement(t),a=m.getElementID(r),o={cal_date:n},l=d(n);m.loadingOverlay(r.find(b)),m.fetchElementHTML(a,o).done(i),p.triggerFilter(m.getElementID(r),{date:l,rangeEnd:l.clone().endOf("month"),rangeStart:l.clone().startOf("month")})}function i(e){var t=m.getElementID(e),i=C[t]||{};if(e.find(".fsCalendarDaybox").removeClass(v),l.has(i,"displayMode")&&l.has(i,"momentObject")&&"Month"!=i.displayMode){var n=c.getDateDivFromMoment(e,i.momentObject).parent();n.addClass(v),"Week"==i.displayMode&&n.siblings(".fsCalendarDaybox").addClass(v)}}function n(e){e.hasClass("fsLegend")?r(e):e.hasClass("fsSearch")?h.setupSearch(e):e.hasClass("fsMiniGrid")&&a(e)}function r(e){1==e.find(S).length&&(e.on("click",".fsUpdateFilters",function(){var t=e.find(S+" input:checked"),i=e.find(E+T);p.triggerFilter(m.getElementID(e),{calendarIDsToHide:i.not(y).map(function(){return this.value}).get(),teamIDsToHide:i.filter(y).map(function(){return this.value}).get()}),"selected"==t.val()&&t.trigger("change")}).on("change",S+" input",function(){var t=e.find(".fsCalendarGroups > li");"all"==s(this).val()?e.find("li").removeClass(w):(e.find(".fsToolsList > li").each(function(){var e=s(this);e.toggleClass(w,e.find(E).is(T))}),t.each(function(){var e=s(this);e.toggleClass(w,0==e.find(E+":checked").length)})),t.each(function(){s(this).find(g.selectAll).trigger("updateLabel")})}),m.setupExpandableHeaders(e),m.setupSelectAllButtons(e,".fsCalendarGroups > li"))}function a(e){var n=m.getElementID(e),r=e.data("linked-element-ids");e.on("click",".fsCalendarDaybox",function(){var t=s(this),i=c.getMomentFromDateDiv(t.find(".fsCalendarDate"));p.triggerFilter(m.getElementID(e),{date:i}),t.hasClass("fsCalendarOutOfRange")&&(m.loadingOverlay(e.find(b)),m.fetchElementHTML(m.getElementID(e),{cal_date:i.format("YYYY-MM-DD")}))}),e.on("click keypress",".fsCalendarGridShowMonthPickerButton",o).on("click",".fsCalendarPrevMonth, .fsCalendarNextMonth",t),r&&(p.onUpdated(n,r,function(t,r,a){a!=n&&(m.loadingOverlay(e.find(b)),m.fetchElementHTML(n,l.omit(r,["end_date","start_date"])).done(i))}),p.onDisplayChanged(n,r,function(t,r,a){C[n]={displayMode:r,momentObject:a},i(e)}))}function o(){return c.monthPickerClickHandler(m.getElement(s(this)),t),!1}var s=e.$,l=e._,d=e.moment,c=e.getInternalNS("elements.calendar.utils"),u=e.getInternalNS("elements.constants.classes"),h=e.getInternalNS("elements.element_tools.utils"),f=e.getNS("events"),p=e.getInternalNS("elements.linkedEvents"),g=e.getInternalNS("elements.constants.selectors"),m=e.getInternalNS("elements.utils"),v=u.stateActive,y=".fsCalendarFilterInput[data-calendartype=athletics]",b=g.elementContent,_="CalendarTools",w=u.stateHidden,E=".fsCalendarFilterInput",T=":not(:checked)",S=".fsElementControls",C={};f.onElementAdded(_,n),f.onElementUpdated(_,n),s(".fs"+_).each(function(){n(s(this))})}(FS),function(e){"use strict";function t(e){e.find(o).change(function(e){var t=e.target.id,n=t.split("_")[2],r=n.charAt(0).toUpperCase()+n.slice(1),a=i("[data-loc-dept="+r+"]"),o=".fsConstituent"+r;i(o+":not(:checked)").length?a.text(l):a.text(d)}),e.find(s).click(function(e){var t=i(this),n=t.data("loc-dept"),r=".fsConstituent"+n;e.preventDefault(),i(r+":not(:checked)").length?(i(r).prop("checked",!0),t.text(d)):(i(r).prop("checked",!1),t.text(l))}),e.find(r).click(function(){i(this).toggleClass(a)})}var i=e.$,n="Constituent",r=".fsStyleExpandable",a="fsStateExpanded",o=".fsConstituentLocation, .fsConstituentDepartment",s=".fsSelectAll",l="Select All",d="Select None",c=i(document.body),u=e.events,h=e.getInternalNS("elements.utils");u.onElementAdded(n,t),u.onElementUpdated(n,t),i(".fs"+n).each(function(){t(i(this))}),c.on("click",'.fsConstituentProfileLink[href="#"]',function(e){var t=i(this),r=h.getElement(t),a=t.data("constituent-id");return e.preventDefault(),r.data("linked-element-ids")?(h.populateLinkedElements(r,{const_id:a}),h.updateURLParams({virtualParam:"/~const-id/"+a})):h.showElementPopupDialog(r,{const_id:a,show_profile:!0},n,t),!1})}(FS,window),function(e){"use strict";function t(e){var t=p(e);t.bubbles.forEach(function(e){e.setMap(null)}),t.markers.forEach(function(e){e.setMap(null)}),t.markers=[],t.bubbles=[]}function i(e){var t=p(e);t.startInfoBubble.close(),t.bubbles.forEach(function(e){e.close()})}function n(e,t,i){return new google.maps.Circle({center:t,radius:1609.344*u(e,i)})}function r(e,t){var n=new InfoBubble(R),r="",a=e.data("link-email"),o=e.data("link-profile"),s=p(e),l=e.data("profile-url"),d=new google.maps.Marker({icon:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",map:s.map,position:{lat:t.latitude,lng:t.longitude}});t.people.forEach(function(e){r+="<div>",o&&e.is_parent&&(r+='<a href="'+l+"/~const-id/"+e.person_id+'" target="_blank">'),r+=e.first_name+" "+e.last_name,o&&e.is_parent?(r+="</a>",a&&e.email&&(r+=' <a href="mailto:'+e.email+'"><span class="fsEmailIcon"><span class="fsStyleSROnly">'+e.email+"</span></span></a>")):e.current_grade.length&&(r+=", Grade "+e.current_grade),r+="</div>"}),r+='<div class="'+C+'">'+t.address+"</div>",n.setContent(r),s.markers.push(d),s.bubbles.push(n),google.maps.event.addListener(d,"click",function(){i(e),n.open(s.map,d)})}function a(e,n,a){var o,s=e.data("map-distance-unit"),d=s?"mile":"kilometer",c=d+"s",h=p(e),g=h.errorInfoBubble,m=h.map,v=h.startMarker,y=h.startInfoBubble,b='<div>Find families within <a href="#" data-radius=".25">0.25 '+c+'</a>, <a href="#" data-radius=".5">0.50 '+c+'</a>, <a href="#" data-radius="1">1 '+d+'</a>, <a href="#" data-radius="5">5 '+c+'</a>, <a href="#" data-radius="10">10 '+c+'</a>, or <a href="#" data-radius="20">20 '+c+'</a> of</div><div class="'+C+'">'+a+"</div>",_=D("<div>",{html:b});v.setMap(m),v.setPosition(n),y.setContent(_[0]),google.maps.event.addListener(v,"click",function(){i(e),y.open(m,v)}),_.on("click","a",function(){var i=D(this).data("radius");return i=u(s,i),m.setZoom(f(i)),m.setCenter(n),y.close(),l(e,n,i).done(function(i){t(e),i.length?i.forEach(function(t){r(e,t)}):(o=D("<div>",{html:'<p>There are no households to display in the specified area.</p><p><a href="#">Try again</a></p>'}),o.on("click","a",function(){return g.close(),y.open(m,v),!1}),g.setContent(o[0]),g.open(m,v))}).fail(function(){alert("Sorry, there was a problem retrieving the households for the specified bounds. Please try again."),h.startInfoBubble.open()}),!1}),google.maps.event.addListenerOnce(m,"idle",function(){y.open(m,v)}),m.setCenter(n),e.find(k).val(a)}function o(e){var t=e.data("location"),i=e.data("location-latitude"),n=e.data("location-longitude");a(e,{lat:i,lng:n},t)}function s(e){return D.ajax({data:{key:b,latlng:e.latitude+","+e.longitude},dataType:"json",method:"GET",url:T})}function l(e,t,i){var r=e.data("map-distance-unit"),a=n(r,t,i);return D.ajax({dataType:"json",method:"GET",url:"/cf_endpoints/routes.cfm/constituents/household_geolocation.json",data:{bounds:a.getBounds().toUrlValue(),group_ids:e.data("group-ids"),search_by_role:"student"}})}function d(e){var t,i="",n=["address_1","address_2","address_3","city","state_short","zip_code","country_short"];return n.forEach(function(n){t=e[n],t.length&&(i.length&&(i+="zip_code"==n?" ":", "),i+=t)}),i}function c(e){return D.ajax({data:{address:e,key:b},dataType:"json",method:"GET",url:T})}function u(e,t){return e?t:t/1.609344}function h(){return D.ajax({dataType:"json",method:"GET",url:"/cf_endpoints/routes.cfm/constituents/current/home_address.json"})}function f(e){return Math.round(14-Math.log(e)/Math.LN2)}function p(e){return P[e.attr("id")]}function g(e){var i=D(e.target).closest(E);navigator.geolocation&&(y(i,!0),navigator.geolocation.getCurrentPosition(function(n){s(n.coords).done(function(r){r.results&&r.results.length&&(t(i),a(D(e.target).closest(E),{lat:n.coords.latitude,lng:n.coords.longitude},r.results[0].formatted_address))}).always(function(){y(i,!1)})},function(e){y(i,!1),alert(e.message)},{timeout:1e4}))}function m(e){var i=D(e.target).closest(E),n=i.find(k).val();n.length?(y(i,!0),c(n).done(function(e){e.results&&e.results.length&&(t(i),a(i,e.results[0].geometry.location,n))}).always(function(){y(i,!1)})):alert("Please enter an address first")}function v(t){b=t.data("map-key");var i=t.find(A),n=t.data("map-distance-unit"),r=t.data("map-start-radius"),s=1==t.data("map-start"),l={bubbles:[],errorInfoBubble:new InfoBubble(R),markers:[],startInfoBubble:new InfoBubble(R),startMarker:new google.maps.Marker,map:new google.maps.Map(i[0],{clickableIcons:!1,zoom:10})};P[t.attr("id")]=l,r=u(n,r),l.map.setZoom(f(r)),s?h().done(function(e){var i=d(e);i.length?e.location?a(t,e.location,i):c(i).done(function(e){e.results&&e.results.length&&a(t,e.results[0].geometry.location,e.results[0].formatted_address)}).fail(function(){o(t)}):o(t)}).fail(function(){o(t)}):o(t),navigator.geolocation&&t.find(_).removeClass(S),t.find(I).on("click",m),t.find(_).on("click",g),t.find(k).on("keyup",function(e){13==e.keyCode&&m(e)}),t.on("click",".fsEmbeddedMapHideAddress",function(){return e.util.popup("/cf_directory/cp.cfm","updateProfile",620,600),!1})}function y(e,t){e.find(x).toggleClass(S,!t)}var b,_=".fsEmbeddedMapCurrentLocationButton",w="ConstituentMap",E=".fsConstituentMap",T="https://maps.googleapis.com/maps/api/geocode/json",S=e.getInternalNS("elements.constants.classes").stateHidden,C="fsGoogleMapInfoBubbleAddress",x=".fsLoadingDotsOverlay",k=".fsEmbeddedMapLocationInput",A=".fsEmbeddedGoogleMap",I=".fsEmbeddedMapUpdateButton",D=e.$,M=e.events,P={},R={backgroundClassName:"fsGoogleMapInfoBubble",borderRadius:0,maxHeight:130,maxWidth:250,minHeight:130,minWidth:250};M.onElementAdded(w,v),M.onElementUpdated(w,v),M.onElementDialogShown(w,v),M.onGoogleMapsReady(function(){D(E).each(function(){v(D(this))})})}(FS),function(e){"use strict";function t(e){var t=r.template('<div class="fsBoardRSSLinks">\t\t\t\t<ul>\t\t\t\t\t<% _.each(boards, function(board) {  %>\t\t\t\t\t\t<li><a href="/fs/post-manager/boards/<%= board.id%>/posts/feed" target="blank"><%= board.name%></a></li>\t\t\t\t\t<% }); %>\t\t\t\t</ul>\t\t\t</div>',{variable:"boards"});return t(e)}function i(e,i,r,u){var h,f=a.Dialog({dialogClass:r,id:"fsAlertsForEl_"+e+"_"}),p=r==d,g={models:i,preselects:[]};if(p){var m=s.getItem(c+e);g.preselects=m?m.split(",").map(Number):[],h=n(o.getSubscriptionDialogTemplate(g,"board"))}else h=n(t(i));f.setContent(h),f.open(u),f.getContentElement().on("click",".fsDialogCancelButton",function(){s.removeItem(c+e),f.close()}),p&&(h.find(".fsDialogNextButton").prop("disabled",!g.preselects.length),h.on("click",".fsDialogNextButton",function(){var e=h.find(l+":checked").map(function(){return n(this).val()}).get();o.showSubscriptionsEmailInfoForm(e,f,"board")}).on("click",l,function(){var e=0==h.find(l+":checked").length;h.find(".fsDialogNextButton").prop("disabled",e)}))}var n=e.$,r=e._,a=e.getInternalNS("dialogs"),o=e.getInternalNS("elements.subscribe.utils"),s=e.localStorage,l="input[name=fsSelectedMailingList]",d="fsBoardSubscriptions",c="boardAlertSubscriptions_";a.showBoardAlertsDialog=i}(FS,window),function(e){"use strict";function t(e,t,l){var d,c=n.Dialog({dialogClass:"fsListSubscriptions",id:"fsSubscriptionsForEl_"+e+"_"}),u={models:JSON.parse(decodeURI(t)),preselects:[]},h=a.getItem(s+e);u.preselects=h?h.split(",").map(Number):[],d=i(r.getSubscriptionDialogTemplate(u,"list")),c.setContent(d),c.open(l),c.getContentElement().on("click",".fsDialogCancelButton",function(){a.removeItem(s+e),c.close()}),d.find(".fsDialogNextButton").prop("disabled",!u.preselects.length),d.on("click",".fsDialogNextButton",function(){var e=d.find(o+":checked").map(function(){return i(this).val()}).get();r.showSubscriptionsEmailInfoForm(e,c,"list")}).on("click",o,function(){var e=0==d.find(o+":checked").length;d.find(".fsDialogNextButton").prop("disabled",e)})}var i=e.$,n=e.getInternalNS("dialogs"),r=e.getInternalNS("elements.subscribe.utils"),a=e.localStorage,o="input[name=fsSelectedMailingList]",s="mailingListSubscriptions_";n.showListSubscribeDialog=t}(FS),function(e){"use strict";var t,i=e.$,n=e._,r=e.getInternalNS("elements.utils"),a=e.getInternalNS("elements.subscribe.utils"),o=e.localStorage,s={board:{altType:"alerts",entity:"email alerts",instructions:"Select the board(s) for which you would like to receive an email alert when a new post is added.",localStorageKey:"boardAlertSubscriptions_",subscriptionRequestUrl:"/fs/post-manager/boards/subscribe"},list:{altType:"mailing lists",entity:"messages",instructions:"Select the mailing list(s) for which you would like to receive an email when a new message is added.",localStorageKey:"mailingListSubscriptions_",subscriptionRequestUrl:"/fs/comms-manager/lists/subscribe"}},l="input[name=fsSelectedBoardAlertEmails]";a.getEmailSelectionDialogTemplate=function(e,t,i){var a=n.template('<div class="fsBoardSubscriptionEmailSelection">\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t<p>\t\t\t\t\tYou are subscribing to <%= modelCount %> <%= modelLabel %>. \t\t\t\t\tWhere would you like to receive these <%= confirmEntity %>?\t\t\t\t</p>\t\t\t\t<ul>\t\t\t\t\t<% _.each(emails, function(email) {  %>\t\t\t\t\t\t<li>\t\t\t\t\t\t\t<input name="fsSelectedBoardAlertEmails" type="checkbox" \t\t\t\t\t\t\t\tid="fsBoardAlertEmailLink_<%= email.person_email_id%>" value="<%= email.person_email_id%>">\t\t\t\t\t\t\t<label for="fsBoardAlertEmailLink_<%= email.person_email_id%>">\t\t\t\t\t\t\t\t<span class="fsBoardAlertEmailType"><%= email.label || "Email" %></span>\t\t\t\t\t\t\t\t<span class="fsBoardAlertEmailAddress"><%= email.email %></span>\t\t\t\t\t\t\t</label>\t\t\t\t\t\t</li>\t\t\t\t\t<% }); %>\t\t\t\t</ul>\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t<button class="fsDialogCancelButton">Cancel</button>\t\t\t\t\t<button class="fsDialogSubscribeButton" disabled="disabled">Subscribe</button>\t\t\t\t</div>\t\t\t</div>');
return a({confirmEntity:s[i].entity,emails:t,modelCount:e.length,modelLabel:r.pluralize(e.length,"board"==i?i:"mailing list")})},a.getSubscriptionDialogResponseTemplate=function(e){var t=n.template('<div class="fsBoardSubscriptionLinks">\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t<p>\t\t\t\t\t<%= data.message%>\t\t\t\t</p>\t\t\t\t<ul>\t\t\t\t\t<% _.each(data.subscriptions, function(name) {  %>\t\t\t\t\t\t<li><strong><%= name%></strong></li>\t\t\t\t\t<% }); %>\t\t\t\t</ul>\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t<button class="fsDialogCancelButton">Close</button>\t\t\t\t</div>\t\t\t</div>',{variable:"data"});return t(e)},a.getSubscriptionDialogSignupTemplate=function(e,i){t=n.random(1);var a=window.location.pathname+window.location.search,o={captchaModifier:0==t?"":"not",confirmEntity:s[i].entity,modelCount:e.length,modelLabel:r.pluralize(e.length,"board"==i?i:"mailing list"),models:e},l=n.template('<div class="fsBoardSubscriptionSignup">\t\t\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t\t\t<p>You are subscribing to <%= modelCount %> <%= modelLabel %>. Where would you like to receive these <%= confirmEntity %>?</p>\t\t\t\t\t\t\t<div class="fsFormField">\t\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertSignupFirstName">First Name</label>\t\t\t\t\t\t\t\t<input id="fsAlertSignupFirstName" class="fsStyleDefaultField">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="fsFormField">\t\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertSignupLastName">Last Name</label>\t\t\t\t\t\t\t\t<input id="fsAlertSignupLastName" class="fsStyleDefaultField">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="fsFormField">\t\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertSignupEmail">Email Address</label>\t\t\t\t\t\t\t\t<input id="fsAlertSignupEmail" class="fsStyleDefaultField">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="fsFormField" id="fsAlertCaptchaSection">\t\t\t\t\t\t\t\t<input type="checkbox" id="fsAlertCaptcha"  class="fsStyleDefaultField">\t\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertCaptcha">I am <%= captchaModifier %> a human</label>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</p>\t\t\t\t\t\t<div><p><a id="fsLoginRedirect" href="/fs/login?login_destination=<%= login_destination %>">Already have an account?</a></p></div>\t\t\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t\t\t<button class="fsDialogCancelButton">Close</button>\t\t\t\t\t\t\t<button class="fsDialogAlertSignupButton">Signup</button>\t\t\t\t\t\t</div>\t\t\t\t\t</div>');return"board"==i&&a.indexOf("showBoardAlertsDialog=true")===-1?a+=(window.location.search.length?"&":"?")+"showBoardAlertsDialog=true":"list"==i&&a.indexOf("showListSubscribeDialog=true")===-1&&(a+=(window.location.search.length?"&":"?")+"showListSubscribeDialog=true"),o.login_destination=encodeURIComponent(a),l(o)},a.getSubscriptionDialogTemplate=function(e,t){var r=i.extend(e,{instructions:s[t].instructions}),a=n.template('<div class="fsBoardSubscriptionLinks">\t\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t\t<p>\t\t\t\t\t\t<%= instructions %> When finished click the "Next" button.\t\t\t\t\t</p>\t\t\t\t\t<ul>\t\t\t\t\t\t<% _.each(models, function(model) {  %>\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t<input name="fsSelectedMailingList" type="checkbox" \t\t\t\t\t\t\t\t\t<%= (preselects.indexOf(model.id) >= 0 ? "checked=checked" : "") %> \t\t\t\t\t\t\t\t\tid="fsBoardSubscriptionLink_<%= model.id%>" value="<%= model.id%>">\t\t\t\t\t\t\t\t<label for="fsBoardSubscriptionLink_<%= model.id%>"><%= model.name%></label>\t\t\t\t\t\t\t</li>\t\t\t\t\t\t<% }); %>\t\t\t\t\t</ul>\t\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t\t<button class="fsDialogCancelButton">Cancel</button>\t\t\t\t\t\t<button class="fsDialogNextButton" disabled="disabled">Next</button>\t\t\t\t\t</div>\t\t\t\t</div>');return a(r)},a.subscriptionRequest=function(e,t,n){var r=s[n].subscriptionRequestUrl,o="There was a problem creating subscriptions for these "+s[n].altType+". Please try again.";i.ajax({data:e,dataType:"json",method:"PUT",url:r}).done(function(e){var n=i(a.getSubscriptionDialogResponseTemplate(e));t.setContent(n)}).fail(function(e){e&&e.responseJSON&&e.responseJSON.message?window.alert(e.responseJSON.message):window.alert(o),t.close()})},a.subscribeToModels=function(e,t,i,n){i.setLoading(),r.getToken().done(function(r){var o={authenticity_token:r,email_ids:t,model_ids:e};a.subscriptionRequest(o,i,n)})},a.showSubscriptionEmailSelectionForm=function(e,t,n){t.setLoading(),i.ajax({dataType:"json",method:"GET",url:"/fs/sessions/user/emails"}).done(function(r){var o=i(a.getEmailSelectionDialogTemplate(e,r,n));t.setContent(o),o.on("click",".fsDialogSubscribeButton",function(){var r=o.find(l+":checked").map(function(){return i(this).val()}).get();a.subscribeToModels(e,r,t,n)}).on("click",l,function(){var e=0==o.find(l+":checked").length;o.find(".fsDialogSubscribeButton").prop("disabled",e)})}).fail(function(){window.alert("There was a problem fetching your email information. Please try again."),t.close()})},a.showSubscriptionSignupForm=function(e,n,l){var d=Number(n.getContentElement()[0].id.replace(/[^0-9.-]+/g,"")),c=i(a.getSubscriptionDialogSignupTemplate(e,l));o.setItem(s[l].localStorageKey+d,e),n.setContent(c),c.on("click",".fsDialogAlertSignupButton",function(){var o,s,d,u=c.find("#fsAlertCaptchaSection"),h=u.find("#fsAlertCaptcha");return u.find(".fsError").remove(),0==t&&!h.prop("checked")||1==t&&h.prop("checked")?void u.append('<div class="fsError" role="alert">Please confirm that you are not a robot.</div>'):(o=c.find("#fsAlertSignupEmail"),s=c.find("#fsAlertSignupFirstName"),d=c.find("#fsAlertSignupLastName"),0==s.val().length?(window.alert("Please enter your first name to continue."),void s.val("").focus()):0==d.val().length?(window.alert("Please enter your last name to continue."),void d.val("").focus()):0==o.val().length?(window.alert("Please enter your email address to continue."),void o.val("").focus()):(n.setLoading(),void i.when(r.getToken()).then(function(t){var i={authenticity_token:t,email:o.val(),first:s.val(),last:d.val(),model_ids:e};a.subscriptionRequest(i,n,l)})))})},a.showSubscriptionsEmailInfoForm=function(e,t,i){r.isLoggedIn()?a.showSubscriptionEmailSelectionForm(e,t,i):a.showSubscriptionSignupForm(e,t,i)}}(FS),function(e){"use strict";function t(e){var t=e.find(r),i={lat:e.data("location-latitude"),lng:e.data("location-longitude")},n=new google.maps.Map(t[0],{center:i,zoom:10});new google.maps.Marker({map:n,position:i})}var i="EmbeddedMap",n=".fsEmbeddedMap",r=".fsEmbeddedGoogleMap",a=e.$,o=e.events;o.onElementAdded(i,t),o.onElementUpdated(i,t),o.onElementDialogShown(i,t),o.onGoogleMapsReady(function(){a(n).each(function(){t(a(this))})})}(FS),function(e,t){"use strict";function i(t){if(t.length){if(window.Juicer)Juicer.initialize();else if(!n){var i=document.createElement("script");n=!0,i.type="text/javascript",i.src="//assets.juicer.io/embed-amd.js",i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i.onload=i.onreadystatechange=null,Juicer.initialize(),Juicer.Constants.FACEBOOK_APP_ID=0x66ce12943f58e)},document.body.appendChild(i)}t.on("click",".fsSlideshowPlay",function(){var t=e(this).closest(u);t.removeClass(l),t.addClass(d),t.find(s).slick("slickSetOption","autoplay",!0),t.find(s).slick("slickPlay"),t.find(".fsSlideshowPause").attr("aria-hidden","false").removeClass(r.stateHidden),t.find(".fsSlideshowPlay").attr("aria-hidden","true").addClass(r.stateHidden)}),t.on("click",".fsSlideshowPause",function(){var t=e(this).closest(u);t.removeClass(d),t.addClass(l),t.find(s).slick("slickSetOption","autoplay",!1),t.find(s).slick("slickPause"),t.find(".fsSlideshowPause").attr("aria-hidden","true").addClass(r.stateHidden),t.find(".fsSlideshowPlay").attr("aria-hidden","false").removeClass(r.stateHidden)})}}var n=!1,r=FS.getInternalNS("elements.constants.classes"),a="Feeds",o="juicer-feed",s="."+o,l="fsStatePaused",d="fsStatePlaying",c="fsElementSlideshow",u="."+c;t.onElementUpdated(a,i),t.onElementAdded(a,i),t.onElementShown(t.ALL_CONTAINERS_TYPE,i),i(e(".fs"+a))}(FS.$,FS.events),/*! iFrame Resizer (iframeSizer.min.js ) - v2.8.5 - 2015-03-25
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2015 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
!function(){"use strict";function e(e,t,i){"addEventListener"in window?e.addEventListener(t,i,!1):"attachEvent"in window&&e.attachEvent("on"+t,i)}function t(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!C;e+=1)C=window[t[e]+"RequestAnimationFrame"];C||r(" RequestAnimationFrame not supported")}function i(){var e="Host page";return window.top!==window.self&&(e=window.parentIFrame?window.parentIFrame.getId():"Nested host page"),e}function n(e){return w+"["+i()+"]"+e}function r(e){y&&"object"==typeof window.console&&console.log(n(e))}function a(e){"object"==typeof window.console&&console.warn(n(e))}function o(e){function t(){function e(){c(P),l(),k[R].resizedCallback(P)}o("Height"),o("Width"),u(e,P,"resetPage")}function i(e){var t=e.id;r(" Removing iFrame: "+t),e.parentNode.removeChild(e),k[t].closedCallback(t),r(" --")}function n(){var e=M.substr(E).split(":");return{iframe:document.getElementById(e[0]),id:e[0],height:e[1],width:e[2],type:e[3]}}function o(e){var t=Number(k[R]["max"+e]),i=Number(k[R]["min"+e]),n=e.toLowerCase(),a=Number(P[n]);if(i>t)throw new Error("Value for min"+e+" can not be greater than max"+e);r(" Checking "+n+" is in range "+i+"-"+t),i>a&&(a=i,r(" Set "+n+" to min value")),a>t&&(a=t,r(" Set "+n+" to max value")),P[n]=""+a}function h(){var t=e.origin,i=P.iframe.src.split("/").slice(0,3).join("/");if(k[R].checkOrigin&&(r(" Checking connection is from: "+i),""+t!="null"&&t!==i))throw new Error("Unexpected message received from: "+t+" for "+P.iframe.id+". Message was: "+e.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function f(){return w===(""+M).substr(0,E)}function p(){var e=P.type in{"true":1,"false":1};return e&&r(" Ignoring init message from meta parent page"),e}function g(e){return M.substr(M.indexOf(":")+_+e)}function m(e){r(" MessageCallback passed: {iframe: "+P.iframe.id+", message: "+e+"}"),k[R].messageCallback({iframe:P.iframe,message:JSON.parse(e)}),r(" --")}function b(){if(null===P.iframe)throw new Error("iFrame ("+P.id+") does not exist on "+T);return!0}function C(e){var t=e.getBoundingClientRect();return s(),{x:parseInt(t.left,10)+parseInt(S.x,10),y:parseInt(t.top,10)+parseInt(S.y,10)}}function x(e){function t(){S=o,A(),r(" --")}function i(){return{x:Number(P.width)+n.x,y:Number(P.height)+n.y}}var n=e?C(P.iframe):{x:0,y:0},o=i();r(" Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top!==window.self?window.parentIFrame?e?parentIFrame.scrollToOffset(o.x,o.y):parentIFrame.scrollTo(P.width,P.height):a(" Unable to scroll to requested position, window.parentIFrame not found"):t()}function A(){!1!==k[R].scrollCallback(S)&&l()}function I(e){function t(e){var t=C(e);r(" Moving to in page link (#"+i+") at x: "+t.x+" y: "+t.y),S={x:t.x,y:t.y},A(),r(" --")}var i=e.split("#")[1]||"",n=decodeURIComponent(i),a=document.getElementById(n)||document.getElementsByName(n)[0];window.top!==window.self?window.parentIFrame?parentIFrame.moveToAnchor(i):r(" In page link #"+i+" not found and window.parentIFrame not found"):a?t(a):r(" In page link #"+i+" not found")}function D(){switch(P.type){case"close":i(P.iframe),k[R].resizedCallback(P);break;case"message":m(g(6));break;case"scrollTo":x(!1);break;case"scrollToOffset":x(!0);break;case"inPageLink":I(g(9));break;case"reset":d(P);break;case"init":t(),k[R].initCallback(P.iframe);break;default:t()}}var M=e.data,P={},R=null;f()&&(P=n(),R=P.id,y=k[R].log,r(" Received: "+M),!p()&&b()&&h()&&(D(),v=!1))}function s(){null===S&&(S={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},r(" Get page position: "+S.x+","+S.y))}function l(){null!==S&&(window.scrollTo(S.x,S.y),r(" Set page position: "+S.x+","+S.y),S=null)}function d(e){function t(){c(e),h("reset","reset",e.iframe)}r(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),s(),u(t,e,"init")}function c(e){function t(t){e.iframe.style[t]=e[t]+"px",r(" IFrame ("+i+") "+t+" set to "+e[t]+"px")}var i=e.iframe.id;k[i].sizeHeight&&t("height"),k[i].sizeWidth&&t("width")}function u(e,t,i){i!==t.type&&C?(r(" Requesting animation frame"),C(e)):e()}function h(e,t,i){r("["+e+"] Sending msg to iframe ("+t+")"),i.contentWindow.postMessage(w+t,"*")}function f(t){function i(){function e(e){1/0!==k[p][e]&&0!==k[p][e]&&(f.style[e]=k[p][e]+"px",r(" Set "+e+" = "+k[p][e]+"px"))}e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}function n(e){return""===e&&(f.id=e="iFrameResizer"+m++,y=(t||{}).log,r(" Added missing iframe ID: "+e+" ("+f.src+")")),e}function a(){r(" IFrame scrolling "+(k[p].scrolling?"enabled":"disabled")+" for "+p),f.style.overflow=!1===k[p].scrolling?"hidden":"auto",f.scrolling=!1===k[p].scrolling?"no":"yes"}function o(){("number"==typeof k[p].bodyMargin||"0"===k[p].bodyMargin)&&(k[p].bodyMarginV1=k[p].bodyMargin,k[p].bodyMargin=""+k[p].bodyMargin+"px")}function s(){return p+":"+k[p].bodyMarginV1+":"+k[p].sizeWidth+":"+k[p].log+":"+k[p].interval+":"+k[p].enablePublicMethods+":"+k[p].autoResize+":"+k[p].bodyMargin+":"+k[p].heightCalculationMethod+":"+k[p].bodyBackground+":"+k[p].bodyPadding+":"+k[p].tolerance+":"+k[p].enableInPageLinks}function l(t){e(f,"load",function(){var e=v;h("iFrame.onload",t,f),!e&&k[p].heightCalculationMethod in x&&d({iframe:f,height:0,width:0,type:"init"})}),h("init",t,f)}function c(e){if("object"!=typeof e)throw new TypeError("Options is not an object.")}function u(e){e=e||{},k[p]={},c(e);for(var t in A)A.hasOwnProperty(t)&&(k[p][t]=e.hasOwnProperty(t)?e[t]:A[t]);y=k[p].log}var f=this,p=n(f.id);u(t),a(),i(),o(),l(s())}function p(){function e(e,t){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");f.call(e,t)}return function(t,i){switch(typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),function(i){e(i,t)});break;case"object":e(i,t);break;default:throw new TypeError("Unexpected data type ("+typeof i+").")}}}function g(e){e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,i){f.call(i,e)}).end()}}var m=0,v=!0,y=!1,b="message",_=b.length,w="[iFrameSizer]",E=w.length,T="",S=null,C=window.requestAnimationFrame,x={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},k={},A={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};t(),e(window,"message",o),window.jQuery&&g(jQuery),"function"==typeof define&&define.amd?define([],p):"object"==typeof module&&"object"==typeof module.exports?module.exports=p():window.iFrameResize=p()}(),function(e,t){"use strict";function i(e){e.find("iframe").iFrameResize({checkOrigin:!1})}var n="Form";t.onElementAdded(n,i),t.onElementUpdated(n,i),t.onElementUpdated(t.ALL_CONTAINERS_TYPE,i),i(e(".fs"+n))}(FS.$,FS.events),function(e,t,i){"use strict";function n(e){return i.uniq(e.map(function(){return this.name}))}function r(t){function n(){g.prop(l,null),d.addClass(u),h.removeClass(u),p.addClass("fsFormSubmissionError"),p.text(c)}var r=t.find(".fsCircleLoaderCheckmark"),d=t.find(".fsCircleLoader"),h=t.find("form"),f=t.find(".fsFormSubmission"),p=f.find(".fsFormSubmissionMessage"),g=t.find(".fsFormSubmitButton");h.find('[data-type="date"]').each(function(){var t=e(this),n=o?"M/D/YYYY":"D/M/YYYY",r=t.data("disallowed-days"),a=t.data("end-date"),s={inputFormat:n,time:!1},l=t.data("start-date");l&&(s.min=FS.moment(l).format(n)),a&&(s.max=FS.moment(a).format(n)),r&&(s.dateValidator=function(e){return!i.contains(r,FS.moment(e).day())}),FS.rome(this,s)}),g.prop(l,null),h.submit(function(){var i,o=t.find(".fsFormCaptcha"),c=t.find(".g-recaptcha-response"),m={};return!!a(h,m)&&(o.length>0&&c.length>0&&(i=c.val(),0==i.length)?(alert("Please complete the CAPTCHA to continue."),c.focus(),!1):(h.addClass(u),g.prop(l,l),d.removeClass(u),f.removeClass(u),p.empty(),s.getToken().done(function(i){m.authenticity_token=i,e.ajax({data:m,global:!1,method:"POST",url:"/fs/form-manager/forms/"+t.data("form-id")+"/submissions"}).done(function(e){e.message&&(r.show(),d.addClass("fsCircleLoaderComplete"),p.addClass("fsFormSubmissionSuccess"),p.text(e.message),p.attr("tabindex","-1"),p.focus()),e.redirect&&(s.inDraftMode()?(d.addClass(u),f.append('<div class="fsWarning">On the published page, this form would have redirected to <a href="'+e.redirect+'" rel="noopener noreferrer" target="_blank">another page</a>.</div>')):(h[0].reset(),window.location=e.redirect))}).fail(n)}).fail(n),!1))})}function a(t,r){var a=t.find("input[name], select[name], textarea[name]");return i.every(n(a),function(i){var n,a,s,l=t.find('[name="'+i+'"]'),d=l.attr("type"),c=l.attr("maxlength"),u=l.attr("minlength"),h=l.attr("pattern");switch(d){case"checkbox":if(r[i]=l.filter(":checked").map(function(){return e(this).val()}).get(),0==r[i].length&&(r[i]="",n=l.closest("fieldset"),n.data("required")))return alert('At least one choice must be checked for "'+n.find("legend").text()+'"'),l.focus(),!1;break;case"radio":r[i]=l.filter(":checked").val()||"";break;default:r[i]=l.val()}if(l.prop("required")&&0==r[i].length)return alert("Field is required."),l.focus(),!1;if(r[i].length>0){if(r[i].length>c)return alert("Must be "+c+" characters or less."),l.focus(),!1;if(u>0&&r[i].length<u)return alert("Must be at least "+u+" characters."),l.focus(),!1;if(h&&r[i].match(new RegExp(h,"g")).join("")!=r[i])return alert("Please match the requested format.\n"+l.attr("title")),l.focus(),!1;"date"==l.data("type")&&(a=r[i].split("/"),s=o?new Date(a[2],a[0]-1,a[1]):new Date(a[2],a[1]-1,a[0]),r[i]=s.toISOString().split("T")[0])}return!0})}var o="md"==FS.currentPage.dateFormat,s=FS.getInternalNS("elements.utils"),l="disabled",d="Forms",c="An error occurred while submitting the form. Please try again.",u=FS.getInternalNS("elements.constants.classes").stateHidden;t.onElementAdded(d,r),t.onElementUpdated(d,r),t.onElementUpdated(t.ALL_CONTAINERS_TYPE,r),e(".fs"+d+"Element").each(function(){r(e(this))})}(FS.$,FS.events,FS._),function(e){"use strict";function t(e){var t=r.getElementID(e),s=e.data("trigger-element-ids");e.on("click",".fsLoadMoreButton",function(){var t=$(this),i=e.find(n.elementContent),o={},s=t.data("start-row");s&&(o.start_row=s),r.loadingOverlay(i),r.loadElementData(e,o).done(function(n){var r=$(n),o=r.find(".fsListItems").children(),s=r.find(".fsLoadMoreButton");i.siblings(".fsLoadingDotsOverlay").remove(),i.find(".fsListItems").append(o),t.replaceWith(s),e.addClass("fsLoadMoreClicked"),a.triggerElementMoreLoaded(e,o)})}),e.on("click",".fsIssueLink[data-opens-in=element]",function(){return i({issue_id:$(this).data("issue-id"),preview:$(this).data("preview")},e)}),e.on("change",".fsIssueDropdownSelection",function(){return i({issue_id:$(this).val(),preview:$(this).data("preview")},e)}),s&&o.onFilter(t,s,function(a,s){return a!=t&&("keywords"in s&&(e.data("keywords",s.keywords),i(null,e)),r.loadingOverlay(e.find(n.elementContent)),void r.fetchElementHTML(t,s).done(function(){o.triggerUpdated(t,null,a)}))})}function i(e,t){var i={keywords:t.data("keywords")};return e&&($.extend(i,e),r.updateURLParams({virtualParam:"/~issue-id/"+e.issue_id})),o.triggerFilter(r.getElementID(t),i),!1}var n=e.getInternalNS("elements.constants.selectors"),r=e.getInternalNS("elements.utils"),a=e.events,o=e.getInternalNS("elements.linkedEvents"),s="Issue";$(".fs"+s+"Element").each(function(){t($(this))}),a.onElementAdded(s,t),a.onElementUpdated(s,t),a.onElementDialogShown(s,t)}(FS,window),function(e){"use strict";function t(e){n.setupSearch(e)}var i=e.$,n=e.getInternalNS("elements.element_tools.utils"),r=e.getNS("events"),a="IssueTools";r.onElementAdded(a,t),r.onElementUpdated(a,t),i(".fs"+a+"Element").each(function(){t(i(this))})}(FS),function(e,t,i,n,r){"use strict";function a(e){var t=q(e).find(dt),i=t.find(Ot),n=t.find(Oe).length>0,r=c(e),a=t.find(K).length>0,o=t.width(),s=o<Ye,l=n||r.mediaType==ze||r.mediaType==We&&o<Ge,d=n&&o<Ke+(a?30:0)||!n&&(r.mediaType==ze&&o<Ve||r.mediaType==We&&o<Xe),u=n&&!a||o<Qe;i.toggleClass(Fe,d).css("left",n&&a?130:""),t.find(bt).toggleClass(Fe,l),t.find(Be+","+Ze+","+gt).toggleClass(Fe,s),t.find($t).toggleClass(Fe,u).css("left",s?40:"")}function o(e){var t=q(e),i=t.find(Q);return f()?G.height():p(t)?j.find(pe).height():Math.round(i.width()*parseFloat(i.data("aspectratio")))}function s(e,n,r,a){var o,s,c,m,v,b,_,C=0,x=q(e),k=[],A=x.find(Q)[0],N=0,B=q(A),H=B.data("autoplay"),U=B.data("loop"),W=B.data("randomstart");if(!B.data("setup-started"))return B.data("setup-started",!0),c=B.data("videoresolution"),m=parseInt(B.data("playercontrols")),b=parseInt(B.data("playlistid")),_=parseInt(B.data("posterscaling")),E(x),isNaN(b)||b<=0?void D(B):void q.ajax("/cf_endpoints/routes.cfm/media/groups/"+b+"/objects.json",{error:function(e){404==e.status?D(B):t.alert("An error occurred while attempting to retrieve the media data.")},success:function(t){var b,D,Y={},G="";for(C=0;C<ii.length;C++)if("function"==typeof A[ii[C]]){ti=ii[C];break}for(C=0;C<Zt.length;C++)if("function"==typeof document[Zt[C]]){Jt=Zt[C];break}switch(B.find("noscript").remove(),s=q(ni.replace("#{timestamp}",(new Date).getTime())),o=s.find(Bt),s.find(rt).toggleClass(Fe,m!=lt),s.find(ee).toggleClass(Fe,m!=ot),s.find(re).toggleClass(Fe,m==st),B.append(s),v=s.attr("id"),t.group_type){case ze:B.addClass("fsMediaPlaylistAudio");break;case qe:B.addClass("fsMediaPlaylistImage");break;case We:B.addClass("fsMediaPlaylistVideo")}if(Vt||(s.find(it).attr("aria-label","Play"),s.find(gt).attr("aria-label","Previous"),s.find(Ze).attr("aria-label","Next"),s.find($t).attr("aria-label","Mute"),s.find(bt).attr("aria-label","Quality"),s.find(Be).attr("aria-label","Description"),s.find(Re).attr("aria-label","Enter Fullscreen")),(a||!l()&&p(s))&&s.find(Re).addClass(Te).removeAttr("aria-label"),t.group_type==qe){for(C=0;C<t.objects.length;C++)Y={description:t.objects[C].object_description,image:t.objects[C].display_path,objectID:t.objects[C].object_id,thumb:t.objects[C].thumbnail_path,title:t.objects[C].object_title},k.push(Y);if(W&&k.length&&(N=Math.floor(Math.random()*k.length)),!isNaN(parseInt(n)))for(C=0;C<k.length;C++)if(k[C].objectID==n){N=C;break}if(i.run(o[0],{autoplay:H,dataSource:k,show:N,showCounter:!1,showImagenav:!1,showInfo:!1,thumbnails:!1,transition:"fade",transitionSpeed:600,extend:function(){var e=!1;this.bind("pause",function(){s.find(K).jPlayer("pause")}),this.bind("play",function(){s.find(K).jPlayer("play")}),this.bind("image",function(t){var i=q(t.imageTarget);0==t.index&&e&&!U&&(this.pause(),I(x),s.find(K).jPlayer("pause",0),s.find(it).removeClass(et),e=!1),t.index==k.length-1&&(e=!0),p(o)||(o.find(Le+" "+Ne+" img").css("cursor","pointer"),i.click(this.proxy(function(e){e.stopPropagation(),f()||this.openLightbox()}))),i.attr("alt",t.galleriaData.title),O("mediaPlayerImageDisplayed",t.galleriaData.title,i.attr("src"))}),this.bind("loadstart",function(e){var t=e.galleriaData,i=t.description&&t.description.length>0?t.description:"No description available",n=t.title&&t.title.length>0?t.title:"&nbsp;";s.find(Ot).text(e.index+1+" / "+k.length),s.find(Lt).html(n),s.find(de).html(i),p(s)&&(j.find(_e).html(n),j.find(ve).html(i))}),this.bind("lightbox_image",function(e){var t=q(".galleria-lightbox-title").text(),i=q(e.imageTarget);i.attr("alt",t),m!=st&&this.pause(),s.find(it).removeClass(et),Vt||s.find(it).attr("aria-label","Play"),O("mediaPlayerLightboxImageDisplayed",t,i.attr("src"))})}}),o.find(Le).css("bottom",0).css("left",0).css("right",0).css("top",0),t.song_path){D=t.song_path.split("."),G=D[D.length-1].split("?")[0];var X,Q={loop:!0,preload:m==ot?"metadata":"none",solution:"html,flash",supplied:G,swfPath:"/assets/jplayer",volume:1,ready:function(){var e=q(this),i={};"m4a"==G?i.m4a=t.song_path:i.mp3=t.song_path,e.jPlayer("setMedia",i),H&&e.jPlayer("play")}};X=q("<div>",{"class":V}),o.prepend(X),X.jPlayer(Q)}else s.find($t).addClass(Fe);H&&(s.find(rt).addClass(Fe),s.find(it).addClass(et),Vt||s.find(it).attr("aria-label","Pause"),m!=st&&s.find(ie).removeClass(Fe),u(x,!0))}else if(t.group_type==ze||t.group_type==We){var J,Z=[],te=H&&t.group_type==We;if(_==ut&&t.objects.length){var ne=t.objects.length>N?N:0;L(e,t.group_type==ze?t.objects[ne].thumbnail_path:t.objects[ne].display_path)}else h(e);for(C=0;C<t.objects.length;C++)Y={desc:t.objects[C].object_description,displayPath:t.objects[C].display_path,objectID:t.objects[C].object_id,title:t.objects[C].object_title,video1080:"",video360:"",video480:"",video720:""},t.group_type==ze?(D=t.objects[C].song_path.split("."),b=D[D.length-1].split("?")[0],"m4a"==b?(G.indexOf("m4a")==-1&&(G.length&&(G+=","),G+="m4a"),Y.m4a=t.objects[C].song_path):(G.indexOf("mp3")==-1&&(G.length&&(G+=","),G+="mp3"),Y.mp3=t.objects[C].song_path),_==ht&&(Y.poster=t.objects[C].thumbnail_path)):(D=t.objects[C].normal_video_path.split("."),b=D[D.length-1].split("?")[0],_==ht&&(Y.poster=t.objects[C].display_path),t.objects[C].mobile_video_path&&t.objects[C].mobile_video_path.length&&(Y.video360=t.objects[C].mobile_video_path),t.objects[C].normal_video_path&&t.objects[C].normal_video_path.length&&(Y.video480=t.objects[C].normal_video_path),t.objects[C].hd_video_path&&t.objects[C].hd_video_path.length&&(Y.video720=t.objects[C].hd_video_path),t.objects[C].fullhd_video_path&&t.objects[C].fullhd_video_path.length&&(Y.video1080=t.objects[C].fullhd_video_path),"flv"==b?G.indexOf("flv")==-1&&(G.length&&(G+=","),G+="flv"):G.indexOf("m4v")==-1&&(G.length&&(G+=","),G+="m4v")),Z.push(Y);if(W&&Z.length&&(N=Math.floor(Math.random()*Z.length)),!isNaN(parseInt(n)))for(C=0;C<Z.length;C++)if(Z[C].objectID==n){N=C;break}Xt[v]={index:N,mediaType:t.group_type,playing:!1,playlist:Z,quality:c||ei.getItem(He)||"1080p"},te&&(J=s.find($t),J.addClass(zt),Vt||J.attr("aria-label","Unmute")),o.jPlayer({muted:te,preload:m==ot?"metadata":"none",solution:"html,flash",supplied:G,swfPath:"/assets/jplayer",volume:1,size:{height:"100%",width:"100%"},ended:function(){y(x);var e=Xt[v].index;e>0||U?o.jPlayer("play"):(_==ut&&B.find(ft).removeClass(Fe),I(x))},error:function(e){e.jPlayer.error.type==q.jPlayer.error.NO_SOLUTION&&(s.addClass(Fe),B.append('<div class="fsMediaSetupError"><h3>Media Error</h3><p>No solution was found for playing this media. You will need to upgrade your browser to one that is compatible with HTML 5 media and supports H.264 video and MP3 audio or you will need to <a href="https://get.adobe.com/flashplayer/" target="_blank">install the latest version of Adobe Flash player </a>.</p></div>'))},loadedmetadata:function(e){F(x,e)},pause:function(e){var i,n=e.jPlayer.status;Xt[v].playing=!1,e.jPlayer.status.ended&&Xt[v].index!=Xt[v].playlist.length-1||(s.find(it).removeClass(et),Vt||s.find(it).attr("aria-label","Play"),e.jPlayer.status.ended||(i=t.group_type==We?"mediaPlayerVideoPaused":"mediaPlayerAudioPaused",O(i,n.media.title,n.src,{currentTime:n.currentTime})))},play:function(i){var n,r=i.jPlayer.status;Xt[v].playing=!0,s.find(it).addClass(et),t.group_type==We?(h(e),n="mediaPlayerVideoPlayed"):n="mediaPlayerAudioPlayed",O(n,r.media.title,r.src,{currentTime:r.currentTime})},progress:function(e){var t,i,n=0;e.jPlayer.html.active?(i=o.find("audio, video")[0].buffered,t=i.length>0?i.end(i.length-1):0,n=Math.round(t/e.jPlayer.status.duration*100)):n=Math.round(e.jPlayer.status.seekPercent),s.find(vt).css("width",n+"%")},ready:function(){Xt[v].index=N,g(x),H?(o.jPlayer("play",r),u(x,!0),s.find(rt).addClass(Fe),m!=st&&s.find(ie).removeClass(Fe)):o.jPlayer("pause",r)},timeupdate:function(e){F(x,e)}})}s.on("click",it,function(e){e.stopPropagation(),R(x)}),s.on("click",rt,function(){R(x),q(this).addClass(Fe),s.find(ee).removeClass(Fe)}),s.on("click",ie+","+Bt,function(){m!=st&&(Kt++,1==Kt?$=setTimeout(function(){R(x),Kt=0},250):(Kt=0,clearTimeout($),s.find(Re).hasClass(Te)||P(x)))}),s.on("click",gt,function(e){e.stopPropagation(),w(x)}),s.on("click",Ze,function(e){e.stopPropagation(),y(x)}),s.on("click",wt+" div",function(e){e.stopPropagation(),S(x,q(this).data("resolution"))}),s.on("click",le+","+Be,function(e){e.stopPropagation(),M(x)}),s.on("click",$t,function(e){var t=q(this);e.stopPropagation(),t.hasClass(zt)?(t.removeClass(zt),Vt||t.attr("aria-label","Mute"),T(x,!1)):(t.addClass(zt),Vt||t.attr("aria-label","Unmute"),T(x,!0))}),s.on("click mousemove",function(){clearTimeout(z),I(x),z=setTimeout(function(){u(x)},3e3)}),s.on("mouseleave",function(){u(x)}),s.on("click",bt,function(e){var t=s.find(ie),i=s.find(wt);e.stopPropagation(),t.addClass(Fe),i.removeClass(Fe),i.height(.5625*i.width())}),s.on("click",Dt,function(e){var t=q(this),i=e.pageX-t.offset().left,n=i/t.width()*100;e.stopPropagation(),o.jPlayer("playHead",n)}),s.on("mouseleave",Dt,function(){var e=q(this);e.removeAttr("aria-label"),e.find(St+","+xt).width(0),s.find(At).css("opacity",0)}),s.on("mousemove",Dt,function(e){var t,i,n=q(this),r=n.find(St),a=n.find(xt),l=n.find(Pt),c=o.data("jPlayer").status.duration,u={left:0,opacity:90,width:80},h=e.pageX-n.offset().left;if(h>=l.width()?(r.width(0),a.width(h)):(r.width(h),a.width(0)),c>0){switch(t=s.find(At),i=d(Math.round(c*(h/n.width()))),i.length){case 4:u.width=50;break;case 5:u.width=60;break;case 7:u.width=70}u.left=h-u.width/2+parseInt(t.css("padding-left")),t.css(u).html(i)}}),s.on("click",Re,function(e){e.stopPropagation(),q(this).hasClass(Te)||P(x)}),E(x,!0)}})}function l(){return ti.length}function d(e){var t,i,n,r="";return t=e>3600?e%3600:0,i=parseInt(e/60)-(t>0?60*t:0),n=e-(t>0?60*t:0)-60*i,t>0&&(r+=t+":"+(i<10?"0":"")),r+=i+":"+(n<10?"0":"")+n}function c(e){return Xt[q(e).find(dt).attr("id")]}function u(e,t){var i,n,r,a=q(e).find(dt),o=!0;a.find(Oe).length?(n=a.find(Bt),o=n.data("galleria")._playing):(r=c(e),o=!!r&&r.playing),(t||o)&&(i=a.find(ie),a.addClass(Ft),"opacity"in document.body.style?i.css("opacity",0):i.addClass(Fe))}function h(e){q(e).find(ft).addClass(Fe)}function f(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}function p(e){return e.closest(j).length>0}function g(e,t){var i=q(e),n=i.find(Bt),r=i.find(dt),a=i.find(wt),o=i.find(bt),s=r.attr("id"),l=Xt[s].playlist,d=Xt[s].index,c=Xt[s].quality,u=l[d].video360.split("."),h=u[u.length-1].split("?")[0],f="1080p,720p,480p,360p",p=parseInt(c),g=Xt[s].playing,m="";if(a.empty().removeClass("fsMediaResolutionFullHD fsMediaResolutionHD fsMediaResolutionStandard"),l[d].video1080.length?a.addClass("fsMediaResolutionFullHD"):l[d].video720.length?a.addClass("fsMediaResolutionHD"):a.addClass("fsMediaResolutionStandard"),m+=l[d].video1080.length>0?'<div data-resolution="1080p"></div>':"",m+=l[d].video720.length>0?'<div data-resolution="720p"></div>':"",m+='<div data-resolution="480p"></div>',m+='<div data-resolution="360p"></div>',m+='<div class="fsMediaResolutionClose">X</div>',a.append(m),"flv"==h)l[d].flv=l[d].video360;else if("mp4"==h)for(var v=0;v<4;v++){var y=f.split(",")[v],b=parseInt(y);if(l[d]["video"+b]&&b<=p){c=y,l[d].m4v=l[d]["video"+b];break}}o.html(c),n.jPlayer("setMedia",l[d]),n.find("video, object").removeAttr("title"),g?n.jPlayer("play",t):n.jPlayer("pause",t),N(i)}function m(e,i){var n=q(e),r=n.closest(ke),a=r.children(Ce),o=r.attr("id").split("_").pop(),s={element_id:o,media_category_id:"",media_channel_id:"",media_group_id:""},l="",d=q.extend({},s);n.hasClass("fsMediaFolderLink")?(d[n.data("type")]=n.data("id"),Yt.updateQueryStringValueAndHistory(d),l=n.attr("href")):n.hasClass("fsMediaBackLink")?(l=n.attr("href"),n.data("id")&&(d[n.data("type")]=n.data("id")),Yt.updateQueryStringValueAndHistory(d)):l=i?"?"+q.param(i):t.location.search,Qt.addState(o,q.extend(s,Yt.getQueryStringValues(l))),_(a),q.ajax({cache:!1,url:"/fs/elements/"+o+l+(l?"&":"?")+"is_draft="+r.hasClass("fsStateEditable")}).done(function(e){a.html(q(e).find(Ce).html());var t=a.find("a.fsMediaBackLink"),i=Qt.getBackLinkState(o);t.attr("href",i?"?"+q.param(i):""),i&&(i.media_channel_id?t.data("type","media_channel_id").data("id",i.media_channel_id):i.media_category_id&&t.data("type","media_category_id").data("id",i.media_category_id)),C(r)}).fail(function(){r.children(".fsLoadingDotsOverlay").remove(),t.alert("There was an error with the element. Please try again.")})}function v(e,i){var n,r,a,o,s=505;navigator.userAgent.indexOf("Chrome")!=-1&&navigator.userAgent.indexOf("Mac OS")!=-1&&(s=555),n=s+i/1,r="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=805,height="+n,e.indexOf("grp=")!=-1&&(e=e.replace("grp=","g=")),a="/cf_media/index.cfm?"+e,o=t.open(a,"popupmedia",r),!o||o.closed||"undefined"==typeof o.closed?t.alert("The media link popup didn't open! Check your popup blocker settings and try again."):o.focus()}function y(e){var t=q(e),i=t.find(dt),n=t.find(Bt);if(i.find(Oe).length)n.data("galleria").pause().next(),i.find(it).removeClass(et);else{var r=i.attr("id"),a=Xt[r].mediaType,o=Xt[r].playing,s=Xt[r].playlist,l=parseInt(t.find(Q).data("posterscaling")),d=Xt[r].index;d<s.length-1?d++:d=0,l!=ut||a!=We||o||L(e,s[d].displayPath),Xt[r].index=d,g(t)}}function b(e,t,i,n,a,o,l,d,c){var u="";k(),e&&(t==r&&(t=0),i==r&&(i=!1),o==r&&(o=!1),a||(a=""),j.removeClass(),c&&j.addClass(c),j.toggleClass(Ee,l),l&&(u+='<div id="'+be+'"></div>'),u+='<div id="'+fe+'"><div class="'+Ae+'"><div class="'+X+'" data-autoplay="'+i+'" data-aspectratio="0.5625" data-playercontrols="1" data-playlistid="'+e+'" data-posterscaling="1" data-videoresolution="'+a+'"></div></div></div>',j.toggleClass(we,d),d&&(u+='<div id="'+me+'"></div>'),B.html(u),U.showModal(),s(B,t,n,o))}function _(e){e.prepend('<div class="fsLoadingDotsOverlay" style="height:'+e.height()+'px"><div class="fsLoadingDots"></div></div>')}function w(e){var t=q(e),i=t.find(dt),n=t.find(Bt);if(i.find(Oe).length)n.data("galleria").pause().prev(),i.find(it).removeClass(et);else{var r=i.attr("id"),a=Xt[r].mediaType,o=Xt[r].playing,s=Xt[r].playlist,l=parseInt(t.find(Q).data("posterscaling")),d=Xt[r].index;d>0?d--:d=s.length-1,l!=ut||a!=We||o||L(e,s[d].displayPath),Xt[r].index=d,g(t)}}function E(e,t){var i,n=q(e),r=n.find(dt);r.length&&(r.closest(Q).height(o(n)),t&&a(n),i=n.find(Bt),i.find(Oe).length&&i.data("galleria").resize())}function T(e,t){var i=q(e),n=i.find(Bt);n.jPlayer("mute",t),n.find(K).jPlayer("mute",t)}function S(e,t){var i=q(e),n=i.find(Bt),a=i.find(dt),o=a.find(ie);a.find(wt).addClass(Fe),o.removeClass(Fe),t!=r&&(Xt[a.attr("id")].quality=t,ei.setItem(He,t),g(i,n.data("jPlayer").status.currentTime))}function C(e){var t,i;e?(i=q(e),t=i.find($e)):(t=q($e),i=q(ke)),t.each(function(){var e=q(this),t=e.data("mediatype"),i=e.data("playlistid");t!=qe&&e.on("click",".fsMediaGalleryObject[data-objectid]",function(t){var n=q(this),r=e.data("videoresolution"),a=e.data("dialog-show-description"),o=e.data("dialog-show-title");return b(i,n.data("objectid"),!0,0,r,Gt,o,a,"fsMediaGalleryDialog"),t.preventDefault(),!1})}),i.find(".fsMediaFolderLink, .fsMediaBackLink").on("click",function(e){if(q(this).attr("href").indexOf("history.back")==-1)return m(this),e.preventDefault(),!1})}function x(){Qt.isStatesEmpty()&&G.on("popstate",function(e){q(ke).each(function(){if(e.originalEvent.state){var t=q(this),i=t.attr("id").split("_").pop(),n=e.originalEvent.state[i];Qt.didChangeState(i)&&m(t,n)}else m(this)})})}function k(){j||(j=q("<dialog>",{id:ye}),B=q("<div>",{id:ge}),H=q("<button>",{"aria-label":"close media player",id:he}),H.click(function(){B.empty(),U.close()}),W.append(j.append(B).append(H)),U=j[0],e.util.ensureDialog(U))}function A(e){q(Q+":visible",e).each(function(){var e=q(this);e.hasClass(ae)||e.closest(Ie).each(function(){s(this)})})}function I(e){var t=q(e).find(dt),i=t.find(ie);t.removeClass(Ft),"opacity"in document.body.style?i.css("opacity",.9):i.removeClass(Fe)}function D(e){q(e).append('<div class="fsAdminWarning">Select a media playlist</div>')}function M(e){var t,i,n=q(e),r=n.find(ie),a=n.find(ue),o=n.find(Bt),s="",l="";a.is(":visible")?(r.removeClass(Fe),a.addClass(Fe)):(r.addClass(Fe),a.removeClass(Fe),t=o.data("galleria"),i=o.data("jPlayer"),t?(l=t.getData().title,s=q(t.getActiveImage()).attr("src")):i&&(l=i.status.media.title,s=i.status.src),O("mediaPlayerDescriptionDisplayed",l,s))}function P(e){var t,i,n,r,a,o=q(e),s=o.find(Bt),d=o.find(dt),c=o.find(Q)[0];f()?document[Jt]():l()?c[ti]():(s.find(Oe).length?(t=s.data("galleria").getIndex(),r=s.data("galleria")._playing,a=s.data("galleria").getData(t).objectID):(t=Xt[d.attr("id")].index,i=Xt[d.attr("id")].quality,n=s.data("jPlayer").status.currentTime,r=Xt[d.attr("id")].playing,a=Xt[d.attr("id")].playlist[t].objectID),b(o.find(Q).data("playlistid"),a,r,n,i,!0))}function R(e){var t=q(e),i=t.find(Bt),n=t.find(it);if(n.hasClass(et))n.removeClass(et),Vt||n.attr("aria-label","Play"),n.closest(dt).find(Oe).length?i.data("galleria").pause():i.jPlayer("pause");else{if(t.width()<300&&!p(t)&&!t.find(Oe).length){var r=c(t);if(r.mediaType==We){var a=i.data("jPlayer").status.currentTime,o=r.quality,s=r.playlist[r.index].objectID,l=t.find(Q).data("playlistid");return void b(l,s,!0,a,o,Gt)}}n.addClass(et),Vt||n.attr("aria-label","Pause"),n.closest(dt).find(Oe).length?i.data("galleria").play(5e3):i.jPlayer("play")}}function O(e,t,i,n){var r={event:e,mediaTitle:t,url:i};n&&q.extend(r,n),qt.push(r)}function N(e){var t=q(e).find(dt),i=t.attr("id"),n=Xt[i].playlist,r=Xt[i].index,a=q.trim(n[r].desc).length?n[r].desc:"No description available";t.find(Lt).text(n[r].title),t.find(de).html(a),t.find("img").attr("alt",a),p(t)&&(j.find(_e).text(n[r].title),j.find(ve).html(n[r].desc))}function L(e,t){q(e).find(ft).removeClass(Fe).css("background-image",'url("'+t+'")')}function F(e,t){var i=q(e),n=d(Math.round(t.jPlayer.status.currentTime))+" / "+d(Math.round(t.jPlayer.status.duration));i.find(Ot).html(n),i.find(Pt).css("width",Math.round(t.jPlayer.status.currentPercentAbsolute)+"%")}var j,B,H,U,$,z,q=e.$,W=q(document.body),Y=q(document),G=q(t),V="fsMediaBackgroundAudio",K="."+V,X="fsMediaContainer",Q="."+X,J="fsMediaControl",Z="fsMediaControlsBottom",ee="."+Z,te="fsMediaControlsContainer",ie="."+te,ne="fsMediaControlsTop",re="."+ne,ae="fsMediaCustomPlayer",oe="fsMediaDescription",se="fsMediaDescriptionClose",le="."+se,de="."+oe,ce="fsMediaDescriptionContainer",ue="."+ce,he="fsMediaPlayerDialogCloseButton",fe="fsMediaPlayerDialogContainer",pe="#"+fe,ge="fsMediaPlayerDialogContent",me="fsMediaPlayerDialogDescription",ve="#"+me,ye="fsMediaPlayerDialog",be="fsMediaPlayerDialogTitle",_e="#"+be,we="fsMediaPlayerDialogWithDescription",Ee="fsMediaPlayerDialogWithTitle",Te="fsDisabled",Se="fsElementContent",Ce="."+Se,xe="fsGallery",ke="."+xe,Ae="fsMedia",Ie="."+Ae,De="media",Me="fsMediaExitFullscreen",Pe="fsMediaFullscreen",Re="."+Pe,Oe=".galleria-container",Ne=".galleria-image",Le=".galleria-stage",Fe="fsStateHidden",je="fsMediaInfo",Be="."+je,He="mediaPlayerQuality",Ue="fsMediaGallery",$e="."+Ue,ze=2,qe=1,We=3,Ye=200,Ge=260,Ve=315,Ke=290,Xe=375,Qe=115,Je="fsMediaNext",Ze="."+Je,et="fsMediaPause",tt="fsMediaPlay",it="."+tt,nt="fsMediaPlayOverlay",rt="."+nt,at="fsMediaPlayer",ot=1,st=2,lt=0,dt="."+at,ct="fsMediaPoster",ut=1,ht=0,ft="."+ct,pt="fsMediaPrevious",gt="."+pt,mt="fsMediaProgressBar",vt="."+mt,yt="fsMediaQuality",bt="."+yt,_t="fsMediaQualityMenu",wt="."+_t,Et="fsMediaSeekBar",Tt="fsMediaSeekBarBack",St="."+Tt,Ct="fsMediaSeekBarForward",xt="."+Ct,kt="fsMediaSeekPreview",At="."+kt,It="fsMediaStatusBar",Dt="."+It,Mt="fsMediaTimeBar",Pt="."+Mt,Rt="fsMediaTimeLabel",Ot="."+Rt,Nt="fsMediaTitle",Lt="."+Nt,Ft="fsMediaTransparentCursor",jt="fsMediaView",Bt="."+jt,Ht="fsMediaViewContainer",Ut="fsMediaVolume",$t="."+Ut,zt="fsMediaVolumeMuted",qt=t.dataLayer||[],Wt=e.events,Yt=e.getInternalNS("elements.utils"),Gt=Yt.inDraftMode(),Vt=!1,Kt=0,Xt={},Qt=new Yt.ElementHistory,Jt="",Zt=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"],ei=e.localStorage,ti="",ii=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"],ni='<div id="fsMediaPlayer-#{timestamp}" class="'+at+'"><div class="'+Ht+'"><div class="'+jt+'">Loading media...</div><div class="fsCroppedImage '+ct+'"></div></div><div class="'+ne+" "+te+'"><div class="'+Nt+'">&nbsp;</div></div><div class="'+Z+" "+te+" "+Fe+'"><div class="'+kt+'"></div><div class="'+It+'"><div class="'+Et+'"></div><div class="'+mt+'"></div><div class="'+Ct+'"></div><div class="'+Mt+'"></div><div class="'+Tt+'"></div></div><div class="fsMediaControls"><button class="'+tt+" "+J+'"></button><button class="'+pt+" "+J+'"></button><button class="'+Je+" "+J+'"></button><button class="'+Ut+" "+J+'"></button><button class="'+yt+" "+J+'"><span></span></button><button class="'+je+" "+J+'"></button><button class="'+Pe+" "+J+'"></button><div class="'+Rt+'"></div></div></div><div class="'+ce+" "+Fe+'"><div class="fsMediaDescriptionTransparentLayer"></div><div class="'+oe+'"></div><div class="'+se+'">X</div></div><div class="'+_t+" "+Fe+'"></div><button class="'+nt+'" aria-label="View"></button></div>';
G.resize(function(){q(Ie).each(function(){E(this,!0)})}),Y.on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){var e=q(Re),t=q(dt+" "+Le+" "+Ne+" img"),i=f(),n=(i?"Exit":"Enter")+" Fullscreen",r=i?"default":"pointer";e.toggleClass(Me,i),Vt||e.attr("aria-label",n),t.css("cursor",r)}),Y.on("fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError",function(e){var t,i,n,r,a,o=q(e.originalEvent.srcElement),s=o.find(Bt),l=0;o.find(Oe).length?(t=s.data("galleria").getIndex(),r=s.data("galleria").getData(t).objectID,n=s.data("galleria")._playing,o.find(it).removeClass(et),s.data("galleria").pause()):(a=o.find(dt).attr("id"),t=Xt[a].index,i=Xt[a].quality,l=s.data("jPlayer").status.currentTime,n=Xt[a].playing,r=Xt[a].playlist[t].objectID,s.jPlayer("pause")),b(o.data("playlistid"),r,n,l,i,!0)}),Wt.onElementAdded(De,function(e){var t=e.find(Q);t.length&&!t.hasClass(ae)&&s(e)}),Wt.onElementHidden(Wt.ALL_CONTAINERS_TYPE,function(e){e.find(Bt).each(function(){var e=q(this).data("galleria");e&&e.destroy()}),e.find(dt).remove(),e.find(Q).data("setup-started",!1)}),Wt.onElementMoved(De,function(){G.resize()}),Wt.onElementShown(Wt.ALL_CONTAINERS_TYPE,A),Wt.onElementUpdated(De,function(e){var t=e.find(Q),i=e.find(dt);t.length&&!t.hasClass(ae)?(i.off("click mouseleave mousemove"),s(e)):(C(e),1==q(ke).length&&x())}),W.on("mediaPlayer.loadPlaylist",function(e,t){var i=q("#"+t.player).closest(".fsElement"),n=i.find(Q),r=i.find(dt);n.data("playlistid",t.playlist),r.off("click mouseleave mousemove"),s(i)}),n.option({resizeDuration:200,wrapAround:!0}),q(function(){try{document.createEvent("TouchEvent"),Vt=!0}catch(e){Vt=!1}W.on("click","a[data-media-playlist-id], a[href*=popMedia\\(]",function(){var e,t,i=q(this),n=i.data("media-playlist-id"),r=/popMedia\(['"]+((g|cat|chnl)=(\d+))['"]+\)/,a=!!i.data("media-dialog-description"),o=!!i.data("media-dialog-title");if(!n){if(t=r.exec(i.prop("href")),"g"!=t[2])return e=i.closest("article"),_(e),q.ajax("/cf_media/popheight.cfm").done(function(e){v(t[1],e)}).fail(function(){v(t[1],80)}).always(function(){e.children(".fsLoadingDotsOverlay").remove()}),!1;n=t[3]}return b(n,null,!0,0,null,Gt,o,a,"fsMediaLinkDialog"),!1}),A(),C(),q(ke).length&&x()})}(FS,window,Galleria,lightbox),function(e){"use strict";function t(e){var t=s.getElementID(e),d=s.getQueryStringValues();e.on("click",o.elementContent+">"+o.loadMoreButton,function(){var t=i(this),r=e.find(o.elementContent),d={},c=t.data("start-row");c&&(d.start_row=c),s.loadingOverlay(r),s.loadElementData(e,d).done(function(s){var d=i(s),c=d.find(l).children(),u=d.find(o.loadMoreButton);r.siblings(o.loadingDotsOverlay).remove(),r.find(l).append(c),t.replaceWith(u),e.addClass(n.loadMoreClicked),t.remove(),a.triggerElementMoreLoaded(e,c)})}).on("click",".fsAlertsIcon",function(){var e=i(this);return r.showListSubscribeDialog(t,e.data("lists"),e),!1}),d.showListSubscribeDialog&&r.showListSubscribeDialog(t,e.find(".fsAlertsIcon").data("lists"),e)}var i=e.$,n=e.getInternalNS("elements.constants.classes"),r=e.getInternalNS("dialogs"),a=e.events,o=e.getInternalNS("elements.constants.selectors"),s=e.getInternalNS("elements.utils"),l="ul.fsListLevel1",d="Messages";a.onElementAdded(d,t),a.onElementUpdated(d,t),a.onElementDialogShown(d,t),i(".fs"+d+"Element").each(function(){var e=i(this);t(e)})}(FS,window),function(e,t){"use strict";function i(e){var i=d.getElementID(e),a=e.data("trigger-element-ids");e.on("click",".fsAlertsIcon",function(e){e.preventDefault(),t.open("/cf_directory/cp.cfm?news=0","","width=600,height=700")}).on("click",".fsRSSIcon",function(e){e.preventDefault(),t.open("/cf_news/rss.cfm","","width=600,height=700")}).on("click",".fsCommentCount",function(){var e=n(this),t=e.siblings(".fsCommentList");t.toggleClass(h),e.toggleClass(p,t.hasClass(h))}).on("click",".fsLoadMoreButton",function(){var t=n(this),a=e.find(c),s={},l=t.data("start-row");l&&(s.start_row=l),r.extend(s,m[i].filters),d.loadingOverlay(a),d.loadElementData(e,s).done(function(i){var r=n(i),s=r.find(".fsListItems").children(),l=r.find(".fsLoadMoreButton");a.siblings(".fsLoadingDotsOverlay").remove(),a.find(".fsListItems").append(s),t.replaceWith(l),e.addClass("fsLoadMoreClicked"),o.triggerElementMoreLoaded(e,s)})}).on("click",".fsPostComment",function(){var e=n(this),t=e.closest(".fsComments").find(".fsCommentCount"),i=e.siblings(".fsMyComment"),r=e.closest(".fsCommentForm"),a=n.trim(i.val()),o=parseInt(e.closest(".fsComments").data("newsid"));isNaN(o)||o<=0?alert("Sorry, we are unable to determine what news post you are commenting on."):0==a.length?(alert("Please type a comment before submitting!"),i.val(""),i.focus()):(e.prop("disabled",!0),n.ajax({data:{comment:a},dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/news/posts/"+o+".json",error:function(t,i,n){alert(n),e.prop("disabled",!1)},success:function(n){if(n.success)if(n.warnings.length>0)r.after('<div class="fsCommentWarning">'+n.warnings+"</div>");else{var o='<div class="fsComment"><div><span class="fsName">';o+=r.find(".fsName").text(),o+="</span></div><div>"+a+"</div></div>",r.after(o)}else alert(n.warnings);var s=r.siblings(".fsComment").length;t.text(s+" Comment"+(1!=s?"s":"")),i.val(""),e.prop("disabled",!1)}}))}),a&&s.onFilter(i,a,function(t,n){var a=m[i];n.categoryIDs&&(a.filters.category_ids=n.categoryIDs.length?n.categoryIDs:void 0),r.has(n,"keywords")&&(a.filters.keywords=n.keywords.length?n.keywords:void 0),r.has(n,"rangeStart")&&(a.filters.start_date=n.rangeStart?n.rangeStart.format(f):void 0),r.has(n,"rangeEnd")&&(a.filters.end_date=n.rangeEnd?n.rangeEnd.format(f):void 0),d.loadingOverlay(e.find(c)),d.fetchElementHTML(i,a.filters).done(function(){s.triggerUpdated(i,a.filters,t)})}),n(t).resize()}var n=e.$,r=e._,a=e.getInternalNS("elements.constants.classes"),o=e.events,s=e.getInternalNS("elements.linkedEvents"),l=e.getInternalNS("elements.constants.selectors"),d=e.getInternalNS("elements.utils"),c=l.elementContent,u="News",h=a.stateExpanded,f="YYYY-MM-DD",p=a.stateSelected,g=n(document.body),m={};o.onElementAdded(u,i),o.onElementUpdated(u,i),o.onElementDialogShown(u,i),n(".fs"+u).each(function(){var e=n(this);m[d.getElementID(e)]={filters:{}},i(e)}),g.on("click",'.fsNewsPostLink[href="#"]',function(e){var t=n(this),i=t.closest("article"),r=d.getElement(t),a=i.data("news-id");return e.preventDefault(),r.data("linked-element-ids")?(d.populateLinkedElements(r,{news_id:a}),d.updateURLParams({virtualParam:i.data("post-lookup")})):d.showElementPopupDialog(r,{news_id:a,page_id:d.getPageID(),show_post:!0},u,t),!1})}(FS,window),function(e){"use strict";function t(e){e.hasClass("fsCategoryFilter")?i(e):e.hasClass("fsSearch")&&r.setupSearch(e)}function i(e){var t=e.data("linked-element-ids");t&&(s.setupSelectAllButtons(e,".fsElementContent"),e.on("click",".fsStyleUpdateButton",function(){o.triggerFilter(s.getElementID(e),{categoryIDs:e.find("input:checked").map(function(){return this.value}).get()})}))}var n=e.$,r=e.getInternalNS("elements.element_tools.utils"),a=e.getNS("events"),o=e.getInternalNS("elements.linkedEvents"),s=e.getInternalNS("elements.utils"),l="NewsTools";a.onElementAdded(l,t),a.onElementUpdated(l,t),n(".fs"+l).each(function(){t(n(this))})}(FS),function(e){"use strict";function t(){var e=!!window.location.hash&&window.location.hash.match(/^#fs-panel-([0-9_]+)$/);return!!e&&e[1]}function i(e){var i=e.find("> "+p+" > .fsPanel.fsStateOpen:first");if(e.children(p).children(".fsTabsNav").children(T).removeClass(m),i.length)a(S+d(i)).addClass(m);else if(e.hasClass(C)&&e.find("ul.fsTabsNav:not(:hidden)").length){var n=t(),r=e.find("> "+p+" > #fsEl_"+n+".fsPanel");if(n&&r.addClass(v).length)a(S+n).addClass(m),o.triggerElementShown(r);else{var s=e.find("> "+p+" > .fsPanel:first");s.addClass(v),a(S+d(s)).addClass(m),o.triggerElementShown(s)}}}function n(e){var n,m=a(e),b=m.hasClass(C),_=m.data("one-panel");if(m.on("click","> "+p+" > .fsTabsNav > "+T+" > a",function(e){e.preventDefault();var t=a(this),n=c(t.parent()),r=l(n),s=m.find(y+":first");m.children(p).children(".fsPanel").removeClass(v),r.addClass(v),i(m),o.triggerElementHidden(s),o.triggerElementShown(r)}).on("click","> "+p+" > .fsPanel > header",function(){var e=a(this),t=e.parent();if(_){var n=m.find(y);if(n.length&&(r(n),d(n)==d(t)))return!1}return r(t),i(m),!1}).on("click","> "+p+" > .fsAddPanel, .fsAddPanelGroupTab:first",function(){var e=a(this),t=e.parents(w).first(),n=t.hasClass(C),r=d(t),o=t.children(p).children(".fsPanel").last(),l=t.children(p).children(".fsTabsNav").children(T).last(),c=l.clone(),m=e.html();e.prop(f,!0).html(g),u(r,o.length>0?d(o):0,!0).always(function(){e.prop(f,!1).html(m)}).done(function(r){var u=a(r).addClass(v),f=d(u);n?(t.children(p).children(".fsPanel").removeClass(v),u.insertAfter(o)):e.before(u),c.attr("id","fsTab-"+f),c.find("a").attr("href","#fs-panel-"+d(u)).html(u.data("title")),c.insertAfter(l),u.find(p).sortable(s.SORTABLE_CONFIG),h("element:create",f),n&&i(t)})}),b)i(m);else{var E=t();if(E){var S=m.find("#fsEl_"+E);S.find(p).is(":hidden")&&S.find("> header").click()}n=m.find(y),n.length&&o.triggerElementShown(n)}s.inComposeMode()&&s.makePanelGroupTabsSortable(m)}function r(e){e.find("> "+p).slideToggle({always:function(){var e=a(this);e.is(":hidden")&&e.css("display","")}}),e.toggleClass(v),o["triggerElement"+(e.hasClass(v)?"Shown":"Hidden")](e)}var a=e.$,o=e.events,s=e.getInternalNS("elements.utils"),l=s.getElementByID,d=s.getElementID,c=s.getTabID,u=s.createElement,h=s.notifyAdminInterface,f="disabled",p=".fsElementContent",g='<div class="fsLoadingDots"></div>',m="fsStateSelected",v="fsStateOpen",y="> "+p+" > .fsPanel."+v,b="panel",_="panelgroup",w=".fsPanelGroup",E="fsTabsNavItem",T="."+E,S="#fsTab-",C="fsTabs";o.onElementAdded(_,n),o.onElementUpdated(_,n),o.onElementUpdated(b,function(e){0==e.siblings(".fsPanel."+v).length&&(e.addClass(v),o.triggerElementShown(e)),a(S+d(e)).find("a").html(e.data("title"))}),o.onElementMoved(b,function(e,t){var i=d(e),n=t.length?d(t):0,r=a(S+i);return!!r&&void(0==n?r.parent().prepend(r):a(S+n).after(r))}),o.onElementDeleted(b,function(e){a(S+d(e)).remove()}),o.onElementShown(b,function(e){var t=e.find(w);t.length&&t.each(function(){i(a(this))})}),a(window).resize(e._.debounce(function(){a(w).each(function(){i(a(this))})},250)),a(w).each(function(){n(a(this))})}(FS,window),function(e){"use strict";var t=e.$;t(".fsPersonalReports").on("click","a",function(){return e.util.popup("/cf_group/report.cfm?reportid="+t(this).data("report-id"),"personalReportsPopup",700,600),!1})}(FS),function(e){"use strict";function t(){var e=r(b);e.find(o.SORTABLE_SELECTOR).addBack(o.SORTABLE_SELECTOR).sortable(o.SORTABLE_CONFIG),o.makeSubelementsSortable(e,m+".fsStateEditable")}function i(e){var t=e.find(m+'[data-matched="true"]').first();e.find(m).each(function(){var e=r(this);e.toggleClass(y,o.inDraftMode()&&!e.is(t))})}function n(e){var n=r(e);n.find(".fsAddPanel").click(function(){var e=r(this),t=e.parents(b).first(),a=d(t),s=t.children(h).children(m).last(),l=e.html();e.prop(u,!0).html(f),c(a,s.length>0?d(s):0,!0).always(function(){e.prop(u,!1).html(l)}).done(function(t){var a=r(t).addClass(p);e.before(a),i(n),a.find(h).sortable(o.SORTABLE_CONFIG),o.notifyAdminInterface("element:create",d(a))})}),i(n),t()}var r=e.$,a=e.events,o=e.getInternalNS("elements.utils"),s=e.getInternalNS("elements.constants.classes"),l=e.getInternalNS("elements.constants.selectors"),d=o.getElementID,c=o.createElement,u="disabled",h=l.elementContent,f='<div class="fsLoadingDots"></div>',p=s.stateOpen,g="PersonalizationPanel",m=".fsPersonalizationPanelElement",v="Personalization",y="fsPersonalizationHiddenPanel",b=".fsPersonalizationElement.fsStateEditable";a.onElementAdded(v,n),a.onElementUpdated(v,n),a.onElementUpdated(g,function(e){i(e.parents(b)),t()}),a.onElementMoved(g,function(e){i(e.parents(b))}),r(b).each(function(){n(r(this))})}(FS,window),function(e){"use strict";function t(e){return{draft_page:g.inDraftMode(),element_id:g.getElementID(e),page_id:e.closest("body").data("pageid")}}function i(e,i,n){var a=e.closest(b).prev("article").data("post-id"),o=s("<div/>",{"class":d.loadingDots});e.append(o),s.get("/fs/post-manager/posts/"+a+"/comments",s.extend(t(i),{comments_date:n,is_popup:!!e.closest("dialog").length})).done(function(t){r(t,e)}).fail(function(){window.alert("There was an error retrieving the comments. Please try again.")}).always(function(){o.remove()})}function n(e,t){var i,n="";return null!==e.author_cf_id&&e.author_avatar_hash&&(n=m({avatar_hash:e.author_avatar_hash,cf_id:e.author_cf_id})),i=s(v({author:e.author,avatar:n,body:e.formatted_body,datetime:e.created_at,formattedDate:e.formatted_date,formattedTime:e.formatted_time})),t&&i.addClass("fsNewComment"),i}function r(e,t){var i=s();if(!t.find(".fsCommentForm").length){var r=s('<div class="fsCommentForm" />');if(!g.inDraftMode()){var a=s('<textarea class="fsMyComment fsStyleDefaultTextarea" placeholder="Comment..."/>\t\t\t\t\t<button class="fsPostComment fsStyleUpdateButton">Comment</button>'),o=g.getElement(t).attr("id").split("_").splice(1).join("_");s(S).length?r.append(a):t.closest(b).prev("article").data("authenticated-comments")||(r.append('<label for="fsPostElementMyCommentNameField'+o+'" class="fsFieldLabel fsMyCommentFieldName">Name</label>\t\t\t\t\t\t\t<input id="fsPostElementMyCommentNameField'+o+'" class="fsMyCommentName fsStyleDefaultField">\t\t\t\t\t\t\t<label for="fsPostElementMyCommentEmailField'+o+'" class="fsFieldLabel fsMyCommentFieldEmail">Email</label>\t\t\t\t\t\t\t<input id="fsPostElementMyCommentEmailField'+o+'" class="fsMyCommentEmail fsStyleDefaultField">'),r.append(a))}t.prepend(r)}l.each(e,function(e){i=i.add(n(e,!1))}),t.append(i),t.next(p.loadMoreButton).remove(),10==e.length&&t.after(y({commentsDate:e[e.length-1].created_at}))}function a(r){var a=g.getElementID(r),o=g.getQueryStringValues(),m=r.data("trigger-element-ids");r.on("click",p.elementContent+">"+p.loadMoreButton,function(){var t=s(this),i=r.find(p.elementContent),n=l.clone(f[g.getElementID(r)]),a=t.data("start-row");a&&(n.start_row=a),r.data("selected-board")&&(n.board=r.data("selected-board")),g.loadingOverlay(i),g.loadElementData(r,n).done(function(n){var a=s(n),o=a.find(".fsListItems").children(),l=a.find(".fsLoadMoreButton");i.siblings(p.loadingDotsOverlay).remove(),i.find(".fsListItems").append(o),t.replaceWith(l),r.addClass(d.loadMoreClicked),t.remove(),e.util.updateDynamicImages(o),u.triggerElementMoreLoaded(r,o)})}).on("click",".fsCommentCount",function(){var e=s(this),t=e.next(".fsCommentList");t.toggleClass(w),t.next(p.loadMoreButton).toggleClass(d.stateHidden),e.toggleClass(T,t.hasClass(w)),t.hasClass(w)&&!t.find("div.fsComment").length&&i(t,r)}).on("click",".fsPostComment",function(){var e=s(this),i=e.closest(b).prev("article"),a=e.parent(),o=a.find(".fsMyComment"),l=e.add(o),d=a.find(".fsMyCommentName").val(),c=a.find(".fsMyCommentEmail").val(),u=o.val();return i.data("authenticated-comments")||s(S).length||d.length&&c.length?u?(l.attr("disabled","disabled"),void s.when(g.getToken()).then(function(a){s.post("/fs/post-manager/posts/"+i.data("post-id")+"/comments.json",s.extend(t(r),{authenticity_token:a,author_email:c,author_name:d,body:u,is_popup:!!e.closest("dialog").length})).done(function(t){var i=e.closest(".fsCommentForm");t.pending_approval?i.next(".fsCommentPendingApproval").length||i.after(s("<p>",{"class":"fsCommentPendingApproval fsNotification",text:"Your comment is pending approval."})):i.after(n(t,!0)),o.val("")}).fail(function(e){var t="",i=e.responseJSON;i&&(i.message&&(t=". "+i.message),i.length&&(t=": "+i.join(". "))),window.alert("There was a problem posting your comment"+t+". Please try again.")}).always(function(){l.removeAttr("disabled")})})):void window.alert("Comment text is required."):void window.alert("Name and Email are required.")}).on("click",b+" "+p.loadMoreButton,function(){i(s(this).prev(".fsCommentList"),r,s(this).data("comments-date"))}).on("submit",".fsCommentLoginForm",function(){var e=s(this);return e.find('input[name="login_destination"]').length||(e.append(s("<input>",{name:"login_destination",type:"hidden",value:window.location.pathname})),e.append(s("<input>",{name:"failure_redirect_to_login",type:"hidden",value:!0}))),g.loginFormSubmitHandler.bind(this)()}).on("click",".fsPostLink[data-slug][data-opens-in=element]",function(){var e=s(this),t=e.closest("article").data("post-id");return g.populateLinkedElements(r,{element_id:g.getElementID(r),page_id:g.getPageID(),post_id:t}),g.updateURLParams({virtualParam:"/~board/"+e.data("slug")}),!1}).on("click",".fsRSSIcon",function(){var e=s(this);return c.showBoardAlertsDialog(a,e.data("boards"),"fsRSSFeed",e),!1}).on("click",".fsAlertsIcon",function(){var e=s(this);return c.showBoardAlertsDialog(a,e.data("boards"),C,e),!1}).on("click",".fsPostLink[data-opens-in=popup]",function(){var e=s(this),t=e.closest("article").data("post-id");return g.showElementPopupDialog(g.getElement(e),{is_popup:!0,post_id:t,show_post:!0},_+"Element",e),!1}),m&&h.onFilter(a,m,function(e,t){var i=r.data("board-id");f[a]=l.defaults({board_id:i,current_post_id:r.find("article").first().data("post-id"),end_date:t.rangeEnd?t.rangeEnd.format(E):null,issue_id:t.issue_id,keywords:t.keywords,post_category_id:t.post_category_id,preview:t.preview,start_date:t.rangeStart?t.rangeStart.format(E):null,tag_id:t.tag_id},f[a]),f[a]=l.omit(f[a],function(e){return!e}),g.loadingOverlay(r.find(p.elementContent)),g.fetchElementHTML(a,l.extend({navigate:t.navigate},f[a])).done(function(){h.triggerUpdated(a,null,e)}).fail(function(i){t.navigate&&404==i.status&&(r.find(".fsLoadingDotsOverlay").remove(),h.triggerUpdated(a,{navigationFailed:t.navigate},e))})}),o.showBoardAlertsDialog&&c.showBoardAlertsDialog(a,r.find(".fsAlertsIcon").data("boards"),C,r),g.adjustMediaAspectRatio(r),g.inDraftMode()&&s(".fsAlertsIcon").addClass("fsStateDisabled").prop("disabled",!0).attr("aria-label","This feature is not accessible in the admin view. To subscribe, please use the published view.")}function o(e){var t=g.getElementID(e);f[t]={},e.data("category-id")>0&&(f[t].post_category_id=e.data("category-id")),e.data("tag-ids")>0&&(f[t].tag_id=e.data("tag-ids")),e.data("issue-id")>0&&(f[t].issue_id=e.data("issue-id"))}var s=e.$,l=e._,d=e.getInternalNS("elements.constants.classes"),c=e.getInternalNS("dialogs"),u=e.events,h=e.getInternalNS("elements.linkedEvents"),f={},p=e.getInternalNS("elements.constants.selectors"),g=e.getInternalNS("elements.utils"),m=l.template('<img class="fsAvatar" src="/cf_social/serveAvatar.cfm?id=<%= cf_id%>&auth_code=<%= avatar_hash%>">'),v=l.template('<div class="fsCommentContainer fsStyleAutoclear">\t\t\t\t<div class="fsCommentDetails">\t\t\t\t\t<%= avatar%>\t\t\t\t\t<span class="fsName"><%= author%></span>\t\t\t\t\t<span class="fsSeparator">-</span>\t\t\t\t\t<span class="fsDateTime">\t\t\t\t\t\t<time class="fsDate" datetime="<%= datetime %>"><%= formattedDate%></time>\t\t\t\t\t\t<time class="fsTime" datetime="<%= datetime %>"><%= formattedTime%></time>\t\t\t\t\t</span>\t\t\t\t</div>\t\t\t\t<div class="fsComment"><%= body%></div>\t\t\t</div>'),y=l.template('<button class="fsLoadMoreButton" data-comments-date="<%= commentsDate%>">Load More</button>'),b=".fsComments",_="Post",w=d.stateExpanded,E="YYYY-MM-DD",T=d.stateSelected,S="#fsAccountBar",C="fsBoardSubscriptions";u.onElementAdded(_,a),u.onElementUpdated(_,a),u.onElementDialogShown(_,a),u.onElementUpdated(_,function(e){g.populateLinkedElements(e,{element_id:g.getElementID(e),page_id:g.getPageID(),post_id:e.find(p.elementContent+" > article").data("post-id")})}),s(".fs"+_+"Element").each(function(){var e=s(this);a(e),o(e)})}(FS,window),function(e){"use strict";function t(e){e.hasClass("fsCategoryFilter")||e.hasClass("fsTagFilter")?i(e):e.hasClass("fsSearch")?s.setupSearch(e):e.hasClass("fsNavigation")&&n(e)}function i(e){var t=c.getElementID(e);e.on("click",".fsCategoryLink",function(){var i=a(this),n=i.data("category-id"),o={element_id:t,post_category_id:n},s=c.getCurrentHistoryState();return s[t]&&s[t].post_category_id==n||(c.updateQueryStringValueAndHistory(o),r(e,o)),!1}),e.on("click",".fsTagLink",function(){var i=a(this),n=i.data("tag-id"),o={element_id:t,tag_id:n},s=c.getCurrentHistoryState();return s[t]&&s[t].tag_id==n||(c.updateQueryStringValueAndHistory(o),r(e,o)),!1}),a(window).off("popstate.element_"+t).on("popstate.element_"+t,function(i){var n=i.originalEvent.state;u.didChangeState(t)&&r(e,n?n[t]:null)})}function n(e){var t=c.getElementID(e);e.on("click",".fsPreviousButton",function(){e.find(".fsNotification").remove(),d.triggerFilter(c.getElementID(e),{element_id:t,navigate:"previous"})}),e.on("click",".fsNextButton",function(){e.find(".fsNotification").remove(),d.triggerFilter(c.getElementID(e),{element_id:t,navigate:"next"})}),d.onUpdated(t,e.data("linked-element-ids"),function(t,i){e.find(".fsNotification").remove(),i&&i.navigationFailed&&e.find(o.selectors.elementContent).append(a('<div class="fsNotification">No '+i.navigationFailed+" post available</div>"))})}function r(e,t){var i=c.getElementID(e),n=t||{element_id:i,post_category_id:"",tag_id:""},r=n.hasOwnProperty("tag_id")?"tag_id":"post_category_id";u.addState(i,n),n[r]=n[r]||"",d.triggerFilter(i,n),e.find(".fsToolsList > li").removeClass(o.classes.stateSelected).find("["+("tag_id"==r?"data-tag-id":"data-category-id")+'="'+n[r]+'"]').closest("li").addClass(o.classes.stateSelected)}var a=e.$,o=e.getInternalNS("elements.constants"),s=e.getInternalNS("elements.element_tools.utils"),l=e.getNS("events"),d=e.getInternalNS("elements.linkedEvents"),c=e.getInternalNS("elements.utils"),u=new c.ElementHistory,h="PostTools";l.onElementAdded(h,t),l.onElementUpdated(h,t),a(".fs"+h+"Element").each(function(){t(a(this))})}(FS),function(e){"use strict";function t(e){e&&e.data("autoplay")&&e[0].play()}function i(){var e=c.Dialog({dialogClass:"fsResourceDialog",id:"fsResource",removeOnClose:!1}),t="<p>You are not authorized to access this resource.</p>";e.setContent(t),e.attachToPage(),e.open(l(document.body))}function n(e,t,i,n,r,a){var o,s,d,c=t.data("item-count"),u=t.data("page-index"),h=t.data(),f="resource"+h.resourceType+"LightboxDisplay",g={collection_id:h.resourceCollectionId,display_in_dialog:!0,element_id:n,page_id:r,post_id:a,resource:i};g.collection_id&&(s=_),e.hasClass("fsListNav")?(d=t.closest("ul").find("> li.fsResource a.fsResourceLink"),o=d.index(t)):(d=e.find("a.fsResourceLink:not(.fsTitle .fsResourceLink)"),o=d.index(d.filter('[data-resource-uuid="'+t.data("resource-uuid")+'"]'))),e.hasClass(_)&&(o-=1),c&&u&&(o+=(u-1)*c),p.trackResourceEvent(f,h.resourceTitle,i),p.showElementPopupDialog(e,g,y+"Element",t,s).done(function(){var e="article.slick-active audio, article.slick-active video",t=l(".fsElementDialog.fsResourceElement"),i=t.find(v);i.on("init",function(){i.find(e).each(function(e,t){var i=l(t),n=i.data();n.autoplay&&i.on("canplay",function(){this.play()})})}),i.on("beforeChange",function(){i.find(e).each(function(){this.paused||this.pause()})}),i.slick({accessibility:!0,adaptiveHeight:!1,arrows:!0,infinite:!0,initialSlide:o,nextArrow:t.find(".fsNextButton"),prevArrow:t.find(".fsPrevButton"),slide:"article",slidesToScroll:1,slidesToShow:1,vertical:!1})}),e.hasClass("fsStatePlaying")&&t.hasClass("fsResourceLink")&&e.find(".fsSlideshowPause").trigger("click")}function r(r){var o=p.getElementID(r),s=r.find(".fsResourceCollectionLink"),c=r.data("linked-element-ids"),u=r.find(".fsResourceLink").data("permitted-user"),g=r.data("source-element-id"),m=r.data("source-page-id"),v=r.data("source-post-id"),y=r.data("trigger-element-ids"),w=l(document.body).data("logged-in");(u||s||w)&&(a(r),r.on("click","a[data-resource-uuid]",function(){var e=l(this),t=e.data("permitted-user"),a=e.data("resource-uuid"),s={display_in_element:!0,element_id:g,page_id:m,post_id:v,resource:a};if(!e.closest("figcaption, .fsDescription").length||e.hasClass("fsResourceLink"))return t?(c?h.triggerFilter(o,s):n(r,e,a,g,m,v),!1):void i()}).on("click","a[data-resource-collection-id]",function(){var e=l(this),t=e.data("resource-collection-id"),i=e.data("collection-loading"),n=r.hasClass("fsListNav"),a=e.parentsUntil(r).filter("ul").length+1,s={depth:a,display_in_element:!0,element_id:g,page_id:m,post_id:v,resource_collection:t};return e.data("collection-navigates")&&(i?e.closest("li").toggleClass(d.stateExpanded):(e.data("collection-loading",!0),p.loadingOverlay(r.find(f.elementContent)),p.fetchElementHTML(o,s,{updateDOM:!n}).done(function(t){if(n){var i=l(t).find(".fsElementContent > ul");0==i.length&&(i=l('<ul class="fsStyleDefaultList"><li class="fsListItem"><div class="fsNotification"></div></li></ul>'),i.find(".fsNotification").text(l(t).find(".fsElementEmpty").text())),e.closest("li").append(i).addClass(d.stateExpanded),p.removeLoadingOverlay(r)}else p.updateURLParams({virtualParam:"/~resource-collection/"+e.data("resource-collection-id")})}))),c&&h.triggerFilter(o,s),!1}).on("click",".fsElementPagination a",function(){var e=r.find(f.elementContent),t={element_id:g,page_id:m,post_id:v,resource_collection:r.data("resource-collection-id")};return t["element_"+o+"_page"]=l(this).data("page"),p.loadingOverlay(e),p.updateQueryStringValueAndHistory(t),p.fetchElementHTML(o,t),!1}).on("click",".fsResourceLink",function(){var t,i=l(this).data();e._.includes(["Document","Pdf","Raw"],i.resourceType)&&(t="resource"+i.resourceType+"Download",p.trackResourceEvent(t,i.resourceTitle,i.resourceUuid))}),r.hasClass(_)||r.find("audio, video").on("play pause",function(e){var t=l(e.target),i=t.data(),n=e.type.charAt(0).toUpperCase()+e.type.slice(1),r=t.is("video")?"resourceVideo"+n:"resourceAudioPlay"+n;p.trackResourceEvent(r,i.resourceTitle,i.resourceUuid)}),y&&h.onFilter(o,y,function(e,i){var a=r.hasClass(b),s=i.hasOwnProperty("resource_collection")&&a,l=i.hasOwnProperty("resource")&&!a&&e!=o;return l?void n(r,r,i.resource,e,m,v):void(s||c&&e==o||(p.loadingOverlay(r.find(f.elementContent)),p.fetchElementHTML(o,i).done(function(){t(p.getElementByID(o).find("audio, video").first()),h.triggerUpdated(o,null,e)})))}),r.find("picture img").each(function(){var e=l(this).data(),t="resourceSingleImageDisplay";r.hasClass(_)?t="resourceSlideshowImageDisplay":r.hasClass("fsGrid")&&(t="resourceGridImageDisplay"),p.trackResourceEvent(t,e.resourceTitle,e.resourceUuid)}))}function a(e){e.find("video[data-"+g+"]").each(function(){var e=l(this),t=e.siblings(".fsPlayOverlay"),i=!(!e.prop("autoplay")&&!e.data("autoplay"));t.length>0&&t.on("click",function(){t.addClass(d.stateHidden),p.createDashPlayer(e,!0)}),i&&(e.closest(m).length>0||0==e.closest(v).length)&&p.createDashPlayer(e,!0)})}function o(e){var i,n,r=l(".fsResourceElement.fsElementDialog");a(e),i=e.find("audio, video").first(),n=e.find("img[data-image-sizes]"),r.hasClass(_)||(t(i),r.toggleClass("fsResourceAudioOnly",i&&"AUDIO"==i.prop("tagName"))),n.length&&l(window).trigger("resize",{forceUpdate:!0})}function s(e){e.find(".fs"+y+"Element").each(function(){r(l(this))})}var l=e.$,d=e.getInternalNS("elements.constants.classes"),c=e.getInternalNS("dialogs"),u=e.events,h=e.getInternalNS("elements.linkedEvents"),f=e.getInternalNS("elements.constants.selectors"),p=e.getInternalNS("elements.utils"),g="dash-url",m=".fsElementDialog",v=".fsElementSlideshow",y="Resource",b="fsSingleItem",_="fsSlideshow";u.onElementAdded(y,r),u.onElementAdded("sharedcontainer",s),u.onElementUpdated(y,r),u.onElementUpdated("sharedcontainer",s),u.onElementDialogShown(y,o),s(l(document.body))}(FS),function(e,t){"use strict";function i(e,t,i,r,a){var o,c="",u="";if(0==e.hits.length)a.prepend(s);else{o=e.hits,a.prepend(d(n(o.shift()))),g.each(o,function(e){c+=d(n(e))}),i.prepend(c);for(var h=1;h<=e.nbPages;h++)u+=l({count:h,selected:e.page==h-1});t.html(u),r.html("About "+e.nbHits+" results ("+e.processingTimeMS+" milliseconds)")}}function n(e){return e.fileType="",e.titleBlock=c,e.snippet=r(e),e.pageURL=t.location.protocol+"//"+t.location.hostname+e.page_path,e}function r(e){for(var t=b.length,i=e._snippetResult,n=0;n<t;n++){var r=i[b[n]];if(r&&r.value&&"none"!=r.matchLevel)return r.value}}function a(e,t,n,r,a,o,s){s.find(".gsc-webResult").remove(),r.empty().data("searchterm",e),o.empty();var l=algoliasearch(n.data("app-id"),n.data("api-key")),d=l.initIndex(n.data("index"));d.search(e,{highlightPostTag:"</strong>",highlightPreTag:"<strong>",hitsPerPage:10,maxValuesPerFacet:100,page:t,restrictSearchableAttributes:["content","title"],snippetEllipsisText:"&hellip;"}).then(function(e){i(e,r,a,o,s)},function(){alert("Error, please try again.")})}function o(e){var t=e.find(".gsst_a"),i=e.find(".gsc-cursor-box"),n=e.find(".gsc-expansionArea"),r=e.find("input.gsc-input"),o=e.find(".gsc-result-info"),s=e.find(".gsc-results"),l=e.find(".gsc-control-cse[data-displaypart=2]").length,d=_.getQueryStringValues(),c=!!d.q&&decodeURIComponent(d.q.replace(/\+/g,"%20"));t.length&&(t.hide(),t.click(function(){r.val(""),t.hide()}),r.keyup(function(){t.toggle(r.val().length>0)})),s.length&&c&&(r.length&&(r.val(c),t.show()),a(c,0,e,i,n,o,s)),e.find(".gsc-search-box").submit(function(){return!l||(a(r.val(),0,e,i,n,o,s),!1)}),i.on("click",".gsc-cursor-page",function(){var t=Number(m(this).html());a(i.data("searchterm"),t-1,e,i,n,o,s)})}function s(e){return u||(u=g.template(m("#fsSearchNoResultsTemplate").html())),u(e)}function l(e){return h||(h=g.template(m("#fsSearchPagingTemplate").html())),h(e)}function d(e){return f||(f=g.template(m("#fsSearchResultTemplate").html())),f(e)}function c(e){return p||(p=g.template(m("#fsSearchTitleBlock").html())),p(e)}var u,h,f,p,g=e._,m=e.$,v="Search",y=e.events,b=["title","content"],_=e.getInternalNS("elements.utils");y.onElementAdded(v,o),y.onElementUpdated(v,o),m(".fsSearch").each(function(){o(m(this))})}(FS,window),function(e){"use strict";function t(e){e.find(w+", "+E+", "+T).empty()}function i(e){if(!e.data(y)){var t=algoliasearch(e.data(m),e.data(g));e.data(y,t.initIndex(e.data(b)+"pages"))}return e.data(y)}function n(e){for(var t=e._snippetResult,i=0;i<D;i++)for(var n=0;n<P;n++){var r=t[M[n]];if(r&&r.value&&r.matchLevel==I[i])return r.value}}function r(e,t){var i=window.location.protocol+"//"+window.location.hostname;return"pages"==t?i+e.page_path:"resources"==t?i+e.view_url:i+"/fs/pages/search-results-item/"+t.slice(0,-1)+"/"+e.id}function a(e,t){var i=e.find(v),a=e.find(E);a.empty(),i.empty(),t.userData&&u.each(t.userData,function(t){i.append(L(e,".fsSearchCustomResultTemplate")(t))}),e.find(w).html(L(e,".fsSearchResultInfoTemplate")({label:O.pluralize(t[p],"result"),timing:t[f]+" "+O.pluralize(t[f],"millisecond"),total:t[p]})),t[p]>0&&u.each(t.hits,function(t){a.append(L(e,".fsSearchResultTemplate")({snippet:n(t),title:t.page_name,url:r(t,"pages")}))}),O.pagination(e.find(T),t.page+1,t[p],t.hitsPerPage),a.removeClass(x.classes.stateHidden)}function o(e){return function(t,i,n){e.search(t,u.defaults({optionalWords:t},N)).then(function(e){n(e.hits)})}}function s(e,n,r){var o=i(e);return n=h.trim(n),0==n.length?t(e):(e.data(_,n),void o.search(n,u.defaults({optionalWords:n,page:r||0},N)).then(function(t){a(e,t)},function(){alert("Error, please try again.")}))}function l(e){e.hasClass("fsSearchForm")?d(e):e.hasClass("fsList")&&c(e)}function d(e){function t(){d.toggleClass(x.classes.stateHidden,""==l.val())}var i=e.data(g),a=O.getElementID(e),s=e.data("linked-element-ids"),l=e.find(".fsStyleSearchField"),d=e.find(".fsButtonClear");if(s){var c=O.getElementByID(s[0]);c.length&&e.on("submit","form",function(){return A.triggerFilter(a,{query:h("#fsSearchInput_"+a).val()}),!1})}if(i){var u=e.data(m),f=[{highlight:!0,minLength:2}],p=O.inDraftMode(),v=e.data(b);i.pages&&f.push({async:!0,display:"page_name",limit:3,name:"pages",source:o(algoliasearch(u,i.pages).initIndex(v+"pages")),templates:{header:"Pages",suggestion:function(t){return L(e,".fsSearchSuggestionTemplate")({snippet:n(t),title:t.page_name,url:r(t,"pages")})}}}),i.posts&&f.push({async:!0,display:"title",limit:3,name:"posts",source:o(algoliasearch(u,i.posts).initIndex(v+"posts")),templates:{header:"Posts",suggestion:function(t){return L(e,".fsSearchSuggestionTemplate")({snippet:n(t),title:t.title,url:""})}}}),i.resources&&f.push({async:!0,display:"title",limit:3,name:"resources",source:o(algoliasearch(u,i.resources).initIndex(v+"resources")),templates:{header:"Resources",suggestion:function(t){return L(e,".fsSearchSuggestionTemplate")({snippet:n(t),title:t.filename,url:""})}}}),l.typeahead.apply(l,f),l.on("typeahead:select",function(e,t,i){p&&"pages"==i?O.notifyAdminInterface("page:show",{pageID:t.page_id}):p?window.open(r(t,i),"_blank"):window.location=r(t,i)})}l.on("keyup click change",function(){t()}),d.on("click",function(){
l.val(""),t()})}function c(e){var t=O.getElementID(e),i=e.data(_),n=e.data("trigger-element-ids");n&&A.onFilter(t,n,function(t,i){s(e,i.query)}),i&&s(e,i),e.on("click",T+" a",function(){return s(e,e.data(_),h(this).data("page")-1),!1})}var u=e._,h=e.$,f="processingTimeMS",p="nbHits",g="api-key",m="app-id",v=".fsSearchCustomResults",y="algolia-index",b="index-prefix",_="search-term",w=".fsSearchResultInfo",E=".fsListItems",T=".fsElementPagination",S="Search",C=e.getInternalNS("elements"),x=C.constants,k=e.events,A=C.linkedEvents,I=["full","partial","none"],D=I.length,M=["title","content"],P=M.length,R={interpolate:/{(.+?)}/g},O=C.utils,N={highlightPostTag:"</span>",highlightPreTag:'<span class="fsSearchResultMatch">',hitsPerPage:10,page:0,snippetEllipsisText:"&hellip;"},L=u.memoize(function(e,t){return u.template(e.find(t).html(),R)},function(e,t){return t+O.getElementID(e)});h(".fsSearchElement").each(function(){l(h(this))}),k.onElementAdded(S,l),k.onElementUpdated(S,l)}(FS),function(e,t,i){"use strict";function n(e){return e.find("article.slick-active audio, article.slick-active video")}function r(t){return e(t.currentTarget).find("article.slick-active picture img")}function a(e,t){var i;1==t&&(i=n(e),i.each(o))}function o(t,i){var n,r=e(i).data();r.autoplay&&(n="VIDEO"==i.tagName?"Video":"Audio",y[r.resourceUuid]||(y[r.resourceUuid]=!0,v.trackResourceEvent("resourceSlideshow"+n+"Autoplay",r.resourceTitle,r.resourceUuid)),i.play(!0))}function s(e){e.hasClass(T)&&u(e)}function l(t){t.find(S).each(function(){u(e(this))})}function d(t){e(t).find(".fsElementSlideshow").each(function(){var t=e(this).get(0).slick;t&&(t.setPosition(),t.slickGoTo(0,!0))})}function c(t){t.each(function(){var t=e(this).children().not("fieldset");t.height(e(FS._.max(t,function(t){return e(t).height()})).height())})}function u(t,i){var o=t.find("img[data-image-sizes], video"),s=t.find(".fsElementSlideshow"),l=s.data("arrows"),d=s.data("autoplay"),u=s.data("fade"),f=!1,g=s.data("slides-to-show"),T=!1,S=s.data("vertical");return o.length&&!i?void p(t,o):(S&&c(s),s.on("init",function(){a(s,g)}),s.on("click",".fsSlideshowPlay, .fsSlideshowPause",function(){var t=e(this).hasClass("fsSlideshowPlay"),i=e(this).closest(t?_:E);T=!t,i.removeClass(t?b:w),i.addClass(t?w:b),s.slick(t?"slickPlay":"slickPause"),t&&f&&(f=!1,s.slick("slickNext")),1==g&&n(s).each(function(){this[t?"play":"pause"]()}),i.find(".fsSlideshowPause").attr("aria-hidden",!t).toggleClass(m.stateHidden),i.find(".fsSlideshowPlay").attr("aria-hidden",t).toggleClass(m.stateHidden)}),s.on("beforeChange",function(){n(s).each(function(){this.paused||this.pause()})}),s.on("afterChange",function(){s.closest(E).length&&a(s,g),r(s).each(function(){var t=e(this).data();y[t.resourceUuid]||(y[t.resourceUuid]=!0,v.trackResourceEvent("resourceSlideshowImageDisplay",t.resourceTitle,t.resourceUuid))}),setTimeout(function(){h(s)},10)}),s.find("audio, video").on("playing",function(){s.slick("slickPause")}).on("ended",function(){d&&(T?f=!0:(1==g&&s.slick("slickNext"),s.slick("slickPlay")))}),s.slick({accessibility:!0,adaptiveHeight:s.data("adaptive-height"),arrows:l,autoplay:d,autoplaySpeed:s.data("autoplay-speed"),dots:s.data("dots"),dotsClass:"fsPager",fade:u,infinite:!0,nextArrow:l?t.find(".fsNextButton"):"",prevArrow:l?t.find(".fsPrevButton"):"",slide:"article",slidesToScroll:g,slidesToShow:g,vertical:S&&!u}),h(s),void(o.length&&e(window).trigger("resize")))}function h(e){var t=e.closest(S);e.find(".slick-track").attr("aria-label",t.attr("aria-label")||"Slideshow"),e.find(".fsPager li").removeAttr("role"),e.find(".fsPager button").removeAttr("role")}function f(e,t){e.data("image-loaded")?t.resolve():e.one("image:loaded",function(){t.resolve()})}function p(t,i){var n=i.map(function(){var t=e(this),i=e.Deferred();return"VIDEO"==t.prop("tagName")?t.data("dash-url")?v.createDashPlayer(t,!1,i):g(t,i):f(t,i),i}).get();e.when.apply(null,n).then(function(){u(t,!0)})}function g(e,t){4==e[0].readyState?t.resolve():e.one("loadedmetadata",function(){t.resolve()})}var m=FS.getInternalNS("elements.constants.classes"),v=FS.getInternalNS("elements.utils"),y={},b="fsStatePaused",_="."+b,w="fsStatePlaying",E="."+w,T="fsSlideshow",S="."+T;i.each(["News","Calendar","Feeds","Post","Resource","Issue"],function(e){t.onElementAdded(e,s),t.onElementUpdated(e,s)}),t.onElementShown("Panel",d),t.onElementUpdated(t.ALL_CONTAINERS_TYPE,l),l(e(document.body))}(FS.$,FS.events,FS._),function(e,t,i){"use strict";function n(t){var i,n="https://graph.facebook.com/",r=t.data();r.id&&(i=t.find(".fsElementContent"),""==r.accesstoken&&i.html(s("Unable to connect to Facebook at this time. Please try refreshing in a couple of minutes.")),e.ajax({data:{fields:u,limit:r.maxposts},dataType:"jsonp",url:n+r.id+"/"+r.posttype+"?access_token="+r.accesstoken,error:function(){i.html(s("An error occurred while connecting to the Facebook API"))},success:function(t){var n="https://www.facebook.com/"+r.id;if(!t.error){t.link&&(n=t.link);var a,o,s,l,d=0,c=e("<ul>",{"class":"fsFacebookList"}),u=e('<li class="fsFacebookListItem"></li>');for(t=t.data;d<t.length;d++){if(u.html('<span class="fsFacebookFrom">'+t[d].from.name+"</span>"),t[d].to&&t[d].to.name&&u.append(' <strong>to</strong> <span class="fsFacebookTo">'+t[d].to.name+"</span>"),t[d].message){l=t[d].message.match(/https?:\/\/[^\s|"|'|>]*/i),s=t[d].message.replace("<","&lt;"),s=s.replace(">","&gt;");for(o in l)"index"!=o&&"input"!=o&&"lastIndex"!=o&&(s=s.replace(l[o],'<a href="'+l[o]+'" target="_blank">'+l[o]+"</a>"));u.append("&nbsp;"+s)}switch(a=!1,s=e("<div>",{"class":"fsFacebookExtras fsStyleAutoclear"}),t[d].picture&&(s.append('<img class="fsFacebookThumb" src="'+t[d].picture+'">'),a=!0),t[d].type){case"link":case"photo":case"video":t[d].name?(s.append('<a target="_blank" class="fsFacebookTitle" href="'+t[d].link+'">'+t[d].name+"</a>"),a=!0):t[d].link&&(s.append('<a target="_blank" class="fsFacebookTitle" href="'+t[d].link+'">'+t[d].link+"</a>"),a=!0)}t[d].caption&&(s.append('<div class="fsFacebookCaption">'+t[d].caption+"</div>"),a=!0),t[d].description&&(s.append('<div class="fsFacebookDesc">'+t[d].description+"</div>"),a=!0),t[d].likes&&t[d].likes.data&&(s.append('<div class="fsFacebookLikes">'+t[d].likes.data.length+" likes</div>"),a=!0),a&&u.append(s),u.clone().appendTo(c)}e('<li class="fsFacebookFollow"><a href="'+n+'" target="_blank">View facebook page</a></li>').appendTo(c),i.html(c)}}}))}function r(t){function n(e){l(a,i.location.protocol+"//player.vimeo.com/video/"+e+"?byline=0&api=1",o.title)}function r(t){e.ajax({dataType:"jsonp",url:i.location.protocol+"//vimeo.com/api/v2/"+t+o.id+"/videos.json",error:function(){a.html(s("An error occurred while connecting to the Vimeo API"))},success:function(i){var r,l,d=0;if(!i.length)return void a.html(s("No videos found"));if(n(i[0].id),!o.mostrecent){for(r=e('<ul class="fsVimeoList">'),l=e('<li class="fsVimeoListItem fsStyleAutoclear"><img class="fsVimeoThumb"><div class="fsVimeoTitle"></div><div class="fsVimeoViews"></div><div class="fsVimeoDesc"></div></li>');d<i.length&&(l.find("img").attr({alt:i[d].title,src:i[d].thumbnail_medium,title:i[d].title}),l.find(".fsVimeoViews").html(i[d].stats_number_of_plays+" views"),l.find(".fsVimeoTitle").html(i[d].title),l.find(".fsVimeoDesc").html(i[d].description),l.clone().click(function(){n(i[e(this).index()].id)}).appendTo(r),d!=o.maxvideos-1);d++);e('<li class="vimeo_view_link"><a href="https://www.vimeo.com/'+t.replace(/(channel|group)/,"$1s")+o.id+'" class="fsStyleDefaultButton" target="_blank">View on vimeo</a></li>').appendTo(r),a.append(r)}}})}var a,o=t.data();if(o.id&&o.videotype)switch(a=t.find(".fsElementContent"),o.videotype){case"album":r("album/");break;case"channel":r("channel/");break;case"group":r("group/");break;case"user":r("");break;case"video":n(o.id)}}function a(t){var n,r=t.data(),a=function(t){o(t.data.video,!0),e(t.originalEvent.target).closest(".fsElement")[0].scrollIntoView()},o=function(e,t){l(n,i.location.protocol+"//www.youtube.com/embed/"+e+"?enablejsapi=1"+(t?"&autoplay=1":"")+"&origin="+i.location.protocol+i.location.hostname,r.title)},d=function(t,i){e.ajax({dataType:"jsonp",url:"https://www.googleapis.com/youtube/v3/"+t+"?"+i,data:{alt:"json",key:h,maxResults:r.mostrecent?1:r.maxvideos,order:"date",part:"channels"==t?"id":"snippet",type:"video"},error:function(){n.html(s("An error occurred while connecting to the YouTube API"))},success:function(t){var i;if(t.error){var r=t.error.errors.map(function(e){return e.reason+": "+e.message});n.html(s(r.join("<br>")))}if("youtube#channelListResponse"==t.kind)return void(t.items.length?d("search","channelId="+t.items[0].id):n.html(s("No channels found for the specified user")));if(t.items.length){if(o(t.items[0].id.videoId||t.items[0].snippet.resourceId.videoId),t.items.length>1){var l=e("<ul>",{"class":"fsYoutubeList"});for(i=0;i<t.items.length;i++){var c=e("<li>",{"class":"fsYoutubeListItem fsStyleAutoclear"});c.append(e("<img>",{"class":"fsYoutubeThumb fsStyleFloatLeft",src:t.items[i].snippet.thumbnails["default"].url})),c.append(e("<div>",{"class":"fsYoutubeTitle",text:t.items[i].snippet.title})),c.append(e("<div>",{"class":"fsYoutubeDesc",text:t.items[i].snippet.description})),c.click({video:t.items[i].id.videoId||t.items[i].snippet.resourceId.videoId},a),l.append(c)}n.append(l)}}else n.html(s("No videos found"))}})};if(r.id)switch(n=t.find(".fsElementContent"),n.html("Loading from YouTube..."),r.videotype){case"channel":d("search","channelId="+r.id);break;case"playlist":d("playlistItems","playlistId="+r.id);break;case"user":d("channels","forUsername="+r.id);break;case"video":o(r.id)}}function o(e){return Math.round(e/16*9)}function s(e){return'<div class="fsElementEmpty">'+e+"</div>"}function l(e,t,i){var n=e.find("iframe"),r='<iframe class="fsSocialVideoFrame" type="text/html" height="'+o(e.width())+'" src="'+t+'" webkitAllowFullScreen mozallowfullscreen allowFullScreen title="'+(i||"Embedded video player")+'"></iframe>';n.length?n.replaceWith(r):e.html(r)}function d(e){e.hasClass("fsFacebook")?n(e):e.hasClass("fsVimeo")?r(e):e.hasClass("fsYoutube")&&a(e)}function c(t){t.find(".fsVimeo, .fsYoutube").each(function(){var t=e(this).find("iframe");t.height(o(t.outerWidth()))})}var u="caption,description,from,likes,link,message,name,picture,to,type",h="AIzaSyDZOIEiCKAvQN4NM-pPOIjRpwPU5gslVdg";e(function(){e(".fsFacebook, .fsVimeo, .fsYoutube").each(function(){d(e(this))})}),t.onElementUpdated("facebook",d),t.onElementUpdated("vimeo",d),t.onElementUpdated("youtube",d),t.onElementShown("panel",c),e(i).resize(function(){c(e("body"))})}(FS.$,FS.events,window),function(e){"use strict";function t(e){var t=e.find("> .fsElementContent");t.data("ui-tabs")?t.tabs("refresh"):t.tabs({activate:function(e,t){a.triggerElementHidden(t.oldPanel),a.triggerElementShown(t.newPanel)}}),o.inComposeMode()&&e.find(".ui-tabs-nav").sortable({axis:"x",items:"> li:not(:has(> .fsAddTab))",beforeActivate:function(e){e.preventDefault()},update:function(e,t){var i=r(t.item);o.moveBehind(i,i.prev(),i.closest(".fsElement"))}})}var i="tab",n="tabs",r=e.$,a=e.events,o=e.getInternalNS("elements.utils");a.onElementUpdated(n,t),a.onElementUpdated(n,t),a.onElementUpdated(i,function(e){var i=e.parent().find("#fsTab_"+o.getElementID(e)+" > a"),n=e.data("title");i.text(n),e.find("> .fsElementActionButtonContainer").remove(),t(e.closest(".fsTabs"))}),a.onElementAdded(i,function(e){e.closest(".fsElementContent").tabs({active:-1})}),r(".fsTabs:not(.fsPanelGroup)").each(function(){t(r(this))})}(FS),function(e,t){"use strict";function i(){var e=r.template('\t\t\t<div class="fsMessagesNotifications">\t\t\t\t<iframe src="/fs/dialogs/notifications" frameborder="0"></iframe>\t\t\t</div>\t\t');return e()}var n,r=e._,a=e.$,o=e.getInternalNS("managers.messages"),s=e.getInternalNS("dialogs");o.showNotificationsModal=function(){return!!a(t.body).data("logged-in")&&(n||(n=s.Dialog({id:"fsMessagesNotifications",removeOnClose:!1}),n.setContent(i()),window.addEventListener("message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){t={event:""}}"close"==t.event&&n.close()})),n.open(a(t.body)),!1)}}(FS,document),function(e){"use strict";function t(e){return e.find(h+":checked").val()}function i(e){n(e),e.find(h).change(function(){n(e)}),l.showNotificationsModal&&s.showNotificationsModal(),e.find(".fsUnsubscribeButton").click(function(){var i=window.location.href,n=i.indexOf("key=")>=0?i.split("key=")[1]:i.substr(i.lastIndexOf("/")+1),o=0==t(e)?".fsUnsubscribeSuccessNotification":".fsGlobalUnsubscribeSuccessNotification";a.loadingOverlay(e.find(u.elementContent)),r.when(a.getToken()).then(function(i){r.ajax({dataType:"json",type:"POST",url:"/fs/comms-manager/unsubscribe/"+n,data:{authenticity_token:i,global:1==t(e)}}).error(function(e){window.alert(e.responseJSON.message)}).done(function(){e.find(o).removeClass(f),e.find(".fsUnsubscribeForm").addClass(f)}).always(function(){a.removeLoadingOverlay(e)})})}),e.find(".fsManagePreferencesButton").click(function(){a.isLoggedIn()?s.showNotificationsModal():window.location="/fs/login?login_destination=/fs/pages/unsubscribe?showNotificationsModal=true"})}function n(e){var i=t(e);e.find("div.fsUnsubscribeFromList > div.fsNotification").toggleClass(f,0!=i),e.find("div.fsUnsubscribeFromAll > div.fsNotification").toggleClass(f,1!=i)}var r=e.$,a=e.getInternalNS("elements.utils"),o=e.getNS("events"),s=e.getInternalNS("managers.messages"),l=a.getQueryStringValues(),d="UnsubscribeForm",c=e.getInternalNS("elements.constants.classes"),u=e.getInternalNS("elements.constants.selectors"),h='input[name="fsUnsubscribeOptions"]',f=c.stateHidden;o.onElementAdded(d,i),o.onElementUpdated(d,i),r(".fs"+d+"Element").each(function(){i(r(this))})}(FS),/*!
 * jsTree {{VERSION}}
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){"use strict";if(!e.jstree){var i,n,r=0,a=!1,o=!1,s=!1,l=[],d=e("script:last").attr("src"),c=document,u=c.createElement("LI");u.setAttribute("role","treeitem"),i=c.createElement("I"),i.className="jstree-icon jstree-ocl",i.setAttribute("role","presentation"),u.appendChild(i),i=c.createElement("A"),i.className="jstree-anchor",i.setAttribute("href","#"),i.setAttribute("tabindex","-1"),n=c.createElement("I"),n.className="jstree-icon jstree-themeicon",n.setAttribute("role","presentation"),i.appendChild(n),u.appendChild(i),i=n=null,e.jstree={version:"{{VERSION}}",defaults:{plugins:[]},plugins:{},path:d&&d.indexOf("/")!==-1?d.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},e.jstree.create=function(t,i){var n=new e.jstree.core(++r),a=i;return i=e.extend(!0,{},e.jstree.defaults,i),a&&a.plugins&&(i.plugins=a.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(n=n.plugin(t,i[t]))}),n.init(t,i),n},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(document).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,n=null;if(t&&t.id&&(t=t.id),!n||!n.length)try{n=e(t)}catch(e){}if(!n||!n.length)try{n=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?i=n:e(".jstree").each(function(){var n=e(this).data("jstree");if(n&&n._model.data[t])return i=n,!1}),i},e.fn.jstree=function(i){var n="string"==typeof i,r=Array.prototype.slice.call(arguments,1),a=null;return!(i===!0&&!this.length)&&(this.each(function(){var o=e.jstree.reference(this),s=n&&o?o[i]:null;if(a=n&&s?s.apply(o,r):null,o||n||i!==t&&!e.isPlainObject(i)||e(this).data("jstree",new e.jstree.create(this,i)),(o&&!n||i===!0)&&(a=o||!1),null!==a&&a!==t)return!1}),null!==a&&a!==t?a:this)},e.expr[":"].jstree=e.expr.createPseudo(function(){return function(i){return e(i).hasClass("jstree")&&e(i).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var n=e.jstree.plugins[t];return n?(this._data[t]={},n.prototype=this,new n(i,this)):this},init:function(t,i){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,n=0;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),n=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==document.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if("INPUT"===t.target.tagName)return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&"#"!==i.id&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&e(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&("#"!==i.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,n=[];for(t=0,i=this._data.core.selected.length;t<i;t++)n=n.concat(this._model.data[this._data.core.selected[t]].parents);for(n=e.vakata.array_unique(n),t=0,i=n.length;t<i;t++)this.open_node(n[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(n){if("INPUT"===n.target.tagName)return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var r=String.fromCharCode(n.which).toLowerCase(),a=this.element.find(".jstree-anchor").filter(":visible"),o=a.index(document.activeElement)||0,s=!1;if(t+=r,t.length>1){if(a.slice(o).each(e.proxy(function(i,n){if(0===e(n).text().toLowerCase().indexOf(t))return e(n).focus(),s=!0,!1},this)),s)return;if(a.slice(0,o).each(e.proxy(function(i,n){if(0===e(n).text().toLowerCase().indexOf(t))return e(n).focus(),s=!0,!1},this)),s)return}if(new RegExp("^"+r+"+$").test(t)){if(a.slice(o+1).each(e.proxy(function(t,i){if(e(i).text().toLowerCase().charAt(0)===r)return e(i).focus(),s=!0,!1},this)),s)return;if(a.slice(0,o+1).each(e.proxy(function(t,i){if(e(i).text().toLowerCase().charAt(0)===r)return e(i).focus(),s=!0,!1},this)),s)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){+new Date-n>500&&!this._data.core.focused&&(n=0,this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus())},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(document).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var n;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(n=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=e(t,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=e(t,this.element)).length||!n.hasClass("jstree"))return!1;t=this._model.data["#"]}return i&&(t="#"===t.id?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(e,t,i){if(e=e.parents?e:this.get_node(e),!e||"#"===e.id||!e.parents)return!1;var n,r,a=[];for(a.push(i?e.id:e.text),n=0,r=e.parents.length;n<r;n++)a.push(i?e.parents[n]:this.get_text(e.parents[n]));return a=a.reverse().slice(1),t?a.join(t):a},get_next_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this._firstChild(this.get_container_ul()[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);return!!n&&e(n)}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return!!n&&e(n)}if(t.hasClass("jstree-open")){for(n=this._firstChild(t.children(".jstree-children")[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);if(null!==n)return e(n)}n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return null!==n?e(n):t.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this.get_container_ul()[0].lastChild;n&&0===n.offsetHeight;)n=this._previousSibling(n);return!!n&&e(n)}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);return!!n&&e(n)}n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);if(null!==n){for(t=e(n);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return n=t[0].parentNode.parentNode,!(!n||!n.className||n.className.indexOf("jstree-node")===-1)&&e(n)},get_parent:function(e){return e=this.get_node(e),!(!e||"#"===e.id)&&e.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var n,r,a,o,s;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,n=0,r=t.children_d.length;n<r;n++){for(a=0,o=t.parents.length;a<o;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_remove_item(this._model.data[t.parents[a]].children_d,t.children_d[n]);this._model.data[t.children_d[n]].state.selected&&(s=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.children_d[n])),delete this._model.data[t.children_d[n]]}t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e;var n=this.get_node(t,!0);t.state.loaded&&!t.children.length&&n&&n.length&&!n.hasClass("jstree-leaf")&&n.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),n.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i){var n,r,a=!0,o=function(){this._load_nodes(e,t,!0)},s=this._model.data;for(n=0,r=e.length;n<r;n++)!s[e[n]]||s[e[n]].state.loaded&&i||(this.is_loading(e[n])||this.load_node(e[n],o),a=!1);a&&t&&!t.done&&(t.call(this,e),t.done=!0)},load_all:function(e,t){if(e||(e="#"),e=this.get_node(e),!e)return!1;var i,n,r=[],a=this._model.data,o=a[e.id].children_d;for(e.state&&!e.state.loaded&&r.push(e.id),i=0,n=o.length;i<n;i++)a[o[i]]&&a[o[i]].state&&!a[o[i]].state.loaded&&r.push(o[i]);r.length?this._load_nodes(r,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(t,i){var n,r=this.settings.core.data;return r?e.isFunction(r)?r.call(this,t,e.proxy(function(n){n===!1&&i.call(this,!1),this["string"==typeof n?"_append_html_data":"_append_json_data"](t,"string"==typeof n?e(n):n,function(e){i.call(this,e)})},this)):"object"==typeof r?r.url?(r=e.extend(!0,{},r),e.isFunction(r.url)&&(r.url=r.url.call(this,t)),e.isFunction(r.data)&&(r.data=r.data.call(this,t)),e.ajax(r).done(e.proxy(function(n,r,a){var o=a.getResponseHeader("Content-Type");return o.indexOf("json")!==-1||"object"==typeof n?this._append_json_data(t,n,function(e){i.call(this,e)}):o.indexOf("html")!==-1||"string"==typeof n?this._append_html_data(t,e(n),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(n=e.isArray(r)||e.isPlainObject(r)?JSON.parse(JSON.stringify(r)):r,"#"===t.id?this._append_json_data(t,n,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof r?"#"===t.id?this._append_html_data(t,e(r),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):"#"===t.id?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,i,n){t=this.get_node(t),t.children=[],t.children_d=[];var r,a,o,s=i.is("ul")?i.children():i,l=t.id,d=[],c=[],u=this._model.data,h=u[l],f=this._data.core.selected.length;for(s.each(e.proxy(function(t,i){r=this._parse_model_from_html(e(i),l,h.parents.concat()),r&&(d.push(r),c.push(r),u[r].children_d.length&&(c=c.concat(u[r].children_d)))},this)),h.children=d,h.children_d=c,a=0,o=h.parents.length;a<o;a++)u[h.parents[a]].children_d=u[h.parents[a]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),"#"!==l?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(t,i,n,r){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),e.isArray(i)||(i=[i]);var a=null,o={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var i,n,r,a,o=e.dat,s=e.par,l=[],d=[],c=[],u=e.df,h=e.t_id,f=e.t_cnt,p=e.m,g=p[s],m=e.sel,v=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,a,o,s,l=e.id.toString(),d={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(d.state[r]=u[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),e&&e.data&&(d.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(d.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(d.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(d.li_attr[r]=e.li_attr[r]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(d.a_attr[r]=e.a_attr[r]);for(e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),p[d.id]=d,r=0,a=d.children.length;r<a;r++)o=v(p[d.children[r]],d.id,n),s=p[o],d.children_d.push(o),s.children_d.length&&(d.children_d=d.children_d.concat(s.children_d));return delete e.data,delete e.children,p[d.id].original=e,d.state.selected&&c.push(d.id),d.id},y=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,a,o,s,l,d=!1;do d="j"+h+"_"+ ++f;while(p[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(l.state[r]=u[r]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(l.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(l.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(l.li_attr[r]=e.li_attr[r]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(l.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,a=e.children.length;r<a;r++)o=y(e.children[r],l.id,n),s=p[o],l.children.push(o),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,p[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(o.length&&o[0].id!==t&&o[0].parent!==t){for(n=0,r=o.length;n<r;n++)o[n].children||(o[n].children=[]),p[o[n].id.toString()]=o[n];for(n=0,r=o.length;n<r;n++)p[o[n].parent.toString()].children.push(o[n].id.toString()),g.children_d.push(o[n].id.toString());for(n=0,r=g.children.length;n<r;n++)i=v(p[g.children[n]],s,g.parents.concat()),d.push(i),p[i].children_d.length&&(d=d.concat(p[i].children_d));for(n=0,r=g.parents.length;n<r;n++)p[g.parents[n]].children_d=p[g.parents[n]].children_d.concat(d);a={cnt:f,mod:p,sel:m,par:s,dpc:d,add:c}}else{for(n=0,r=o.length;n<r;n++)i=y(o[n],s,g.parents.concat()),i&&(l.push(i),d.push(i),p[i].children_d.length&&(d=d.concat(p[i].children_d)));for(g.children=l,g.children_d=d,n=0,r=g.parents.length;n<r;n++)p[g.parents[n]].children_d=p[g.parents[n]].children_d.concat(d);a={cnt:f,mod:p,sel:m,par:s,dpc:d,add:c}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?a:void postMessage(a)},l=function(t,i){if(this._cnt=t.cnt,this._model.data=t.mod,i){var r,a,o=t.add,s=t.sel,l=this._data.core.selected.slice(),d=this._model.data;if(s.length!==l.length||e.vakata.array_unique(s.concat(l)).length!==s.length){for(r=0,a=s.length;r<a;r++)e.inArray(s[r],o)===-1&&e.inArray(s[r],l)===-1&&(d[s[r]].state.selected=!1);for(r=0,a=l.length;r<a;r++)e.inArray(l[r],s)===-1&&(d[l[r]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),"#"!==t.par?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||r?(this._data.core.working=!0,a=new window.Worker(this._wrk),a.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{a.terminate(),a=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),o.par?a.postMessage(o):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,n,!0])}catch(e){l.call(this,s(o),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,s(o),!1)},_parse_model_from_html:function(t,i,n){n=n?[].concat(n):[],i&&n.unshift(i);var r,a,o,s,l,d=this._model.data,c={id:!1,text:!1,icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(c.state[o]=this._model.default_state[o]);if(s=e.vakata.attributes(t,!0),e.each(s,function(t,i){return i=e.trim(i),!i.length||(c.li_attr[t]=i,void("id"===t&&(c.id=i.toString())))}),s=t.children("a").first(),s.length&&(s=e.vakata.attributes(s,!0),e.each(s,function(t,i){i=e.trim(i),i.length&&(c.a_attr[t]=i)})),s=t.children("a").first().length?t.children("a").first().clone():t.clone(),s.children("ins, i, ul").remove(),s=s.html(),s=e("<div />").html(s),c.text=this.settings.core.force_text?s.text():s.html(),s=t.data(),c.data=s?e.extend(!0,{},s):null,c.state.opened=t.hasClass("jstree-open"),c.state.selected=t.children("a").hasClass("jstree-clicked"),c.state.disabled=t.children("a").hasClass("jstree-disabled"),c.data&&c.data.jstree)for(o in c.data.jstree)c.data.jstree.hasOwnProperty(o)&&(c.state[o]=c.data.jstree[o]);s=t.children("a").children(".jstree-themeicon"),s.length&&(c.icon=!s.hasClass("jstree-themeicon-hidden")&&s.attr("rel")),c.state.icon&&(c.icon=c.state.icon),s=t.children("ul").children("li");do l="j"+this._id+"_"+ ++this._cnt;while(d[l]);return c.id=c.li_attr.id?c.li_attr.id.toString():l,s.length?(s.each(e.proxy(function(t,i){r=this._parse_model_from_html(e(i),c.id,n),a=this._model.data[r],c.children.push(r),a.children_d.length&&(c.children_d=c.children_d.concat(a.children_d))},this)),c.children_d=c.children_d.concat(c.children)):t.hasClass("jstree-closed")&&(c.state.loaded=!1),c.li_attr["class"]&&(c.li_attr["class"]=c.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),c.a_attr["class"]&&(c.a_attr["class"]=c.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),d[c.id]=c,c.state.selected&&this._data.core.selected.push(c.id),c.id},_parse_model_from_flat_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,a,o,s,l=e.id.toString(),d=this._model.data,c=this._model.default_state,u={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in c)c.hasOwnProperty(r)&&(u.state[r]=c[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),e&&e.data&&(u.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(u.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(u.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(u.li_attr[r]=e.li_attr[r]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(u.a_attr[r]=e.a_attr[r]);for(e&&e.children&&e.children===!0&&(u.state.loaded=!1,u.children=[],u.children_d=[]),d[u.id]=u,r=0,a=u.children.length;r<a;r++)o=this._parse_model_from_flat_json(d[u.children[r]],u.id,n),s=d[o],u.children_d.push(o),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));return delete e.data,delete e.children,d[u.id].original=e,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,a,o,s,l,d=!1,c=this._model.data,u=this._model.default_state;do d="j"+this._id+"_"+ ++this._cnt;while(c[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(l.state[r]=u[r]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(l.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(l.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(l.li_attr[r]=e.li_attr[r]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(l.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,a=e.children.length;r<a;r++)o=this._parse_model_from_json(e.children[r],l.id,n),s=c[o],l.children.push(o),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e,t,i,n=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),r=document.createElement("UL"),a=this._data.core.focused;for(t=0,i=n.length;t<i;t++)e=this.redraw_node(n[t],!0,this._model.force_full_redraw),e&&this._model.force_full_redraw&&r.appendChild(e);this._model.force_full_redraw&&(r.className=this.get_container_ul()[0].className,r.setAttribute("role","group"),this.element.empty().append(r)),null!==a&&(e=this.get_node(a,!0),e&&e.length&&e.children(".jstree-anchor")[0]!==document.activeElement?e.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:n})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,n=!1,r=!1,a=document;if(!t)return!1;if("#"===t.id)return this.redraw(!0);if(e=this.get_node(e,!0),!e||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for(r=a.createElement("UL"),r.setAttribute("role","group"),r.className="jstree-children",i=0,n=t.children.length;i<n;i++)r.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(r)}},redraw_node:function(t,i,n,r){var a=this.get_node(t),o=!1,s=!1,l=!1,d=!1,c=!1,h=!1,f="",p=document,g=this._model.data,m=!1,v=null,y=0,b=0;if(!a)return!1;if("#"===a.id)return this.redraw(!0);if(i=i||0===a.children.length,t=document.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(a.id[0])!==-1?"\\3"+a.id[0]+" "+a.id.substr(1).replace(e.jstree.idregex,"\\$&"):a.id.replace(e.jstree.idregex,"\\$&"))):document.getElementById(a.id))t=e(t),n||(o=t.parent().parent()[0],o===this.element[0]&&(o=null),s=t.index()),i||!a.children.length||t.children(".jstree-children").length||(i=!0),i||(l=t.children(".jstree-children")[0]),m=t.children(".jstree-anchor")[0]===document.activeElement,t.remove();else if(i=!0,!n){if(o="#"!==a.parent?e("#"+a.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===o||o&&g[a.parent].state.opened))return!1;s=e.inArray(a.id,null===o?g["#"].children:g[a.parent].children)}t=u.cloneNode(!0),f="jstree-node ";for(d in a.li_attr)if(a.li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"!==d?t.setAttribute(d,a.li_attr[d]):f+=a.li_attr[d]}a.a_attr.id||(a.a_attr.id=a.id+"_anchor"),t.setAttribute("aria-selected",!!a.state.selected),t.setAttribute("aria-level",a.parents.length),t.setAttribute("aria-labelledby",a.a_attr.id),a.state.disabled&&t.setAttribute("aria-disabled",!0),a.state.loaded&&!a.children.length?f+=" jstree-leaf":(f+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),null!==a.parent&&g[a.parent].children[g[a.parent].children.length-1]===a.id&&(f+=" jstree-last"),t.id=a.id,t.className=f,f=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":"");for(c in a.a_attr)if(a.a_attr.hasOwnProperty(c)){if("href"===c&&"#"===a.a_attr[c])continue;"class"!==c?t.childNodes[1].setAttribute(c,a.a_attr[c]):f+=" "+a.a_attr[c]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(a.icon&&a.icon!==!0||a.icon===!1)&&(a.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":a.icon.indexOf("/")===-1&&a.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+a.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(p.createTextNode(a.text)):t.childNodes[1].innerHTML+=a.text,i&&a.children.length&&(a.state.opened||r)&&a.state.loaded){for(h=p.createElement("UL"),h.setAttribute("role","group"),h.className="jstree-children",
d=0,c=a.children.length;d<c;d++)h.appendChild(this.redraw_node(a.children[d],i,!0));t.appendChild(h)}if(l&&t.appendChild(l),!n){for(o||(o=this.element[0]),d=0,c=o.childNodes.length;d<c;d++)if(o.childNodes[d]&&o.childNodes[d].className&&o.childNodes[d].className.indexOf("jstree-children")!==-1){v=o.childNodes[d];break}v||(v=p.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",o.appendChild(v)),o=v,s<o.childNodes.length?o.insertBefore(t,o.childNodes[s]):o.appendChild(t),m&&(y=this.element[0].scrollTop,b=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=y,this.element[0].scrollLeft=b)}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(a.id,!1,0)},this),0)),t},open_node:function(i,n,r){var a,o,s,l;if(e.isArray(i)){for(i=i.slice(),a=0,o=i.length;a<o;a++)this.open_node(i[a],n,r);return!0}if(i=this.get_node(i),!i||"#"===i.id)return!1;if(r=r===t?this.settings.core.animation:r,!this.is_closed(i))return n&&n.call(this,i,!1),!1;if(this.is_loaded(i))s=this.get_node(i,!0),l=this,s.length&&(r&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(i),r?(this.trigger("before_open",{node:i}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,n&&n.call(this,i,!0),s.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),r&&s.length||this.trigger("after_open",{node:i});else{if(this.is_loading(i))return setTimeout(e.proxy(function(){this.open_node(i,n,r)},this),500);this.load_node(i,function(e,t){return t?this.open_node(e,n,r):!!n&&n.call(this,e,!1)})}},_open_to:function(t){if(t=this.get_node(t),!t||"#"===t.id)return!1;var i,n,r=t.parents;for(i=0,n=r.length;i<n;i+=1)"#"!==i&&this.open_node(r[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(i,n){var r,a,o,s;if(e.isArray(i)){for(i=i.slice(),r=0,a=i.length;r<a;r++)this.close_node(i[r],n);return!0}return i=this.get_node(i),!(!i||"#"===i.id)&&(!this.is_closed(i)&&(n=n===t?this.settings.core.animation:n,o=this,s=this.get_node(i,!0),s.length&&(n?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",s.children(".jstree-children").remove(),o.trigger("after_close",{node:i})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove())),i.state.opened=!1,this.trigger("close_node",{node:i}),void(n&&s.length||this.trigger("after_close",{node:i}))))},toggle_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;i<n;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(e,t,i){if(e||(e="#"),e=this.get_node(e),!e)return!1;var n,r,a,o="#"===e.id?this.get_container_ul():this.get_node(e,!0);if(!o.length){for(n=0,r=e.children_d.length;n<r;n++)this.is_closed(this._model.data[e.children_d[n]])&&(this._model.data[e.children_d[n]].state.opened=!0);return this.trigger("open_all",{node:e})}i=i||o,a=this,o=this.is_closed(e)?o.find(".jstree-closed").addBack():o.find(".jstree-closed"),o.each(function(){a.open_node(this,function(e,n){n&&this.is_parent(e)&&this.open_all(e,t,i)},t||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,i){if(t||(t="#"),t=this.get_node(t),!t)return!1;var n,r,a="#"===t.id?this.get_container_ul():this.get_node(t,!0),o=this;if(!a.length){for(n=0,r=t.children_d.length;n<r;n++)this._model.data[t.children_d[n]].state.opened=!1;return this.trigger("close_all",{node:t})}a=this.is_open(t)?a.find(".jstree-open").addBack():a.find(".jstree-open"),e(a.get().reverse()).each(function(){o.close_node(this,i||0)}),this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;i<n;i++)this.enable_node(t[i]);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;i<n;i++)this.disable_node(t[i]);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},activate_node:function(e,i){if(this.is_disabled(e))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(i.shiftKey){var n,r,a=this.get_node(e).id,o=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(n=0,r=s.length;n<r;n+=1)s[n]===a&&(l=!l),s[n]===o&&(l=!l),l||s[n]===a||s[n]===o?this.select_node(s[n],!0,!1,i):this.deselect_node(s[n],!0,i);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:i})}else this.is_selected(e)?this.deselect_node(e,!1,i):this.select_node(e,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,i):(this.deselect_all(!0),this.select_node(e,!1,!1,i),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),!!(e&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,i,n,r){var a,o,s;if(e.isArray(t)){for(t=t.slice(),o=0,s=t.length;o<s;o++)this.select_node(t[o],i,n,r);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(a=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),n||(a=this._open_to(t)),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:r}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:r}))))},deselect_node:function(t,i,n){var r,a,o;if(e.isArray(t)){for(t=t.slice(),r=0,a=t.length;r<a;r++)this.deselect_node(t[r],i,n);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(o=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:n}))))},select_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:n})},deselect_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(e){return e=this.get_node(e),!(!e||"#"===e.id)&&e.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,n,r,a,o=this.get_selected(!0),s={};for(i=0,n=o.length;i<n;i++)s[o[i].id]=o[i];for(i=0,n=o.length;i<n;i++)for(r=0,a=o[i].children_d.length;r<a;r++)s[o[i].children_d[r]]&&delete s[o[i].children_d[r]];o=[];for(i in s)s.hasOwnProperty(i)&&o.push(i);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},get_bottom_selected:function(t){var i,n,r=this.get_selected(!0),a=[];for(i=0,n=r.length;i<n;i++)r[i].children.length||a.push(r[i].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},/*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&"#"!==e&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(i,n){if(i){if(i.core){var r,a,o,s;if(i.core.open)return e.isArray(i.core.open)?(r=!0,a=!1,o=this,e.each(i.core.open.concat([]),function(t,s){a=o.get_node(s),a&&(o.is_loaded(s)?(o.is_closed(s)&&o.open_node(s,!1,0),i&&i.core&&i.core.open&&e.vakata.array_remove_item(i.core.open,s)):(o.is_loading(s)||o.open_node(s,e.proxy(function(t,r){!r&&i&&i.core&&i.core.open&&e.vakata.array_remove_item(i.core.open,t.id),this.set_state(i,n)},o),0),r=!1))}),r&&(delete i.core.open,this.set_state(i,n)),!1):(delete i.core.open,this.set_state(i,n),!1);if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,n),!1;/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/
if(i.core.selected)return s=this,this.deselect_all(),e.each(i.core.selected,function(e,t){s.select_node(t)}),delete i.core.selected,this.set_state(i,n),!1;if(e.isEmptyObject(i.core))return delete i.core,this.set_state(i,n),!1}return!e.isEmptyObject(i)||(i=null,n&&n.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var n=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+n+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(t,i){i&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||"#"===t.id)return!1;var i=[],n=[];this._data.core.selected.concat([]);n.push(t.id),t.state.opened===!0&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id)}),this._load_nodes(n,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:t,nodes:e})},this))},set_id:function(t,i){if(t=this.get_node(t),!t||"#"===t.id)return!1;var n,r,a=this._model.data;for(i=i.toString(),a[t.parent].children[e.inArray(t.id,a[t.parent].children)]=i,n=0,r=t.parents.length;n<r;n++)a[t.parents[n]].children_d[e.inArray(t.id,a[t.parents[n]].children_d)]=i;for(n=0,r=t.children.length;n<r;n++)a[t.children[n]].parent=i;for(n=0,r=t.children_d.length;n<r;n++)a[t.children_d[n]].parents[e.inArray(t.id,a[t.children_d[n]].parents)]=i;return n=e.inArray(t.id,this._data.core.selected),n!==-1&&(this._data.core.selected[n]=i),n=this.get_node(t.id,!0),n&&n.attr("id",i),delete a[t.id],t.id=i,a[i]=t,!0},get_text:function(e){return e=this.get_node(e),!(!e||"#"===e.id)&&e.text},set_text:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.set_text(t[n],i);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0)},get_json:function(t,i,n){if(t=this.get_node(t||"#"),!t)return!1;i&&i.flat&&!n&&(n=[]);var r,a,o={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!i||!i.no_data)&&e.extend(!0,{},t.data)};if(i&&i.flat?o.parent=t.parent:o.children=[],!i||!i.no_state)for(r in t.state)t.state.hasOwnProperty(r)&&(o.state[r]=t.state[r]);if(i&&i.no_id&&(delete o.id,o.li_attr&&o.li_attr.id&&delete o.li_attr.id,o.a_attr&&o.a_attr.id&&delete o.a_attr.id),i&&i.flat&&"#"!==t.id&&n.push(o),!i||!i.no_children)for(r=0,a=t.children.length;r<a;r++)i&&i.flat?this.get_json(t.children[r],i,n):o.children.push(this.get_json(t.children[r],i));return i&&i.flat?n:"#"===t.id?o.children:o},create_node:function(i,n,r,a,o){if(null===i&&(i="#"),i=this.get_node(i),!i)return!1;if(r=r===t?"last":r,!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,n,r,a,!0)});n||(n={text:this.get_string("New node")}),"string"==typeof n&&(n={text:n}),n.text===t&&(n.text=this.get_string("New node"));var s,l,d,c;switch("#"===i.id&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":s=this.get_node(i.parent),r=e.inArray(i.id,s.children),i=s;break;case"after":s=this.get_node(i.parent),r=e.inArray(i.id,s.children)+1,i=s;break;case"inside":case"first":r=0;break;case"last":r=i.children.length;break;default:r||(r=0)}if(r>i.children.length&&(r=i.children.length),n.id||(n.id=!0),!this.check("create_node",n,i,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,i.id,i.parents.concat()),!n)return!1;for(s=this.get_node(n),l=[],l.push(n),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),d=0,c=i.parents.length;d<c;d++)this._model.data[i.parents[d]].children_d=this._model.data[i.parents[d]].children_d.concat(l);for(n=s,s=[],d=0,c=i.children.length;d<c;d++)s[d>=r?d+1:d]=i.children[d];return s[r]=n.id,i.children=s,this.redraw_node(i,!0),a&&a.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:i.id,position:r}),n.id},rename_node:function(t,i){var n,r,a;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.rename_node(t[n],i);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(a=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:a}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var i,n,r,a,o,s,l,d,c,u;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;i<n;i++)this.delete_node(t[i]);return!0}if(t=this.get_node(t),!t||"#"===t.id)return!1;if(r=this.get_node(t.parent),a=e.inArray(t.id,r.children),u=!1,!this.check("delete_node",t,r,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(a!==-1&&(r.children=e.vakata.array_remove(r.children,a)),o=t.children_d.concat([]),o.push(t.id),d=0,c=o.length;d<c;d++){for(s=0,l=t.parents.length;s<l;s++)a=e.inArray(o[d],this._model.data[t.parents[s]].children_d),a!==-1&&(this._model.data[t.parents[s]].children_d=e.vakata.array_remove(this._model.data[t.parents[s]].children_d,a));this._model.data[o[d]].state.selected&&(u=!0,a=e.inArray(o[d],this._data.core.selected),a!==-1&&(this._data.core.selected=e.vakata.array_remove(this._data.core.selected,a)))}for(this.trigger("delete_node",{node:t,parent:r.id}),u&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:r.id}),d=0,c=o.length;d<c;d++)delete this._model.data[o[d]];return this.redraw_node(r,!0),!0},check:function(t,i,n,r,a){i=i&&i.id?i:this.get_node(i),n=n&&n.id?n:this.get_node(n);var o=t.match(/^move_node|copy_node|create_node$/i)?n:i,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||a&&a.is_multi||i.id!==n.id&&e.inArray(i.id,n.children)!==r&&e.inArray(n.id,i.children_d)===-1?(o&&o.data&&(o=o.data),o&&o.functions&&(o.functions[t]===!1||o.functions[t]===!0)?(o.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!i||!i.id)&&i.id,par:!(!n||!n.id)&&n.id})}),o.functions[t]):!(s===!1||e.isFunction(s)&&s.call(this,t,i,n,r,a)===!1||s&&s[t]===!1)||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!i||!i.id)&&i.id,par:!(!n||!n.id)&&n.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:r,obj:!(!i||!i.id)&&i.id,par:!(!n||!n.id)&&n.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,n,r,a,o,s){var l,d,c,u,h,f,p,g,m,v,y,b,_,w;if(n=this.get_node(n),r=r===t?0:r,!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(i,n,r,a,!0)});if(e.isArray(i)){for(i=i.slice(),l=0,d=i.length;l<d;l++)this.move_node(i[l],n,r,a,o,!0)&&(n=i[l],r="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||"#"===i.id)return!1;if(c=(i.parent||"#").toString(),h=r.toString().match(/^(before|after)$/)&&"#"!==n.id?this.get_node(n.parent):n,f=i.instance?i.instance:this._model.data[i.id]?this:e.jstree.reference(i.id),p=!f||!f._id||this._id!==f._id,u=f&&f._id&&c&&f._model.data[c]&&f._model.data[c].children?e.inArray(i.id,f._model.data[c].children):-1,p)return!!this.copy_node(i,n,r,a,o)&&(f&&f.delete_node(i),!0);switch("#"===n.id&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(n.id,h.children);break;case"after":r=e.inArray(n.id,h.children)+1;break;case"inside":case"first":r=0;break;case"last":r=h.children.length;break;default:r||(r=0)}if(r>h.children.length&&(r=h.children.length),!this.check("move_node",i,h,r,{core:!0,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===h.id){for(g=h.children.concat(),m=e.inArray(i.id,g),m!==-1&&(g=e.vakata.array_remove(g,m),r>m&&r--),m=[],v=0,y=g.length;v<y;v++)m[v>=r?v+1:v]=g[v];m[r]=i.id,h.children=m,this._node_changed(h.id),this.redraw("#"===h.id)}else{for(m=i.children_d.concat(),m.push(i.id),v=0,y=i.parents.length;v<y;v++){for(g=[],w=f._model.data[i.parents[v]].children_d,b=0,_=w.length;b<_;b++)e.inArray(w[b],m)===-1&&g.push(w[b]);f._model.data[i.parents[v]].children_d=g}for(f._model.data[c].children=e.vakata.array_remove_item(f._model.data[c].children,i.id),v=0,y=h.parents.length;v<y;v++)this._model.data[h.parents[v]].children_d=this._model.data[h.parents[v]].children_d.concat(m);for(g=[],v=0,y=h.children.length;v<y;v++)g[v>=r?v+1:v]=h.children[v];for(g[r]=i.id,h.children=g,h.children_d.push(i.id),h.children_d=h.children_d.concat(i.children_d),i.parent=h.id,m=h.parents.concat(),m.unshift(h.id),w=i.parents.length,i.parents=m,m=m.concat(),v=0,y=i.children_d.length;v<y;v++)this._model.data[i.children_d[v]].parents=this._model.data[i.children_d[v]].parents.slice(0,w*-1),Array.prototype.push.apply(this._model.data[i.children_d[v]].parents,m);"#"!==c&&"#"!==h.id||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(h.id)),s||this.redraw()}return a&&a.call(this,i,h,r),this.trigger("move_node",{node:i,parent:h.id,position:r,old_parent:c,old_position:u,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id,old_instance:f,new_instance:this}),!0},copy_node:function(i,n,r,a,o,s){var l,d,c,u,h,f,p,g,m,v,y;if(n=this.get_node(n),r=r===t?0:r,!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(i,n,r,a,!0)});if(e.isArray(i)){for(i=i.slice(),l=0,d=i.length;l<d;l++)u=this.copy_node(i[l],n,r,a,o,!0),u&&(n=u,r="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||"#"===i.id)return!1;switch(g=(i.parent||"#").toString(),m=r.toString().match(/^(before|after)$/)&&"#"!==n.id?this.get_node(n.parent):n,v=i.instance?i.instance:this._model.data[i.id]?this:e.jstree.reference(i.id),y=!v||!v._id||this._id!==v._id,"#"===n.id&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(n.id,m.children);break;case"after":r=e.inArray(n.id,m.children)+1;break;case"inside":case"first":r=0;break;case"last":r=m.children.length;break;default:r||(r=0)}if(r>m.children.length&&(r=m.children.length),!this.check("copy_node",i,m,r,{core:!0,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(p=v?v.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!p)return!1;if(p.id===!0&&delete p.id,p=this._parse_model_from_json(p,m.id,m.parents.concat()),!p)return!1;for(u=this.get_node(p),i&&i.state&&i.state.loaded===!1&&(u.state.loaded=!1),c=[],c.push(p),c=c.concat(u.children_d),this.trigger("model",{nodes:c,parent:m.id}),h=0,f=m.parents.length;h<f;h++)this._model.data[m.parents[h]].children_d=this._model.data[m.parents[h]].children_d.concat(c);for(c=[],h=0,f=m.children.length;h<f;h++)c[h>=r?h+1:h]=m.children[h];return c[r]=u.id,m.children=c,m.children_d.push(u.id),m.children_d=m.children_d.concat(u.children_d),"#"===m.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),s||this.redraw("#"===m.id),a&&a.call(this,u,m,r),this.trigger("copy_node",{node:u,original:i,parent:m.id,position:r,old_parent:g,old_position:v&&v._id&&g&&v._model.data[g]&&v._model.data[g].children?e.inArray(i.id,v._model.data[g].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),u.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,n,r,l=[];for(n=0,r=t.length;n<r;n++)i=this.get_node(t[n]),i&&i.id&&"#"!==i.id&&l.push(i);return!!l.length&&(a=l,s=this,o="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,n,r,l=[];for(n=0,r=t.length;n<r;n++)i=this.get_node(t[n]),i&&i.id&&"#"!==i.id&&l.push(i);return!!l.length&&(a=l,s=this,o="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:o,node:a,inst:s}},can_paste:function(){return o!==!1&&a!==!1},paste:function(e,t){return e=this.get_node(e),!!(e&&o&&o.match(/^(copy_node|move_node)$/)&&a)&&(this[o](a,e,t)&&this.trigger("paste",{parent:e.id,node:a,mode:o}),a=!1,o=!1,void(s=!1))},clear_buffer:function(){a=!1,o=!1,s=!1,this.trigger("clear_buffer")},edit:function(t,i){if(t=this.get_node(t),!t)return!1;if(this.settings.core.check_callback===!1)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t);var n=this._data.core.rtl,r=this.element.width(),a=t.children(".jstree-anchor"),o=e("<span>"),/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
s=i,l=e("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=e("<input />",{value:s,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(){var i=o.children(".jstree-rename-input"),n=i.val();""===n&&(n=s),l.remove(),o.replaceWith(a),o.remove(),this.set_text(t,s),this.rename_node(t,e("<div></div>").text(n)[this.settings.core.force_text?"text":"html"]())===!1&&this.set_text(t,s)},this),keydown:function(e){var t=e.which;27===t&&(this.value=s),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(){d.width(Math.min(l.text("pW"+this.value).width(),r))},keypress:function(e){if(13===e.which)return!1}}),c={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""};o.attr("class",a.attr("class")).append(a.contents().clone()).append(d),a.replaceWith(o),l.css(c),d.css(c).width(Math.min(l.text("pW"+d[0].value).width(),r))[0].select()},set_theme:function(t,i){if(!t)return!1;if(i===!0){var n=this.settings.core.themes.dir;n||(n=e.jstree.path+"/themes"),i=n+"/"+t+"/style.css"}i&&e.inArray(i,l)===-1&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),l.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,i){var n,r,a,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.set_icon(t[n],i);return!0}return t=this.get_node(t),!(!t||"#"===t.id)&&(o=t.icon,t.icon=i,a=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(t):i===!0?(a.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),o===!1&&this.show_icon(t)):i.indexOf("/")===-1&&i.indexOf(".")===-1?(a.removeClass(o).css("background",""),a.addClass(i+" jstree-themeicon-custom").attr("rel",i),o===!1&&this.show_icon(t)):(a.removeClass(o).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),o===!1&&this.show_icon(t)),!0)},get_icon:function(e){return e=this.get_node(e),!(!e||"#"===e.id)&&e.icon},hide_icon:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;i<n;i++)this.hide_icon(t[i]);return!0}return t=this.get_node(t),!(!t||"#"===t)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;i<n;i++)this.show_icon(t[i]);return!0}return t=this.get_node(t),!(!t||"#"===t)&&(r=this.get_node(t,!0),t.icon=!r.length||r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var n=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,r){e.inArray(r.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&null!==r.value&&""!==e.trim(r.value)&&(i?n[r.name]=r.value:n.push(r.name))}),n},e.vakata.array_unique=function(e){var t,i,n,r=[];for(t=0,n=e.length;t<n;t++){for(i=0;i<=t&&e[t]!==e[i];i++);i===t&&r.push(e[t])}return r},e.vakata.array_remove=function(e,t,i){var n=e.slice((i||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e},e.vakata.array_remove_item=function(t,i){var n=e.inArray(i,t);return n!==-1?e.vakata.array_remove(t,n):t}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("jstree.wholerow",["jquery","jstree"],e):"object"==typeof exports?e(require("jquery"),require("jstree")):e(jQuery,jQuery.jstree)}(function(e){"use strict";if(!e.jstree.plugins.wholerow){var t=document.createElement("DIV");t.setAttribute("unselectable","on"),t.setAttribute("role","presentation"),t.className="jstree-wholerow",t.innerHTML="&#160;",e.jstree.plugins.wholerow=function(i,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,r=!1;for(i=0,n=t.selected.length;i<n;i++)r=this.get_node(t.selected[i],!0),r&&r.length&&r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(i){if(i=n.redraw_node.apply(this,arguments)){var r=t.cloneNode(!0);e.inArray(i.id,this._data.core.selected)!==-1&&(r.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===i.id&&(r.className+=" jstree-wholerow-hovered"),i.insertBefore(r,i.childNodes[0])}return i}}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("jstree.checkbox",["jquery","jstree"],e):"object"==typeof exports?e(require("jquery"),require("jstree")):e(jQuery,jQuery.jstree)}(function(e){"use strict";if(!e.jstree.plugins.checkbox){var t=document.createElement("I"),i=document.createElement("a");t.className="jstree-icon jstree-checkbox",i.className="jstree-checkbox-selectall",e.jstree.defaults.checkbox={cascadeDown:!0,cascadeUp:!1,keep_selected_style:!0,select_all_includes_self:!1,select_and_deselect_all_controls:!0,select_and_disable_children:!0,three_state:!0,visible:!0,whole_node:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.select_and_disable_children&&this.element.addClass("jstree-select-and-disable-children"),this.settings.checkbox.show_disabled_checkbox_controls&&this.element.addClass("show-disabled-checkbox-controls")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.select_and_deselect_all_controls&&this.element.on("click",".jstree-checkbox-selectall",e.proxy(function(t){var i=e(t.target),n=e.makeArray(e(t.target).parent().find("li.jstree-node").not(function(t,i){return e(i).children().is(".jstree-disabled")}));this.settings.checkbox.select_all_includes_self&&!i.siblings(".jstree-anchor").is(".jstree-disabled")&&(n=[i,n]),i.hasClass("jstree-checkbox-deselectall")?this.deselect_node(n):this.select_node(n)},this)),this.element.on("changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree close_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)).on("model.jstree",e.proxy(function(t,i){var n,r,a,o,s,l,d=this._model.data,c=d[i.parent],u=i.nodes,h=[];if(this.settings.checkbox.cascadeDown)if(c.state.selected){for(r=0,a=u.length;r<a;r++)d[u[r]].state.selected=!0,this.settings.checkbox.select_and_disable_children&&(d[u[r]].state.selected=!1,d[u[r]].state.disabled=!0);this.settings.checkbox.select_and_disable_children||(this._data.core.selected=this._data.core.selected.concat(u))}else for(r=0,a=u.length;r<a;r++)if(d[u[r]].state.selected){for(o=0,s=d[u[r]].children_d.length;o<s;o++)d[d[u[r]].children_d[o]].state.selected=!0;this.settings.checkbox.select_and_disable_children||(this._data.core.selected=this._data.core.selected.concat(d[u[r]].children_d))}if(!this.settings.checkbox.select_and_disable_children&&this.settings.checkbox.cascadeUp){for(r=0,a=c.children_d.length;r<a;r++)d[c.children_d[r]].children.length||h.push(d[c.children_d[r]].parent);for(h=e.vakata.array_unique(h),o=0,s=h.length;o<s;o++)for(c=d[h[o]];c&&"#"!==c.id;){for(n=0,r=0,a=c.children.length;r<a;r++)n+=d[c.children[r]].state.selected;if(n!==a)break;c.state.selected=!0,this._data.core.selected.push(c.id),l=this.get_node(c,!0),l&&l.length&&l.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),c=this.get_node(c.parent)}}this._data.core.selected=e.vakata.array_unique(this._data.core.selected)},this)).on("select_node.jstree",e.proxy(function(t,i){var n,r,a,o,s=i.node,l=this._model.data,d=this.get_node(s.parent),c=this.get_node(s,!0);if(this.open_node(s),this.settings.checkbox.cascadeDown)for(this.settings.checkbox.select_and_disable_children||(this._data.core.selected=e.vakata.array_unique(this._data.core.selected.concat(s.children_d))),n=0,r=s.children_d.length;n<r;n++)o=l[s.children_d[n]],o.state.selected=!0,this.settings.checkbox.select_and_disable_children&&(o.state.selected=!1,o.state.disabled=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,o.id)),o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1);if(!this.settings.checkbox.select_and_deselect_all_controls&&this.settings.checkbox.cascadeUp)for(;d&&"#"!==d.id;){for(a=0,n=0,r=d.children.length;n<r;n++)a+=l[d.children[n]].state.selected;if(a!==r)break;d.state.selected=!0,this._data.core.selected.push(d.id),o=this.get_node(d,!0),o&&o.length&&o.children(".jstree-anchor").not(".jstree-disabled").andSelf().addClass("jstree-clicked"),d=this.get_node(d.parent)}this.settings.checkbox.cascadeDown&&c.length&&(c.find(".jstree-anchor").not(".jstree-disabled").not(".jstree-disabled").addClass("jstree-clicked"),this.settings.checkbox.select_and_disable_children&&c.find(".jstree-children .jstree-anchor").addClass("jstree-disabled"))},this)).on("deselect_all.jstree",e.proxy(function(){var e,t,i,n=this.get_node("#"),r=this._model.data;for(e=0,t=n.children_d.length;e<t;e++)i=r[n.children_d[e]],i&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on("deselect_node.jstree",e.proxy(function(t,i){var n,r,a,o=i.node,s=this.get_node(o,!0);if(o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),this.settings.checkbox.cascadeDown)for(n=0,r=o.children_d.length;n<r;n++)a=this._model.data[o.children_d[n]],a.state.selected=!1,this.settings.checkbox.select_and_disable_children&&(a.state.disabled=!1),a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,a.id);if(this.settings.checkbox.cascadeUp)for(n=0,r=o.parents.length;n<r;n++)a=this._model.data[o.parents[n]],a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),a=this.get_node(o.parents[n],!0),a&&a.length&&a.children(".jstree-anchor").not(".jstree-disabled").removeClass("jstree-clicked");if(a=[],!this.settings.checkbox.select_and_deselect_all_controls){for(n=0,r=this._data.core.selected.length;n<r;n++)e.inArray(this._data.core.selected[n],o.children_d)===-1&&e.inArray(this._data.core.selected[n],o.parents)===-1&&a.push(this._data.core.selected[n]);this._data.core.selected=e.vakata.array_unique(a)}this.settings.checkbox.cascadeDown&&s.length&&s.length&&s.find(".jstree-anchor, .jstree-node").andSelf().removeClass("jstree-clicked jstree-disabled")},this)).on("delete_node.jstree",e.proxy(function(e,t){for(var i,n,r,a,o=this.get_node(t.parent),s=this._model.data;o&&"#"!==o.id;){for(r=0,i=0,n=o.children.length;i<n;i++)r+=s[o.children[i]].state.selected;if(r!==n)break;o.state.selected=!0,this._data.core.selected.push(o.id),a=this.get_node(o,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),o=this.get_node(o.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var n,r,a,o,s,l=i.is_multi,d=i.old_parent,c=this.get_node(i.parent),u=this._model.data;if(!l)for(n=this.get_node(d);n&&"#"!==n.id;){for(r=0,a=0,o=n.children.length;a<o;a++)r+=u[n.children[a]].state.selected;if(r!==o)break;n.state.selected=!0,this._data.core.selected.push(n.id),s=this.get_node(n,!0),s&&s.length&&s.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),n=this.get_node(n.parent)}for(n=c;n&&"#"!==n.id;){for(r=0,a=0,o=n.children.length;a<o;a++)r+=u[n.children[a]].state.selected;if(r===o)n.state.selected||(n.state.selected=!0,this._data.core.selected.push(n.id),s=this.get_node(n,!0),s&&s.length&&s.children(".jstree-anchor").andSelf().addClass("jstree-clicked"));else{if(!n.state.selected)break;n.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,n.id),s=this.get_node(n,!0),s&&s.length&&s.children(".jstree-anchor").andSelf().removeClass("jstree-clicked")}n=this.get_node(n.parent)}},this))},this._undetermined=function(){var t,i,n=this._model.data,r=this._data.core.selected,a=[],o=this;for(t=0,i=r.length;t<i;t++)n[r[t]]&&n[r[t]].parents&&(a=a.concat(n[r[t]].parents));if(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e,r=o.get_node(this);if(r.state.loaded)for(t=0,i=r.children_d.length;t<i;t++)e=n[r.children_d[t]],!e.state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&e.original.state.undetermined===!0&&(a.push(e.id),a=a.concat(e.parents));else r.original&&r.original.state&&r.original.state.undetermined&&r.original.state.undetermined===!0&&(a.push(r.id),a=a.concat(r.parents))}),a=e.vakata.array_unique(a),a=e.vakata.array_remove_item(a,"#"),this.element.find(".jstree-undetermined").andSelf().removeClass("jstree-undetermined"),this.settings.checkbox.select_and_deselect_all_controls){var s=this.element.find(".jstree-checkbox-selectall");s.removeClass("jstree-checkbox-deselectall fsStateHidden"),s.filter(function(){var t=e(this).siblings(".jstree-anchor");return(!o.settings.checkbox.select_all_includes_self||t.is(".jstree-clicked")||t.is(".jstree-disabled"))&&0==e(this).siblings(".jstree-children").find(".jstree-anchor").not(".jstree-disabled").not(".jstree-clicked").length}).addClass("jstree-checkbox-deselectall"),s.filter(function(){var t=e(this).siblings(".jstree-children");return t.find(".jstree-anchor.jstree-disabled").not(".jstree-clicked").length>0&&0==t.find(".jstree-open").find(".jstree-anchor").not(".jstree-disabled").length}).addClass("fsStateHidden")}if(this.settings.checkbox.select_and_disable_children&&this.element.find(".jstree-clicked .jstree-children .jstree-anchor").addClass("jstree-clicked"),this.settings.checkbox.three_state)for(t=0,i=a.length;t<i;t++)r=this.get_node(a[t],!0),r&&r.length&&(n[a[t]].state.selected||r&&r.length&&(r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"),r.addClass("jstree-undetermined")));this.element.trigger("after_redraw")},this.redraw_node=function(n,a,o){var s=this.get_node(n).id;if(n=r.redraw_node.call(this,n,a,o)){var l,d,c=null;for(l=0,d=n.childNodes.length;l<d;l++)if(n.childNodes[l]&&n.childNodes[l].className&&n.childNodes[l].className.indexOf("jstree-anchor")!==-1){c=n.childNodes[l];break}c&&(c.insertBefore(t.cloneNode(!1),c.childNodes[0]),this.settings.checkbox.select_and_deselect_all_controls&&n.className.indexOf("jstree-leaf")==-1&&n.insertBefore(i.cloneNode(!0),c.nextSibling)),this._model.data[s]&&this._model.data[s].state.selected&&(n.className=[n.className,"jstree-clicked"].join(" "))}return!o&&this.settings.checkbox.three_state&&(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),this.settings.checkbox.node_class_function&&(n.className=[n.className,this.settings.checkbox.node_class_function(this._model.data[s].data)].join(" ")),n},this.activate_node=function(t,i){return(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),r.activate_node.call(this,t,i)},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()}}}}),function(e){"use strict";function t(t,i){for(var n,r,a,o=-1;o<i.length;)for(o=i.length,n=0;n<t.length;n++)r=parseInt(t[n].id.replace(/^\D+/g,"")),i.indexOf(r)>-1&&null!==t[n].parent_id&&i.indexOf(t[n].parent_id)==-1&&i.push(t[n].parent_id);return a=e.grep(t,function(e){var t=parseInt(e.id.replace(/^\D+/g,""));return i.indexOf(t)>-1})}function i(t){return e.makeArray(t.find("."+a).map(function(){return parseInt(this.value)}))}function n(t,i,r,a,o,s){r=r||[],e.each(t,function(e,t){var l=t.id;t.state=t.state||{},0==l&&(t.li_attr={"class":"fsGroupPickerRoles"}),t.id=i+l,o&&"parent_id"in t?t.parent=null===t.parent_id?"#":i+t.parent_id:!("children"in t)&&"has_children"in t&&(t.children=t.has_children),!("text"in t)&&"name"in t&&(t.text=t.name),t.state.disabled=a||!!t.disabled||s.indexOf(l)>-1,t.state.selected=r.indexOf(l)>-1,"children"in t&&"object"==typeof t.children&&n(t.children,i,r,a,o,s)})}var r="fsGroupPickerField",a="fsGroupPickerFieldItem",o="fsGroupPickerTree",s="fsGroupPickerInheritedTree",l="fsGroupPickerSelectedTree",d="fsStateHidden";e.fn.fsGroupPicker=function(c){c=c||{};var u=c.hiddenFieldName||"selectedGroup",h=c.modelsText||"collections",f=0!=c.multiple,p=1==c.readOnly,g=0!=c.topLevelDisabled,m=c.preselectedValues||[],v=c.inheritedValues||[];return"string"==typeof m&&e.trim(m).length&&(m=m.split(",")),this.each(function(){var y=e(this),b=e('<input type="hidden" multiple="multiple" id="'+r+'" name="'+u+'">'),_=e('<div class="'+o+'">'),w=e('<div class="'+s+'"></div>'),E=e('<div class="'+s+'Container"><h2>Groups inherited from parent '+h+"</h2></div>"),T=e('<div class="'+l+" "+d+'">'),S=i(y),C=e('<button class="fsGroupPickerViewButton">View Selected</button>').on("click",function(){var t=e(this),i="View Selected"==e.trim(t.text());t.text(i?"View All":"View Selected"),_.toggleClass(d,i),T.toggleClass(d,!i),i?(T.jstree(!0)._data.core.ready=!1,T.jstree(!0).load_node("#")):0==y.find("."+a).length&&C.prop("disabled",!0)});if(f&&y.prepend(C,T),y.prepend(_,b),m.length>0)for(var x=0;x<m.length;x++)y.append('<input type="hidden" multiple="multiple" class="'+a+'" name="'+u+'" value="'+m[x]+'">');else 0==y.find("."+a).length&&C.prop("disabled",!0);f&&y.find("."+a).length&&(T.removeClass(d),_.addClass(d),C.text("View All")),f&&v.length&&(E.append(w),y.prepend(E)),_.jstree({plugins:f?["checkbox","wholerow"]:["wholerow"],checkbox:{cascadeDown:!1,select_and_disable_children:!1},core:{data:function(t,r){var a=e.merge(i(y),v);e.getJSON("/cf_endpoints/routes.cfm/constituents/groups"+("#"==t.id?"":"/"+t.id.replace(o,"")+"/children")+".json?"+(g?"":"top_level_disabled=false&")+(c.onlyGroupSpaces?"only_group_spaces":"")+(c.onlySystemGroup?"only_system_group="+c.onlySystemGroup:"")).done(function(e){c.excludeRoles&&"#"==t.id&&e.splice(0,1),n(e,o,a,p,!1,v),r(e)})}}}).on("select_node.jstree",function(e,t){f||b.nextAll("."+a).remove(),b.after(b.clone().val(t.node.id.replace(o,"")).removeAttr("id").addClass(a)),C.prop("disabled",!1),y.trigger("groupPicker:change")}).on("deselect_node.jstree",function(e,t){b.nextAll("."+a+"[value="+t.node.id.replace(o,"")+"]").remove(),0==y.find("."+a).length&&_.is(":visible")&&C.prop("disabled",!0),y.trigger("groupPicker:change")}),f?T.jstree({plugins:["checkbox","wholerow"],checkbox:{cascadeDown:!1,select_and_disable_children:!1},core:{data:function(r,a){var o=e.merge(i(y),v);o.length&&e.getJSON("/cf_endpoints/routes.cfm/constituents/groups.json?include_ancestors&group_ids="+o).done(function(e){n(e,l,o,p,!0,v),y.trigger("groupPicker:selectionLoaded",[e]),a(e),v.length&&w.jstree({core:{data:t(e,v)}})})}}}).on("select_node.jstree",function(e,t){var i=t.node.id.replace(l,"");_.find("#"+o+i).length?_.jstree(!0).select_node(o+i):b.after(b.clone().val(i).removeAttr("id").addClass(a)),y.trigger("groupPicker:change")}).on("deselect_node.jstree",function(e,t){var i=t.node.id.replace(l,"");_.find("#"+o+i).length?_.jstree(!0).deselect_node(o+i):b.nextAll("."+a+"[value="+i+"]").remove(),y.trigger("groupPicker:change")}):S.length&&e.getJSON("/cf_endpoints/routes.cfm/constituents/groups.json?include_ancestors&group_ids="+S).done(function(e){n(e,"",[],p),y.trigger("groupPicker:selectionLoaded",[e])})})}}(jQuery),function(e){"use strict";function t(e,t){return e.find(d+'[data-mediatype="'+t+'"]').length>0}var i=e.$,n="fsStateHidden",r=".fsMediaSettingsChannel",a=r+"Node",o=".fsMediaSettingsFolder",s=o+"Node",l=".fsMediaSettingsPlaylist",d=l+"Node",c=".fsMediaSettingsSelectedMediaNodes",u="fsStateSelected";e.getInternalNS("elements.media").initPicker=function(e){e.find(".fsMediaSettingsSelectedMedia input:checked").parents("ul").siblings(".fsStyleAccordionHeader").addClass(u),i(".fsElementSettingMediaPlayer, .fsElementSettingMediaGallery").on("change",'input[name="settings[subtype]"]',function(){var t=i(c),a=t.find(r+":checked"),s=t.find(o+":checked"),d="Player"==i(this).val();if(i(r+":not(#fsMediaChannelAll), "+o).toggleClass(n,d),i("#fsMediaSettingsAllChannelsNode").toggleClass(n,d),d){var h,f,p,g=".fsStyleAccordionHeader:first";a.length>0?p=a:s.length>0&&(p=s),p&&(f="fsMediaChannelAll"==a.attr("id")?p.closest("ul").siblings("ul").first().children("li").first():p.closest("li"),p==a&&(g+=", ul "+g),p.prop("checked",!1),f.find(g).addClass(u),h=f.find(l+":first"),h.prop("checked",!0),e.trigger("mediaPicker:change",h.next("label").text()))}}),e.find(".fsMediaSettingsSelectedMediaNodes").on("change",r,function(t){var r=i(this);return r.hasClass(n)?void r.prop("checked",!1):(i(c).find(o+":checked, "+l+":checked").prop("checked",!1),void e.trigger("mediaPicker:change",i(t.target).next("label").text()))}).on("change",o,function(t){var a=i(this);return a.hasClass(n)?void a.prop("checked",!1):(i(c).find(r+":checked, "+l+":checked").prop("checked",!1),void e.trigger("mediaPicker:change",i(t.target).next("label").text()))}).on("change",l,function(t){i(c).find(r+":checked, "+o+":checked").prop("checked",!1),e.trigger("mediaPicker:change",i(t.target).next("label").text())}),e.on("click",".fsStyleAccordionHeader",function(e){e.stopPropagation(),i(this).toggleClass(u)}),e.on("click",'.fsStyleAccordionHeader input[type="radio"], .fsStyleAccordionHeader label',function(e){e.stopPropagation(),i(this).closest(".fsStyleAccordionHeader").addClass(u)}),e.find(".fsMediaSettingsTypes").on("change","input[type=radio]",function(){var e=i(this).val();i(a+", "+s+", "+d).removeClass(n),e>=1&&e<=3&&i(a).each(function(){var r=i(this);t(r,e)?r.find(s).each(function(){var r=i(this);t(r,e)?r.find(d+'[data-mediatype!="'+e+'"]').addClass(n):r.addClass(n)}):r.addClass(n)})})}}(FS),/**
 * sifter.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=r(String(e||"").toLowerCase()),!e||!e.length)return[];var t,i,n,o,l=[],d=e.split(/ +/);for(t=0,i=d.length;t<i;t++){if(n=a(d[t]),this.settings.diacritics)for(o in s)s.hasOwnProperty(o)&&(n=n.replace(new RegExp(o,"g"),s[o]));l.push({string:d[t],regex:new RegExp(n,"i")})}return l},e.prototype.iterator=function(e,t){var i;i=o(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;t<i;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},i.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,r,a,o,s;i=this,e=i.prepareSearch(e,t),a=e.tokens,r=e.options.fields,o=a.length,s=e.options.nesting;var l=function(e,t){var i,n;return e?(e=String(e||""),n=e.search(t.regex),n===-1?0:(i=t.string.length/e.length,0===n&&(i+=.5),i)):0},d=function(){var e=r.length;return e?1===e?function(e,t){return l(n(t,r[0],s),e)}:function(t,i){for(var a=0,o=0;a<e;a++)o+=l(n(i,r[a],s),t);return o/e}:function(){return 0}}();return o?1===o?function(e){return d(a[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;i<o;i++){if(t=d(a[i],e),t<=0)return 0;n+=t}return n/o}:function(e){for(var t=0,i=0;t<o;t++)i+=d(a[t],e);return i/o}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var r,a,o,s,l,d,c,u,h,f,p;if(o=this,e=o.prepareSearch(e,i),p=!e.query&&i.sort_empty||i.sort,h=function(e,t){return"$score"===e?t.score:n(o.items[t.id],e,i.nesting)},l=[],p)for(r=0,a=p.length;r<a;r++)(e.query||"$score"!==p[r].field)&&l.push(p[r]);if(e.query){for(f=!0,r=0,a=l.length;r<a;r++)if("$score"===l[r].field){f=!1;break}f&&l.unshift({field:"$score",direction:"desc"})}else for(r=0,a=l.length;r<a;r++)if("$score"===l[r].field){l.splice(r,1);break}for(u=[],r=0,a=l.length;r<a;r++)u.push("desc"===l[r].direction?-1:1);return d=l.length,d?1===d?(s=l[0].field,c=u[0],function(e,i){return c*t(h(s,e),h(s,i))}):function(e,i){var n,r,a;for(n=0;n<d;n++)if(a=l[n].field,r=u[n]*t(h(a,e),h(a,i)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=i({},t);var n=t.fields,r=t.sort,a=t.sort_empty;return n&&!o(n)&&(t.fields=[n]),r&&!o(r)&&(t.sort=[r]),a&&!o(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,r,a,o=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,a=t.score||o.getScoreFunction(n),e.length?o.iterator(o.items,function(e,r){i=a(e),(t.filter===!1||i>0)&&n.items.push({score:i,id:r})}):o.iterator(o.items,function(e,t){n.items.push({score:1,id:t})}),r=o.getSortFunction(n,t),r&&n.items.sort(r),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=l(String(e||"")),t=l(String(t||"")),e>t?1:t>e?-1:0)},i=function(e){var t,i,n,r;for(t=1,i=arguments.length;t<i;t++)if(r=arguments[t])for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e},n=function(e,t,i){if(e&&t){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},r=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},a=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||"undefined"!=typeof $&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\ud800\udf01\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},l=function(){var e,t,i,n,r="",a={};for(i in s)if(s.hasOwnProperty(i))for(n=s[i].substring(2,s[i].length-1),r+=n,e=0,t=n.length;e<t;e++)a[n.charAt(e)]=i;var o=new RegExp("["+r+"]","g");return function(e){return e.replace(o,function(e){return a[e]}).toLowerCase()}}();return e}),/**
 * microplugin.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,r,a=this,o=[];if(a.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;i<n;i++)"string"==typeof e[i]?o.push(e[i]):(a.plugins.settings[e[i].name]=e[i].options,o.push(e[i].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(a.plugins.settings[r]=e[r],o.push(r));for(;o.length;)a.require(o.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),/**
 * selectize.js (v0.12.3)
 * Copyright (c) 20132015 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var r=e.data.search(i);if(r>=0&&e.data.length>0){var a=e.data.match(i),o=document.createElement("span");o.className="highlight";var s=e.splitText(r),l=(s.splitText(a[0].length),s.cloneNode(!0));o.appendChild(l),s.parentNode.replaceChild(o,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var d=0;d<e.childNodes.length;++d)d+=n(e.childNodes[d]);return t};return e.each(function(){n(this)})}};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var r=function(){};r.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=r.prototype[t[i]]};var a=/Mac/.test(navigator.userAgent),o=65,s=13,l=27,d=37,c=38,u=80,h=39,f=40,p=78,g=8,m=46,v=16,y=a?91:17,b=a?18:17,_=9,w=1,E=2,T=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,S=function(e){return"undefined"!=typeof e},C=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},x=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},k={};k.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},k.after=function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}};var A=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},I=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},D=function(e,t,i){var n,r=e.trigger,a={};e.trigger=function(){var i=arguments[0];return t.indexOf(i)===-1?r.apply(e,arguments):void(a[i]=arguments)},i.apply(e,[]),e.trigger=r;for(n in a)a.hasOwnProperty(n)&&r.apply(e,a[n])},M=function(e,t,i,n){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,n.apply(this,[t])})},P=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},R=function(e,t,i){var n,r,a={};if(i)for(n=0,r=i.length;n<r;n++)a[i[n]]=e.css(i[n]);else a=e.css();t.css(a)},O=function(t,i){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");R(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=n.width();return n.remove(),r},N=function(e){var t=null,i=function(i,n){var r,a,o,s,l,d,c,u;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||e.data("grow")!==!1)&&(r=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(a=i.keyCode,o=a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||32===a,a===m||a===g?(u=P(e[0]),u.length?r=r.substring(0,u.start)+r.substring(u.start+u.length):a===g&&u.start?r=r.substring(0,u.start-1)+r.substring(u.start+1):a===m&&"undefined"!=typeof u.start&&(r=r.substring(0,u.start)+r.substring(u.start+1))):o&&(d=i.shiftKey,c=String.fromCharCode(i.keyCode),c=d?c.toUpperCase():c.toLowerCase(),r+=c)),s=e.attr("placeholder"),!r&&s&&(r=s),l=O(r,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},L=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},F=function(e,t){t||(t={});var i="Selectize";console.error(i+": "+e),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())},j=function(i,n){var r,a,o,s,l=this;s=i[0],s.selectize=l;var d=window.getComputedStyle&&window.getComputedStyle(s,null);if(o=d?d.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,o=o||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?w:E,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++j.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:I(l.onSearchChange,n.loadThrottle)}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(r=0,a=l.settings.options.length;r<a;r++)l.registerOption(l.settings.options[r]);delete l.settings.options}if(l.settings.optgroups){for(r=0,a=l.settings.optgroups.length;r<a;r++)l.registerOptionGroup(l.settings.optgroups[r]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return r.mixin(j),"undefined"!=typeof i?i.mixin(j):F("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),e.extend(j.prototype,{setup:function(){var t,i,n,r,o,s,l,d,c,u,h=this,f=h.settings,p=h.eventNS,g=e(window),m=e(document),_=h.$input;if(l=h.settings.mode,d=_.attr("class")||"",t=e("<div>").addClass(f.wrapperClass).addClass(d).addClass(l),i=e("<div>").addClass(f.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",_.is(":disabled")?"-1":h.tabIndex),s=e(f.dropdownParent||t),r=e("<div>").addClass(f.dropdownClass).addClass(l).hide().appendTo(s),o=e("<div>").addClass(f.dropdownContentClass).appendTo(r),(u=_.attr("id"))&&(n.attr("id",u+"-selectized"),e("label[for='"+u+"']").attr("for",u+"-selectized")),h.settings.copyClassesToDropdown&&r.addClass(d),t.css({width:_[0].style.width}),h.plugins.names.length&&(c="plugin-"+h.plugins.names.join(" plugin-"),t.addClass(c),r.addClass(c)),(null===f.maxItems||f.maxItems>1)&&h.tagType===w&&_.attr("multiple","multiple"),h.settings.placeholder&&n.attr("placeholder",f.placeholder),!h.settings.splitOn&&h.settings.delimiter){var E=h.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");h.settings.splitOn=new RegExp("\\s*"+E+"+\\s*")}_.attr("autocorrect")&&n.attr("autocorrect",_.attr("autocorrect")),_.attr("autocapitalize")&&n.attr("autocapitalize",_.attr("autocapitalize")),h.$wrapper=t,h.$control=i,h.$control_input=n,h.$dropdown=r,h.$dropdown_content=o,r.on("mouseenter","[data-selectable]",function(){return h.onOptionHover.apply(h,arguments)}),r.on("mousedown click","[data-selectable]",function(){return h.onOptionSelect.apply(h,arguments)}),M(i,"mousedown","*:not(input)",function(){return h.onItemSelect.apply(h,arguments)}),N(n),i.on({mousedown:function(){return h.onMouseDown.apply(h,arguments)},click:function(){return h.onClick.apply(h,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return h.onKeyDown.apply(h,arguments)},keyup:function(){return h.onKeyUp.apply(h,arguments)},keypress:function(){return h.onKeyPress.apply(h,arguments)},resize:function(){h.positionDropdown.apply(h,[])},blur:function(){return h.onBlur.apply(h,arguments)},focus:function(){return h.ignoreBlur=!1,h.onFocus.apply(h,arguments)},paste:function(){return h.onPaste.apply(h,arguments)}}),m.on("keydown"+p,function(e){h.isCmdDown=e[a?"metaKey":"ctrlKey"],h.isCtrlDown=e[a?"altKey":"ctrlKey"],h.isShiftDown=e.shiftKey}),m.on("keyup"+p,function(e){e.keyCode===b&&(h.isCtrlDown=!1),e.keyCode===v&&(h.isShiftDown=!1),e.keyCode===y&&(h.isCmdDown=!1)}),m.on("mousedown"+p,function(e){if(h.isFocused){if(e.target===h.$dropdown[0]||e.target.parentNode===h.$dropdown[0])return!1;h.$control.has(e.target).length||e.target===h.$control[0]||h.blur(e.target)}}),g.on(["scroll"+p,"resize"+p].join(" "),function(){h.isOpen&&h.positionDropdown.apply(h,arguments)}),g.on("mousemove"+p,function(){h.ignoreHover=!1}),this.revertSettings={$children:_.children().detach(),tabindex:_.attr("tabindex")},_.attr("tabindex",-1).hide().after(h.$wrapper),e.isArray(f.items)&&(h.setValue(f.items),delete f.items),T&&_.on("invalid"+p,function(e){e.preventDefault(),h.isInvalid=!0,h.refreshState()}),h.updateOriginalInput(),h.refreshItems(),h.refreshState(),h.updatePlaceholder(),h.isSetup=!0,_.is(":disabled")&&h.disable(),h.on("change",this.onChange),_.data("selectize",h),_.addClass("selectized"),h.trigger("initialize"),f.preload===!0&&h.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,n=t.settings.optgroupLabelField,r={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},r,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();e(t.target);if(i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;return i.isFull()||i.isInputHidden||i.isLocked?void t.preventDefault():void(i.settings.splitOn&&setTimeout(function(){var t=i.$control_input.val();if(t.match(i.settings.splitOn))for(var n=e.trim(t).split(i.settings.splitOn),r=0,a=n.length;r<a;r++)i.createItem(n[r])},0))},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==_&&e.preventDefault());switch(e.keyCode){case o:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case p:if(!e.ctrlKey||e.altKey)break;case f:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case u:if(!e.ctrlKey||e.altKey)break;case c:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case s:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case d:return void t.advanceSelection(-1,e);case h:return void t.advanceSelection(1,e);case _:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case g:case m:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(a?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,r=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n=e(t.currentTarget),n.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(i=n.attr("data-value"),"undefined"!=typeof i&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(i),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(i))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var i=t?[]:["change"];D(this,i,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,r,a,o,s,l,d,c,u=this;if("single"!==u.settings.mode){if(t=e(t),!t.length)return e(u.$activeItems).removeClass("active"),u.$activeItems=[],void(u.isFocused&&u.showInput());if(n=i&&i.type.toLowerCase(),"mousedown"===n&&u.isShiftDown&&u.$activeItems.length){for(c=u.$control.children(".active:last"),o=Array.prototype.indexOf.apply(u.$control[0].childNodes,[c[0]]),s=Array.prototype.indexOf.apply(u.$control[0].childNodes,[t[0]]),o>s&&(d=o,o=s,s=d),r=o;r<=s;r++)l=u.$control[0].childNodes[r],u.$activeItems.indexOf(l)===-1&&(e(l).addClass("active"),u.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&u.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(a=u.$activeItems.indexOf(t[0]),u.$activeItems.splice(a,1),t.removeClass("active")):u.$activeItems.push(t.addClass("active")[0]):(e(u.$activeItems).removeClass("active"),u.$activeItems=[t.addClass("active")[0]]);u.hideInput(),this.isFocused||u.focus()}},setActiveOption:function(t,i,n){var r,a,o,s,l,d=this;d.$activeOption&&d.$activeOption.removeClass("active"),d.$activeOption=null,t=e(t),t.length&&(d.$activeOption=t.addClass("active"),!i&&S(i)||(r=d.$dropdown_content.height(),a=d.$activeOption.outerHeight(!0),i=d.$dropdown_content.scrollTop()||0,o=d.$activeOption.offset().top-d.$dropdown_content.offset().top+i,s=o,l=o-r+a,o+a>r+i?d.$dropdown_content.stop().animate({scrollTop:l},n?d.settings.scrollDuration:0):o<i&&d.$dropdown_content.stop().animate({scrollTop:s},n?d.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var i,n,r,a=this,o=a.settings,s=this.getSearchOptions();if(o.score&&(r=a.settings.score.apply(this,[t]),"function"!=typeof r))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==a.lastQuery?(a.lastQuery=t,n=a.sifter.search(t,e.extend(s,{score:r})),a.currentResults=n):n=e.extend(!0,{},a.currentResults),o.hideSelected)for(i=n.items.length-1;i>=0;i--)a.items.indexOf(C(n.items[i].id))!==-1&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,r,a,o,s,l,d,c,u,h,f,p,g,m,v,y;"undefined"==typeof t&&(t=!0);var b=this,_=e.trim(b.$control_input.val()),w=b.search(_),E=b.$dropdown_content,T=b.$activeOption&&C(b.$activeOption.attr("data-value"));for(o=w.items.length,"number"==typeof b.settings.maxOptions&&(o=Math.min(o,b.settings.maxOptions)),s={},l=[],i=0;i<o;i++)for(d=b.options[w.items[i].id],c=b.render("option",d),u=d[b.settings.optgroupField]||"",h=e.isArray(u)?u:[u],r=0,a=h&&h.length;r<a;r++)u=h[r],b.optgroups.hasOwnProperty(u)||(u=""),s.hasOwnProperty(u)||(s[u]=document.createDocumentFragment(),l.push(u)),s[u].appendChild(c);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var i=b.optgroups[e].$order||0,n=b.optgroups[t].$order||0;return i-n}),f=document.createDocumentFragment(),i=0,o=l.length;i<o;i++)u=l[i],b.optgroups.hasOwnProperty(u)&&s[u].childNodes.length?(p=document.createDocumentFragment(),p.appendChild(b.render("optgroup_header",b.optgroups[u])),p.appendChild(s[u]),f.appendChild(b.render("optgroup",e.extend({},b.optgroups[u],{html:L(p),dom:p})))):f.appendChild(s[u]);if(E.html(f),b.settings.highlight&&w.query.length&&w.tokens.length)for(E.removeHighlight(),i=0,o=w.tokens.length;i<o;i++)n(E,w.tokens[i].regex);if(!b.settings.hideSelected)for(i=0,o=b.items.length;i<o;i++)b.getOption(b.items[i]).addClass("selected");g=b.canCreate(_),g&&(E.prepend(b.render("option_create",{input:_})),y=e(E[0].childNodes[0])),b.hasOptions=w.items.length>0||g,b.hasOptions?(w.items.length>0?(v=T&&b.getOption(T),v&&v.length?m=v:"single"===b.settings.mode&&b.items.length&&(m=b.getOption(b.items[0])),m&&m.length||(m=y&&!b.settings.addPrecedence?b.getAdjacentOption(y,1):E.find("[data-selectable]:first"))):m=y,b.setActiveOption(m),t&&!b.isOpen&&b.open()):(b.setActiveOption(null),t&&b.isOpen&&b.close())},addOption:function(t){var i,n,r,a=this;if(e.isArray(t))for(i=0,n=t.length;i<n;i++)a.addOption(t[i]);else(r=a.registerOption(t))&&(a.userOptions[r]=!0,a.lastQuery=null,a.trigger("option_add",r,t))},registerOption:function(e){var t=C(e[this.settings.valueField]);return"undefined"!=typeof t&&null!==t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=C(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,r,a,o,s,l,d,c=this;if(t=C(t),a=C(i[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof a)throw new Error("Value must be set in option data");d=c.options[t].$order,a!==t&&(delete c.options[t],o=c.items.indexOf(t),o!==-1&&c.items.splice(o,1,a)),i.$order=i.$order||d,c.options[a]=i,s=c.renderCache.item,l=c.renderCache.option,s&&(delete s[t],delete s[a]),l&&(delete l[t],delete l[a]),c.items.indexOf(a)!==-1&&(n=c.getItem(t),r=e(c.render("item",i)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=C(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(e){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},getElementWithValue:function(t,i){if(t=C(t),"undefined"!=typeof t&&null!==t)for(var n=0,r=i.length;n<r;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){for(var n=e.isArray(t)?t:[t],r=0,a=n.length;r<a;r++)this.isPending=r<a-1,this.addItem(n[r],i)},addItem:function(t,i){var n=i?[]:["change"];D(this,n,function(){var n,r,a,o,s,l=this,d=l.settings.mode;return t=C(t),l.items.indexOf(t)!==-1?void("single"===d&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===d&&l.clear(i),"multi"===d&&l.isFull()||(n=e(l.render("item",l.options[t])),s=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!s&&l.isFull())&&l.refreshState(),l.isSetup&&(a=l.$dropdown_content.find("[data-selectable]"),l.isPending||(r=l.getOption(t),o=l.getAdjacentOption(r,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==d),o&&l.setActiveOption(l.getOption(o))),!a.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.updateOriginalInput({silent:i})))))})},removeItem:function(e,t){var i,n,r,a=this;i="object"==typeof e?e:a.getItem(e),e=C(i.attr("data-value")),n=a.items.indexOf(e),n!==-1&&(i.remove(),i.hasClass("active")&&(r=a.$activeItems.indexOf(i[0]),a.$activeItems.splice(r,1)),a.items.splice(n,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(e)&&a.removeOption(e,t),n<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:t}),a.positionDropdown(),a.trigger("item_remove",e,i))},createItem:function(t,i){var n=this,r=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return a(),!1;n.lock();var o="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},s=A(function(e){if(n.unlock(),!e||"object"!=typeof e)return a();var t=C(e[n.settings.valueField]);return"string"!=typeof t?a():(n.setTextboxValue(""),n.addOption(e),n.setCaret(r),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void a(e))}),l=o.apply(this,[t,s]);return"undefined"!=typeof l&&s(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var t=this,i=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,r,a=this;if(e=e||{},a.tagType===w){for(n=[],t=0,i=a.items.length;t<i;t++)r=a.options[a.items[t]][a.settings.labelField]||"",n.push('<option value="'+x(a.items[t])+'" selected="selected">'+x(r)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),a.$input.html(n.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(t):e(this.$control[0].childNodes[i]).before(t),this.setCaret(i+1)},deleteSelection:function(t){var i,n,r,a,o,s,l,d,c,u=this;if(r=t&&t.keyCode===g?-1:1,a=P(u.$control_input[0]),u.$activeOption&&!u.settings.hideSelected&&(l=u.getAdjacentOption(u.$activeOption,-1).attr("data-value")),o=[],u.$activeItems.length){for(c=u.$control.children(".active:"+(r>0?"last":"first")),s=u.$control.children(":not(input)").index(c),r>0&&s++,i=0,n=u.$activeItems.length;i<n;i++)o.push(e(u.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(u.isFocused||"single"===u.settings.mode)&&u.items.length&&(r<0&&0===a.start&&0===a.length?o.push(u.items[u.caretPos-1]):r>0&&a.start===u.$control_input.val().length&&o.push(u.items[u.caretPos]));if(!o.length||"function"==typeof u.settings.onDelete&&u.settings.onDelete.apply(u,[o])===!1)return!1;for("undefined"!=typeof s&&u.setCaret(s);o.length;)u.removeItem(o.pop());return u.showInput(),u.positionDropdown(),u.refreshOptions(!0),l&&(d=u.getOption(l),d.length&&u.setActiveOption(d)),!0},advanceSelection:function(e,t){var i,n,r,a,o,s,l=this;0!==e&&(l.rtl&&(e*=-1),i=e>0?"last":"first",n=P(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(a=l.$control_input.val().length,o=e<0?0===n.start&&0===n.length:n.start===a,o&&!a&&l.advanceCaret(e,t)):(s=l.$control.children(".active:"+i),s.length&&(r=l.$control.children(":not(input)").index(s),l.setActiveItem(null),l.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var i,n,r=this;0!==e&&(i=e>0?"next":"prev",r.isShiftDown?(n=r.$control_input[i](),n.length&&(r.hideInput(),r.setActiveItem(n),t&&t.preventDefault())):r.setCaret(r.caretPos+e))},setCaret:function(t){var i=this;if(t="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,t)),!i.isPending){var n,r,a,o;for(a=i.$control.children(":not(input)"),n=0,r=a.length;n<r;n++)o=e(a[n]).detach(),n<t?i.$control_input.before(o):i.$control.append(o)}i.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(t,i){var n,r,a="",o=!1,s=this;return"option"!==t&&"item"!==t||(n=C(i[s.settings.valueField]),o=!!n),o&&(S(s.renderCache[t])||(s.renderCache[t]={}),s.renderCache[t].hasOwnProperty(n))?s.renderCache[t][n]:(a=e(s.settings.render[t].apply(this,[i,x])),"option"===t||"option_create"===t?a.attr("data-selectable",""):"optgroup"===t&&(r=i[s.settings.optgroupValueField]||"",a.attr("data-group",r)),"option"!==t&&"item"!==t||a.attr("data-value",n||""),o&&(s.renderCache[t][n]=a[0]),a[0])},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&("function"!=typeof i||i.apply(t,[e]))&&("string"!=typeof i||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),j.count=0,j.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),r=n.dataAttr,a=n.labelField,o=n.valueField,s=n.optgroupField,l=n.optgroupLabelField,d=n.optgroupValueField,c=function(t,i){var s,l,d,c,u=t.attr(r);if(u)for(i.options=JSON.parse(u),s=0,l=i.options.length;s<l;s++)i.items.push(i.options[s][o]);else{var h=e.trim(t.val()||"");if(!n.allowEmptyOption&&!h.length)return;for(d=h.split(n.delimiter),s=0,l=d.length;s<l;s++)c={},c[a]=d[s],c[o]=d[s],i.options.push(c);i.items=d}},u=function(t,i){var c,u,h,f,p=i.options,g={},m=function(e){var t=r&&e.attr(r);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,r){t=e(t);var l=C(t.val());
if(l||n.allowEmptyOption)if(g.hasOwnProperty(l)){if(r){var d=g[l][s];d?e.isArray(d)?d.push(r):g[l][s]=[d,r]:g[l][s]=r}}else{var c=m(t)||{};c[a]=c[a]||t.text(),c[o]=c[o]||l,c[s]=c[s]||r,g[l]=c,p.push(c),t.is(":selected")&&i.items.push(l)}},y=function(t){var n,r,a,o,s;for(t=e(t),a=t.attr("label"),a&&(o=m(t)||{},o[l]=a,o[d]=a,i.optgroups.push(o)),s=e("option",t),n=0,r=s.length;n<r;n++)v(s[n],a)};for(i.maxItems=t.attr("multiple")?null:1,f=t.children(),c=0,u=f.length;c<u;c++)h=f[c].tagName.toLowerCase(),"optgroup"===h?y(f[c]):"option"===h&&v(f[c])};return this.each(function(){if(!this.selectize){var r,a=e(this),o=this.tagName.toLowerCase(),s=a.attr("placeholder")||a.attr("data-placeholder");s||n.allowEmptyOption||(s=a.children('option[value=""]').text());var l={placeholder:s,options:[],optgroups:[],items:[]};"select"===o?u(a,l):c(a,l),r=new j(a,e.extend(!0,{},i,l,t))}})},e.fn.selectize.defaults=j.defaults,e.fn.selectize.support={validity:T},j.define("drag_drop",function(){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=function(){var e=t.lock;return function(){var i=t.$control.data("sortable");return i&&i.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;return function(){var i=t.$control.data("sortable");return i&&i.enable(),e.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var i=t.$activeItems?t.$activeItems.slice():null,r=[];n.children("[data-value]").each(function(){r.push(e(this).attr("data-value"))}),t.setValue(r),t.setActiveItem(i)}})}}()}}),j.define("dropdown_header",function(t){var i=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=e(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)}}()}),j.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var n,r,a,o;return!this.isOpen||t.keyCode!==d&&t.keyCode!==h?e.apply(this,arguments):(i.ignoreHover=!0,o=this.$activeOption.closest("[data-group]"),n=o.find("[data-selectable]").index(this.$activeOption),o=t.keyCode===d?o.prev("[data-group]"):o.next("[data-group]"),a=o.find("[data-selectable]"),r=a.eq(Math.min(a.length-1,n)),void(r.length&&this.setActiveOption(r)))}}();var n=function(){var e,t=n.width,i=document;return"undefined"==typeof t&&(e=i.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=n.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},r=function(){var r,a,o,s,l,d,c;if(c=e("[data-group]",i.$dropdown_content),a=c.length,a&&i.$dropdown_content.width()){if(t.equalizeHeight){for(o=0,r=0;r<a;r++)o=Math.max(o,c.eq(r).height());c.css({height:o})}t.equalizeWidth&&(d=i.$dropdown_content.innerWidth()-n(),s=Math.round(d/a),c.css({width:s}),a>1&&(l=d-s*(a-1),c.eq(a-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(k.after(this,"positionDropdown",r),k.after(this,"refreshOptions",r))}),j.define("remove_button",function(t){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=function(t,i){i.className="remove-single";var n=t,r='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+x(i.title)+'">'+i.label+"</a>",a=function(e,t){return e+t};t.setup=function(){var o=n.setup;return function(){if(i.append){var s=e(n.$input.context).attr("id"),l=(e("#"+s),n.settings.render.item);n.settings.render.item=function(){return a(l.apply(t,arguments),r)}}o.apply(t,arguments),t.$control.on("click","."+i.className,function(e){e.preventDefault(),n.isLocked||n.clear()})}}()},n=function(t,i){var n=t,r='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+x(i.title)+'">'+i.label+"</a>",a=function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)};t.setup=function(){var o=n.setup;return function(){if(i.append){var s=n.settings.render.item;n.settings.render.item=function(){return a(s.apply(t,arguments),r)}}o.apply(t,arguments),t.$control.on("click","."+i.className,function(t){if(t.preventDefault(),!n.isLocked){var i=e(t.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()};return"single"===this.settings.mode?void i(this,t):void n(this,t)}),j.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(t){var n,r;return t.keyCode===g&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1,n>=0&&n<this.items.length)?(r=this.options[this.items[n]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void t.preventDefault()):i.apply(this,arguments)}}()}),j}),Selectize.define("fsSelectize",function(){"use strict";function e(e){var i,n=$(t.$control[0]).find(".fsNumSelected");i=e+" selected",n.length?e>0?n.html(i):n.remove():t.$control.prepend('<div class="fsNumSelected">'+i+"</div>")}var t=this,i=37,n=39,r=8,a=46;t.onKeyDown=function(){var e=t.onKeyDown;return function(o){switch(o.keyCode){case r:case a:"single"==t.settings.mode?t.clear():$(o.target.parentElement).find(".active").length>0&&(t.clear(),t.trigger("item_remove","multiselect-none"));break;case i:case n:return;default:return e.apply(t,[o])}}}(),t.onOptionSelect=function(){var i=t.onOptionSelect,n=!1;return function(r){var a;if(r.preventDefault&&(r.preventDefault(),r.stopPropagation()),"mousedown"==r.type)n=!0;else if("click"==r.type&&n)return void(n=!1);if(a=$(r.currentTarget),a.hasClass("selected")){if("single"==t.settings.mode)return;t.removeItem(a),a.removeClass("selected"),t.refreshOptions(),e(t.items.length),t.positionDropdown()}else{var o=a.attr("data-value");"selectAll"==o?(t.addAllItems(),t.trigger("item_add","multiselect-all","x")):"selectNone"==o?(t.clear(),$(t.$dropdown_content[0]).find(".option.selected").removeClass("selected"),t.trigger("item_remove","multiselect-none")):i.apply(t,[r])}}}(),t.refreshOptions=function(){var e=t.refreshOptions;return function(i){if(e.apply(t,[i]),"multi"==t.settings.mode&&0==t.$control_input.val().length){var n,r=$(t)[0].$input.data("maxitems"),a=$(t.$dropdown_content[0]).find(".option:not(.fsSelectAll)").length;a==t.items.length?n="None":(null==r||a<r)&&(n="All"),n&&$('<div class="fsSelectAll option" data-selectable="" data-value="select'+n+'"> - Select '+n+" - </div>").prependTo(t.$dropdown_content)}var o=$.map(t.items,function(e){return t.options[e].text});$(t.$control).prop("title",o.join(", "))}}(),t.addItem=function(){var e=t.addItem;return function(){if("multi"==t.settings.mode){if(t.isFull())return void alert("This field is limited to "+t.settings.maxItems+" items.");var i=t.settings.maxItems;t.settings.maxItems=null,e.apply(t,arguments),t.settings.maxItems=i}else e.apply(t,arguments)}}(),t.open=function(){var e=t.open;return function(){var i=t.settings.maxItems;t.settings.maxItems=null,e.apply(t),t.settings.maxItems=i}}(),t.insertAtCaret=function(){return function(){e(t.items.length)}}(),t.clear=function(){var e=t.clear;return function(){var i=t.items.length;e.apply(t,arguments),i&&(t.refreshOptions(),t.positionDropdown())}}(),t.addAllItems=function(){var i;$(t.$dropdown_content[0]).find(".option:not(.selected, .fsSelectAll)").each(function(e,n){i=$(n).attr("data-value"),t.items.indexOf(i)==-1&&t.options.hasOwnProperty(i)&&!t.isFull()&&t.items.splice(t.caretPos,0,i)}),e(t.items.length),t.refreshState(),t.positionDropdown(),t.updatePlaceholder(),t.updateOriginalInput(),t.refreshOptions()}}),function(e,t,i){"use strict";function n(t,n,r){n.open(u(i.body)),a(r,t),e.util.updateDynamicImages(r)}function r(e){return{timedDelayOption:e.data("delay-option"),timedDelayTime:1e3*parseInt(e.data("delay-time"))}}function a(e,t){if(!(e.length<=1)){var i=u(g);if(i.hasClass("slick-initialized"))return i;var n=u('<span id="fsPagePopDotsContainer"></span>'),r=u('<button data-role="none" id="fsPagePopNextButton" aria-label="Next" tabindex="0" role="button"><span>&#8250;</span></button>'),a=u('<button data-role="none" id="fsPagePopPrevButton" aria-label="Previous" tabindex="0" role="button"><span>&#8249;</span></button>'),o=e.parent();return u('<div id="fsPagePopPaging"></div>').append(a).append(n).append(r).prependTo(t),o.slick({appendDots:n,dots:!0,dotsClass:"fsPagePopDots",infinite:!1,nextArrow:r,prevArrow:a}),o}}function o(){return f.scrollTop()>=(h.height()-f.height())/2}function s(e,t,i){f.height()>=h.height()?n(e,t,i):f.on("scroll.pagepops",c.throttle(function(){o()&&(f.off("scroll.pagepops"),n(e,t,i))},1e3))}function l(e,t,i,r){setTimeout(function(){n(e,t,i)},r)}function d(e){return"page_pop_"+e.data("id")}var c=e._,u=e.$,h=u(i),f=u(t),p=e.getInternalNS("dialogs"),g=i.getElementById("fsPagePopCollection"),m=e.getInternalNS("elements.utils").inDraftMode(),v=e.localStorage;g&&u(function(){var t,o,c=u('<div id="fsPagePopControls"></div>'),h=u(g),f=h.find(".fsPagePop"),y=p.Dialog({dialogClass:"fsPagePopDialog",id:"fsPagePop",removeOnClose:!1}),b=!1;if(f.length){if(u('<button id="fsPagePopNotification" aria-label="View Page Pops"><span>'+f.length+"</span></button>").appendTo(i.body).click(function(){y.open(u(this)),t=a(f,c),e.util.updateDynamicImages(h)}),u('<button id="fsPagePopHideButton">Don\'t Show Again</button>').appendTo(c).click(function(){var e=t?t.find(".slick-current"):f;v.setItem(d(e),new Date),y.close()}),f.length>1)o=f.get().sort(function(e,t){var i,n,r=u(e),a=u(t),o=v.getItem(d(r)),s=v.getItem(d(a)),l=!!o,c=!!s,h=r.data("reset-at"),f=a.data("reset-at");return h&&l&&new Date(h)>new Date(o)&&(l=!1),f&&c&&new Date(f)>new Date(s)&&(c=!1),b=b||!l||!c,l==c?(i=new Date(r.data("visible-at")),n=new Date(a.data("visible-at")),n-i):o?1:-1});else{var _=f.first(),w=v.getItem(d(_)),E=!!w,T=_.data("reset-at");b=!E||new Date(T)>new Date(w),o=f}if(f=u(o),h.empty().append(f),y.setContent(g),g.hidden=!1,y.addContent(c),!m&&b)if(y.attachToPage(),1==f.length){var S=r(f);"time"==S.timedDelayOption?l(c,y,f,S.timedDelayTime):"scroll"==S.timedDelayOption?s(c,y,f):n(c,y,f)}else n(c,y,f)}})}(FS,window,document),function(e){"use strict";var t,i=e.$,n=e.getNS("SSO"),r="fsStateLoaded";n.embedFaria=function(){var e=i(".fsFariaLinks:not(."+r+")");e.length&&(t||(t=i.get("/fs/sso/fariaLinks.cfm")),t.done(function(t){e.addClass(r).html(t)}))}}(FS),window.jQuery=FS._jQueryTemp;