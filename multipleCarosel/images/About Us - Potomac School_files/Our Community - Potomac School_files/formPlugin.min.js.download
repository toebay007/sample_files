function configureWaitlistClaim(){var a=0,b={},c=[],d=[];if(wlMode){for(a=0;a<wlClaim.length;a++)b=wlClaim[a],c=$j(":input[data-elbindid='"+b.bindID+"']"),d=$j(c).parents(".cf_form"),$j(c).is("input, select")?$j(c).attr("data-max",b.offered).attr("data-waitlistkey",b.wlKey).addClass("wlClaim").parents("div.elementContainer").addClass("wlShow").show():$j(c).is("fieldset")&&$j(c).find(":checkbox, :radio").each(function(){$j(this).attr("data-max",b.offered).attr("data-waitlistkey",b.wlKey).addClass("wlClaim").parents("div.elementContainer").addClass("wlShow").show()});$j(d).find("input.reg:not(.wlno), input.reg:not(.wlClaim), select.regSel:not(.wlClaim) option:selected, input.addseat:not(.wlClaim), input.rsvp:not(.wlClaim)").each(function(){$j(this).parents("div.elementContainer").hide()})}}function getBindIDsBySeatingID(a){var b=[];for(var c in rg.lookup)rg.lookup.hasOwnProperty(c)&&Number(rg.lookup[""+c])===Number(a)&&b.push(c);return b}function generateCustomField(a,b){var c=$j.trim(b["customLbl"+a]),d=b["customType"+a],e="";if("text"===d)e="<label>"+c+' <input type="text" class="cust cust'+a+'" value=""></label>';else{var f=b["customList"+a].split("\n"),g="";$j(f).each(function(){g+='<option value="'+$j.trim(this)+'">'+$j.trim(this)+"</option>"}),e="<label>"+c+' <select class="cust cust'+a+'">'+g+"</select></label>"}return e}function configureAttendeeInputs(a){var b=$j("#"+a),c="";return"number"===$j.type(Number(ro.attendeeSettings.collectInfo))&&1===Number(ro.attendeeSettings.collectInfo)&&ro.attendeeSettings.fields.length>0&&$j(b).find("input.reg:not(.wlno), select.regSel option:selected, input.addseat, input.rsvp:checked").each(function(){var a=$j(this).parents("div.elementBody"),b=$j(this).attr("data-elbindid"),d=0,e=$j(a).find("span.attendeeInfo").length,f=0,g=0,h="",i={nameFull:'<label>Full Name <input type="text" class="nfl" value=""></label>',nameFirst:'<label>First <input type="text" class="nf" value=""></label>',nameLast:'<label>Last <input type="text" class="nl" value=""></label>',email:'<label>Email <input type="text" class="e" value=""></label>',custom1:generateCustomField(1,ro.attendeeSettings.customDataFields),custom2:generateCustomField(2,ro.attendeeSettings.customDataFields),custom3:generateCustomField(3,ro.attendeeSettings.customDataFields)},j=0,k=0;if("option"===$j(this).tagName().toLowerCase()&&(b=+$j(this).parent().attr("data-elbindid")),d=rg.lookup[""+b],1===Number(rg.seating[""+d].hasAttInfo)){if(j=$j(this).hasClass("addseat")?$j(this).is(":checked")?1:0:Number("number"===$j.type(Number($j(this).attr("data-value")))&&Number($j(this).attr("data-value"))>=0?$j(this).attr("data-value"):this.value),k=j-e,k>0){for(f=0;k>f;f++){for(h+='<span class="attendeeInfo"><span class="lbl">Attendee '+(j>1?e+f+1+" ":"")+"Info</span>",g=0;g<ro.attendeeSettings.fields.length;g++)h+=i[ro.attendeeSettings.fields[g]];h+="</span>"}c=$j(h),1===Number(rg.seating[""+d].attInfoReq)?($j(c).find("input.nfl, input.nf, input.nl, input.cust").addClass("fsValidate[required]").end().find("input.e").addClass("fsValidate[required,email]").end().find("input.nfl, input.nf, input.nl, input.e, input.cust").each(function(){$j(this).attr("id",$j.getUUID("ai_").replace(/\-/g,"_"))}),$j(a).append($j(c)).find("span.attendeeInfo").each(function(){$j(this).attr("id",$j.getUUID("ai_").replace(/\-/g,"_")).fsValidator()})):$j(a).append($j(c))}if(0>k){for(f=0;f<Math.abs(k);f++)$j(a).find("span.attendeeInfo:last").remove();$j(a).find("span.reg.waitlist").remove(),$j(a).find("span.reg.full").remove()}}}),!0}function reserveRegSeats(a,b){var c=$j("#"+a),d=!0,e=c.find("textarea[name='regData']"),f=c.find("textarea[name='waitlistClaim']"),g=Number(c.find("input.rsvp:checked:first").attr("data-value")),h=$j.trim(c.find("input.rsvp:checked:first").parent().text()),i=c.find("input.submitBtn").prop("disabled",!0).val("please wait..."),j=c.find('input[name="formNonce"]').val();clearTimeout(regTimer),regTimer=setTimeout(function(){var k={reservations:[],bindIDs:[]};c.find("input.reg, select.regSel, input.addseat, input.rsvp:checked, span.reg.waitlist input").each(function(){if($j(this).parent().hasClass("waitlist"))k.bindIDs.push(Number($j(this).parents(".elementBody").find(":input[data-elbindid]:first").attr("data-elbindid")));else{var a=$j(this).attr("data-elbindid");k.bindIDs.push(Number(a)),k.reservations.push($j(this).parents(".elementContainer").hasClass("hiddenElem")?{seatingID:rg.lookup[""+a],bindID:a,reserved:0}:$j(this).hasClass("regSel")?{seatingID:rg.lookup[""+a],bindID:a,reserved:Number($j(this).find(":selected").attr("data-value"))}:$j(this).hasClass("rsvp")?{seatingID:rg.lookup[""+a],bindID:a,reserved:Number($j(this).attr("data-value"))}:$j(this).hasClass("addseat")?{seatingID:rg.lookup[""+a],bindID:a,reserved:$j(this).prop("checked")?Number($j(this).attr("data-value")):0}:{seatingID:rg.lookup[""+a],bindID:a,reserved:Number($j(this).val())})}}),"submitView"!==formPluginRequestMode?$j.ajax({async:!b,url:"preview"===formPluginRequestMode?"ajaxHandlerRegFormsPreviewMode.cfm":siteSSLurl+"/cf_forms/ajaxHandlerRegForms.cfm",type:"POST",dataType:"json",data:{cmd:"reserve",formID:a.replace("form_",""),resObj:JSON.stringify(k),regKey:regKey,adminBypass:adminBypass,formNonce:j},success:function(j){var l="0",m=[],n=[],o="",p=0,q=[],r=[],s=!1,t=0,u=[],v="admin"===formPluginRequestMode&&adminBypass;for(l in j)if(j.hasOwnProperty(l))for(u=j[""+l],t=0;t<u.length;t++)if(m=c.find(":input[data-elbindid='"+u[t].bindID+"']").eq(0),n=$j(m).parents("div.elementBody"),o="","success"!==u[t].statusCode&&!v&&Number(u[t].requested)>0&&(d=wlMode&&"full"===u[t].statusCode?d:!1),!wlMode)if("full"===u[t].statusCode&&u[t].requested>0&&!v){if(o='<span class="reg full">'+window.ro.messageSettings.fullSeatMsg,Number(u[t].granted)>0&&(o+=" "+u[t].granted+" seats reserved."),o+="</span>",0===$j(n).find("span.reg.full").length&&$j(n).append(o),1===Number(u[t].hasWaitlist)&&(p=0,Number($j(m).attr("data-max"))&&(p=Number($j(m).attr("data-max"))-Number(u[t].granted)),0===$j(n).find("span.reg.waitlist").length&&$j(n).append('<span class="reg waitlist">'+window.ro.messageSettings.offerWLMsg+' <input name="addToWaitlist_'+l+"_"+u[t].bindID+'" data-max="'+p+'" type="text" size="3" value="0" class="reg wlno"></span>')),$j(m).hasClass("reg")&&($j(m).val(u[t].granted).change(),$j(n).find(".nsInputDisplay").text(u[t].granted)),$j(m).hasClass("regSel")){var w=$j(m).find("option[data-value='"+u[t].granted+"']").attr("value");$j(m).val(w).change()}m.hasClass("addseat")&&m.prop("checked",!1)}else"success"===u[t].statusCode&&0==$j(n).find("span.reg.waitlist > input").val()&&($j(n).find("span.reg.full").remove(),$j(n).find("span.reg.waitlist").remove());s=configureAttendeeInputs(a),$j(i).prop("disabled","preview"===formPluginRequestMode).val($j(i).attr("data-submitbuttontext")),b&&d?($j(k.bindIDs.unique()).each(function(){var a=this,b=[],d=c.find("input.reg[data-elbindid='"+a+"'], select.regSel[data-elbindid='"+a+"'], input.addseat[data-elbindid='"+a+"'], input.rsvp:checked[data-elbindid='"+a+"']"),e=$j(d).parents("div.elementBody"),f=$j(e).parents("div.elementContainer"),g=$j(f).attr("id").replace("elementContainer_",""),h=0,i=0;$j(e).find("span.attendeeInfo").each(function(){b.push({nameFull:$j.trim($j(this).find("input.nfl").val()),nameFirst:$j.trim($j(this).find("input.nf").val()),nameLast:$j.trim($j(this).find("input.nl").val()),email:$j.trim($j(this).find("input.e").val()),custom1:$j.trim($j(this).find(":input.cust.cust1").val()),custom2:$j.trim($j(this).find(":input.cust.cust2").val()),custom3:$j.trim($j(this).find(":input.cust.cust3").val())})}),$j(d).hasClass("regSel")?(h=Number($j(d).find(":selected").attr("data-value")),i=Number($j(d).find(":selected").attr("data-price"))):"number"===$j.type(Number($j(d).attr("data-value")))&&Number($j(d).attr("data-value"))>=0&&!$j(d).hasClass("addseat")?(h=Number($j(d).attr("data-value")),i=Number($j(d).attr("data-price"))):"number"===$j.type(Number($j(d).attr("data-value")))&&Number($j(d).attr("data-value"))>=0&&$j(d).hasClass("addseat")?(h=$j(d).prop("checked")?Number($j(d).attr("data-value")):0,i=Number($j(d).attr("data-price"))):(h=Number($j(d).val()),i=$j("#el_"+g+"_money").val()),q.push({seatingID:rg.lookup[""+this],bindID:a,attendees:b,seatCount:h,waitListCount:Number($j(e).find("input.reg.wlno").val()),label:$j.trim($j(f).find("label:first").text()),cost:i}),$j(d).hasClass("wlClaim")&&r.push({seatingID:rg.lookup[""+this],bindID:a,accepted:h,wlKey:$j(d).attr("data-waitlistkey")})}),$j(e).val(JSON.stringify(q)),$j(f).val(JSON.stringify(r)),c.find("input[name='rsvpResponse']").val(g),c.find("input[name='rsvpResponseLabel']").val(h),regVerified=!0,c.find("input.submitBtn").click()):b&&!d&&alert("Some of your seat reservations were lost due to inactivity.\nPlease review the form before submitting.")}}):(regVerified=!0,c.find("input.submitBtn").click())},1800)}function initRegElements(){"submitView"!==formPluginRequestMode?($j("input.fsNumberSpinner.reg, input.fsNumberBox.reg").val(0),$j("select.regSel").find("option").prop("selected",!1).end().find("option:first").prop("selected",!0),$j("input.addseat").prop("checked",!1),$j("fieldset:has(input.rsvp)").find(":radio").prop("checked",!1).end().find(":radio[data-value='0']:last").prop("checked",!0),$j("input.fsNumberSpinner.reg, input.fsNumberBox.reg, select.regSel, input.addseat").change(),$j("input.rsvp:checked").click()):($j("input.fsNumberSpinner.reg, input.fsNumberBox.reg, select.regSel, input.addseat").prop("disabled",!1).change().prop("disabled",!0),$j("input.rsvp:checked").prop("disabled",!1).click().prop("disabled",!0))}function loadEvents(){if(0===globalRunCount){if(globalRunCount+=1,$j("form.cf_form").addClass("configuring"),wlMode=wlClaim.length>0,configureWaitlistClaim(),"undefined"===$j.type(window.formMetrics)&&(window.formMetrics={}),$j("form.cf_form").each(function(){"undefined"===$j.type(window.formMetrics[""+$j(this).attr("id")])&&(window.formMetrics[""+$j(this).attr("id")]={options:0,parents:0,children:0,elements:0,images:0})}),!$j.isEmptyObject(cp)){var a=$j(":input[data-prefill]").not("[data-prefill='false']");$j(a).each(function(){var a=$j(this).attr("data-prefill").toUpperCase(),b=$j(this).attr("data-prefillDataField").toUpperCase();"ZIPCODE"===b&&(b="ZIP");var c=cp.PREFILLDATA[""+a];if("undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONDATAQUERY.length>0&&(c=cp.PREFILLDATA.PERSONDATAQUERY[0][""+a]),"undefined"===$j.type(c)&&"SYSTEM"===a)if(-1!==b.indexOf("SERVICEID")){var d=b.match(/-?\d+/g),e=Array.isArray(d)?Number(d[0]):0;c=cp.PREFILLDATA.IMPORTIDS["_"+e]}else if(-1!==b.indexOf("IMPORT:")){var e=Number(b.split(":")[1]);c=cp.PREFILLDATA.IMPORTIDS["_"+e]}if("undefined"===$j.type(c)&&$j.isNumeric(a)&&"EMAIL"===b&&"undefined"!==$j.type(cp.PREFILLDATA.EMAIL[""+a])&&(c=cp.PREFILLDATA.EMAIL[""+a].EMAIL),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONDATAQUERY.length>0&&(c=cp.PREFILLDATA.PERSONDATAQUERY[0][""+b]),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONADDRESSQUERY.length>0&&a.indexOf(":")<0&&(c=cp.PREFILLDATA.PERSONADDRESSQUERY[0][""+a]),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONADDRESSQUERY.length>0&&a.indexOf(":")<0&&(c=cp.PREFILLDATA.PERSONADDRESSQUERY[0][""+b]),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONEMAILQUERY.length>0&&a.indexOf(":")<0&&(c=cp.PREFILLDATA.PERSONEMAILQUERY[0][""+a]),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONEMAILQUERY.length>0&&a.indexOf(":")<0&&(c=cp.PREFILLDATA.PERSONEMAILQUERY[0][""+b]),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONPHONEQUERY.length>0&&a.indexOf(":")<0&&(c=cp.PREFILLDATA.PERSONPHONEQUERY[0][""+a]),"undefined"===$j.type(c)&&cp.PREFILLDATA.PERSONPHONEQUERY.length>0&&a.indexOf(":")<0&&(c=cp.PREFILLDATA.PERSONPHONEQUERY[0][""+b]),a.indexOf(":")>=0){var f=a.split(":"),g=f[0].toUpperCase(),h=Number(f[1]);if("ADDRESS"===g&&cp.PREFILLDATA.PERSONADDRESSQUERY.length>0)for(var i=cp.PREFILLDATA.PERSONADDRESSQUERY,j=0;j<i.length;j++)0>h&&1===Number(i[j].ISMAILINGADDRESS)?c=i[j][""+b]:Number(i[j].PERSON_CONTACTTYPEID)===Number(h)&&(c=i[j][""+b]);if("EMAIL"===g&&cp.PREFILLDATA.PERSONEMAILQUERY.length>0)for(var i=cp.PREFILLDATA.PERSONEMAILQUERY,j=0;j<i.length;j++)0===Number(h)&&1===Number(i[j].ISPRIMARY)?c=i[j][""+b]:i[j].PERSON_CONTACTTYPEID===h&&(c=i[j][""+b]);if("PHONE"===g&&cp.PREFILLDATA.PERSONPHONEQUERY.length>0)for(var i=cp.PREFILLDATA.PERSONPHONEQUERY,j=0;j<i.length;j++)0===Number(h)&&1===Number(i[j].ISPRIMARY)?c=i[j][""+b]:i[j].PERSON_CONTACTTYPEID===h&&(c=i[j][""+b])}"undefined"!==$j.type(c)&&$j(this).val(c)})}if(!$j.isEmptyObject(fs))for(var b in fs)if(0===Number(b.toUpperCase().indexOf("EL_"))){var c=$j("#"+b.toLowerCase()),d=fs[b];try{d=JSON.parse(d)}catch(e){d=d}if(c.length>0){var f=c.prop("tagName").toLowerCase();if($j.inArray(f,["input","textarea"])>=0){d=$j("<div/>").html(d).text();var g=c.prop("type").toLowerCase();"file"===g?$j("[name=submitID]").val()>0&&d.length>0&&c.parent(".elementBody").prepend("Previously uploaded file: <span class='fileLink' rel='"+$j("[name=submitID]").val()+"'>"+d+"</span><br />Uploading a new file will replace "+d+"<br /><br />"):c.val(d)}else if("fieldset"===f)if($j(":input:checked",c).prop("checked",!1),$j.isArray(d))for(var h=d,i=0;i<h.length;i++)$j(":input[data-bindID='"+h[i].BINDID+"']",c).prop("checked",!0).change();else if($j.isPlainObject(d))$j(":input[data-bindID='"+d.BINDID+"']",c).prop("checked",!0).change();else for(var j=d.split(","),i=0;i<j.length;i++)$j(":input[data-bindID='"+j[i]+"']",c).prop("checked",!0).change();else"select"===f&&($j("option:selected",c).prop("selected",!1),$j.isPlainObject(d)?c.find("option[data-bindID='"+d.BINDID+"']",c).prop("selected",!0).change():c.find("option[data-bindID='"+d+"']",c).prop("selected",!0).change())}}$j(".elementRow, .pageControls").addClass("autoclear"),$j(".elementColumn").each(function(){var a=$j(this);if(/px;/.test(a.attr("style"))){var b=$j("body").css("font-size").replace(/px/,""),c=a.width();a.width(c/b+"em")}}),$j("div.formPage div.elementBody input[type='text'][class*='email']").change(function(){propogateEmail($j(this))}),warnBeforeUnload=!1,window.onbeforeunload=function(){return warnBeforeUnload&&warnBeforeUnloadCount>0?"If you leave this form now, all your data will be lost.":void 0},"direct"!==formPluginRequestMode&&"submitView"!==formPluginRequestMode&&$j.history(function(a,b){if(""!==b.value){var c=b.value.split("_"),d=c[0]+"_"+c[1],e=c[2]-1,f=$j("#"+d),g=$j(f).data("currentFormPage");if(g!==e){var h=$j(f).find(".formPage");$j(h).eq(g).removeClass("showFormPage"),$j(h).eq(e).addClass("showFormPage"),e+1===$j(f).data("formPages")?($j(f).find(".nextPage").hide(),$j(f).find(".submitBtn").show(),$j(f).find(".userConfirmation,#recurringPaymentSection").show()):($j(f).find(".nextPage").show(),$j(f).find(".submitBtn").hide(),$j(f).find(".userConfirmation,#recurringPaymentSection").hide()),$j(f).find(".prevPage").show(),$j(f).data("currentFormPage",e),$j(f).find(".pageBreak .pagenum").text("Page "+(e+1)+" of "+$j(f).data("formPages")),window.scrollTo(0,0)}}else $j("form.cf_form").each(function(){var a=$j(this).data("currentFormPage"),b=$j(this).data("formPages"),c=$j(this).find(".formPage");b>1&&($j(c).eq(a).removeClass("showFormPage"),$j(c).eq(0).addClass("showFormPage"),$j(this).data("currentFormPage",0),$j(this).find(".prevPage").hide(),$j(this).find(".nextPage").show(),$j(this).find(".submitBtn").hide(),$j(this).find(".pageBreak .pagenum").text("Page 1 of "+$j(this).data("formPages")),window.scrollTo(0,0))})}),$j(".toolTipHover .elementContainer").hover(function(){$j(this).find(".toolTip").css("display","block")},function(){$j(this).find(".toolTip").css("display","none")}),$j("body").append('<div id="formAlerts"></div>'),$j("#formAlerts").dialog({modal:!0,autoOpen:!1,resizable:!0}),$j("div.rsvpList").dialog({modal:!0,autoOpen:!1,resizable:!0,title:"Look at who else is coming"}),$j("div.rsvpList").parent().addClass("rsvpListModal"),$j("form.cf_form").removeAttr("onSubmit"),$j(".formPage").fsValidator(),$j(".userConfirmation").fsValidator(),$j(".pageControls").fsValidator(),BEGIN_EVENT_REG_REPLACE_submitClick=!0,$j("input.submitBtn").click(function(){END_EVENT_REG_REPLACE_submitClick=!0;var a=$j(this),b=b||a.parents(".cf_form:first"),c=0,d=!1;b.each(function(b,e){var f=$j(e),g=f.find(".cmd_cf_forms");if(c)return!1;if(hasReg&&!regVerified)reserveRegSeats($j(f).attr("id"),!0),c=1;else{if(regVerified=!1,f.find(".userConfirmationEmail").is(":visible")){if("my email address"===f.find(".userConfirmationEmail").val()&&f.find(".userConfirmationEmail").val(""),0===$j.trim(f.find(".userConfirmationEmail").val()).length){var h=f.find("div.formPage div.elementBody input[type='text'][class*='email']"),i="";$j(h).each(function(){$j.trim($j(this).val()).length>0&&(i=$j.trim($j(this).val()))}),""!==i&&f.find(".userConfirmationEmail").val(i)}}else f.find(".userConfirmationEmail").remove();if(f.find(".formPage").fsValidateElements({onFail:function(a){c+=failAction(a),d=!0},onPass:function(a){passAction(a)},ignore:"input.nfl, input.nf, input.nl, input.e, input.cust"}),"submitView"!==formPluginRequestMode&&f.find("span.attendeeInfo").length>0&&f.find("span.attendeeInfo").fsValidateElements({onFail:function(a){c+=attendeeFailAction(a)},onPass:function(a){attendeePassAction(a)}}),$j("#"+f.attr("id")+" .userConfirmation, #"+f.attr("id")+" .pageControls").fsValidateElements({onFail:function(a){c+=simpleFailAction(a)},onPass:function(a){simplePassAction(a)}}),d&&"submitView"!==formPluginRequestMode&&$j("html, body").find(".valFail").length>0&&scrollToWithOffset($j(".valFail:first").offset().top),0===c){warnBeforeUnload=!1,f.find("input.showTotals,input.thisFormMonetaryTotal").each(function(a,b){setMonetaryTotal(b)}),f.find(":input:disabled").prop("disabled",!1),BEGIN_EVENT_REG_REPLACE_submitBtn=!0,a.prop("disabled",!0).val("please wait..."),END_EVENT_REG_REPLACE_submitBtn=!0,$j("input.saveForLater").prop("disabled",!0);var j=[];f.find("div.hiddenElem").each(function(){var a=$j(this);j.push(a.attr("id").replace("elementContainer_",""))}),f.find("input.hiddenElements").val(j.toString());var k="direct"===formPluginRequestMode&&top.location!==location;f.append('<input type="hidden" name="isFramed" value="'+k+'">'),validateHumanity(f.fixAttr("id")),g.val("submitForm")}}}),0===c&&(BEGIN_EVENT_REG_REPLACE_formSubmit=!0,"parentIFrame"in window&&parentIFrame.scrollToOffset(0,-20),b.submit(),END_EVENT_REG_REPLACE_formSubmit=!0),BEGIN_EVENT_REG_INSERT_returnFailed=!0}),$j(".userConfirmationToggle").click(function(){$j(this).prop("checked")?$j(this).parents("div.userConfirmation").find(".userConfirmationEmail").prop("disabled",!1).addClass("fsValidate[email]"):$j(this).parents("div.userConfirmation").find(".userConfirmationEmail").prop("disabled",!0).removeClass("fsValidate[email]")}),$j(".userConfirmationEmail").focus(function(){"my email address"===$j(this).val()&&$j(this).val("")}).blur(function(){""===$j(this).val()&&$j(this).val("my email address")}),$j(".saveForLater").click(function(){var a=$j(this).parents(".saveForLaterPanel"),b=$j(this).parents(".cf_form:first"),c=$j(a).find(".sflEmail"),d=$j(b).find(":input[class*='email'][name!='sflEmail']:last").val();$j(a).find(".saveForLaterEmail").slideDown(),$j(c).val(d)}),$j(".sflCancel").click(function(){$j(this).parents().find(".saveForLaterEmail").slideUp()}),$j(".saveForLaterPanel").fsValidator(),$j(".sflBtn").click(function(){var a=$j(this).parents(".cf_form:first"),b=a.find(".cmd_cf_forms"),c=$j(a).fixAttr("id"),d=a.find("textarea[name='regData']");$j(a).find(".saveForLaterPanel").fsValidateElements({onFail:function(e){0===simpleFailAction(e)&&($j(a).find(":input:disabled").prop("disabled",!1),$j(b).val("saveForLater"),$j(d).val("[]"),validateHumanity(c),a.submit())},onPass:function(a){window.onbeforeunload=null,simplePassAction(a)}})}),$j(document).on("keypress",".cf_form.disableEnter input",function(a){if(13===a.keyCode){var b=$j(this).parents(".cf_form").eq(0).find("div.formPage").find(":input:enabled"),c=b.index(this);return c===b.length-1?b[0].select():(b[c+1].focus(),b[c+1].select()),!1}});var k=$j(".cf_form");$j(k).find(":radio").not("input.moneyBtn").dblclick(function(){$j(this).prop("checked",!1)}),$j(k).each(function(){$j(this).data("currentFormPage",0),$j(this).data("formPages",$j(this).find(".formPage").length),$j(this).find(".formPage").eq(0).addClass("showFormPage"),$j(this).data("formPages")>1?($j(this).find(".nextPage").show(),$j(this).find(".pageBreak .pagenum").text("Page 1 of "+$j(this).data("formPages")),$j(this).find(".nextPage").click(function(){var a=$j(this).parents(".cf_form"),b=$j(a).data("currentFormPage"),c=$j(a).find(".formPage");if($j(c).eq(b).fsValidateElements({onFail:function(a){failed=failAction(a)},onPass:function(a){passAction(a)}}),0===failed){var d=b+1;$j(c).eq(b).removeClass("showFormPage"),$j(c).eq(d).addClass("showFormPage"),window.location.hash=$j(a).fixAttr("id")+"_"+(d+1),$j(a).data("currentFormPage",d),$j(a).find(".prevPage").show(),d+1===$j(a).data("formPages")&&($j(a).find(".nextPage").hide(),$j(a).find(".submitBtn").show(),$j(a).find(".userConfirmation,#recurringPaymentSection").show()),$j(a).find(".pageBreak .pagenum").text("Page "+(d+1)+" of "+$j(a).data("formPages")),d>=1&&(warnBeforeUnload=!0),scrollToWithOffset(0)}else scrollToWithOffset($j(".valFail:first").offset().top)}),$j(this).find(".prevPage").click(function(){var a=$j(this).parents(".cf_form"),b=$j(a).data("currentFormPage"),c=$j(a).find(".formPage"),d=b-1;$j(c).eq(b).removeClass("showFormPage"),$j(c).eq(d).addClass("showFormPage"),$j(a).data("currentFormPage",d),$j(a).find(".nextPage").show(),$j(a).find(".submitBtn").hide(),$j(a).find(".userConfirmation,#recurringPaymentSection").hide(),0===d?($j(a).find(".prevPage").hide(),window.location.hash=""):window.location.hash=$j(a).fixAttr("id")+"_"+(d+1),$j(a).find(".pageBreak .pagenum").text("Page "+(d+1)+" of "+$j(a).data("formPages")),scrollToWithOffset(0)})):($j(this).find(".submitBtn").css("display","block"),$j(this).find(".userConfirmation,#recurringPaymentSection").css("display","block")),$j(this).find(":radio.radioNone").each(function(){var a=$j(this).parents(".cf_form"),b=$j(this).fixAttr("name");0===$j(a).find(":radio[name='"+b+"']:checked").length&&$j(this).prop("checked",!0)})}),$j(":input[class*='monetary'], input.moneyBtn").length>0&&$j(".hydraulics").each(function(){var a=$j(this).attr("data-thisIDSuffix");$j(this).after('<input type="hidden" name="monetaryTotal'+a+'" class="thisFormMonetaryTotal" size="20" value="0.00">')}),$j(":input[class*='monetary']").change(function(){setMonetaryTotal($j(this))});var l="0";if($j(".cf_form").each(function(){"undefined"!==$j.type($j(this).data("formOptions"))&&"undefined"!==$j.type($j(this).data("formOptions").monetaryDefault)&&"blank"===$j(this).data("formOptions").monetaryDefault&&(l="")}),$j(this).find("input:text[class*='monetary']").autoNumeric("undefined"!==$j.type($j(this).data("formOptions"))&&"whole"===$j(this).data("formOptions").monetaryDecimal?{aSep:"",mDec:0,aNeg:"-"}:{aSep:"",aNeg:"-"}),$j(document).on("click","input.moneyBtn",function(){setMonetaryTotal($j(this))}),$j(document).on("dblclick","input.moneyBtn:radio",function(){$j(this).prop("checked",!1),setMonetaryTotal($j(this))}),$j("input.showTotals").prop("disabled",!0),$j(".cf_form").each(function(){$j(this).find(":input[class*='monetary'], input.moneyBtn:checked").length>0&&setMonetaryTotal($j(this).find("input")[0])}),$j(".cf_form").each(function(){var a=$j(this).data("formOptions");if("undefined"!==$j.type(a)){if("undefined"!==$j.type(a.defaultTipPosition))switch(a.defaultTipPosition){case"above":$j(this).find(".targetForm").addClass("toolTipRight");break;case"mouseover":$j(this).find(".targetForm").addClass("toolTipHover")}"undefined"!==$j.type(a.defaultLabelPosition)&&(window.frameElement||$j(this).find(".targetForm").width(a.formWidth),"left"===a.defaultLabelPosition?$j(this).find(".targetForm").addClass("labelLeft"):$j(this).find(".targetForm").removeClass("labelLeft"))}}),$j(document).on("click",":file",function(){0===$j(this).parent().find("span.clearFile").length&&$j(this).after(' <span class="linkLike clearFile">clear</span>')}),$j(document).on("click",".clearFile",function(){var a=$j(this).parent().html();$j(this).remove(),$j(this).parent().html(a)}),$j('.elementBody input[type="text"]').each(function(){$j(this).val($j(this).val().replace(/&#39;/g,"'").replace(/&#92;/g,"\\").replace(/&#34;/g,'"'))}),$j(".fsNumberSpinner").fsNumberSpinner(),$j(".fsNumberBox").fsNumberBox(),$j(document).on("change","input.fsNumberSpinner.reg, input.fsNumberBox.reg",function(a){var b=$j(this).parents(".elementBody"),c=$j(b).find(":input[class*='monetary']"),d=Number($j(c).attr("data-costperseat").replace(",","")),e=Number(d)*Number($j(this).val()),f=$j(this).parents("form.cf_form").attr("id");$j(b).find(".reg.chg .chgAmount").text(e.toFixed(2)),$j(c).val(e.toFixed(2)).change(),"object"===$j.type(a.originalEvent)&&reserveRegSeats(f)}),$j(document).on("click","input.rsvp",function(a){var b=$j(this).parents(".elementBody"),c=$j(b).find(":input[class*='monetary']"),d=Number($j(c).attr("data-costperseat").replace(",","")),e=Number(d)*Number($j(this).attr("data-value")),f=$j(this).parents("form.cf_form").attr("id");$j(b).find(".reg.chg .chgAmount").text(e.toFixed(2)),$j(c).val(e.toFixed(2)).change(),"object"===$j.type(a.originalEvent)&&reserveRegSeats(f)}),$j(document).on("change","select.regSel",function(a){var b=$j(this).parents(".elementBody"),c=Number($j(this).find(":selected").attr("data-price")),d=$j(this).parents("form.cf_form").attr("id");isNaN(c)&&(c=0),$j(b).find(".reg.chg .chgAmount").text(c.toFixed(2)),"object"===$j.type(a.originalEvent)&&reserveRegSeats(d)}),$j(document).on("click change","input.addseat",function(a){var b=$j(this).parents(".elementBody"),c=$j(b).find(":input[class*='monetary']"),d=Number($j(c).attr("data-costperseat").replace(",","")),e=$j(this).is(":checked")?Number($j(this).attr("data-value")):0,f=Number(d)*Number(e),g=$j(this).parents("form.cf_form").attr("id");$j(b).find(".reg.chg .chgAmount").text(f.toFixed(2)),$j(c).val(f.toFixed(2)).change(),"object"===$j.type(a.originalEvent)&&reserveRegSeats(g)}),$j(document).on("change","input.reg.wlno",function(){var a=$j(this),b=isNaN(a.val())?0:parseInt(a.val()),c=a.data();return b=Math.max(b,0),"number"===$j.type(c.max)&&0!==c.max&&(b=Math.min(b,c.max)),a.val(b),!0}),!("submitView"===formPluginRequestMode||wlMode||"admin"===formPluginRequestMode&&adminBypass||aSess))for(var m in rg.seating)if(rg.seating.hasOwnProperty(m)&&Number(rg.seating[""+m].limit)>0&&(0===Number(rg.seating[""+m].available)||Number(rg.seating[""+m].waitlistCount)>=1))for(var n=getBindIDsBySeatingID(m),o=0;o<n.length;o++){var p=$j("form.cf_form").find("[data-elbindid='"+n[o]+"']"),q=$j(p).parents("div.elementBody");$j(q).append('<span class="reg full">'+ro.messageSettings.fullSeatMsg+"</span>"),$j(p).hasClass("fsNumberBox")?$j(p).val(0).addClass("full"):$j(p).hasClass("fsNumberSpinner")?$j(p).val(0).parents("span.counter").addClass("full"):$j(p).hasClass("rsvp")||$j(p).hasClass("addseat")?$j(p).parents("fieldset").addClass("full"):$j(p).hasClass("regSel")&&$j(p).val(0).addClass("full"),1===Number(rg.seating[""+m].hasWaitlist)&&$j(q).append('<span class="reg waitlist">'+ro.messageSettings.offerWLMsg+' <input name="addToWaitlist_'+m+"_"+n[o]+'" type="text" size="3" value="0" class="reg wlno"></span>')}$j("form.cf_form").removeClass("configuring"),initRegElements()}}function setMonetaryTotal(a){var b=0,c=$j(a).parents(".cf_form:first"),d=$j(c).find(".elementContainer").not(".hiddenElem,.dateHidden,.eventRegHidden").find(":input[class*='monetary'], input.moneyBtn:checked");b=$j(d).sumValues().toFixed(2),void 0!==$j(c).data("formOptions")&&("undefined"===$j.type($j(c).data("formOptions").zeroMinimum)&&($j(c).data("formOptions").zeroMinimum=$j(c).data("formOptions").ZEROMINIMUM),(1===$j(c).data("formOptions").zeroMinimum||isNaN($j(c).data("formOptions").zeroMinimum))&&(b=Math.max(b,0).toFixed(2))),$j(c).find(".thisFormMonetaryTotal").val(b).trigger("change"),$j(c).find("input.showTotals").val(b).trigger("change"),$j(c).find("div.showTotals").html(b).trigger("change");var e=$j("#eventTopBar").find("span.reg_Total").find("span.monVal");if(e.length>0){var f=0,g=$j("#eventRegSubmissionForm").find(".elementContainer").not(".hiddenElem").find(":input[class*='monetary'], input.moneyBtn:checked");if(g.length){f=$j(g).sumValues().toFixed(2);var h=parseFloat($j(e).attr("data-preFormTotal"));$j(e).text((1*h+1*f).toFixed(2))}}else{var e=$j(".attViewEdit").find("div.showTotals,span.showTotals");if(e.length>0){var f=0,g=$j("targetForm").find(".elementContainer").not(".hiddenElem").find(":input[class*='monetary'], input.moneyBtn:checked");f=$j(g).sumValues().toFixed(2);var h=parseFloat($j(e).attr("data-preFormTotal"));$j(e).text((1*h+1*f).toFixed(2))}}}function failAction(a){var b=0;for(var c in a)if(a.hasOwnProperty(c)){b++,$j("#"+c).unbind("change.fsValidateElements").bind("change.fsValidateElements",function(){$j(this).parent().fsValidateElements({onFail:function(a){failAction(a)},onPass:function(a){passAction(a)}})}),$j("#"+c).parents(".elementContainer").addClass("valFail"),$j("#"+c).parents(".elementContainer").find(".valFailMsg").remove(),$j("#"+c).parents(".elementContainer").append('<p class="valFailMsg"></p>');for(var d=0;d<a[c].length;d++)$j("#"+c).parents(".elementContainer").find(".valFailMsg").append(a[c][d]+"<br>")}return b}function simpleFailAction(a){var b=0;for(var c in a)if(a.hasOwnProperty(c)){b++,$j("#"+c).unbind("change").change(function(){$j(this).parent().fsValidateElements({onFail:function(a){simpleFailAction(a)},onPass:function(a){simplePassAction(a)}})}),$j("#"+c).parents("div.userConfirmation,div.pageControls").addClass("valFail"),$j("#"+c).next(".valFailMsg").remove(),$j("#"+c).after('<p class="valFailMsg"></p>');for(var d=0;d<a[c].length;d++)$j("#"+c).next(".valFailMsg").append(a[c][d]+"<br>")}return b}function attendeeFailAction(a){var b=[],c=0;for(var d in a)if(a.hasOwnProperty(d)){$j("#"+d).attr("data-passed",0),c++;var e=$j("#"+d).parents("span.attendeeInfo").attr("id");$j.inArray(e,b)<0&&b.push(e),$j("#"+d).unbind("change.fsValidateElements").bind("change.fsValidateElements",function(){$j(this).parents("span.attendeeInfo").fsValidateElements({onFail:function(a){attendeeFailAction(a)},onPass:function(a){attendeePassAction(a)}})})}return $j(b).each(function(){var a=$j("#"+this),b=$j(a).find("input[data-passed='0']").length,c=$j(a).find("input.e[data-passed='0']").length;if(b>0){var d="All Attendee Info is Required.";c>0&&(d+=" Valid email address required."),$j(a).addClass("valFail").find("div.attValFailMsg").remove().end().append('<div class="attValFailMsg">'+d+"</div>")}}),c}function passAction(a){for(var b in a)a.hasOwnProperty(b)&&($j("#"+b).parents(".elementContainer").removeClass("valFail"),$j("#"+b).parents(".elementContainer").find(".valFailMsg").remove())}function simplePassAction(a){for(var b in a)a.hasOwnProperty(b)&&$j("#"+b).parents("div.userConfirmation,div.pageControls").removeClass("valFail").end().next(".valFailMsg").remove()}function attendeePassAction(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){$j("#"+c).attr("data-passed",1);var d=$j("#"+c).parents("span.attendeeInfo").attr("id");$j.inArray(d,b)<0&&b.push(d)}$j(b).each(function(){var a=$j("#"+this),b=$j(a).find("input").length,c=$j(a).find("input[data-passed='1']").length;b===c&&$j(a).removeClass("valFail").find("div.attValFailMsg").remove()})}function setConditionalElement(a,b,c){var d=$j.toJSON(c.replace(/unBool:/g,"")),e=$j(b),f=$j(a),g=function(){var a=$j(".elementRow:has(.elementColumn)");a.not(a.has(".elementContainer:not(.hiddenElem)").show()).hide()},h=$j(a).parents("form"),i=$j(h).attr("id");"undefined"===$j.type(window.formMetrics)&&(window.formMetrics={}),"undefined"===$j.type(window.formMetrics[i])&&(window.formMetrics[i]={options:0,parents:0,children:0,
elements:0,images:0}),window.formMetrics[i].children++,e.find(":checkbox, :radio").bind("testCondition",function(b,c){var g,h=!1,i=f.hasClass("hiddenElem"),j=!1;if("undefined"!==$j.type(c)&&a!==c)return!1;if(f.hasClass("eventRegHidden")||f.hasClass("dateHidden"))return!1;if(!e.hasClass("hiddenElem")&&!e.hasClass("eventRegHidden")&&!e.hasClass("dateHidden")){var k=e.find(":checked");$j(k).each(function(){var a=$j(this);if(g=a.data("bindid"),g.length&&-1!==$j.inArray(g,d)&&(h=!0),!h&&(g=$j(this).val().replace(/'/g,"&#39;").replace(/\\\\/g,"&#92;").replace(/\\"/g,"&#34;"),-1!==$j.inArray(g,d)&&(h=!0),"undefined"===$j.type($j(this).attr("data-value"))||h||(g=$j(this).attr("data-value").replace(/'/g,"&#39;").replace(/\\\\/g,"&#92;").replace(/\\"/g,"&#34;"),-1!==$j.inArray(g,d)&&(h=!0)),!h&&!isNaN(1*g))){g=1*g;var b=g.toFixed(2);-1!==$j.inArray(g.toString(),d)?h=!0:-1!==$j.inArray(b.toString(),d)&&(h=!0)}})}var l=f.find("[data-elbindid]:first").attr("data-elbindid");"undefined"!==$j.type(l)&&-1!==$j.inArray(Number(l),wlClaimBindIDs)&&(h=!0,j=!0),h&&i||j?(f.removeClass("hiddenElem"),f.find(":input").each(function(){$j(this).attr("name",$j(this).fixAttr("name").replace("_disabled",""))}),f.find(".disabledPlaceHolder").remove(),f.parent().show(),j&&f.show(),f.find(":input[class*='monetary'], input.moneyBtn:checked").length>0&&setMonetaryTotal($j(this))):h||i||(f.addClass("hiddenElem"),f.find(":input").each(function(){$j(this).fixAttr("name").indexOf("_disabled")<0&&$j(this).attr("name",$j(this).fixAttr("name")+"_disabled")}),f.find(".disabledPlaceHolder").remove(),f.append('<input type="hidden" class="disabledPlaceHolder" name="el_'+f.fixAttr("id").replace("elementContainer_","")+'_disabled">'),f.parent().hide(),f.find(":input[class*='monetary'], input.moneyBtn:checked").length>0&&setMonetaryTotal($j(this))),f.hasClass("conditionalParent")&&f.find(":radio,:checkbox,select").eq(0).trigger("testCondition")}),$j(":checkbox, :radio",e).not(".hasTestConditionChangeEvent").change(function(){$j(this).trigger("testCondition"),g()}).addClass("hasTestConditionChangeEvent").end(),e.find("select").bind("testCondition",function(b,c){var g=!1,h=!1,i=!1,j=$j(this),k=j.find(":selected"),l=j.val().replace(/'/g,"&#39;").replace(/\\\\/g,"&#92;").replace(/\\"/g,"&#34;");if("undefined"!==$j.type(c)&&a!==c)return!1;if(!(e.hasClass("hiddenElem")||(h="Please Select"===k.text().substr(0,13),h||-1===$j.inArray(k.data("bindid"),d)||(g=!0),g||(h||-1===$j.inArray(l,d)||(g=!0),"undefined"===$j.type($j(k).attr("data-value"))||g||(l=$j(k).attr("data-value").replace(/'/g,"&#39;").replace(/\\\\/g,"&#92;").replace(/\\"/g,"&#34;"),-1!==$j.inArray(l,d)&&(g=!0)),h||g||isNaN(1*l))))){l=1*l;var m=l.toFixed(2);-1!==$j.inArray(l.toString(),d)?g=!0:-1!==$j.inArray(m.toString(),d)&&(g=!0)}var n=f.find("[data-elbindid]:first").attr("data-elbindid");"undefined"!==$j.type(n)&&-1!==$j.inArray(Number(n),wlClaimBindIDs)&&(g=!0,i=!0),g||i?(f.removeClass("hiddenElem"),f.find(":input").each(function(){$j(this).attr("name",$j(this).fixAttr("name").replace("_disabled",""))}),f.parent().show(),i&&f.show(),f.find(":input[class*='monetary'], input.moneyBtn:checked").length>0&&setMonetaryTotal($j(this))):(f.addClass("hiddenElem"),f.find(":input").each(function(){$j(this).fixAttr("name").indexOf("_disabled")<0&&$j(this).attr("name",$j(this).fixAttr("name")+"_disabled")}),f.parent().hide(),f.find(":input[class*='monetary'], input.moneyBtn:checked").length>0&&setMonetaryTotal($j(this))),f.hasClass("conditionalParent")&&f.find(":radio,:checkbox,select").eq(0).trigger("testCondition")}),$j("select",e).not(".hasTestConditionChangeEvent").change(function(){$j(this).trigger("testCondition"),g()}).addClass("hasTestConditionChangeEvent").end(),e.addClass("conditionalParent"),e.find(":checkbox, :radio").trigger("testCondition",[a]),e.find("select").trigger("testCondition",[a]),window.formMetrics[i].parents=$j(h).find(".conditionalParent").length,window.formMetrics[i].options=$j(h).find("option").length,window.formMetrics[i].elements=$j(h).find(".elementContainer").length,window.formMetrics[i].images=$j(h).find("img").length}function validateHumanity(a){var b=[],c="",d="left",e=$j("#"+a),f=$j(e).find(".elementContainer :input[value!='']").not('input:checkbox:not(:checked), input:radio:not(:checked), [name*="disabled"], [type="file"]');e.find(":input[name='hydraulics']").val()||(f.length>0?(b.push(Math.floor(Math.random()*f.length)),b.push(Math.floor(Math.random()*f.length)),$j(b).each(function(){var a=$j(f).eq(this),b=a[0].type,e=a[0].name,g="";switch(b){case"radio":case"checkbox":var h=$j(a).parents(".elementContainer").find(":checked");h.length>1?(a.parents(".elementContainer").find(":checked").each(function(){g=g+$j(this).val()+","}),g=g.left(g.length-1)):1===h.length&&(g=a.parents(".elementContainer").find(":checked").val()+" ");break;default:g=$j(a).val()}c="left"===d?c+e+":"+$j.trim(g).left(10)+" |":c+e+":"+$j.trim(g).right(10)+" ",d="right"})):c="NO ELEMENTS",c=$j.base64Encode(c),$j(e).find(":input[name='hydraulics']").val(c))}function numberQuestions(a){if(isQuiz){var b=1,c=$j(a),d=$j(c).find("div.elementContainer").has("label");$j("span.autoNumber").remove(),$j(d).each(function(){$j(this).find("div.groupLabel, label").eq(0).prepend('<span class="autoNumber">'+b++ +". </span>")})}}function getRandomNum(a,b){return Math.floor(Math.random()*(b-a))+a}function getUniqueName(a){for(var b="",c="abcdefghijklmnopqrstuvwxyz",d="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e=c+d,f=0;a>f;++f)b+=e.charAt(getRandomNum(0,e.length));return b}function propogateEmail(a){var b=a.parents(".cf_form:first");"my email address"===b.find(".userConfirmationEmail").val()&&b.find(".userConfirmationEmail").val(""),0===$j.trim(b.find(".userConfirmationEmail").val()).length&&$j.trim($j(a).val()).length>0&&b.find(".userConfirmationEmail").val($j.trim($j(a).val()))}function scrollToWithOffset(a){window.frameElement?$j("html, body",window.parent.document).animate({scrollTop:$j(window.frameElement).offset().top+a-100},1e3):$j("html, body").animate({scrollTop:a-100},1e3)}function setDateConditional(a,b){b||($j(a).addClass("hiddenElem dateHidden").hide(),$j(a).parent().removeClass("elementRow").hide(),$j(a).find(":input").each(function(){$j(this).fixAttr("name").indexOf("_disabled")<0&&$j(this).attr("name",$j(this).fixAttr("name")+"_disabled")}))}function showConditional(a,b){b||($j(a).addClass("hiddenElem dateHidden").hide(),$j(a).parent().removeClass("elementRow").hide(),$j(a).find(":input").each(function(){$j(this).fixAttr("name").indexOf("_disabled")<0&&$j(this).attr("name",$j(this).fixAttr("name")+"_disabled")}))}var globalRunCount=0,regTimer=0,regVerified=!1,wlMode=!1;$j(window).load(function(){loadEvents()}),$j(document).on("change",":text[class*=monetary]",function(){var a=$j.trim($j(this).val());isNaN(a)&&$j(this).val(a.replace(/[^\d\.]/g,"")).change()}),$j(document).on("click","a.shareAttendees",function(){var a=$j(this).attr("data-formID");$j("div.rsvpList[data-formID='"+a+"']").dialog("open")}),String.prototype.left=function(a){return this.substring(0,a)},String.prototype.right=function(a){var b=this.length-a;return this.substring(b>=0?b:0)},Array.prototype.unique=function(){for(var a=this.concat(),b=0;b<a.length;++b)for(var c=b+1;c<a.length;++c)a[b]===a[c]&&a.splice(c--,1);return a},jQuery.fn.fixAttr=function(a){var b=void 0===$j(this).attr(a),c="";return b?(c=getUniqueName(8),$j(this).attr(a,c)):c=$j(this).attr(a),c};